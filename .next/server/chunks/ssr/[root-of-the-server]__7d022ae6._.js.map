{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase-admin.ts"],"sourcesContent":["\nimport { initializeApp, getApps, cert, App } from 'firebase-admin/app';\nimport { getFirestore } from 'firebase-admin/firestore';\n\nlet adminApp: App | undefined;\nlet adminFirestoreDb: ReturnType<typeof getFirestore> | undefined;\n\nfunction initializeAdminApp() {\n  const apps = getApps();\n  if (apps.length > 0) {\n    adminApp = apps[0];\n    adminFirestoreDb = getFirestore(adminApp);\n    return;\n  }\n\n  try {\n    const projectId = process.env.FIREBASE_PROJECT_ID;\n    const clientEmail = process.env.FIREBASE_CLIENT_EMAIL;\n    const privateKey = process.env.FIREBASE_PRIVATE_KEY;\n\n    if (projectId && clientEmail && privateKey && privateKey !== 'YOUR_PRIVATE_KEY' && clientEmail !== 'YOUR_CLIENT_EMAIL') {\n      const formattedPrivateKey = privateKey.replace(/\\\\n/g, '\\n');\n      adminApp = initializeApp({\n        credential: cert({\n          projectId,\n          clientEmail,\n          privateKey: formattedPrivateKey,\n        }),\n      });\n      adminFirestoreDb = getFirestore(adminApp);\n      console.log('✅ Firebase Admin SDK inicializado correctamente.');\n    } else {\n      console.warn('⚠️ [Firebase Admin] Credenciales de administrador no configuradas en .env. Las funciones de servidor (Server Actions) que requieren acceso de administrador no funcionarán.');\n    }\n  } catch (error: any) {\n    console.error('❌ Error al inicializar Firebase Admin SDK:', error.message);\n  }\n}\n\ninitializeAdminApp();\n\n// Función para verificar si el SDK de Admin está listo\nexport const isAdminReady = () => !!adminApp;\n\n// Exportamos la instancia de la base de datos de manera segura\n// Si no está inicializada, las funciones que la usen fallarán con el nuevo chequeo.\nexport const adminDb = adminFirestoreDb!;\n"],"names":[],"mappings":";;;;;;AACA;AACA;;;;;;;;AAEA,IAAI;AACJ,IAAI;AAEJ,SAAS;IACP,MAAM,OAAO,IAAA,2JAAO;IACpB,IAAI,KAAK,MAAM,GAAG,GAAG;QACnB,WAAW,IAAI,CAAC,EAAE;QAClB,mBAAmB,IAAA,4KAAY,EAAC;QAChC;IACF;IAEA,IAAI;QACF,MAAM,YAAY,QAAQ,GAAG,CAAC,mBAAmB;QACjD,MAAM,cAAc,QAAQ,GAAG,CAAC,qBAAqB;QACrD,MAAM,aAAa,QAAQ,GAAG,CAAC,oBAAoB;QAEnD,IAAI,aAAa,eAAe,cAAc,eAAe,sBAAsB,gBAAgB,qBAAqB;YACtH,MAAM,sBAAsB,WAAW,OAAO,CAAC,QAAQ;YACvD,WAAW,IAAA,iKAAa,EAAC;gBACvB,YAAY,IAAA,wJAAI,EAAC;oBACf;oBACA;oBACA,YAAY;gBACd;YACF;YACA,mBAAmB,IAAA,4KAAY,EAAC;YAChC,QAAQ,GAAG,CAAC;QACd,OAAO;YACL,QAAQ,IAAI,CAAC;QACf;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,8CAA8C,MAAM,OAAO;IAC3E;AACF;AAEA;AAGO,MAAM,eAAe,IAAM,CAAC,CAAC;AAI7B,MAAM,UAAU","debugId":null}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/admin/lists/actions.ts"],"sourcesContent":["'use server';\n\nimport { adminDb } from '@/lib/firebase-admin';\nimport { FieldValue } from 'firebase-admin/firestore';\nimport { revalidatePath } from 'next/cache';\n\ntype ListName = 'areas' | 'plantas' | 'procesos' | 'contratos' | 'empresas';\n\n/**\n * Adds a new item to a specified list in Firestore.\n */\nexport async function addListItem(listName: ListName, item: string) {\n  try {\n    const trimmedItem = item.trim();\n    if (!trimmedItem) {\n      return { success: false, error: 'El elemento no puede estar vacío' };\n    }\n\n    const docRef = adminDb.collection('dynamic_lists').doc(listName);\n    \n    // Verificar si ya existe\n    const doc = await docRef.get();\n    const currentItems = doc.data()?.items || [];\n    \n    if (currentItems.includes(trimmedItem)) {\n      return { success: false, error: 'El elemento ya existe en la lista' };\n    }\n\n    await docRef.set({\n      items: FieldValue.arrayUnion(trimmedItem),\n      updatedAt: FieldValue.serverTimestamp()\n    }, { merge: true });\n    \n    revalidatePath('/admin/lists');\n    revalidatePath('/permits/create');\n\n    return { success: true };\n  } catch (error: any) {\n    console.error(`Error adding item to ${listName}:`, error);\n    return { success: false, error: `No se pudo agregar el elemento: ${error.message}` };\n  }\n}\n\n/**\n * Adds multiple items to a specified list in Firestore.\n */\nexport async function addMultipleListItems(listName: ListName, items: string[]) {\n  try {\n    const docRef = adminDb.collection('dynamic_lists').doc(listName);\n    const doc = await docRef.get();\n    const currentItems = doc.data()?.items || [];\n\n    // Filtrar duplicados y vacíos\n    const newItems = items\n      .map(item => item.trim())\n      .filter(item => item && !currentItems.includes(item));\n\n    if (newItems.length === 0) {\n      return { \n        success: false, \n        error: 'Todos los elementos ya existen o están vacíos' \n      };\n    }\n\n    // Agregar todos los elementos nuevos de una vez\n    await docRef.set({\n      items: FieldValue.arrayUnion(...newItems),\n      updatedAt: FieldValue.serverTimestamp()\n    }, { merge: true });\n\n    revalidatePath('/admin/lists');\n    revalidatePath('/permits/create');\n\n    return { \n      success: true, \n      added: newItems.length,\n      skipped: items.length - newItems.length \n    };\n  } catch (error: any) {\n    console.error(`Error adding multiple items to ${listName}:`, error);\n    return { \n      success: false, \n      error: `No se pudieron agregar los elementos: ${error.message}` \n    };\n  }\n}\n\n/**\n * Updates an existing item in a specified list.\n */\nexport async function updateListItem(listName: ListName, oldItem: string, newItem: string) {\n  try {\n    const trimmedNewItem = newItem.trim();\n    if (!trimmedNewItem) {\n      return { success: false, error: 'El elemento no puede estar vacío' };\n    }\n\n    const docRef = adminDb.collection('dynamic_lists').doc(listName);\n    const doc = await docRef.get();\n    const currentItems = doc.data()?.items || [];\n\n    if (!currentItems.includes(oldItem)) {\n      return { success: false, error: 'El elemento original no existe' };\n    }\n\n    if (currentItems.includes(trimmedNewItem) && trimmedNewItem !== oldItem) {\n      return { success: false, error: 'Ya existe un elemento con ese nombre' };\n    }\n\n    // Remover el viejo y agregar el nuevo\n    await docRef.update({\n      items: FieldValue.arrayRemove(oldItem)\n    });\n\n    await docRef.update({\n      items: FieldValue.arrayUnion(trimmedNewItem),\n      updatedAt: FieldValue.serverTimestamp()\n    });\n\n    revalidatePath('/admin/lists');\n    revalidatePath('/permits/create');\n\n    return { success: true };\n  } catch (error: any) {\n    console.error(`Error updating item in ${listName}:`, error);\n    return { \n      success: false, \n      error: `No se pudo actualizar el elemento: ${error.message}` \n    };\n  }\n}\n\n/**\n * Removes an item from a specified list in Firestore.\n */\nexport async function removeListItem(listName: ListName, item: string) {\n  try {\n    const docRef = adminDb.collection('dynamic_lists').doc(listName);\n\n    await docRef.update({\n      items: FieldValue.arrayRemove(item),\n      updatedAt: FieldValue.serverTimestamp()\n    });\n    \n    revalidatePath('/admin/lists');\n    revalidatePath('/permits/create');\n    \n    return { success: true };\n  } catch (error: any) {\n    console.error(`Error removing item from ${listName}:`, error);\n    return { \n      success: false, \n      error: `No se pudo eliminar el elemento: ${error.message}` \n    };\n  }\n}\n\n/**\n * Removes multiple items from a specified list.\n */\nexport async function removeMultipleListItems(listName: ListName, items: string[]) {\n  try {\n    const docRef = adminDb.collection('dynamic_lists').doc(listName);\n\n    await docRef.update({\n      items: FieldValue.arrayRemove(...items),\n      updatedAt: FieldValue.serverTimestamp()\n    });\n    \n    revalidatePath('/admin/lists');\n    revalidatePath('/permits/create');\n    \n    return { success: true, removed: items.length };\n  } catch (error: any) {\n    console.error(`Error removing multiple items from ${listName}:`, error);\n    return { \n      success: false, \n      error: `No se pudieron eliminar los elementos: ${error.message}` \n    };\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;;;;;;;;;;;AAOO,eAAe,YAAY,QAAkB,EAAE,IAAY;IAChE,IAAI;QACF,MAAM,cAAc,KAAK,IAAI;QAC7B,IAAI,CAAC,aAAa;YAChB,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAmC;QACrE;QAEA,MAAM,SAAS,0IAAO,CAAC,UAAU,CAAC,iBAAiB,GAAG,CAAC;QAEvD,yBAAyB;QACzB,MAAM,MAAM,MAAM,OAAO,GAAG;QAC5B,MAAM,eAAe,IAAI,IAAI,IAAI,SAAS,EAAE;QAE5C,IAAI,aAAa,QAAQ,CAAC,cAAc;YACtC,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAoC;QACtE;QAEA,MAAM,OAAO,GAAG,CAAC;YACf,OAAO,0KAAU,CAAC,UAAU,CAAC;YAC7B,WAAW,0KAAU,CAAC,eAAe;QACvC,GAAG;YAAE,OAAO;QAAK;QAEjB,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QAEf,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,CAAC,qBAAqB,EAAE,SAAS,CAAC,CAAC,EAAE;QACnD,OAAO;YAAE,SAAS;YAAO,OAAO,CAAC,gCAAgC,EAAE,MAAM,OAAO,EAAE;QAAC;IACrF;AACF;AAKO,eAAe,qBAAqB,QAAkB,EAAE,KAAe;IAC5E,IAAI;QACF,MAAM,SAAS,0IAAO,CAAC,UAAU,CAAC,iBAAiB,GAAG,CAAC;QACvD,MAAM,MAAM,MAAM,OAAO,GAAG;QAC5B,MAAM,eAAe,IAAI,IAAI,IAAI,SAAS,EAAE;QAE5C,8BAA8B;QAC9B,MAAM,WAAW,MACd,GAAG,CAAC,CAAA,OAAQ,KAAK,IAAI,IACrB,MAAM,CAAC,CAAA,OAAQ,QAAQ,CAAC,aAAa,QAAQ,CAAC;QAEjD,IAAI,SAAS,MAAM,KAAK,GAAG;YACzB,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;QAEA,gDAAgD;QAChD,MAAM,OAAO,GAAG,CAAC;YACf,OAAO,0KAAU,CAAC,UAAU,IAAI;YAChC,WAAW,0KAAU,CAAC,eAAe;QACvC,GAAG;YAAE,OAAO;QAAK;QAEjB,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QAEf,OAAO;YACL,SAAS;YACT,OAAO,SAAS,MAAM;YACtB,SAAS,MAAM,MAAM,GAAG,SAAS,MAAM;QACzC;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,CAAC,+BAA+B,EAAE,SAAS,CAAC,CAAC,EAAE;QAC7D,OAAO;YACL,SAAS;YACT,OAAO,CAAC,sCAAsC,EAAE,MAAM,OAAO,EAAE;QACjE;IACF;AACF;AAKO,eAAe,eAAe,QAAkB,EAAE,OAAe,EAAE,OAAe;IACvF,IAAI;QACF,MAAM,iBAAiB,QAAQ,IAAI;QACnC,IAAI,CAAC,gBAAgB;YACnB,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAmC;QACrE;QAEA,MAAM,SAAS,0IAAO,CAAC,UAAU,CAAC,iBAAiB,GAAG,CAAC;QACvD,MAAM,MAAM,MAAM,OAAO,GAAG;QAC5B,MAAM,eAAe,IAAI,IAAI,IAAI,SAAS,EAAE;QAE5C,IAAI,CAAC,aAAa,QAAQ,CAAC,UAAU;YACnC,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAiC;QACnE;QAEA,IAAI,aAAa,QAAQ,CAAC,mBAAmB,mBAAmB,SAAS;YACvE,OAAO;gBAAE,SAAS;gBAAO,OAAO;YAAuC;QACzE;QAEA,sCAAsC;QACtC,MAAM,OAAO,MAAM,CAAC;YAClB,OAAO,0KAAU,CAAC,WAAW,CAAC;QAChC;QAEA,MAAM,OAAO,MAAM,CAAC;YAClB,OAAO,0KAAU,CAAC,UAAU,CAAC;YAC7B,WAAW,0KAAU,CAAC,eAAe;QACvC;QAEA,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QAEf,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,CAAC,uBAAuB,EAAE,SAAS,CAAC,CAAC,EAAE;QACrD,OAAO;YACL,SAAS;YACT,OAAO,CAAC,mCAAmC,EAAE,MAAM,OAAO,EAAE;QAC9D;IACF;AACF;AAKO,eAAe,eAAe,QAAkB,EAAE,IAAY;IACnE,IAAI;QACF,MAAM,SAAS,0IAAO,CAAC,UAAU,CAAC,iBAAiB,GAAG,CAAC;QAEvD,MAAM,OAAO,MAAM,CAAC;YAClB,OAAO,0KAAU,CAAC,WAAW,CAAC;YAC9B,WAAW,0KAAU,CAAC,eAAe;QACvC;QAEA,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QAEf,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,CAAC,yBAAyB,EAAE,SAAS,CAAC,CAAC,EAAE;QACvD,OAAO;YACL,SAAS;YACT,OAAO,CAAC,iCAAiC,EAAE,MAAM,OAAO,EAAE;QAC5D;IACF;AACF;AAKO,eAAe,wBAAwB,QAAkB,EAAE,KAAe;IAC/E,IAAI;QACF,MAAM,SAAS,0IAAO,CAAC,UAAU,CAAC,iBAAiB,GAAG,CAAC;QAEvD,MAAM,OAAO,MAAM,CAAC;YAClB,OAAO,0KAAU,CAAC,WAAW,IAAI;YACjC,WAAW,0KAAU,CAAC,eAAe;QACvC;QAEA,IAAA,+IAAc,EAAC;QACf,IAAA,+IAAc,EAAC;QAEf,OAAO;YAAE,SAAS;YAAM,SAAS,MAAM,MAAM;QAAC;IAChD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,CAAC,mCAAmC,EAAE,SAAS,CAAC,CAAC,EAAE;QACjE,OAAO;YACL,SAAS;YACT,OAAO,CAAC,uCAAuC,EAAE,MAAM,OAAO,EAAE;QAClE;IACF;AACF;;;IAzKsB;IAmCA;IA4CA;IA6CA;IAyBA;;AArJA,+OAAA;AAmCA,+OAAA;AA4CA,+OAAA;AA6CA,+OAAA;AAyBA,+OAAA","debugId":null}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/%28app%29/admin/lists/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {addListItem as '6040d4c4fa848a1987d52a337ad58660f94a06df10'} from 'ACTIONS_MODULE0'\nexport {removeListItem as '602f82969f60f9d40de41f2b03e493d261336deb66'} from 'ACTIONS_MODULE0'\nexport {updateListItem as '7033e81ef925e63ab1c6f9e9f68155a90e2020b0f0'} from 'ACTIONS_MODULE0'\nexport {addMultipleListItems as '6054f2543aad69440ea7fcddc0d0dd6692423f3c46'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/admin/lists/page.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/(app)/admin/lists/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(app)/admin/lists/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsS,GACnU,oEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/admin/lists/page.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/(app)/admin/lists/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(app)/admin/lists/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}