{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { adminDb, isAdminReady } from '@/lib/firebase-admin';\nimport { revalidatePath } from 'next/cache';\nimport type { Permit, ExternalWorker, PermitStatus, PermitClosure, Approval, UserRole, AnexoAltura, AnexoConfinado, AnexoEnergias, AnexoExcavaciones, AnexoIzaje, AnexoATS, PermitGeneralInfo, JustificacionATS, ValidacionDiaria, User, Notification } from '@/types';\nimport { FieldValue, UpdateData, Timestamp } from 'firebase-admin/firestore';\nimport { sendWhatsAppNotification } from '@/lib/notifications';\nimport { getEmailForUser, sendPermitUpdateEmail } from '@/lib/email';\nimport { config } from 'dotenv';\nconfig();\n\n// --- Funciones Auxiliares para Notificaciones ---\n\nconst getInvolvedUsers = async (permit: Permit): Promise<string[]> => {\n  const userIds = new Set<string>();\n\n  // 1. Creador del permiso\n  if (permit.createdBy) {\n    userIds.add(permit.createdBy);\n  }\n\n  // 2. Usuarios que han firmado\n  Object.values(permit.approvals || {}).forEach(approval => {\n    if (approval && approval.userId) {\n      userIds.add(approval.userId);\n    }\n  });\n\n  // 3. Roles administrativos o de supervisi√≥n que deber√≠an ser notificados\n  const adminsQuery = await adminDb.collection('users').where('role', 'in', ['admin', 'autorizante', 'lider_sst']).get();\n  adminsQuery.forEach(doc => userIds.add(doc.id));\n\n  return Array.from(userIds);\n};\n\nconst createNotification = async (\n  userId: string,\n  permit: Permit,\n  message: string,\n  type: Notification['type'],\n  triggeredBy: { uid: string, displayName: string | null }\n) => {\n  const notification: Omit<Notification, 'id'> = {\n    userId,\n    permitId: permit.id,\n    permitNumber: permit.number || '',\n    message,\n    type,\n    isRead: false,\n    createdAt: FieldValue.serverTimestamp() as Timestamp,\n    triggeredBy,\n  };\n  await adminDb.collection('notifications').add(notification as any);\n  \n  // Enviar correo electr√≥nico\n  const userEmail = await getEmailForUser(userId);\n  if (userEmail) {\n    await sendPermitUpdateEmail({\n      to: userEmail,\n      subject: `Actualizaci√≥n en Permiso SGTC: ${permit.number || permit.id}`,\n      html: `<p>${message}</p><p>Puedes ver los detalles del permiso haciendo clic <a href=\"${process.env.NEXT_PUBLIC_BASE_URL}/permits/${permit.id}\">aqu√≠</a>.</p>`\n    });\n  }\n};\n\n// --- Fin de Funciones de Notificaciones ---\n\nconst workTypesMap: {[key: string]: string} = {\n  'alturas': 'Trabajo en Alturas',\n  'confinado': 'Espacios Confinados',\n  'energia': 'Control de Energ√≠as',\n  'izaje': 'Izaje de Cargas',\n  'excavacion': 'Excavaciones',\n  'general': 'Trabajo General'\n};\n\nconst getWorkTypesString = (permit: Partial<Permit>): string => {\n  const selectedTypes: string[] = [];\n  if (permit.trabajoAlturas) selectedTypes.push('Trabajo en Alturas');\n  if (permit.espaciosConfinados) selectedTypes.push('Espacios Confinados');\n  if (permit.controlEnergia) selectedTypes.push('Control de Energ√≠as');\n  if (permit.izajeCargas) selectedTypes.push('Izaje de Cargas');\n  if (permit.excavaciones) selectedTypes.push('Excavaciones');\n  \n  if (selectedTypes.length === 0) {\n    if (permit.trabajoGeneral) return 'Trabajo General';\n    // Fallback for old data structure\n    if (permit.workType && Array.isArray(permit.workType)) {\n      return permit.workType.map(key => workTypesMap[key] || key).join(', ');\n    }\n    return 'Trabajo General';\n  }\n  return selectedTypes.join(', ');\n};\n\nconst getStatusText = (status: string) => {\n    const statusText: {[key: string]: string} = {\n      'borrador': 'Borrador',\n      'pendiente_revision': 'Pendiente de Revisi√≥n',\n      'aprobado': 'Aprobado',\n      'en_ejecucion': 'En Ejecuci√≥n',\n      'suspendido': 'Suspendido',\n      'cerrado': 'Cerrado',\n      'rechazado': 'Rechazado'\n    };\n    return statusText[status] || status;\n  };\n\nconst signatureRoles: { [key in 'solicitante' | 'autorizante' | 'mantenimiento' | 'lider_sst' | 'coordinador_alturas']: string } = {\n  coordinador_alturas: 'COORDINADOR DE TRABAJOS EN ALTURAS',\n  solicitante: 'QUIEN SOLICITA (L√çDER A CARGO DEL EQUIPO EJECUTANTE)',\n  autorizante: 'QUIEN AUTORIZA (JEFES Y DUE√ëOS DE AREA)',\n  mantenimiento: 'PERSONAL DE MANTENIMIENTO',\n  lider_sst: 'Firma SST',\n};\n\ntype PermitCreateData = Omit<Permit, 'id' | 'createdAt' | 'status' | 'createdBy' | 'number' | 'user' | 'approvals' | 'closure'> & {\n  userId: string;\n  userDisplayName: string | null;\n  userEmail: string | null;\n  userPhotoURL: string | null;\n};\n\nexport async function createPermit(data: PermitCreateData) {\n  if (!data.userId) {\n    return { success: false, error: 'User not authenticated' };\n  }\n   if (!isAdminReady()) {\n    return { success: false, error: 'Credenciales de administrador de Firebase no configuradas en el servidor.' };\n  }\n\n  const { userId, userDisplayName, userEmail, userPhotoURL, ...permitData } = data;\n\n  const initialApprovals = {\n    solicitante: { status: 'pendiente' as const },\n    autorizante: { status: 'pendiente' as const },\n    mantenimiento: { status: 'pendiente' as const },\n    lider_sst: { status: 'pendiente' as const },\n    coordinador_alturas: { status: 'pendiente' as const },\n  };\n\n  const permitPayload: Omit<Permit, 'id'> = {\n    ...permitData,\n    status: 'pendiente_revision' as const,\n    createdBy: userId,\n    createdAt: FieldValue.serverTimestamp() as Timestamp,\n    user: {\n      displayName: userDisplayName,\n      email: userEmail,\n      photoURL: userPhotoURL,\n    },\n    approvals: initialApprovals,\n    trabajoAlturas: data.trabajoAlturas || false,\n    isSSTSignatureRequired: data.isSSTSignatureRequired || false,\n    closure: {},\n  };\n  \n  try {\n    const docRef = await adminDb.collection('permits').add(permitPayload as any);\n    const permitNumber = `PT-${Date.now()}-${docRef.id.substring(0, 6).toUpperCase()}`;\n    await docRef.update({ number: permitNumber });\n    \n    console.log('‚úÖ [Action] Permiso creado con √©xito en Firestore:', docRef.id);\n\n    const createdPermit = { ...permitPayload, id: docRef.id, number: permitNumber } as Permit;\n    const involvedUsers = await getInvolvedUsers(createdPermit);\n    const message = `Se cre√≥ un nuevo permiso de trabajo: #${permitNumber}`;\n    \n    for (const uid of involvedUsers) {\n      if (uid !== userId) {\n        await createNotification(uid, createdPermit, message, 'creation', { uid: userId, displayName: userDisplayName });\n      }\n    }\n\n    const workTypesText = getWorkTypesString(permitPayload);\n    const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n    const permitUrl = `${baseUrl}/permits/${docRef.id}`;\n    \n    const messageBody = `*¬°Alerta de Seguridad SGPT!* üö®\nSe ha creado una nueva solicitud de permiso de trabajo.\n\nüìÑ *N√∫mero:* ${permitNumber}\nüë§ *Solicitante:* ${userDisplayName || 'N/A'}\nüõ†Ô∏è *Tipo de Trabajo:* ${workTypesText}\n\nPor favor, revise la solicitud para su aprobaci√≥n en el siguiente enlace:\n${permitUrl}`;\n    \n    await sendWhatsAppNotification(messageBody);\n    \n    revalidatePath('/permits');\n    revalidatePath('/dashboard');\n    \n    return { success: true, permitId: docRef.id, permitNumber };\n  } catch (error: any) {\n    console.error(\"‚ùå [Action] Error al crear permiso:\", error);\n    return { \n      success: false, \n      error: error.message || 'Could not create permit. Please try again.' \n    };\n  }\n}\n\nexport async function savePermitDraft(data: PermitCreateData & { draftId?: string }) {\n  if (!data.userId) {\n    return { success: false, error: 'User not authenticated' };\n  }\n  if (!isAdminReady()) {\n    return { success: false, error: 'Credenciales de administrador de Firebase no configuradas en el servidor.' };\n  }\n\n  const { userId, userDisplayName, userEmail, userPhotoURL, draftId, ...permitData } = data;\n\n  const initialApprovals = {\n    solicitante: { status: 'pendiente' as const },\n    autorizante: { status: 'pendiente' as const },\n    mantenimiento: { status: 'pendiente' as const },\n    lider_sst: { status: 'pendiente' as const },\n    coordinador_alturas: { status: 'pendiente' as const },\n  };\n\n  const permitPayload: Omit<Permit, 'id' | 'createdAt'> = {\n    ...permitData,\n    status: 'borrador' as const,\n    createdBy: userId,\n    user: {\n      displayName: userDisplayName,\n      email: userEmail,\n      photoURL: userPhotoURL,\n    },\n    approvals: initialApprovals,\n    trabajoAlturas: data.trabajoAlturas || false,\n    isSSTSignatureRequired: data.isSSTSignatureRequired || false,\n  };\n\n  try {\n    if (draftId) {\n      // Actualizar un borrador existente\n      const docRef = adminDb.collection('permits').doc(draftId);\n      await docRef.update({ ...permitPayload, updatedAt: FieldValue.serverTimestamp() });\n      revalidatePath(`/permits/${draftId}`);\n      revalidatePath('/permits');\n      return { success: true, permitId: draftId, isUpdate: true };\n    } else {\n      // Crear un nuevo borrador\n      const payloadWithTimestamp = { ...permitPayload, createdAt: FieldValue.serverTimestamp() };\n      const docRef = await adminDb.collection('permits').add(payloadWithTimestamp as any);\n      revalidatePath('/permits');\n      return { success: true, permitId: docRef.id, isUpdate: false };\n    }\n  } catch (error: any) {\n    console.error(\"‚ùå [Action] Error al guardar borrador:\", error);\n    return { \n      success: false, \n      error: error.message || 'Could not save draft. Please try again.' \n    };\n  }\n}\n\nexport async function addSignatureAndNotify(\n  permitId: string, \n  role: 'solicitante' | 'autorizante' | 'mantenimiento' | 'lider_sst' | 'coordinador_alturas' | 'cierre_autoridad' | 'cierre_responsable' | 'cancelacion', \n  signatureType: 'firmaApertura' | 'firmaCierre',\n  signatureDataUrl: string,\n  user: { uid: string, displayName: string | null, role?: UserRole, empresa?: string },\n  comments?: string\n) {\n    if (!permitId || !role || !user || !user.uid || !user.role) {\n        return { success: false, error: 'Par√°metros inv√°lidos para guardar la firma.' };\n    }\n    if (!isAdminReady()) {\n      return { success: false, error: 'Credenciales de administrador de Firebase no configuradas en el servidor.' };\n    }\n\n    try {\n        const docRef = adminDb.collection('permits').doc(permitId);\n        const permitDocBefore = await docRef.get();\n        if (!permitDocBefore.exists) {\n            return { success: false, error: 'El permiso no existe.' };\n        }\n        const permitBeforeData = permitDocBefore.data() as Permit;\n\n        const updateData: UpdateData<Permit> = {};\n\n        // L√≥gica para manejar firmas de cierre y cancelaci√≥n\n        if (role.startsWith('cierre_') || role === 'cancelacion') {\n            const closureRole = role === 'cierre_autoridad' ? 'autoridad' : (role === 'cierre_responsable' ? 'responsable' : 'canceladoPor');\n            const closurePath = `closure.${closureRole}`;\n            \n            const existingClosureData = (permitBeforeData.closure as any)?.[closureRole] || {};\n\n            updateData[closurePath as keyof UpdateData<Permit>] = {\n                ...existingClosureData,\n                firma: signatureDataUrl,\n                nombre: user.displayName,\n                fecha: FieldValue.serverTimestamp() \n            };\n            \n            if (role === 'cancelacion') {\n                updateData['closure.razonCancelacion'] = comments || 'No especificado';\n                updateData['closure.cancelado'] = 'si';\n            }\n\n        } else {\n            // ‚úÖ VALIDACI√ìN DE PERMISOS ANTES DE FIRMAR\n            const canSign = await validateSignaturePermission(permitId, role, user);\n            if (!canSign.allowed) {\n                return { success: false, error: canSign.reason };\n            }\n\n            const approvalData: Partial<Approval> = {\n                status: 'aprobado',\n                firmaApertura: signatureDataUrl,\n                userName: user.displayName,\n                userId: user.uid,\n                signedAt: FieldValue.serverTimestamp() as any,\n                userRole: user.role,\n                userEmpresa: user.empresa || 'N/A',\n                comments: comments || '',\n            }\n            \n            updateData[`approvals.${role}`] = approvalData;\n            \n            // ‚úÖ L√ìGICA DE FIRMAS SEG√öN EL ROL\n            if (signatureType === 'firmaApertura') {\n                const validationPayload: ValidacionDiaria = { \n                    dia: 1, \n                    nombre: user.displayName || '', \n                    firma: signatureDataUrl, \n                    fecha: new Date().toISOString() \n                };\n                \n                // ‚úÖ SOLICITANTE FIRMA: Cambia de Borrador a Pendiente de Revisi√≥n\n                if (role === 'solicitante') {\n                    if (permitBeforeData.status === 'borrador') {\n                        const permitNumber = `PT-${Date.now()}-${permitId.substring(0, 6).toUpperCase()}`;\n                        updateData['number'] = permitNumber;\n                        updateData['status'] = 'pendiente_revision';\n                    }\n                    \n                    // Validaci√≥n diaria inicial del responsable\n                    ['anexoAltura', 'anexoConfinado', 'anexoIzaje', 'anexoExcavaciones'].forEach(anexo => {\n                        if ((permitBeforeData as any)?.[anexo]) {\n                            const currentValidations = (permitBeforeData as any)[anexo].validacion?.responsable || [];\n                            if (!currentValidations[0]?.firma) {\n                                currentValidations[0] = validationPayload;\n                                updateData[`${anexo}.validacion.responsable`] = currentValidations;\n                            }\n                        }\n                    });\n\n                // ‚úÖ AUTORIZANTE FIRMA: Agrega validaci√≥n diaria de autoridad\n                } else if (role === 'autorizante') {\n                    ['anexoAltura', 'anexoConfinado', 'anexoIzaje', 'anexoExcavaciones'].forEach(anexo => {\n                        if ((permitBeforeData as any)?.[anexo]) {\n                           const currentValidations = (permitBeforeData as any)[anexo].validacion?.autoridad || [];\n                            if (!currentValidations[0]?.firma) {\n                                currentValidations[0] = validationPayload;\n                                updateData[`${anexo}.validacion.autoridad`] = currentValidations;\n                            }\n                        }\n                    });\n                }\n            }\n\n            // ‚úÖ VERIFICACI√ìN AUTOM√ÅTICA: ¬øTodas las firmas requeridas est√°n completas?\n            const updatedPermitData = { \n                ...permitBeforeData, \n                approvals: { ...permitBeforeData.approvals, [role]: approvalData }\n            };\n            \n            if (await checkAllRequiredSignaturesComplete(updatedPermitData)) {\n                // üöÄ CAMBIO AUTOM√ÅTICO DE PENDIENTE_REVISION ‚Üí EN_EJECUCION\n                if (permitBeforeData.status === 'pendiente_revision') {\n                    updateData['status'] = 'en_ejecucion';\n                }\n            }\n        }\n        \n        await docRef.update(updateData);\n        \n        const permitDoc = await docRef.get();\n        const updatedPermitData = { id: permitDoc.id, ...permitDoc.data() } as Permit;\n        \n        const signatureRoleName = (signatureRoles as any)[role] || role.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n        \n        const message = `${user.displayName || 'Un usuario'} ha firmado el permiso #${updatedPermitData.number} como ${signatureRoleName}.`;\n        const involvedUsers = await getInvolvedUsers(updatedPermitData);\n        \n        for (const uid of involvedUsers) {\n          if (uid !== user.uid) {\n            await createNotification(uid, updatedPermitData, message, 'signature', user);\n          }\n        }\n        \n        // ‚úÖ NOTIFICACI√ìN ESPECIAL SI EL PERMISO PAS√ì AUTOM√ÅTICAMENTE A EN_EJECUCION\n        if (updateData['status'] === 'en_ejecucion') {\n            const executionMessage = `El permiso #${updatedPermitData.number} ha completado todas las aprobaciones requeridas y ahora est√° EN EJECUCI√ìN.`;\n            for (const uid of involvedUsers) {\n                 await createNotification(uid, updatedPermitData, executionMessage, 'approval', user);\n            }\n            \n            // Notificaci√≥n WhatsApp\n            const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n            const permitUrl = `${baseUrl}/permits/${permitId}`;\n            const whatsappMsg = `*¬°PERMISO EN EJECUCI√ìN!* ‚úÖ\n\nüìÑ *N√∫mero:* ${updatedPermitData.number}\nüìç *√Årea:* ${permitBeforeData.generalInfo?.areaEspecifica || 'N/A'}\nüõ†Ô∏è *Tipo:* ${getWorkTypesString(permitBeforeData)}\n\n‚úÖ Todas las firmas requeridas han sido completadas.\nEl permiso est√° ahora EN EJECUCI√ìN.\n\nVer detalles: ${permitUrl}`;\n            \n            await sendWhatsAppNotification(whatsappMsg);\n        }\n\n        revalidatePath(`/permits/${permitId}`);\n        return { success: true };\n\n    } catch (error: any) {\n        console.error(\"‚ùå Error al guardar firma y notificar:\", error);\n        return {\n            success: false,\n            error: error.message || 'No se pudo guardar la firma.'\n        };\n    }\n}\n\n// ‚úÖ FUNCI√ìN CORREGIDA: Verificar si todas las firmas requeridas est√°n completas\nasync function checkAllRequiredSignaturesComplete(\n  permitData: Permit\n): Promise<boolean> {\n    const { approvals } = permitData;\n    \n    // Firma del solicitante es SIEMPRE requerida\n    if (approvals?.solicitante?.status !== 'aprobado') {\n        return false;\n    }\n    \n    // Firma del autorizante es SIEMPRE requerida\n    if (approvals?.autorizante?.status !== 'aprobado') {\n        return false;\n    }\n    \n    // Si hay trabajos en alturas, requiere firma del coordinador\n    if (permitData.trabajoAlturas || permitData.selectedWorkTypes?.alturas) {\n        if (approvals?.coordinador_alturas?.status !== 'aprobado') {\n            return false;\n        }\n    }\n    \n    // Si hay control de energ√≠a, requiere firma de mantenimiento\n    if (permitData.controlEnergia) {\n        if (approvals?.mantenimiento?.status !== 'aprobado') {\n            return false;\n        }\n    }\n    \n    // Si SST es requerido, validar su firma\n    if (permitData.isSSTSignatureRequired) {\n        if (approvals?.lider_sst?.status !== 'aprobado') {\n            return false;\n        }\n    }\n    \n    return true;\n}\n\n// ‚úÖ FUNCI√ìN MEJORADA: Validaci√≥n de transiciones de estado\nfunction validateStateTransition(currentStatus: PermitStatus, targetStatus: PermitStatus, userRole: UserRole): { allowed: boolean, reason?: string } {\n    const allowedTransitions: Partial<Record<PermitStatus, Partial<Record<PermitStatus, UserRole[]>>>> = {\n        'borrador': {\n            'pendiente_revision': ['solicitante', 'lider_tarea', 'admin']\n        },\n        'pendiente_revision': {\n            'en_ejecucion': ['autorizante', 'admin'],\n            'rechazado': ['autorizante', 'lider_sst', 'admin']\n        },\n        'en_ejecucion': {\n            'suspendido': ['lider_sst', 'admin'],\n            'cerrado': ['lider_tarea', 'autorizante', 'admin']\n        },\n        'suspendido': {\n            'en_ejecucion': ['lider_sst', 'admin'],\n            'cerrado': ['lider_tarea', 'autorizante', 'admin']\n        },\n        // Mantener compatibilidad con permisos antiguos que tengan estado \"aprobado\"\n        'aprobado': {\n            'en_ejecucion': ['lider_tarea', 'admin'],\n            'rechazado': ['autorizante', 'lider_sst', 'admin']\n        }\n    };\n    \n    const allowedRoles = allowedTransitions[currentStatus]?.[targetStatus];\n    if (!allowedRoles) {\n        return { allowed: false, reason: `Transici√≥n de '${currentStatus}' a '${targetStatus}' no est√° permitida.` };\n    }\n\n    if (!allowedRoles.includes(userRole) && userRole !== 'admin') {\n        return { allowed: false, reason: `Tu rol (${userRole}) no tiene permisos para cambiar el estado a '${targetStatus}'.` };\n    }\n\n    return { allowed: true };\n}\n\nexport async function updatePermitStatus(\n  permitId: string,\n  status: PermitStatus,\n  currentUser: { uid: string, displayName: string | null, role?: UserRole },\n  reason?: string\n) {\n    if (!permitId || !currentUser.uid || !currentUser.role) {\n        return { success: false, error: 'Par√°metros inv√°lidos o usuario sin rol.' };\n    }\n    if (!isAdminReady()) {\n      return { success: false, error: 'Credenciales de administrador de Firebase no configuradas.' };\n    }\n\n    try {\n        const docRef = adminDb.collection('permits').doc(permitId);\n        const permitSnap = await docRef.get();\n        if (!permitSnap.exists) {\n            return { success: false, error: 'El permiso no existe.' };\n        }\n        const permitData = permitSnap.data() as Permit;\n        \n        // ‚úÖ Validar transici√≥n de estado\n        const transition = validateStateTransition(permitData.status, status, currentUser.role);\n        if (!transition.allowed) {\n            return { success: false, error: transition.reason };\n        }\n\n        const updateData: UpdateData<Permit> = { status };\n\n        // ‚úÖ Guardar raz√≥n de rechazo\n        if (status === 'rechazado' && reason) {\n            updateData.rejectionReason = reason;\n        }\n        \n        // ‚úÖ Marcar fecha de cierre\n        if (status === 'cerrado') {\n            updateData['closure.fechaCierre'] = FieldValue.serverTimestamp();\n            updateData['closure.terminado'] = 'si';\n        }\n\n        await docRef.update(updateData);\n        \n        const updatedPermitData = { ...permitData, ...updateData, id: permitId } as Permit;\n        const triggeredBy = currentUser;\n        \n        let notificationType: Notification['type'] = 'status_change';\n        let message = `${currentUser.displayName || 'Un usuario'} ha cambiado el estado del permiso #${permitData.number} a: ${getStatusText(status)}.`;\n\n        if (status === 'en_ejecucion') {\n            notificationType = 'approval';\n            message = `El permiso #${permitData.number} ha sido puesto EN EJECUCI√ìN manualmente.`;\n        } else if (status === 'rechazado') {\n            notificationType = 'rejection';\n            message = `${currentUser.displayName || 'Un usuario'} ha rechazado el permiso #${permitData.number}.`;\n            if (reason) message += ` Motivo: ${reason}`;\n        } else if (status === 'cerrado') {\n            notificationType = 'cancellation';\n            message = `${currentUser.displayName || 'Un usuario'} ha cerrado el permiso #${permitData.number}.`;\n        }\n        \n        const involvedUsers = await getInvolvedUsers(updatedPermitData);\n        for (const uid of involvedUsers) {\n             if (uid !== currentUser.uid) {\n                await createNotification(uid, updatedPermitData, message, notificationType, triggeredBy);\n            }\n        }\n\n        const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n        const permitUrl = `${baseUrl}/permits/${permitId}`;\n\n        let messageBody = `*Actualizaci√≥n de Estado - SGTC* üîÑ\nEl estado del permiso *${permitData.number || permitId}* ha cambiado.\n\n*Nuevo Estado:* ${getStatusText(status)}\n\nPuede ver los detalles aqu√≠:\n${permitUrl}`;\n\n        if (status === 'rechazado' && reason) {\n          messageBody += `\\n\\n*Motivo del rechazo:* ${reason}`;\n        }\n        \n        await sendWhatsAppNotification(messageBody);\n        \n        revalidatePath(`/permits/${permitId}`);\n        revalidatePath('/permits');\n        revalidatePath('/dashboard');\n\n        return { success: true };\n    } catch (error: any) {\n        console.error(\"‚ùå Error updating permit status:\", error);\n        return {\n            success: false,\n            error: error.message || 'Could not update permit status.'\n        };\n    }\n}\n\n// ‚úÖ FUNCI√ìN MEJORADA: Validaci√≥n de permisos de firma con orden jer√°rquico\nasync function validateSignaturePermission(\n    permitId: string, \n    signatureRole: string, \n    currentUser: { uid: string, role?: UserRole }\n): Promise<{ allowed: boolean, reason?: string }> {\n    const docRef = adminDb.collection('permits').doc(permitId);\n    const permitDoc = await docRef.get();\n    if (!permitDoc.exists) {\n        return { allowed: false, reason: 'Permiso no encontrado.' };\n    }\n    const permit = permitDoc.data() as Permit;\n    \n    // ‚úÖ Verificar que el permiso est√© en un estado v√°lido para firmar\n    if (!['borrador', 'pendiente_revision'].includes(permit.status)) {\n        return { allowed: false, reason: `No se puede firmar un permiso en estado '${permit.status}'.` };\n    }\n    \n    switch (signatureRole) {\n        case 'coordinador_alturas':\n            // Debe haber trabajo en alturas\n            if (!permit.trabajoAlturas && !permit.selectedWorkTypes?.alturas) {\n                return { allowed: false, reason: 'Esta firma solo aplica para trabajos en alturas.' };\n            }\n            // Solo el creador o admin puede gestionar esta firma\n            if (permit.createdBy !== currentUser.uid && currentUser.role !== 'admin') {\n                return { allowed: false, reason: 'Solo el creador del permiso puede gestionar esta firma.' };\n            }\n            break;\n            \n        case 'solicitante':\n            if (permit.createdBy !== currentUser.uid && currentUser.role !== 'admin') {\n                return { allowed: false, reason: 'Solo el creador del permiso puede firmar como solicitante.' };\n            }\n            // ‚úÖ Si hay anexo de alturas, verificar firma del coordinador primero\n            if ((permit.trabajoAlturas || permit.selectedWorkTypes?.alturas) && \n                permit.approvals?.coordinador_alturas?.status !== 'aprobado') {\n                return { allowed: false, reason: 'Se requiere primero la firma del Coordinador de Trabajos en Alturas.' };\n            }\n            break;\n            \n        case 'autorizante':\n            if (currentUser.role !== 'autorizante' && currentUser.role !== 'admin') {\n                return { allowed: false, reason: 'Rol de autorizante requerido para esta firma.' };\n            }\n            if (permit.approvals?.solicitante?.status !== 'aprobado') {\n                return { allowed: false, reason: 'Se requiere primero la firma del solicitante.' };\n            }\n            break;\n            \n        case 'lider_sst':\n            if (currentUser.role !== 'lider_sst' && currentUser.role !== 'admin') {\n                return { allowed: false, reason: 'Rol de L√≠der SST requerido para esta firma.' };\n            }\n            // ‚úÖ Solo requerido si isSSTSignatureRequired es true\n            if (!permit.isSSTSignatureRequired) {\n                return { allowed: false, reason: 'Firma de SST no es requerida para este permiso.' };\n            }\n            if (permit.approvals?.solicitante?.status !== 'aprobado') {\n                return { allowed: false, reason: 'Se requiere primero la firma del solicitante.' };\n            }\n            break;\n            \n        case 'mantenimiento':\n             if (currentUser.role !== 'mantenimiento' && currentUser.role !== 'admin') {\n                return { allowed: false, reason: 'Rol de Mantenimiento requerido para esta firma.' };\n            }\n            if (!permit.controlEnergia) {\n                return { allowed: false, reason: 'Firma de Mantenimiento solo aplica cuando hay control de energ√≠as.' };\n            }\n            if (permit.approvals?.autorizante?.status !== 'aprobado') {\n                return { allowed: false, reason: 'Se requiere primero la firma del autorizante.' };\n            }\n            break;\n    }\n    \n    return { allowed: true };\n}\n\nexport async function addDailyValidationSignature(\n  permitId: string, \n  anexoName: string, \n  validationType: 'autoridad' | 'responsable', \n  index: number, \n  data: ValidacionDiaria, \n  user: User\n) {\n  if (!permitId || !anexoName || !validationType || index < 0 || !data || !user) {\n    return { success: false, error: 'Par√°metros inv√°lidos.' };\n  }\n\n  if (!isAdminReady()) {\n    return { success: false, error: 'Credenciales de administrador de Firebase no configuradas en el servidor.' };\n  }\n\n  const docRef = adminDb.collection('permits').doc(permitId);\n  try {\n    const permitSnap = await docRef.get();\n    if (!permitSnap.exists) {\n      return { success: false, error: 'El permiso no existe.' };\n    }\n    const permitData = permitSnap.data() as Permit;\n\n    // ‚úÖ Verificar que el permiso est√© en ejecuci√≥n para validaciones diarias\n    if (!['en_ejecucion', 'suspendido'].includes(permitData.status)) {\n        return { success: false, error: 'Solo se pueden agregar validaciones diarias en permisos EN EJECUCI√ìN o SUSPENDIDOS.' };\n    }\n\n    const anexoData = (permitData as any)[anexoName];\n    if (!anexoData) {\n      return { success: false, error: `El anexo ${anexoName} no existe en el permiso.` };\n    }\n    \n    const anexoUpdate: any = { ...anexoData };\n    if (!anexoUpdate.validacion) {\n        anexoUpdate.validacion = { autoridad: [], responsable: [] };\n    }\n\n    const validationArray = (anexoUpdate.validacion[validationType] as ValidacionDiaria[]) || [];\n    \n    while (validationArray.length <= index) {\n        validationArray.push({ dia: validationArray.length + 1, nombre: '', fecha: '', firma: '' });\n    }\n\n    validationArray[index] = data;\n    \n    const updatePath = `${anexoName}.validacion.${validationType}`;\n    \n    await docRef.update({\n      [updatePath]: validationArray,\n    });\n\n    const fullPermitData = { id: docRef.id, ...permitData } as Permit;\n    const anexoDisplayName = anexoName.replace('anexo', 'Anexo ');\n    const validationRoleName = validationType === 'autoridad' ? 'Autoridad del √Årea' : 'Responsable del Trabajo';\n    const day = index + 1;\n\n    const message = `${user.displayName || 'Un usuario'} ha realizado la validaci√≥n diaria (${validationRoleName}) para el D√çA ${day} del ${anexoDisplayName} en el permiso #${fullPermitData.number}.`;\n    const involvedUsers = await getInvolvedUsers(fullPermitData);\n    for (const uid of involvedUsers) {\n      if (uid !== user.uid) {\n        await createNotification(uid, fullPermitData, message, 'status_change', { uid: user.uid, displayName: user.displayName || null });\n      }\n    }\n\n    const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n    const permitUrl = `${baseUrl}/permits/${permitId}`;\n    const whatsappMessage = `*Validaci√≥n Diaria - SGTC* ‚úçÔ∏è\nSe ha registrado una nueva firma de validaci√≥n diaria.\n\nüìÑ *Permiso:* ${fullPermitData.number || 'N/A'}\nüóìÔ∏è *D√≠a:* ${day}\nüë§ *Firmante:* ${user.displayName || 'N/A'}\n‚úÖ *Rol:* ${validationRoleName}\nüìã *Anexo:* ${anexoDisplayName}\n\nPuede ver los detalles aqu√≠:\n${permitUrl}`;\n    \n    await sendWhatsAppNotification(whatsappMessage);\n\n    revalidatePath(`/permits/${permitId}`);\n    return { success: true };\n\n  } catch (error: any) {\n    console.error(\"‚ùå Error al guardar la validaci√≥n diaria:\", error);\n    return { success: false, error: 'No se pudo guardar la firma de validaci√≥n.' };\n  }\n}\n\nexport async function addWorkerSignature(permitId: string, workerIndex: number, signatureType: 'firmaApertura' | 'firmaCierre', signatureDataUrl: string) {\n    if (!permitId || workerIndex < 0 || !signatureType || !signatureDataUrl) {\n        return { success: false, error: 'Faltan par√°metros.' };\n    }\n    if (!isAdminReady()) {\n      return { success: false, error: 'Credenciales de administrador de Firebase no configuradas en el servidor.' };\n    }\n\n    const docRef = adminDb.collection('permits').doc(permitId);\n    try {\n        const permitSnap = await docRef.get();\n        if (!permitSnap.exists) {\n            return { success: false, error: 'El permiso no existe.' };\n        }\n\n        const permitData = permitSnap.data() as Permit;\n        \n        // ‚úÖ CORRECCI√ìN: Validaci√≥n de estado corregida para firma de apertura\n        if (signatureType === 'firmaApertura' && !['pendiente_revision', 'aprobado', 'en_ejecucion'].includes(permitData.status)) {\n            return { success: false, error: 'Solo se puede firmar apertura cuando el permiso est√° pendiente, aprobado o en ejecuci√≥n.' };\n        }\n        if (signatureType === 'firmaCierre' && !['en_ejecucion', 'suspendido'].includes(permitData.status)) {\n            return { success: false, error: 'Solo se puede firmar cierre en permisos EN EJECUCI√ìN o SUSPENDIDOS.' };\n        }\n        \n        const workers = permitData.workers ? [...permitData.workers] : [];\n\n        if (workerIndex >= workers.length) {\n            return { success: false, error: '√çndice de trabajador inv√°lido.' };\n        }\n\n        const signatureField = signatureType === 'firmaApertura' ? 'firmaApertura' : 'firmaCierre';\n        const dateField = signatureType === 'firmaApertura' ? 'fechaFirmaApertura' : 'fechaFirmaCierre';\n\n        workers[workerIndex] = {\n            ...workers[workerIndex],\n            [signatureField]: signatureDataUrl,\n            [dateField]: new Date().toISOString(), \n        };\n\n        await docRef.update({ workers: workers });\n\n        revalidatePath(`/permits/${permitId}`);\n        return { success: true };\n    } catch (error: any) {\n        console.error(\"Error al guardar la firma del trabajador:\", error);\n        return { success: false, error: 'No se pudo guardar la firma.' };\n    }\n}\n"],"names":[],"mappings":";;;;;;IA4MsB,kBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/form-context.tsx"],"sourcesContent":["\n'use client';\n\nimport React, { createContext, useReducer, useContext, Dispatch, useEffect } from 'react';\nimport type { Permit, ExternalWorker, AnexoATS, AnexoAltura, AnexoConfinado, AnexoEnergias, AnexoIzaje, AnexoExcavaciones, VerificacionPeligros, EppEmergencias, PermitGeneralInfo, SelectedWorkTypes } from '@/types';\n\n// Define the shape of the form data\ntype PermitFormData = Omit<Permit, 'id' | 'createdAt' | 'status' | 'createdBy' | 'number' | 'user' | 'approvals' | 'closure'>;\n\n// Define the shape of the state\ninterface FormState extends PermitFormData {}\n\n// Define the actions\ntype FormAction =\n  | { type: 'UPDATE_GENERAL_INFO'; payload: Partial<FormState['generalInfo']> }\n  | { type: 'UPDATE_WORK_TYPES'; payload: { type: keyof FormState['selectedWorkTypes'], value: boolean } }\n  | { type: 'UPDATE_ATS'; payload: Partial<FormState['anexoATS']> }\n  | { type: 'UPDATE_ANEXO_ALTURA'; payload: Partial<FormState['anexoAltura']> }\n  | { type: 'UPDATE_ANEXO_CONFINADO'; payload: Partial<FormState['anexoConfinado']> }\n  | { type: 'UPDATE_ANEXO_ENERGIA'; payload: Partial<FormState['anexoEnergias']> }\n  | { type: 'UPDATE_ANEXO_IZAJE'; payload: Partial<FormState['anexoIzaje']> }\n  | { type: 'UPDATE_ANEXO_EXCAVACIONES'; payload: Partial<FormState['anexoExcavaciones']> }\n  | { type: 'UPDATE_VERIFICACION_PELIGROS'; payload: Partial<FormState['verificacionPeligros']> }\n  | { type: 'UPDATE_EPP_EMERGENCIAS'; payload: Partial<FormState['eppEmergencias']> }\n  | { type: 'SET_WORKERS'; payload: ExternalWorker[] }\n  | { type: 'ADD_WORKER'; payload: ExternalWorker }\n  | { type: 'UPDATE_SIGNATURE', payload: { target: string, signature: string, context: any } }\n  | { type: 'SET_SST_REQUIRED', payload: boolean }\n  | { type: 'SET_ENTIRE_STATE', payload: Partial<Permit> }\n  | { type: 'RESET_FORM' };\n\n\n// Initial state\nconst initialState: FormState = {\n  generalInfo: {\n    areaEspecifica: '',\n    planta: '',\n    proceso: '',\n    contrato: '',\n    empresa: '',\n    nombreSolicitante: '',\n    fechaCreacion: new Date().toISOString(),\n    validFrom: '',\n    validUntil: '',\n    workDescription: '',\n    tools: [],\n    numTrabajadores: '',\n    reunionInicio: 'na',\n    atsVerificado: 'na',\n    responsable: { nombre: '', cargo: '', compania: '', alcance: '' }\n  },\n  selectedWorkTypes: {\n    alturas: false,\n    confinado: false,\n    energia: false,\n    izaje: false,\n    excavacion: false,\n    general: false,\n  },\n  trabajoAlturas: false, // Compatibility field\n  isSSTSignatureRequired: false,\n  anexoATS: {\n    peligros: {},\n    controles: {},\n    epp: {},\n    justificacion: {},\n  },\n  anexoAltura: {\n    tipoEstructura: {\n        escaleraCuerpo: false,\n        escaleraDosCuerpos: false,\n        andamioTubular: false,\n        andamioColgante: false,\n        plataforma: false,\n        manLift: false,\n        otros: false,\n        otrosCual: '',\n    },\n    aspectosSeguridad: {},\n    precauciones: {},\n    afectaciones: {\n        riesgoOtrasAreas: 'na',\n        otrasAreasRiesgo: 'na',\n        personalNotificado: 'na',\n        observaciones: '',\n    },\n    validacion: {\n      autoridad: Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' })),\n      responsable: Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' })),\n    },\n  },\n  anexoConfinado: {\n    identificacionPeligros: {},\n    precauciones: {},\n    resultadosPruebasGases: {},\n    requerimientosEquipos: {},\n    pruebasGasesPeriodicas: {\n      intervalo: '',\n      pruebas: [],\n      pruebaRealizadaPor: '',\n      serialMonitor: '',\n      marca: '',\n      fechaCalibracion: '',\n    },\n    validacion: {\n      autoridad: Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' })),\n      responsable: Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' })),\n    },\n  },\n  anexoEnergias: {\n    trabajosEnCaliente: {},\n    energiasPeligrosas: {},\n    procedimientoLOTO: {},\n    trabajosConEnergiaElectrica: {},\n    tensionExpuesta: {},\n    planeacion: {},\n    metodoTrabajo: {\n      sinTension: false,\n      conTension: false,\n    },\n    trabajoConTension: {},\n    trabajoSinTension: {},\n    observaciones: '',\n  },\n  anexoIzaje: {\n    informacionGeneral: {\n        accion: {},\n        pesoCarga: {},\n        equipoUtilizar: {},\n        capacidadEquipo: '',\n    },\n    aspectosRequeridos: {},\n    precauciones: {},\n    validacion: {\n      autoridad: Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' })),\n      responsable: Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' })),\n    },\n  },\n  anexoExcavaciones: {\n    informacionGeneral: {\n      dimensiones: '',\n      profundidad: '',\n      ancho: '',\n      largo: '',\n    },\n    aspectosRequeridos: {},\n    precauciones: {},\n    validacion: {\n      autoridad: Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' })),\n      responsable: Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' })),\n    },\n  },\n  verificacionPeligros: {\n    fisicos: {},\n    quimicos: {},\n    seguridad: {},\n    locativos: {},\n    biologicoAmbiental: {},\n    biomecanicos: {},\n    psicosocial: {},\n  },\n  eppEmergencias: {\n    epp: {},\n    emergencias: {},\n  },\n  workers: [],\n};\n\nconst LOCAL_STORAGE_KEY = 'permitFormDraft';\n\n// Reducer function\nfunction formReducer(state: FormState, action: FormAction): FormState {\n  switch (action.type) {\n    case 'UPDATE_GENERAL_INFO':\n      return {\n        ...state,\n        generalInfo: { ...state.generalInfo, ...action.payload },\n      };\n    case 'UPDATE_WORK_TYPES':\n        const isAlturas = action.payload.type === 'alturas';\n        return {\n            ...state,\n            selectedWorkTypes: { ...state.selectedWorkTypes, [action.payload.type]: action.payload.value },\n            // Also update the old 'trabajoAlturas' field for compatibility with security rules\n            ...(isAlturas && { trabajoAlturas: action.payload.value }),\n        }\n    case 'UPDATE_ATS':\n        return {\n            ...state,\n            anexoATS: { ...state.anexoATS, ...action.payload },\n        }\n    case 'UPDATE_ANEXO_ALTURA':\n        return {\n            ...state,\n            anexoAltura: { ...state.anexoAltura, ...action.payload },\n        }\n    case 'UPDATE_ANEXO_CONFINADO':\n        return {\n            ...state,\n            anexoConfinado: { ...state.anexoConfinado, ...action.payload },\n        }\n    case 'UPDATE_ANEXO_ENERGIA':\n        return {\n            ...state,\n            anexoEnergias: { ...state.anexoEnergias, ...action.payload },\n        }\n    case 'UPDATE_ANEXO_IZAJE':\n        return {\n            ...state,\n            anexoIzaje: { ...state.anexoIzaje, ...action.payload },\n        }\n    case 'UPDATE_ANEXO_EXCAVACIONES':\n        return {\n            ...state,\n            anexoExcavaciones: { ...state.anexoExcavaciones, ...action.payload },\n        }\n    case 'UPDATE_VERIFICACION_PELIGROS':\n        return {\n            ...state,\n            verificacionPeligros: { ...state.verificacionPeligros, ...action.payload },\n        }\n    case 'UPDATE_EPP_EMERGENCIAS':\n        return {\n            ...state,\n            eppEmergencias: { ...state.eppEmergencias, ...action.payload },\n        }\n    case 'SET_WORKERS':\n        return {\n            ...state,\n            workers: action.payload,\n        }\n    case 'ADD_WORKER':\n        return {\n            ...state,\n            workers: [...(state.workers || []), action.payload]\n        }\n    case 'UPDATE_SIGNATURE':\n      console.log('Signature update needs to be implemented in reducer:', action.payload);\n      return state;\n    case 'SET_SST_REQUIRED':\n        return {\n            ...state,\n            isSSTSignatureRequired: action.payload\n        };\n    case 'SET_ENTIRE_STATE':\n        const { payload } = action;\n        return {\n            ...initialState, // Start with a clean initial state\n            generalInfo: { ...initialState.generalInfo, ...payload.generalInfo },\n            selectedWorkTypes: { ...initialState.selectedWorkTypes, ...payload.selectedWorkTypes },\n            trabajoAlturas: payload.trabajoAlturas || false,\n            isSSTSignatureRequired: payload.isSSTSignatureRequired || false,\n            anexoATS: { ...initialState.anexoATS, ...payload.anexoATS },\n            anexoAltura: { ...initialState.anexoAltura, ...payload.anexoAltura },\n            anexoConfinado: { ...initialState.anexoConfinado, ...payload.anexoConfinado },\n            anexoEnergias: { ...initialState.anexoEnergias, ...payload.anexoEnergias },\n            anexoIzaje: { ...initialState.anexoIzaje, ...payload.anexoIzaje },\n            anexoExcavaciones: { ...initialState.anexoExcavaciones, ...payload.anexoExcavaciones },\n            verificacionPeligros: { ...initialState.verificacionPeligros, ...payload.verificacionPeligros },\n            eppEmergencias: { ...initialState.eppEmergencias, ...payload.eppEmergencias },\n            workers: payload.workers || initialState.workers,\n        };\n    case 'RESET_FORM':\n      // Limpiar tambi√©n el localStorage al resetear\n      try {\n        localStorage.removeItem(LOCAL_STORAGE_KEY);\n      } catch (error) {\n        console.error(\"Failed to remove draft from localStorage\", error);\n      }\n      return initialState;\n    default:\n      return state;\n  }\n}\n\n// Create the context\nconst PermitFormContext = createContext<{ state: FormState; dispatch: Dispatch<FormAction> } | undefined>(undefined);\n\n// Funci√≥n para inicializar el estado, intentando cargar desde localStorage\nconst initializer = (initialValue = initialState) => {\n  if (typeof window === \"undefined\") {\n    return initialValue;\n  }\n  try {\n    const stored = localStorage.getItem(LOCAL_STORAGE_KEY);\n    if (stored) {\n      return JSON.parse(stored);\n    }\n  } catch (error) {\n    console.error(\"Failed to parse draft from localStorage\", error);\n    localStorage.removeItem(LOCAL_STORAGE_KEY);\n  }\n  return initialValue;\n};\n\n\n// Create the provider component\nexport function PermitFormProvider({ children }: { children: React.ReactNode }) {\n  const [state, dispatch] = useReducer(formReducer, initialState, initializer);\n\n  // Efecto para guardar en localStorage cada vez que el estado cambia\n  useEffect(() => {\n    try {\n      // No guardar si el estado es el inicial (formulario vac√≠o)\n      if (state !== initialState) {\n        localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(state));\n      }\n    } catch (error) {\n      console.error(\"Failed to save draft to localStorage\", error);\n    }\n  }, [state]);\n\n\n  return (\n    <PermitFormContext.Provider value={{ state, dispatch }}>\n      {children}\n    </PermitFormContext.Provider>\n  );\n}\n\n// Custom hook to use the context\nexport function usePermitForm() {\n  const context = useContext(PermitFormContext);\n  if (!context) {\n    throw new Error('usePermitForm must be used within a PermitFormProvider');\n  }\n  return context;\n}\n\n    \n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 428, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/GeneralInfoStep.tsx"],"sourcesContent":["\n'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Trash2 } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { collection, onSnapshot, doc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { addDays, format } from 'date-fns';\n\nconst workTypes: { key: keyof ReturnType<typeof usePermitForm>['state']['selectedWorkTypes'], name: string }[] = [\n  { key: 'general', name: 'Trabajo General' },\n  { key: 'alturas', name: 'Trabajo en Alturas' },\n  { key: 'confinado', name: 'Espacios Confinados' },\n  { key: 'energia', name: 'Control de Energ√≠as' },\n  { key: 'izaje', name: 'Izaje de Cargas' },\n  { key: 'excavacion', name: 'Excavaciones' },\n];\n\nexport function GeneralInfoStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, selectedWorkTypes } = state;\n  const { toast } = useToast();\n\n  const [newToolName, setNewToolName] = React.useState('');\n\n  const [dynamicLists, setDynamicLists] = React.useState({\n    areas: [] as string[],\n    plantas: [] as string[],\n    procesos: [] as string[],\n    contratos: [] as string[],\n    empresas: [] as string[],\n  });\n  const [loadingLists, setLoadingLists] = React.useState(true);\n\n  React.useEffect(() => {\n    setLoadingLists(true);\n    const listNames = ['areas', 'plantas', 'procesos', 'contratos', 'empresas'];\n    const unsubscribers = listNames.map(listName => {\n      const docRef = doc(db, 'dynamic_lists', listName);\n      return onSnapshot(docRef, (docSnap) => {\n        setDynamicLists(prev => ({\n          ...prev,\n          [listName]: docSnap.exists() ? docSnap.data().items?.sort() || [] : []\n        }));\n      }, (error) => {\n        console.error(`Error fetching ${listName}:`, error);\n        toast({\n          variant: \"destructive\",\n          title: \"Error de Carga\",\n          description: `No se pudo cargar la lista para ${listName}.`,\n        });\n      });\n    });\n\n    // This is a bit of a hack to know when all listeners have fired at least once\n    Promise.all(listNames.map(listName => new Promise(resolve => {\n      const docRef = doc(db, 'dynamic_lists', listName);\n      onSnapshot(docRef, () => resolve(true), () => resolve(true)); // Resolve even on error\n    }))).then(() => setLoadingLists(false));\n\n    return () => unsubscribers.forEach(unsub => unsub());\n  }, [toast]);\n\n\n  const handleInputChange = (field: keyof typeof generalInfo, value: any) => {\n    dispatch({ type: 'UPDATE_GENERAL_INFO', payload: { [field]: value } });\n  };\n\n  const handleWorkTypeChange = (type: keyof typeof selectedWorkTypes, value: boolean) => {\n    dispatch({ type: 'UPDATE_WORK_TYPES', payload: { type, value } });\n  };\n  \n  const handleResponsableChange = (field: keyof typeof generalInfo.responsable, value: string) => {\n    const newResponsable = { ...generalInfo.responsable, [field]: value };\n    handleInputChange('responsable', newResponsable);\n  };\n\n  const addTool = () => {\n    if (newToolName.trim()) {\n      const newTools = [...(generalInfo.tools || []), { name: newToolName.trim(), status: 'B' }];\n      handleInputChange('tools', newTools);\n      setNewToolName('');\n    }\n  };\n\n  const removeTool = (index: number) => {\n    const newTools = (generalInfo.tools || []).filter((_, i) => i !== index);\n    handleInputChange('tools', newTools);\n  };\n  \n  const maxDate = React.useMemo(() => {\n    if (!generalInfo.validFrom) return '';\n    const startDate = new Date(generalInfo.validFrom);\n    const maxDate = addDays(startDate, 7);\n    // Format for datetime-local which is 'yyyy-MM-ddThh:mm'\n    return format(maxDate, \"yyyy-MM-dd'T'HH:mm\");\n  }, [generalInfo.validFrom]);\n\n  const handleUntilChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newUntilDate = e.target.value;\n    if (maxDate && newUntilDate > maxDate) {\n        toast({\n            variant: \"destructive\",\n            title: \"Fecha Inv√°lida\",\n            description: \"La duraci√≥n del permiso no puede exceder los 7 d√≠as.\",\n        });\n        handleInputChange('validUntil', maxDate);\n    } else {\n        handleInputChange('validUntil', newUntilDate);\n    }\n  };\n\n  const renderDynamicSelect = React.useCallback((listKey: keyof typeof dynamicLists, fieldKey: keyof typeof generalInfo, label: string, required: boolean) => (\n    <div>\n      <Label className={`font-bold text-gray-700 ${required ? 'after:content-[\"*\"] after:ml-0.5 after:text-red-500' : ''}`}>{label}</Label>\n      <Select\n        value={(generalInfo as any)[fieldKey] || ''}\n        onValueChange={(value) => handleInputChange(fieldKey, value)}\n        disabled={loadingLists}\n      >\n        <SelectTrigger>\n          <SelectValue placeholder={loadingLists ? \"Cargando...\" : `Seleccione una opci√≥n...`} />\n        </SelectTrigger>\n        <SelectContent>\n          {dynamicLists[listKey].map((item) => (\n            <SelectItem key={item} value={item}>{item}</SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n    </div>\n  ), [generalInfo, dynamicLists, loadingLists, handleInputChange]);\n\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Informaci√≥n General del Permiso\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">Complete todos los campos obligatorios (*)</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {renderDynamicSelect('areas', 'areaEspecifica', '√Årea o equipo espec√≠fico', true)}\n        {renderDynamicSelect('plantas', 'planta', 'Planta', true)}\n        {renderDynamicSelect('procesos', 'proceso', 'Proceso', false)}\n        {renderDynamicSelect('contratos', 'contrato', 'Contrato', false)}\n        {renderDynamicSelect('empresas', 'empresa', 'Empresa', false)}\n        <div>\n          <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Nombre del solicitante</Label>\n          <Input value={generalInfo.nombreSolicitante || ''} readOnly disabled />\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Listas de Verificaci√≥n Complementarias</Label>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 p-4 border rounded-lg mt-2\">\n          {workTypes.map(({ key, name }) => (\n            <div key={key} className=\"flex items-center space-x-2\">\n              <Checkbox\n                id={key}\n                checked={selectedWorkTypes[key]}\n                onCheckedChange={(checked) => handleWorkTypeChange(key, !!checked)}\n              />\n              <label htmlFor={key} className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\">\n                {name}\n              </label>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Duraci√≥n del Permiso</Label>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border rounded-lg\">\n          <div>\n            <label className=\"text-sm font-medium\">Desde</label>\n            <Input\n              type=\"datetime-local\"\n              value={generalInfo.validFrom}\n              onChange={(e) => handleInputChange('validFrom', e.target.value)}\n              min={format(new Date(), \"yyyy-MM-dd'T'HH:mm\")}\n            />\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">Hasta</label>\n            <Input\n              type=\"datetime-local\"\n              value={generalInfo.validUntil}\n              onChange={handleUntilChange}\n              disabled={!generalInfo.validFrom}\n              min={generalInfo.validFrom}\n              max={maxDate}\n            />\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold after:content-['*'] after:ml-0.5 after:text-red-500\">Descripci√≥n de la Tarea - ALCANCE</Label>\n        <Textarea\n          value={generalInfo.workDescription}\n          onChange={(e) => handleInputChange('workDescription', e.target.value)}\n          rows={3}\n          className=\"w-full mt-1\"\n          placeholder=\"Describa el alcance, descripci√≥n y √°rea/equipo...\"\n        />\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Equipos y/o Herramientas</Label>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg mt-2\">\n            <div className=\"space-y-2\">\n                {generalInfo.tools?.slice(0, 4).map((tool, index) => (\n                    <div key={index} className=\"flex items-center gap-4 p-2 bg-gray-50 rounded\">\n                    <span className=\"flex-1\">{tool.name}</span>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => removeTool(index)}><Trash2 className=\"h-4 w-4 text-destructive\"/></Button>\n                    </div>\n                ))}\n            </div>\n              <div className=\"space-y-2\">\n                {generalInfo.tools?.slice(4, 8).map((tool, index) => (\n                    <div key={index + 4} className=\"flex items-center gap-4 p-2 bg-gray-50 rounded\">\n                    <span className=\"flex-1\">{tool.name}</span>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => removeTool(index + 4)}><Trash2 className=\"h-4 w-4 text-destructive\"/></Button>\n                    </div>\n                ))}\n            </div>\n            <div className=\"md:col-span-2 flex gap-2\">\n                <Input value={newToolName} onChange={(e) => setNewToolName(e.target.value)} placeholder=\"Nueva herramienta...\" />\n                <Button onClick={addTool}><Plus/></Button>\n            </div>\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">No. Trabajadores</Label>\n        <Input type=\"number\" value={generalInfo.numTrabajadores} onChange={e => handleInputChange('numTrabajadores', e.target.value)} placeholder=\"Cantidad de trabajadores\" />\n        <p className=\"text-xs text-muted-foreground mt-1\">\n            Tener presente que el n√∫mero de trabajadores aqu√≠ relacionados debe ser el mismo n√∫mero de trabajadores firmantes, si la cantidad de firmantes no es igual el sistema no le permitir√° generar el permiso.\n        </p>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Responsable del Trabajo / Ejecutor</Label>\n        <div className=\"p-4 border rounded-lg mt-2 space-y-4\">\n          <div>\n            <Label className=\"text-sm text-muted-foreground after:content-['*'] after:ml-0.5 after:text-red-500\">Nombre completo</Label>\n            <Input placeholder=\"Nombre completo\" value={generalInfo.responsable?.nombre} onChange={e => handleResponsableChange('nombre', e.target.value)} />\n          </div>\n          <div>\n            <Label className=\"text-sm text-muted-foreground after:content-['*'] after:ml-0.5 after:text-red-500\">Cargo</Label>\n            <Input placeholder=\"Cargo\" value={generalInfo.responsable?.cargo} onChange={e => handleResponsableChange('cargo', e.target.value)} />\n          </div>\n          <div>\n            <Label className=\"text-sm text-muted-foreground after:content-['*'] after:ml-0.5 after:text-red-500\">Compa√±√≠a</Label>\n            <Input placeholder=\"Compa√±√≠a\" value={generalInfo.responsable?.compania} onChange={e => handleResponsableChange('compania', e.target.value)} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1163, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AtsStep.tsx"],"sourcesContent":["\n'use client';\n\nimport React, { useCallback } from 'react';\nimport { Label } from '@/components/ui/label';\nimport { Collapsible,CollapsibleContent, CollapsibleTrigger} from '@/components/ui/collapsible';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown, Plus, Trash2 } from 'lucide-react';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport type { AnexoATS } from '@/types';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useToast } from '@/hooks/use-toast';\n\n// Props del componente\ninterface AtsStepProps {\n  anexoATS: AnexoATS;\n  onUpdateATS: (updates: Partial<AnexoATS>) => void;\n}\n\nconst hazardCategories = {\n  LOCATIVOS: [\n    { id: 'superficies_irregulares', label: 'Superficies irregulares', control: 'Uso de botas de seguridad con suela antideslizante. Controlar escapes, derrames o goteras sobre los sitios de desplazamiento. Limpiar de inmediato cualquier l√≠quido que se derrame en el piso. Caminar con precauci√≥n. No cargar piezas o equipos que limiten la vista. Respetar la se√±alizaci√≥n. Transitar con precauci√≥n verificando rutas de tr√°nsito; no pasar donde haya presencia de materiales u obst√°culos; mantener el √°rea ordenada.' },\n    { id: 'superficies_deslizantes', label: 'Superficies deslizantes', control: 'Al subir o bajar escaleras utilizar todos los pelda√±os y sujetarse del pasamanos; mantener los tres puntos de apoyo; ascender y descender pausadamente.' },\n    { id: 'diferencia_nivel', label: 'Superficies con diferencia de nivel', control: 'No caminar hacia atr√°s. No acercarse a los vac√≠os existentes cerca al √°rea de trabajo. Informar cualquier condici√≥n de inseguridad que observe en las √°reas de trabajo.' },\n    { id: 'techos_mal_estado', label: 'Techos, muros, pisos o paredes en mas estado', control: 'Hacer uso de los elementos de prevenci√≥n y protecci√≥n contra ca√≠das, diligenciar permiso de trabajo en alturas si se supera el 2,0 metros.' },\n    { id: 'espacios_reducidos', label: 'Espacios reducidos de trabajo', control: 'Si esta catalogado como espacio confinado, aplica permiso de trabajo en espacio confinado, aplique las medidas de prevenci√≥n y protecci√≥n definidas por la empesa' },\n  ],\n  F√çSICOS: [\n    { id: 'deficiencia_iluminacion', label: 'Deficiencia de iluminaci√≥n', control: 'Uso de reflectores y/o l√°mparas en √°reas con iluminaci√≥n deficiente y en trabajo nocturno. Informar al due√±o de √°rea ausencia o da√±o de iluminaci√≥n artificial. Usar gafas claras todo el tiempo en caso de luz deficiente. Permanecer √∫nicamente en el sitio autorizado de trabajo.' },\n    { id: 'exceso_iluminacion', label: 'Exceso de iluminaci√≥n', control: 'En trabajos en el exterior, uso de gafas oscuras en caso de exceso de iluminaci√≥n; evitar cambios bruscos de iluminaci√≥n (deslumbramientos)' },\n    { id: 'ruido_intermitente', label: 'Ruido (Intermitente/Continuo)', control: 'Usar de manera permanente protecci√≥n auditiva tipo copa o de inserci√≥n y no retirarlo durante toda la tarea.' },\n    { id: 'contacto_superficies_calientes', label: 'Contacto superficies calientes', control: 'Usar de manera permanente guantes de protecci√≥n, uso de ropa manga larga, identificar con se√±alizaci√≥n o superficies calientes' },\n    { id: 'exposicion_soldadura', label: 'Exposici√≥n a arco de soldadura', control: 'Utilizar yelmo de soldar o la pantalla de mano siempre que se suelde, no mira nunca directamente al arco voltaico, no pique el cord√≥n de soldadura sin protecci√≥n ocular' },\n  ],\n  QU√çMICOS: [\n    { id: 'gases_humos_vapores', label: 'Gases, humos, vapores y neblinas', control: 'Uso permanente de protecci√≥n respiratoria de acuerdo al tipo de exposici√≥n. En caso de uso de mascarilla con filtros, verificar que se usen los adecuados para el tipo de agente qu√≠mico (gas, vapor, humo, material particulado, polvos, nieblas, roc√≠os, etc.)' },\n    { id: 'material_particulado', label: 'Material particulado', control: 'Realizar mantenimiento peri√≥dico de la mascarilla y hacer el cambio cuando sea necesario. Asegurar el sello efectivo de la mascarilla media cara al contacto con la piel.' },\n    { id: 'contacto_sustancias_peligrosas', label: 'Uso o contacto con materiales y sustancias peligrosas', control: 'Uso de elementos de protecci√≥n personal de acuerdo a la FDS Ficha de Datos de Seguridad, disponer en sitio de las medidas de protecci√≥n se√±aladas en la Ficha en caso de contacto accidental' },\n    { id: 'derrame_productos_quimicos', label: 'Derrame o fugas de productos Qu√≠micos', control: 'Definir un plan de emergencia en caso de derrame o fuga de productos qu√≠micos, contar con kit antiderrames y elementos de protecci√≥n personal aocrdes al producto qu√≠mico que se este usando' },\n  ],\n  MEC√ÅNICOS: [\n    { id: 'proyeccion_particulas', label: 'Proyecci√≥n de particulas y fragmentos', control: 'Uso obligatorio y permanente de elementos de protecci√≥n individual, protecci√≥n f√°cil y visual' },\n    { id: 'mecanismo_movimiento', label: 'Mecanismo en movimiento', control: 'Mantener protecciones como guardas y dispositivos instalados en el equipo, no posicionar segmentos corporales en √°reas de peligros, por ning√∫n motivo violar una guarda de seguridad' },\n    { id: 'manejo_herramientas', label: 'Manejo de herrramienta o equipos electricos', control: 'Uso de equipos y herramientas el√©ctricas en condiciones operativas que no exponen al trabajador a riesgos, realizar inspecci√≥n preoperacional' },\n    { id: 'movimiento_equipos_pesados', label: 'Movimiento de equipos de trabajo pesado en sitio', control: 'Se√±alizaci√≥n en sitio de trabajo, personal con paleta de pare y siga acompa√±ando el desplazamiento por v√≠as internas, manejo de trafico y control de senderos peatonas' },\n    { id: 'exposicion_vibraciones', label: 'Exposici√≥n a vibraciones por equipos', control: 'Pausas activas durante la jornada laboral, rotaci√≥n de personal para realizar la labor en jornada prolongadas donde se exponga a vibraciones' },\n  ],\n  BIOL√ìGICOS: [\n    { id: 'exposicion_vectores', label: 'Exposici√≥n a vectores transmisi√≥n de enfermedades', control: 'Orden y aseo en el lugar de trabajo, evitar la acumulaci√≥n de agua que pueda ser foco de proliferaci√≥n de vectores' },\n    { id: 'contaminacion_biologica', label: 'Contaminaci√≥n biol√≥gica', control: 'Prevenir y contener derrames de productos peligros, ubicaci√≥n y disposici√≥n de kit de contenci√≥n de derrames' },\n  ],\n  VIAL: [\n    { id: 'accidente_incidente_vial', label: 'Accidente o incidente vial', control: 'Para el transito peatonal hacer uso de las vias definidas por la empresa para el desplazamiento seguro' },\n    { id: 'atropellamiento_personas', label: 'Atropellamiento a personas', control: 'Respatar los limites de velocidad definidos por Italcol de 10 Km/h, no usar dispostivos de comunicaci√≥n como telefono celular.' },\n  ],\n  BIOMEC√ÅNICOS: [\n    { id: 'carga_estatica', label: 'Carga Est√°tica (Posturas inadecuadas, prolongadas, forzadas, antigravitaci√≥n)', control: 'Realizar calentamiento previo al inicio de las actividades (ejercicios pre-laborales); Tomar pausas activas. Higiene postural. Realizar cambios peri√≥dicos de actividad dentro de la tarea a ejecutar.' },\n    { id: 'carga_dinamica', label: 'Carga Din√°mica (Esfuerzo, Movilizaci√≥n de cargas, Movimientos repetitivos / repetidos)', control: 'No levantar cargas superiores a 25 kg (hombres) / 12.5Kg (mujeres) de peso; levantar una carga a la vez, en piezas pesadas y/o voluminosas, hacer el movimiento entre 2 personas. Aplicar t√©cnicas de levantamiento de cargas, manteniendo la espalda recta y flexionando las piernas, busque siempre primero ayudas mec√°nicas.' },\n  ],\n  AMBIENTALES: [\n    { id: 'generacion_residuos', label: 'Generaci√≥n de residuos escombros', control: 'ReaIizar la separaci√≥n y disponer de acuerdo a la clasificaci√≥n de colores definida por Italcol , disposici√≥n de residuos fuera de las instalaciones de acuerdo al marco normativo definido' },\n    { id: 'consumo_agua', label: 'Consumo de agua en grandes cantidades', control: 'Uso eficiente de recursos, eliminaci√≥n de fugas de agua, prevenir y contener derrames de productos peligrosos.' },\n    { id: 'mezcla_concreto', label: 'Mezcla de concreto en suelo', control: 'Uso de mezcladora o recipiente para evitar la mezcla en piso, de no ser posible utilizar una barrera fisica que aisle los materiales de cosntroccu√≥n de las superficies y sirvan como mecaniosmo de contenci√≥n.' },\n    { id: 'emisiones_material_particulado', label: 'Emisiones de material particulado', control: 'Cubrir materiales que puedan generar material particulado o barreras fisicas que mitiguen la generaci√≥n al medio ambiente' },\n  ],\n};\n\nexport const eppOptions = {\n  'Protecci√≥n Cabeza, Visual, Auditiva y Respiratoria': [\n    { id: 'casco_seguridad', label: 'Casco de seguridad', type: 'custom_casco' },\n    { id: 'gafas_seguridad', label: 'Gafas de seguridad', type: 'boolean' },\n    { id: 'gafas_oxicorte', label: 'Gafas de oxicorte', type: 'boolean' },\n    { id: 'monogafas', label: 'Monogafas', type: 'boolean' },\n    { id: 'careta_soldador', label: 'Careta de soldador', type: 'boolean' },\n    { id: 'careta_proteccion_total', label: 'Careta de protecci√≥n total', type: 'boolean' },\n    { id: 'gafas_antisalpicaduras', label: 'Gafas antisalpicaduras', type: 'boolean' },\n    { id: 'visor_careta', label: 'Visor / careta para', type: 'text' },\n    { id: 'careta_arco_electrico', label: 'Careta arco el√©ctrico clase', type: 'text' },\n    { id: 'protector_auditivo', label: 'Protector auditivo tipo:', type: 'select', selectOptions: ['Copa', 'Inserci√≥n'] },\n    { id: 'mascarilla_filtro', label: 'Mascarilla con filtro', type: 'text' },\n    { id: 'chavo_en_tela_o_carnaza', label: 'Chavo en tela o carnaza', type: 'boolean' },\n    { id: 'mascarilla_material_particulado', label: 'Mascarilla material particulado', type: 'boolean' },\n  ],\n  'Protecci√≥n Corporal, Manos y Pies': [\n    { id: 'overol_trabajo', label: 'Overol de trabajo', type: 'boolean' },\n    { id: 'overol_ignifugo', label: 'Overol ign√≠fugo clase', type: 'text' },\n    { id: 'chaleco_reflectivo', label:'Chaleco reflectivo', type: 'boolean' },\n    { id: 'chaqueta_cuero_carnaza', label: 'Chaqueta de cuero o carnaza', type: 'boolean' },\n    { id: 'delantal_cuero_carnaza', label: 'Delantal de cuero o carnaza', type: 'boolean' },\n    { id: 'delantal_pvc', label: 'Delantal de PVC', type: 'boolean' },    \n    { id: 'polainas', label: 'Polainas', type: 'boolean' },\n    { id: 'guante_dielectrico', label: 'Guante diel√©ctrico clase (guant√≠n, guante diel√©ctrico, protecci√≥n mec√°nica)', type: 'text' },\n    { id: 'guante_caucho_nitrilo', label: 'Guante de caucho y/o nitrilo', type: 'boolean' },\n    { id: 'guante_cuero_carnaza', label: 'Guante de cuero o carnaza', type: 'boolean' },\n    { id: 'guante_vaqueta_anticorte', label: 'Guante de vaqueta o Anticorte', type: 'boolean' },\n    { id: 'guante_temperatura', label: 'Guante temperatura', type: 'boolean' },\n    { id: 'botas_seguridad', label: 'Botas de seguridad', type: 'boolean' },\n    { id: 'botas_caucho_seguridad', label: 'Botas de caucho de seguridad', type: 'boolean' },\n    { id: 'botas_dielectricas', label: 'Botas diel√©ctricas', type: 'boolean' },\n    { id: 'proteccion_metatarso', label: 'Protecci√≥n Metatarso', type: 'boolean' },\n  ],\n  'Protecci√≥n Contra Ca√≠das y Equipos Especiales': [\n    { id: 'arnes', label: 'Arn√©s', type: 'text' },\n    { id: 'mosqueton', label: 'Mosquet√≥n', type: 'boolean' },\n    { id: 'punto_de_anclaje', label: 'Punto de anclaje (cual)', type: 'text' },\n    { id: 'eslinga', label: 'Eslinga tipo/absorbedor', type: 'text' },\n    { id: 'linea_vida', label: 'L√≠nea de vida', type: 'text' },\n    { id: 'adaptador_anclaje', label: 'Adaptador de anclaje', type: 'text' },\n    { id: 'aire_respirable', label: 'Aire respirable (compresor o cilindro)', type: 'boolean' },\n    { id: 'tapete_dielectrico', label: 'Tapete diel√©ctrico clase', type: 'text' },\n    { id: 'senalizacion', label: 'Se√±alizaci√≥n', type: 'boolean' },\n    { id: 'barandas', label: 'Barandas', type: 'boolean' },\n    { id: 'delimitacion_perimetral', label: 'Delimitaci√≥n per√≠metro', type: 'boolean' },\n    { id: 'control_acceso', label: 'Control acceso', type: 'boolean' },\n    { id: 'otro_epp', label: 'Otro:', type: 'text' },\n  ],\n};\n\n\nconst justificacionOptions = [\n  { id: 'rutinario_3_meses', label: 'TRABAJO RUTINARIO REALIZADO 1 VEZ CADA 3 MESES' },\n  { id: 'no_rutinario_emergencia', label: 'TRABAJO NO RUTINARIO (EMERGENCIA)' },\n  { id: 'rutinario_sin_procedimiento', label: 'TRABAJO RUTINARIO QUE NO POSEE UN PROCEDIMIENTO SEGURO DE TRABAJO O INDICACI√ìN CORRECTA DE RIESGOS O MEDIDAS PREVENTIVAS' },\n  { id: 'no_rutinario_planeado', label: 'TRABAJO NO RUTINARIO (PLANEADO)' },\n  { id: 'rutinario_condicion_especifica', label: 'TRABAJO RUTINARIO QUE POR UNA CONDICI√ìN ESPEC√çFICA/TEMPORAL, NO ES POSIBLE APLICAR UN PROCEDIMIENTO DE FORMA INTEGRAL' },\n];\n\n// Componente para items de EPP\nconst EppItem = ({ \n  item, \n  checked, \n  onCheckedChange, \n  eppData,\n  onEppChange,\n}: { \n  item: { id: string; label: string; type: string; selectOptions?: string[] };\n  checked: boolean;\n  onCheckedChange: (checked: boolean) => void;\n  eppData: any;\n  onEppChange: (id: string, value: any) => void;\n}) => {\n\n  const handleSpecChange = (field: string, value: string) => {\n    onEppChange(field, value);\n  };\n  \n  // Manejo especial para casco de seguridad\n  if (item.type === 'custom_casco') {\n    return (\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"flex items-center space-x-2\">\n          <Checkbox \n            id={item.id} \n            checked={checked} \n            onCheckedChange={onCheckedChange}\n          />\n          <Label htmlFor={item.id} className=\"text-sm font-bold\">{item.label}</Label>\n        </div>\n        {checked && (\n          <div className=\"ml-6 space-y-2\">\n            <Input \n              placeholder=\"Tipo\" \n              value={eppData?.casco_seguridad_tipo || ''}\n              onChange={(e) => handleSpecChange('casco_seguridad_tipo', e.target.value)}\n              className=\"h-8 text-xs\"\n            />\n            <Input \n              placeholder=\"Clase\" \n              value={eppData?.casco_seguridad_clase || ''}\n              onChange={(e) => handleSpecChange('casco_seguridad_clase', e.target.value)}\n              className=\"h-8 text-xs\"\n            />\n            <Select \n              value={eppData?.casco_seguridad_barbuquejo || ''}\n              onValueChange={(value) => handleSpecChange('casco_seguridad_barbuquejo', value)}\n            >\n              <SelectTrigger className=\"h-8 text-xs\">\n                <SelectValue placeholder=\"Barbuquejo\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"con_barbuquejo\">Con barbuquejo</SelectItem>\n                <SelectItem value=\"sin_barbuquejo\">Sin barbuquejo</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Manejo para campos con select (como protector auditivo)\n  if (item.type === 'select' && item.selectOptions) {\n    return (\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"flex items-center space-x-2\">\n          <Checkbox \n            id={item.id} \n            checked={checked} \n            onCheckedChange={onCheckedChange}\n          />\n          <Label htmlFor={item.id} className=\"text-sm\">{item.label}</Label>\n        </div>\n        {checked && (\n          <div className=\"ml-6\">\n            <Select \n              value={eppData?.[`${item.id}_tipo`] || ''}\n              onValueChange={(value) => handleSpecChange(`${item.id}_tipo`, value)}\n            >\n              <SelectTrigger className=\"h-8 text-xs\">\n                <SelectValue placeholder=\"Seleccione tipo...\" />\n              </SelectTrigger>\n              <SelectContent>\n                {item.selectOptions.map((option) => (\n                  <SelectItem key={option} value={option.toLowerCase()}>\n                    {option}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Manejo para campos de texto y boolean\n  return (\n    <div className=\"flex flex-col gap-1\">\n      <div className=\"flex items-center space-x-2\">\n        <Checkbox \n          id={item.id} \n          checked={checked} \n          onCheckedChange={onCheckedChange}\n        />\n        <Label htmlFor={item.id} className=\"text-sm\">{item.label}</Label>\n      </div>\n      {item.type === 'text' && checked && (\n        <Input\n          id={`${item.id}_spec`}\n          className=\"h-8 text-xs ml-6\"\n          placeholder=\"Especificar...\"\n          value={eppData?.[`${item.id}_spec`] || ''}\n          onChange={(e) => onEppChange(`${item.id}_spec`, e.target.value)}\n        />\n      )}\n    </div>\n  );\n};\n\n\n// Componente para categor√≠as de EPP\nconst EppCategory = ({ \n  category, \n  items, \n  eppData, \n  onEppChange \n}: { \n  category: string;\n  items: Array<{ id: string; label: string; type: string; selectOptions?: string[] }>;\n  eppData: any;\n  onEppChange: (id: string, value: any) => void;\n}) => {\n  \n  const handleCheckedChange = (id: string, type: string, checked: boolean) => {\n    const newEpp = { ...(eppData || {}) };\n    \n    if (checked) {\n      newEpp[id] = true;\n    } else {\n      delete newEpp[id];\n      if (type === 'text') {\n        delete newEpp[`${id}_spec`];\n      }\n      if (type === 'select') {\n        delete newEpp[`${id}_tipo`];\n      }\n      if (type === 'custom_casco') {\n        delete newEpp[`casco_seguridad_tipo`];\n        delete newEpp[`casco_seguridad_clase`];\n        delete newEpp[`casco_seguridad_barbuquejo`];\n      }\n    }\n    onEppChange('epp', newEpp);\n  };\n  \n  const handleSpecChange = (field: string, value: string) => {\n    const newEpp = { ...(eppData || {}), [field]: value };\n    onEppChange('epp', newEpp);\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      <h4 className=\"font-semibold text-md text-gray-700\">{category}</h4>\n      <div className=\"space-y-2 p-3 border rounded-md\">\n        {items.map(item => (\n          <EppItem\n            key={item.id}\n            item={item}\n            checked={!!eppData?.[item.id]}\n            onCheckedChange={(checked) => handleCheckedChange(item.id, item.type, checked)}\n            eppData={eppData}\n            onEppChange={handleSpecChange}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\n// Componente para \"Otros Peligros\"\nconst OtrosPeligrosSection = React.memo(({ \n  peligrosAdicionales, \n  onUpdatePeligros \n}: { \n  peligrosAdicionales: Array<{peligro: string, descripcion: string}> | undefined,\n  onUpdatePeligros: (peligros: Array<{peligro: string, descripcion: string}>) => void \n}) => {\n  const [newPeligro, setNewPeligro] = React.useState('');\n  const [newPeligroDesc, setNewPeligroDesc] = React.useState('');\n\n  const handleAddPeligro = React.useCallback(() => {\n    if (newPeligro.trim() && newPeligroDesc.trim()) {\n      const newPeligros = [...(peligrosAdicionales || []), { \n        peligro: newPeligro.trim(), \n        descripcion: newPeligroDesc.trim() \n      }];\n      onUpdatePeligros(newPeligros);\n      setNewPeligro('');\n      setNewPeligroDesc('');\n    }\n  }, [newPeligro, newPeligroDesc, peligrosAdicionales, onUpdatePeligros]);\n\n  const handleRemovePeligro = React.useCallback((index: number) => {\n    const newPeligros = (peligrosAdicionales || []).filter((_, i) => i !== index);\n    onUpdatePeligros(newPeligros);\n  }, [peligrosAdicionales, onUpdatePeligros]);\n\n  return (\n    <div className=\"mt-6\">\n      <h4 className=\"font-semibold text-lg text-gray-700 mb-2\">Otros Peligros</h4>\n      <div className=\"p-4 border rounded-lg space-y-4\">\n        {peligrosAdicionales?.map((item, index) => (\n          <div key={`peligro-${index}`} className=\"flex items-start gap-2 p-3 bg-gray-50 rounded-md\">\n            <div className=\"flex-1\">\n              <p className=\"font-bold\">{item.peligro}</p>\n              <p className=\"text-sm text-muted-foreground\">{item.descripcion}</p>\n            </div>\n            <Button \n              variant=\"ghost\" \n              size=\"icon\" \n              onClick={() => handleRemovePeligro(index)}\n              type=\"button\"\n            >\n              <Trash2 className=\"h-4 w-4 text-destructive\" />\n            </Button>\n          </div>\n        ))}\n        \n        <div className=\"space-y-3\">\n          <div>\n            <Label htmlFor=\"nuevo-peligro-nombre\">Nombre del nuevo peligro</Label>\n            <Input \n              id=\"nuevo-peligro-nombre\"\n              value={newPeligro} \n              onChange={(e) => setNewPeligro(e.target.value)} \n              placeholder=\"Escriba el nombre del peligro...\"\n              autoComplete=\"off\"\n              type=\"text\"\n            />\n          </div>\n          <div>\n            <Label htmlFor=\"nuevo-peligro-desc\">Descripci√≥n y control del peligro</Label>\n            <Textarea \n              id=\"nuevo-peligro-desc\"\n              value={newPeligroDesc} \n              onChange={(e) => setNewPeligroDesc(e.target.value)} \n              placeholder=\"Escriba la descripci√≥n y medidas de control...\"\n              autoComplete=\"off\"\n              rows={3}\n            />\n          </div>\n          <Button \n            onClick={handleAddPeligro} \n            size=\"sm\" \n            type=\"button\"\n            disabled={!newPeligro.trim() || !newPeligroDesc.trim()}\n          >\n            <Plus className=\"mr-2 h-4 w-4\" /> Agregar Peligro\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nOtrosPeligrosSection.displayName = 'OtrosPeligrosSection';\n\n// SectionWrapper fuera del componente principal\nconst SectionWrapper = React.memo(({ \n  title, \n  children, \n  sectionId,\n  isOpen,\n  onToggle\n}: { \n  title: string; \n  children: React.ReactNode; \n  sectionId: string;\n  isOpen: boolean;\n  onToggle: () => void;\n}) => (\n  <Collapsible open={isOpen} onOpenChange={onToggle}>\n    <CollapsibleTrigger asChild>\n      <Button \n        variant=\"ghost\" \n        className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\"\n      >\n        <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n        <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n      </Button>\n    </CollapsibleTrigger>\n    <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n      {children}\n    </CollapsibleContent>\n  </Collapsible>\n));\n\nSectionWrapper.displayName = \"SectionWrapper\";\n\nexport function AtsStep({ anexoATS, onUpdateATS }: AtsStepProps) {\n  const [openSections, setOpenSections] = React.useState<Record<string, boolean>>({});\n\n  const toggleSection = React.useCallback((section: string) => {\n    setOpenSections(prev => ({ ...prev, [section]: !prev[section] }));\n  }, []);\n\n  const handlePeligroChange = React.useCallback((id: string, value: 'si' | 'no') => {\n    onUpdateATS({ \n      peligros: { ...anexoATS.peligros, [id]: value } \n    });\n  }, [anexoATS.peligros, onUpdateATS]);\n  \n  const handleEppChange = useCallback((field: string, value: any) => {\n    onUpdateATS({ [field]: value });\n  }, [onUpdateATS]);\n\n  const handleJustificacionChange = React.useCallback((id: string, value: boolean) => {\n    onUpdateATS({ \n      justificacion: { ...anexoATS.justificacion, [id]: value } \n    });\n  }, [anexoATS.justificacion, onUpdateATS]);\n\n  const handleUpdatePeligrosAdicionales = React.useCallback((peligros: Array<{peligro: string, descripcion: string}>) => {\n    onUpdateATS({ peligrosAdicionales: peligros });\n  }, [onUpdateATS]);\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          An√°lisis de Peligros y ATS\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">\n          Identifique los peligros, controles y EPP necesarios para la tarea.\n        </p>\n      </div>\n\n      <SectionWrapper \n        title=\"1. Identificaci√≥n de Peligros, Riesgos y Controles\" \n        sectionId=\"peligros\"\n        isOpen={!!openSections.peligros}\n        onToggle={() => toggleSection('peligros')}\n      >\n        <p className=\"text-xs text-muted-foreground mb-4\">\n          Coloque \"SI\" o \"NO\" para los peligros envueltos en el trabajo. Cuando asigne un \"SI\", se desplegar√°n los controles recomendados.\n        </p>\n        <div className=\"space-y-2\">\n          {Object.entries(hazardCategories).map(([category, hazards]) => (\n            <Collapsible \n              key={category} \n              open={!!openSections[category]} \n              onOpenChange={() => toggleSection(category)}\n            >\n              <CollapsibleTrigger asChild>\n                <Button \n                  variant=\"ghost\" \n                  className=\"w-full justify-between p-4 border rounded-lg\"\n                >\n                  <span className=\"font-semibold\">{category}</span>\n                  <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n                </Button>\n              </CollapsibleTrigger>\n              <CollapsibleContent className=\"p-4 border border-t-0 rounded-b-lg space-y-4\">\n                {hazards.map((hazard) => (\n                  <div key={hazard.id} className=\"space-y-3 p-3 bg-gray-50/50 rounded-md\">\n                    <div className=\"flex items-center justify-between\">\n                      <Label htmlFor={hazard.id} className=\"font-medium flex-1\">\n                        {hazard.label}\n                      </Label>\n                      <RadioGroup\n                        value={anexoATS.peligros?.[hazard.id]}\n                        onValueChange={(value: 'si' | 'no') => handlePeligroChange(hazard.id, value)}\n                        className=\"flex gap-4\"\n                      >\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"si\" id={`${hazard.id}-si`} />\n                          <Label htmlFor={`${hazard.id}-si`}>SI</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"no\" id={`${hazard.id}-no`} />\n                          <Label htmlFor={`${hazard.id}-no`}>NO</Label>\n                        </div>\n                      </RadioGroup>\n                    </div>\n                    {anexoATS.peligros?.[hazard.id] === 'si' && (\n                      <div className=\"pl-4 border-l-4 border-primary/50 ml-2\">\n                        <p className=\"text-xs font-semibold text-primary mb-1\">CONTROL RECOMENDADO:</p>\n                        <p className=\"text-xs text-muted-foreground\">{hazard.control}</p>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </CollapsibleContent>\n            </Collapsible>\n          ))}\n        </div>\n        \n        <OtrosPeligrosSection \n          peligrosAdicionales={anexoATS.peligrosAdicionales}\n          onUpdatePeligros={handleUpdatePeligrosAdicionales}\n        />\n\n        {/* Movido aqu√≠ */}\n        <div className=\"p-4 border-t-2 border-dashed mt-8\">\n            <h4 className=\"font-bold text-lg mb-2 text-gray-800\">PELIGROS ADICIONALES A LA ACTIVIDAD Y MEDIDAS DE CONTROL</h4>\n            <ul className=\"list-disc list-outside space-y-2 text-sm text-gray-600 pl-5\">\n              <li>Definir el √°rea adecuada para tomar agua, refrigerio, uso del ba√±o (si es necesario). No hacer consumo de alimentos en el √°rea de operaci√≥n.</li>\n              <li>Todos los trabajadores envueltos en la actividad deben conocer y cumplir las reglas de seguridad de la compa√±√≠a as√≠ como las propias del √°rea.</li>\n              <li>Cualquier cambio en las condiciones del trabajo se deber√° suspender actividades y realizar un ATS complementario.</li>\n            </ul>\n        </div>\n      </SectionWrapper>\n\n      <SectionWrapper \n        title=\"2. EPP Requeridos\" \n        sectionId=\"epp\"\n        isOpen={!!openSections.epp}\n        onToggle={() => toggleSection('epp')}\n      >\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6\">\n          {Object.entries(eppOptions).map(([category, items]) => (\n            <EppCategory\n              key={category}\n              category={category}\n              items={items}\n              eppData={anexoATS.epp}\n              onEppChange={handleEppChange}\n            />\n          ))}\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper \n        title=\"3. Justificaci√≥n para el uso del ATS\" \n        sectionId=\"justificacion\"\n        isOpen={!!openSections.justificacion}\n        onToggle={() => toggleSection('justificacion')}\n      >\n        <div className=\"space-y-3 p-4 border rounded-lg\">\n          {justificacionOptions.map(option => (\n            <div key={option.id} className=\"flex items-center space-x-3\">\n              <Checkbox\n                id={option.id}\n                checked={!!anexoATS.justificacion?.[option.id]}\n                onCheckedChange={(checked) => handleJustificacionChange(option.id, !!checked)}\n              />\n              <Label htmlFor={option.id} className=\"text-sm font-normal\">{option.label}</Label>\n            </div>\n          ))}\n        </div>\n      </SectionWrapper>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2566, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoAlturaStep.tsx"],"sourcesContent":["\n'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { Signature, Trash2, Plus, ChevronDown, Info } from 'lucide-react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport type { AutorizacionPersona, ValidacionDiaria, AnexoAltura } from '@/types';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\n\nconst anexoAlturaEstructuras = [\n  { id: 'escaleraCuerpo', label: 'Escalera de un cuerpo' },\n  { id: 'escaleraDosCuerpos', label: 'Escalera de dos cuerpos o mas' },\n  { id: 'andamioTubular', label: 'Andamio Tubular Certificado' },\n  { id: 'andamioColgante', label: 'Andamio Colgante' },\n  { id: 'plataforma', label: 'Plataforma' },\n  { id: 'manLift', label: 'Man Lift o Camion Canasta' },\n  { id: 'otros', label: 'Otros' },\n];\n\nconst tareasTrabajoAltura = [\n  { \n    id: 'mantenimiento-aires', \n    nombre: 'Mantenimiento de aires', \n    descripcion: 'Realizaci√≥n de mantenimiento, reparaci√≥n y limpieza de aires acondicionados' \n  },\n  { \n    id: 'cambio-estanterias', \n    nombre: 'Cambio y reparaci√≥n de estanter√≠as', \n    descripcion: 'Reparaci√≥n, inspecci√≥n y cambio de elementos de la estanter√≠a' \n  },\n  { \n    id: 'instalacion-luminarias', \n    nombre: 'Instalaci√≥n y cambio de luminarias', \n    descripcion: 'Reparaci√≥n y cambio de luminaria' \n  },\n  { \n    id: 'desnidacion-palomas', \n    nombre: 'Des nidaci√≥n de palomas', \n    descripcion: 'Retiro de nidos generados con palomas' \n  },\n  { \n    id: 'instalacion-carpas', \n    nombre: 'Instalaci√≥n de carpas', \n    descripcion: 'Instalar carpas (lona) de carpas m√≥viles' \n  },\n  { \n    id: 'modificacion-equipos-oficina', \n    nombre: 'Modificaci√≥n y adecuaci√≥n de equipos de oficina', \n    descripcion: 'Cambio de m√≥dulos, divisiones de oficina' \n  },\n  { \n    id: 'instalacion-avisos', \n    nombre: 'Instalaci√≥n de avisos', \n    descripcion: 'Instalar vallas, pendones, avisos' \n  },\n  { \n    id: 'estudios-isocineticos', \n    nombre: 'Estudios isocin√©ticos', \n    descripcion: 'Instalaci√≥n y desmonte equipo, en chimenea de caldera' \n  },\n  { id: 'cargue-graneleros', \n    nombre: 'Cargue de graneleros', \n    descripcion: 'Abrir compuertas superiores de graneleros y realizar cargue' \n  },\n  { \n    id: 'mantenimiento-antena', \n    nombre: 'Instalaci√≥n y mantenimiento de antena de telefon√≠a', \n    descripcion: 'Revisi√≥n de antena de telecomunicaciones' \n  },\n  { \n    id: 'impermeabilizacion-cubierta', \n    nombre: 'Impermeabilizaci√≥n de cubierta y limpieza (sobre losa)', \n    descripcion: 'Aplicar impermeabilizante a cubierta' \n  },\n  { \n    id: 'poda-arboles', \n    nombre: 'Poda de √°rboles (si se encuentra retirado de l√≠neas con tensi√≥n)', \n    descripcion: 'Realizaci√≥n de poda de √°rboles' \n  },\n  { \n    id: 'instalacion-malla', \n    nombre: 'Instalaci√≥n de malla y/o poli sombra', \n    descripcion: 'Instalaci√≥n y desmonte de mallas y poli sombra' \n  },\n  { \n    id: 'polarizacion-ventanas', \n    nombre: 'Polarizaci√≥n de ventanas, instalaci√≥n de cortinas', \n    descripcion: 'Colocar papel polarizado en ventanas e instalaci√≥n de cortinas' \n  },\n  { \n    id: 'cambio-piezas-equipos', \n    nombre: 'Cambio de piezas y mantenimiento en m√°stil de montacargas, retroexcavadora, etc.', \n    descripcion: 'Instalaci√≥n de sensores, luces, c√°maras, etc., en los equipos' \n  },\n  { \n    id: 'mantenimiento-camaras', \n    nombre: 'Mantenimiento e instalaci√≥n de c√°maras', \n    descripcion: 'Instalar c√°maras de seguridad en puntos de la planta' \n  },\n  { \n    id: 'instalacion-tuberia', \n    nombre: 'Instalaci√≥n de tuber√≠a el√©ctrica', \n    descripcion: 'Instalar tuber√≠a y sondear cableado, instalar soportes de tuber√≠a' \n  },\n];\n\nconst anexoAlturaAspectos = [\n    { id: 'afiliacionVigente', label: 'A. EL PERSONAL EJECUTANTE DE LA ACTIVIDAD TIENE LA AFILIACI√ìN VIGENTE A SEGURIDAD SOCIAL? '},\n    { id: 'procedimientoActividad', label: 'B. SE CUENTA CON EL PROCEDIMIENTO DE LA ACTIVIDAD A EJECUTAR?' },\n    { id: 'medidasPrevencion', label: 'C. SE HAN DETERMINADO LAS MEDIDAS DE PREVENCI√ìN CONTRA CA√çDAS?' },\n    { id: 'conocenMedidas', label: 'D. TODOS LOS EJECUTANTES CONOCEN LAS MEDIDAS DE PRECAUCI√ìN ESTABLECIDAS EN LA EVALUACI√ìN DE RIESGOS?'},\n    { id: 'entrenadosCertificados', label: 'E. EST√ÅN LOS EJECUTANTES ENTRENADOS Y SE ENCUENTRAN LOS CERTIFICADOS EN SITIO PARA REALIZAR   TRABAJOS EN ALTURA?'},\n    { id: 'elementosProteccionCertificados', label: 'F. EST√ÅN TODOS LOS ELEMENTOS DE PROTECCI√ìN CONTRA CA√çDAS EN BUEN ESTADO E CERTIFICADOS?' },\n    { id: 'sistemaAseguramientoVerificado', label: 'G. SE VERIFICO EL SISTEMA DE ASEGURAMIENTO DE LA ESCALERA , ANDAMIO O PLATAFORMA A UNA ESTRUCTURA FIJA' },\n    { id: 'estadoElementosVerificado', label: 'H. SE VERIFICO EL ESTADO DE: ESLINGAS, ARNES, CASCO, MOSQUETONES, CASCO, Y DEMAS ELEMENTOS NECESARIOS PARA REALIZAR EL TRABAJO.' },\n    { id: 'puntosAnclajeCertificados', label: 'I. LOS PUNTOS DE ANCLAJE Y DEMAS ELEMENTOS CUMPLEN CON LA RESISTENCIA DE 5000 LBS POR PERSONA Y ESTAN CERTIFICADOS?' },\n    { id: 'areaDelimitada', label: 'J. ESTA DELIMITADA Y SE√ëALIZADA EL AREA DE TRABAJO' },\n    { id: 'personalSaludable', label: 'K. EL PERSONAL QUE REALIZA EL TRABAJO SE ENCUENTRA EN CONDICIONES ADECUADAS DE SALUD PARA LA ACTIVIDAD?.' },\n    { id: 'equiposAccesoBuenEstado', label: 'L. SE CUENTA CON TODOS LOS EQUIPOS Y SISTEMAS DE ACCESO PARA TRABJO EN ALTURAS EN BUEN ESTADO?' },\n    { id: 'espacioCaidaLibreSuficiente', label: 'M. EL ESPACIO DE CAIDA LIBRE ES SUFICIENTE PARA EVITAR QUE LA PERSONA SE GOLPEE CONTRA EL NIVEL INFERIOR.' },\n    { id: 'equiposEmergenciaDisponibles', label: 'N. SE CUENTA CON ELEMENTOS PARA ATENCION DE EMERGENCIAS EN EL AREA Y PLAN DE EMERGENCIAS PARA RESCATE EN ALTURAS?' },\n    { id: 'eppSeleccionadosCorrectamente', label: 'O. EST√ÅN LOS ELEMENTOS DE PROTECCI√ìN PERSONAL SELECCIONADOS TENIENDO EN CUENTA LOS RIESGOS Y REQUERIMIENTOS DE LA TAREA?' },\n    { id: 'plataformaSoportaCarga', label: 'P.LA PLATAFORMA O ESTRUCTURA SOPORTA LA CARGA DE TRABAJO, ES FIRME Y SE EVITA LA CA√çDA DE OBJETOS O HERRAMIENTAS?' },\n    { id: 'supervisorConstante', label: 'Q.EXISTE UN SUPERVISOR O ACOMPA√ëANTE CONSTASTE DURANTE EL TRABAJO' },\n    { id: 'andamiosCompletos', label: 'R. EN CASO DE TRABAJOS SOBRE ANDAMIOS, ESTOS ESTAN COMPLETOS Y ADECUADAMENTE ARMADOS (RODAPIES, BARANDAS, ETC.)' },\n    { id: 'condicionesClimaticasAdecuadas', label: 'S.LAS CONDICIONES CLIMATICAS SON ADECUADAS PARA REALIZAR EL TRABAJO' },\n    { id: 'metodoSubirHerramientasSeguro', label: 'T.EL METODO DE SUBIR HERRAMIENTAS ES SEGURO' },\n    { id: 'sistemasRestriccion', label: 'U. EN CASO DE REQUERIRSE SE CUENTA CON SISTEMAS DE RESTRICCI√ìN' },\n    { id: 'sistemasPosicionamiento', label: 'V. EN CASO DE REQUERIRSE SE CUENTA CON SISTEMAS DE POSICIONAMIENTO' },\n];\n\nconst anexoAlturaPrecauciones = [\n    { id: 'despresurizar', label: 'DESPRESURIZAR' },\n    { id: 'revisarEquipos', label: 'REVISAR EQUIPOS Y HERRAMIENTAS' },\n    { id: 'sistemaContencionDerrames', label: 'SISTEMA CONTENCION DERRAMES' },\n    { id: 'monitoreoAtmosferas', label: 'MONITOREO DE ATMOSFERAS' },\n    { id: 'verificarListaChequeo', label: 'VERIFICAR LISTA DE CHEQUEO' },\n    { id: 'clasificacionResiduos', label: 'CLASIFICACION DE RESIDUOS' },\n    { id: 'aislamientoMecanico', label: 'AISLAMIENTO MECACNICO' },\n    { id: 'aterrizarEquipo', label: 'ATERRIZAR EQUIPO' },\n    { id: 'planIzaje', label: 'PLAN DE IZAJE' },\n    { id: 'aislamientoProceso', label: 'AISLAMIENTO DE PROCESO' },\n    { id: 'instalarLineasVida', label: 'INSTALAR LINEAS DE VIDA ADICIONALES' },\n    { id: 'fichaSeguridad', label: 'FICHA DE SEGURIDAD' },\n    { id: 'aislamientoElectrico', label: 'AISLAMIENTO ELECTRICO' },\n    { id: 'drenar', label: 'DRENAR' },\n    { id: 'cierreRecipientes', label: 'CIERRE DE RECIPIENTES SIN USO' },\n    { id: 'bloqueoEtiquetado', label: 'BLOQUEO Y ETIQUETADO' },\n    { id: 'ventilar', label: 'VENTILAR' },\n    { id: 'usoEppEspeciales', label: 'USO DE EPPS ESPECIALES' },\n    { id: 'etiquetadoProductosQuimicos', label: 'ETIQUETADO PRODUCTOS QUIMICOS' },\n    { id: 'equipoContraIncendio', label: 'EQUIPO CONTRA INCENDIO' },\n    { id: 'requiereVigia', label: 'REQUIERE VIGIA' },\n    { id: 'senalizacion', label: 'SE√ëALIZACION' },\n    { id: 'kitDerrames', label: 'KIT DERRAMES' },\n    { id: 'otro', label: 'OTRO, CUAL:' },\n];\n\nconst RadioGroupField = ({ id, label, value, onChange }: { id: string; label: string; value: 'si' | 'no' | 'na'; onChange: (value: 'si' | 'no' | 'na') => void; }) => (\n  <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n      <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n      <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n          <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n          <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n          <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n      </RadioGroup>\n  </div>\n);\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => (\n    <Collapsible defaultOpen={defaultOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n);\n\nexport function AnexoAlturaStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, anexoAltura } = state;\n  const isSSTRequired = anexoAltura.tareaRealizar?.id === 'otro';\n\n  const handleUpdate = (payload: Partial<AnexoAltura>) => {\n    dispatch({ type: 'UPDATE_ANEXO_ALTURA', payload });\n  };\n\n  const handleNestedChange = (section: keyof AnexoAltura, field: string, value: any) => {\n    const currentSection = (anexoAltura as any)[section] || {};\n    handleUpdate({ [section]: { ...currentSection, [field]: value } });\n  };\n  \n  React.useEffect(() => {\n    dispatch({ type: 'SET_SST_REQUIRED', payload: isSSTRequired });\n  }, [isSSTRequired, dispatch]);\n\n  // Handler para el cambio de tarea\n  const handleTareaChange = (tareaId: string) => {\n    if (tareaId === 'otro') {\n      handleUpdate({ \n        tareaRealizar: {\n          id: 'otro',\n          nombre: '',\n          descripcion: ''\n        }\n      });\n    } else {\n      const tareaSeleccionada = tareasTrabajoAltura.find(t => t.id === tareaId);\n      if (tareaSeleccionada) {\n        handleUpdate({ \n          tareaRealizar: {\n            id: tareaSeleccionada.id,\n            nombre: tareaSeleccionada.nombre,\n            descripcion: tareaSeleccionada.descripcion\n          }\n        });\n      }\n    }\n  };\n\n  // Obtener la descripci√≥n de la tarea seleccionada\n  const getDescripcionTarea = () => {\n    if (!anexoAltura.tareaRealizar?.id) return '';\n    if (anexoAltura.tareaRealizar.id === 'otro') {\n      return anexoAltura.tareaRealizar.descripcion || '';\n    }\n    const tarea = tareasTrabajoAltura.find(t => t.id === anexoAltura.tareaRealizar?.id);\n    return tarea?.descripcion || '';\n  };\n\n  return (\n    <>\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Anexo de Trabajo en Alturas\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">\n          Complete la informaci√≥n requerida para trabajos en alturas.\n        </p>\n      </div>\n      \n      <SectionWrapper title=\"Informaci√≥n General del Anexo\" defaultOpen>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n            <div><Label>√Årea de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n            <div><Label>Equipo o √Årea Espec√≠fica:</Label><Input value={generalInfo.proceso || ''} readOnly disabled /></div>\n        </div>\n        \n        {/* Nueva Secci√≥n: Tarea a Realizar */}\n        <div className=\"mt-4 space-y-4\">\n          <div>\n            <Label className=\"after:content-['*'] after:ml-0.5 after:text-red-500\">\n              Tarea a Realizar:\n            </Label>\n            <Select \n              value={anexoAltura.tareaRealizar?.id || ''} \n              onValueChange={handleTareaChange}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Seleccione la tarea a realizar\" />\n              </SelectTrigger>\n              <SelectContent>\n                {tareasTrabajoAltura.map(tarea => (\n                  <SelectItem key={tarea.id} value={tarea.id}>\n                    {tarea.nombre}\n                  </SelectItem>\n                ))}\n                <SelectItem value=\"otro\">Otro (especificar)</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Mostrar descripci√≥n de la tarea seleccionada */}\n          {anexoAltura.tareaRealizar?.id && anexoAltura.tareaRealizar.id !== 'otro' && (\n            <div className=\"p-3 bg-blue-50 border border-blue-200 rounded-md\">\n              <Label className=\"text-sm font-semibold text-blue-900\">Descripci√≥n de la Tarea:</Label>\n              <p className=\"text-sm text-blue-800 mt-1\">{getDescripcionTarea()}</p>\n            </div>\n          )}\n\n          {/* Campos adicionales si selecciona \"Otro\" */}\n          {anexoAltura.tareaRealizar?.id === 'otro' && (\n            <div className=\"space-y-4 p-4 border border-amber-200 rounded-md bg-amber-50\">\n              <div>\n                <Label className=\"after:content-['*'] after:ml-0.5 after:text-red-500\">\n                  Nombre de la Actividad:\n                </Label>\n                <Input \n                  placeholder=\"Ingrese el nombre de la actividad\" \n                  value={anexoAltura.tareaRealizar?.nombre || ''} \n                  onChange={(e) => handleUpdate({ \n                    tareaRealizar: {\n                      ...anexoAltura.tareaRealizar,\n                      id: 'otro',\n                      nombre: e.target.value,\n                      descripcion: anexoAltura.tareaRealizar?.descripcion || ''\n                    }\n                  })}\n                  required\n                />\n              </div>\n              <div>\n                <Label className=\"after:content-['*'] after:ml-0.5 after:text-red-500\">\n                  Descripci√≥n de la Actividad:\n                </Label>\n                <Textarea \n                  placeholder=\"Ingrese la descripci√≥n de la actividad\" \n                  value={anexoAltura.tareaRealizar?.descripcion || ''} \n                  onChange={(e) => handleUpdate({ \n                    tareaRealizar: {\n                      ...anexoAltura.tareaRealizar,\n                      id: 'otro',\n                      nombre: anexoAltura.tareaRealizar?.nombre || '',\n                      descripcion: e.target.value\n                    }\n                  })}\n                  rows={3}\n                  required\n                />\n              </div>\n               <Alert variant=\"destructive\" className=\"bg-red-50 border-red-200 text-red-800\">\n                  <Info className=\"h-4 w-4 text-red-800\" />\n                  <AlertTitle className=\"font-semibold\">Firma SST Requerida</AlertTitle>\n                  <AlertDescription className=\"text-xs\">\n                    Al seleccionar \"Otro\", este permiso requerir√° obligatoriamente la firma de un L√≠der SST para su aprobaci√≥n.\n                  </AlertDescription>\n                </Alert>\n                 <Input \n                    type=\"hidden\" \n                    readOnly \n                    value={state.isSSTSignatureRequired.toString()}\n                 />\n            </div>\n          )}\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n            <div><Label>Responsable (Nombre):</Label><Input value={generalInfo.responsable?.nombre || ''} readOnly disabled /></div>\n            <div><Label>Cargo:</Label><Input value={generalInfo.responsable?.cargo || ''} readOnly disabled /></div>\n            <div><Label>Compa√±√≠a:</Label><Input value={generalInfo.responsable?.compania || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n            <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoAltura.emergencia?.contacto || ''} onChange={(e) => handleNestedChange('emergencia', 'contacto', e.target.value)} /></div>\n            <div><Label>Tel√©fono:</Label><Input value={anexoAltura.emergencia?.telefono || ''} onChange={(e) => handleNestedChange('emergencia', 'telefono', e.target.value)} /></div>\n        </div>\n        <div className=\"mt-4\">\n            <Label>Altura aproximada a la cual se va a desarrollar la actividad (Indicar en metros)</Label>\n            <Input type=\"number\" value={anexoAltura.alturaAproximada || ''} onChange={(e) => handleUpdate({ alturaAproximada: e.target.value })} />\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Identificaci√≥n de Peligros y Aspectos para Trabajo en Alturas\">\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n            {anexoAlturaEstructuras.map(item => (\n                <div key={item.id} className=\"flex items-center space-x-2\">\n                    <Checkbox \n                      id={`struct-${item.id}`} \n                      checked={!!anexoAltura.tipoEstructura?.[item.id]} \n                      onCheckedChange={(checked) => handleNestedChange('tipoEstructura', item.id, !!checked)} \n                    />\n                    <Label htmlFor={`struct-${item.id}`}>{item.label}</Label>\n                </div>\n            ))}\n        </div>\n        {anexoAltura.tipoEstructura?.otros && (\n            <Input \n              placeholder=\"Especifique otros\" \n              value={anexoAltura.tipoEstructura.otrosCual || ''} \n              onChange={(e) => handleNestedChange('tipoEstructura', 'otrosCual', e.target.value)} \n              className=\"mt-4\" \n            />\n        )}\n      </SectionWrapper>\n\n      <SectionWrapper title=\"Aspectos de Seguridad para Trabajo en Alturas\">\n        <div className=\"space-y-3\">\n            {anexoAlturaAspectos.map(item => (\n                <RadioGroupField \n                  key={item.id} \n                  id={`aspecto-${item.id}`} \n                  label={item.label} \n                  value={anexoAltura.aspectosSeguridad?.[item.id] || 'na'} \n                  onChange={(value) => handleNestedChange('aspectosSeguridad', item.id, value)} \n                />\n            ))}\n        </div>\n      </SectionWrapper>\n\n      <SectionWrapper title=\"Precauciones y Controles Espec√≠ficos\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n             {anexoAlturaPrecauciones.map(item => (\n                <RadioGroupField \n                  key={item.id} \n                  id={`precaucion-${item.id}`} \n                  label={item.label} \n                  value={anexoAltura.precauciones?.[item.id] || 'na'} \n                  onChange={(value) => handleNestedChange('precauciones', item.id, value)} \n                />\n            ))}\n        </div>\n         {anexoAltura.precauciones?.otro === 'si' && (\n            <Input \n              placeholder=\"Especifique otra precauci√≥n\" \n              value={anexoAltura.precauciones.otroCual || ''} \n              onChange={(e) => handleNestedChange('precauciones', 'otroCual', e.target.value)} \n              className=\"mt-4\" \n            />\n        )}\n      </SectionWrapper>\n      \n       <SectionWrapper title=\"Afectaciones\">\n        <div className=\"space-y-4\">\n            <RadioGroupField \n              id=\"afect-riesgo-otras\" \n              label=\"¬øEste trabajo produce riesgos para otros trabajos en √°reas adyacentes?\" \n              value={anexoAltura.afectaciones?.riesgoOtrasAreas || 'na'} \n              onChange={(value) => handleNestedChange('afectaciones', 'riesgoOtrasAreas', value)} \n            />\n            <RadioGroupField \n              id=\"afect-otras-riesgo\" \n              label=\"¬øLos otros trabajos en √°reas adyacentes producen riesgo a este trabajo?\" \n              value={anexoAltura.afectaciones?.otrasAreasRiesgo || 'na'} \n              onChange={(value) => handleNestedChange('afectaciones', 'otrasAreasRiesgo', value)} \n            />\n            <RadioGroupField \n              id=\"afect-personal-notificado\" \n              label=\"¬øEl personal del √°rea potencialmente afectado y los trabajadores fueron notificados del trabajo a realizar?\" \n              value={anexoAltura.afectaciones?.personalNotificado || 'na'} \n              onChange={(value) => handleNestedChange('afectaciones', 'personalNotificado', value)} \n            />\n            <div>\n              <Label className=\"after:content-['*'] after:ml-0.5 after:text-red-500\">Observaciones:</Label>\n              <Textarea \n                value={anexoAltura.afectaciones?.observaciones || ''} \n                onChange={(e) => handleNestedChange('afectaciones', 'observaciones', e.target.value)} \n              />\n            </div>\n        </div>\n       </SectionWrapper>\n    </div>\n  </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3810, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoConfinadoStep.tsx"],"sourcesContent":["\n'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { Signature, Trash2, Plus, ChevronDown } from 'lucide-react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\n\nconst identificacionPeligros = [\n  { id: 'fuentesEnergiaAisladas', label: 'A. ESTAN LAS FUENTES DE ENERGIA (ELECTRICA, MECANICA, HIDRAULICA, TERMICA NEUMATICA) AISLADAS' },\n  { id: 'ejecutantesConocenMedidas', label: 'B. TODOS LOS EJECUTANTES CONOCEN LAS MEDIDAS DE PRECAUCI√ìN ESTABLECIDAS EN LA EVALUACI√ìN DE RIESGOS?' },\n  { id: 'ejecutantesEntrenados', label: 'C. EST√ÅN LOS EJECUTANTES ENTRENADOS' },\n  { id: 'entradasSalidasFlujoBloqueadas', label: 'D. ESTAN BLOQUEADAS LAS ENTRADAS Y SALIDAS DE FLUJO - SE INSTALARON AISLAMIENTOS (COLOMBINAS, CIEGOS)' },\n  { id: 'areaDelimitada', label: 'E. ESTA DELIMITADA Y SE√ëALIZADA EL AREA DE TRABAJO PARA PREVENIR EL INGRESO AL ESPACIO CONFINADO DE PERSONAL NO AUTORIZADO O AJENO A LA ACTIVIDAD' },\n  { id: 'monitorAtmosferasCalibrado', label: 'F. SE TIENE EN SITIO UN MONITOR DE ATMOSFERAS PELIGROSAS, CALIBRADO' },\n  { id: 'equiposIluminacionExplosion', label: 'G. SON A PRUEBA DE EXPLOSION LOS EQUIPOS DE ILUMINACION, Y LAS CONEXIONES DE LOS EQUIPOS' },\n  { id: 'equiposVentilacionExplosion', label: 'H. SON A PRUEBA DE EXPLOSION LOS EQUIPOS DE VENTILACION O SUMINISTRO DE AIRE FORZADO Y SUS CONEXIONES' },\n  { id: 'medidasSeguridadEquiposNoExplosion', label: 'I. EN CASO DE QUE LOS EQUIPOS NO SEAN A PRUEBA DE EXPLOSION SE SE TOMARON LAS MEDIDAS DE SEGURUDAD NECESARIA PARA EVITAR RIESGOS' },\n  { id: 'equiposVentilacionSuficientes', label: 'J. LOS EQUIPOS DE VENTILACION ESTAN DISPONIBLES Y SON SUFICIENTES' },\n  { id: 'chequeoVentilacionMecanica', label: 'CHEQUEO DE VENTILACION MECANICA' },\n  { id: 'chequeoVentilacionNatural', label: 'CHEQUEO DE VENTILACION (SOLO NATURAL)' },\n  { id: 'equiposRespiracionAutonoma', label: 'K. ESTAN DISPONIBLES EN EL SITIO EQUIPOS DE RESPIRACION AUTONOMA (AUTOCONTENIDO) EN CASO DE EMERGENCIA' },\n  { id: 'elementosAtencionEmergencias', label: 'L. SE CUENTA CON ELEMENTOS PARA ATENCION DE EMERGENCIAS EN EL AREA' },\n  { id: 'planEmergenciaRescate', label: 'M. SE CUENTA CON PLAN DE EMERGENCIA PARA RESCATE' },\n  { id: 'hojasSeguridadDisponibles', label: 'N. ESTAN DISPONIBLES LAS HOJAS DE SEGURIDAD DE PRODUCTOS QUIMICOS EN CASO DE USARSE.' },\n  { id: 'verificadoConexionesPuestaTierra', label: '√ë.SE HA VERIFICADO EL ESTADO DE CONEXIONES Y PUESTA A TIERRA DE EQUIPOS Y ELEMENTOS A USAR.' },\n  { id: 'vigiaPermanente', label: 'O.SE VERIFICA QUE PARA EL INGRESO A ESPACIOS CONFIANDOS SE CUENTE CON UN VIGIA PERMANENTE EN EL AREA' },\n  { id: 'herramientasAdecuadas', label: 'P. SE VERIFICO QUE LAS HERRAMIENTAS MANUALES Y OTROS ELEMENTOS SEAN LOS ADECUADOS PARA LAS CONDICIONES Y ATMOSFERAS DEL LUGAR' },\n  { id: 'personalSaludable', label: 'Q.EL PERSONAL QUE REALIZA EL TRABAJO SE ENCUENTRA EN CONDICIONES ADECUADAS DE SALUD PARA LA ACTIVIDAD' },\n  { id: 'verificadoEpp', label: 'R.SE VERIFICO EL EQUIPO Y ELEMENTOS DE PROTECCION PERSONAL A UTILIZAR' },\n  { id: 'circunstanciaModificadora', label: 'S.EXISTE ALGUNA CIRCUSTANCIA O FACTOR QUE PUEDA MODIFICAR EL TRABAJO' },\n  { id: 'equiposIntrinsecamenteSeguros', label: 'SE HA VERIFICADO QUE LOS EQUIPOS A USARSE SON INTRINSICAMENTE SEGUROS' },\n  { id: 'procedimientoComunicacion', label: 'SE CUENTA CON PROCEDMIENTO DE COMUNICACI√ìN CUAL ?' }\n];\n\nconst peligroSections: { title: string, items: string[] }[] = [\n    { title: \"Aislamiento y Preparaci√≥n del √Årea\", items: ['fuentesEnergiaAisladas', 'entradasSalidasFlujoBloqueadas', 'areaDelimitada'] },\n    { title: \"Personal y Entrenamiento\", items: ['ejecutantesConocenMedidas', 'ejecutantesEntrenados', 'personalSaludable', 'vigiaPermanente'] },\n    { title: \"Equipos y Monitoreo\", items: ['monitorAtmosferasCalibrado', 'equiposIluminacionExplosion', 'equiposVentilacionExplosion', 'medidasSeguridadEquiposNoExplosion', 'equiposVentilacionSuficientes', 'chequeoVentilacionMecanica', 'chequeoVentilacionNatural', 'equiposIntrinsecamenteSeguros'] },\n    { title: \"Emergencias y Rescate\", items: ['equiposRespiracionAutonoma', 'elementosAtencionEmergencias', 'planEmergenciaRescate'] },\n    { title: \"Materiales y Herramientas\", items: ['hojasSeguridadDisponibles', 'verificadoConexionesPuestaTierra', 'herramientasAdecuadas', 'verificadoEpp'] },\n    { title: \"Condiciones Adicionales\", items: ['circunstanciaModificadora', 'procedimientoComunicacion'] }\n];\n\nconst precaucionesControles = [\n    { id: 'despresurizar', label: 'DESPRESURIZAR' },\n    { id: 'revisarEquipos', label: 'REVISAR EQUIPOS Y HERRAMIENTAS' },\n    { id: 'monitoreoAtmosferas', label: 'MONITOREO DE ATMOSFERAS' },\n    { id: 'drenarVentilar', label: 'DRENAR Y VENTILAR' },\n    { id: 'aislamientoEnergias', label: 'AISLAMIENTO DE ENERGIAS' },\n    { id: 'aterrizarEquipo', label: 'ATERRIZAR EQUIPO' },\n    { id: 'equipoContraIncendio', label: 'EQUIPO CONTRA INCENDIO' },\n    { id: 'instalarLineasVida', label: 'INSTALAR LINEAS DE VIDA ADICIONALES' },\n    { id: 'usoEppsEspeciales', label: 'USO DE EPPS ESPECIALES' },\n    { id: 'hojaSeguridadMsds', label: 'HOJA DE SEGURIDAD MSDS' },\n    { id: 'bloqueoEtiquetado', label: 'BLOQUEO Y ETIQUETADO' },\n    { id: 'requiereVigia', label: 'REQUIERE VIGIA' },\n    { id: 'etiquetadoProductosQuimicos', label: 'ETIQUETADO PRODUCTOS QUIMICOS' },\n    { id: 'clasificacionResiduos', label: 'CLASIFICACION DE RESIDUOS' },\n    { id: 'senalizacion', label: 'SE√ëALIZACION' },\n    { id: 'sistemaContencionDerrames', label: 'SISTEMA DE CONTENCION DE DERRAMES' }\n];\n\nconst requerimientosEquipos = [\n    { id: 'arnesLineasVida', label: 'ARNES DE SEGURIDAD, LINEAS DE VIDA PARA PERSONAS QUE INGRESAN Y SALEN' },\n    { id: 'equiposIzar', label: 'EQUIPOS PARA IZAR (CUERDAS, CABLES, ETC)' },\n    { id: 'equiposComunicaciones', label: 'EQUIPOS DE COMUNICACIONES' },\n    { id: 'equiposAutonomos', label: 'EQUIPOS AUTONOMOS PARA PERSONAS DE ENTRADA Y SALIDA' },\n    { id: 'extintores', label: 'EXTINTORES' },\n    { id: 'ropaDotacionEspecial', label: 'ROPA Y DOTACION ESPECIAL DE PROTECCION' },\n    { id: 'bloqueosAislamientos', label: 'BLOQUEOS / AISLAMIENTOS /SALIDA ' },\n    { id: 'lineasElectricasChequeadas', label: 'L√çNEAS EL√âCTRICAS: EXPUESTAS, OCULTAS EST√ÅN CHEQUEADAS' },\n    { id: 'areaSegura', label: 'AREA SEGURA' },\n    { id: 'personalSeguridadCierre', label: 'PRESONAL DE SEGURIDAD DE CIERRE?' },\n    { id: 'equipoRecuperacionEmergencia', label: 'EQUIPO DE RECUPERACION DE EMERGENCIA' },\n    { id: 'iluminacionEquiposExplosion', label: 'ILUMINACION Y EQUIPOS A PRUEBA DE EXPLOSION' }\n];\n\nconst RadioGroupField = ({ id, label, value, onChange }: { id: string; label: string; value: 'si' | 'no' | 'na'; onChange: (value: 'si' | 'no' | 'na') => void; }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\nexport function AnexoConfinadoStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, anexoConfinado } = state;\n  \n  // Estado controlado para TODAS las secciones principales\n  const [openSections, setOpenSections] = React.useState<Record<string, boolean>>({\n    informacionGeneral: true,    // Informaci√≥n General abierta por defecto\n    identificacionPeligros: false,\n    precaucionesControles: false,\n    resultadosPruebas: false,\n    requerimientosEquipos: false,\n    pruebasPeriodicas: false,\n    autorizaciones: false,\n    // Tambi√©n para las subcategor√≠as de peligros\n    ...Object.fromEntries(peligroSections.map(section => [section.title, false]))\n  });\n  \n  const [isSignatureDialogOpen, setIsSignatureDialogOpen] = React.useState(false);\n  const [signingTarget, setSigningTarget] = React.useState<{ section: string; field: string; index?: number } | null>(null);\n\n  const toggleSection = (sectionId: string) => {\n    setOpenSections(prev => ({\n      ...prev,\n      [sectionId]: !prev[sectionId]\n    }));\n  };\n\n  // Funci√≥n principal para actualizar campos del anexo\n  const handleFieldChange = (field: string, value: any) => {\n    dispatch({\n      type: 'UPDATE_ANEXO_CONFINADO',\n      payload: { [field]: value }\n    });\n  };\n\n  // Funci√≥n para campos anidados (ej: emergencia.contacto)\n  const handleNestedFieldChange = (section: string, field: string, value: any) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    handleFieldChange(section, {\n      ...currentSection,\n      [field]: value\n    });\n  };\n\n  // Funci√≥n para campos anidados profundos (ej: cierre.autoridad.nombre)\n  const handleDeepNestedChange = (section: string, subSection: string, field: string, value: any) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    const currentSubSection = currentSection[subSection] || {};\n    \n    handleFieldChange(section, {\n      ...currentSection,\n      [subSection]: {\n        ...currentSubSection,\n        [field]: value\n      }\n    });\n  };\n\n  // Funci√≥n para listas (ej: validacion.autoridad[index])\n  const handleListChange = (section: string, listName: string, index: number, field: string, value: any) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    const currentList = [...(currentSection[listName] || [])];\n    \n    // Asegurar que el √≠ndice existe\n    while (currentList.length <= index) {\n      if (listName === 'pruebas') {\n        currentList.push({ \n          id: `prueba-${Date.now()}-${currentList.length}`, \n          hora: '', \n          lel: '', \n          o2: '', \n          h2s: '', \n          co: '', \n          firma: '' \n        });\n      } else {\n        currentList.push({ \n          dia: currentList.length + 1, \n          nombre: '', \n          firma: '', \n          fecha: '' \n        });\n      }\n    }\n    \n    currentList[index] = { ...currentList[index], [field]: value };\n    \n    handleFieldChange(section, {\n      ...currentSection,\n      [listName]: currentList\n    });\n  };\n\n  // Funci√≥n para agregar elementos a listas\n  const addToList = (section: string, listName: string, defaultItem: any) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    const currentList = [...(currentSection[listName] || [])];\n    \n    if (listName === 'pruebas' && currentList.length >= 4) {\n      return; // L√≠mite de 4 pruebas\n    }\n    \n    currentList.push(defaultItem);\n    handleFieldChange(section, {\n      ...currentSection,\n      [listName]: currentList\n    });\n  };\n\n  // Funci√≥n para remover elementos de listas\n  const removeFromList = (section: string, listName: string, index: number) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    const currentList = (currentSection[listName] || []).filter((_: any, i: number) => i !== index);\n    handleFieldChange(section, {\n      ...currentSection,\n      [listName]: currentList\n    });\n  };\n\n  const openSignatureDialog = (section: string, field: string, index?: number) => {\n    setSigningTarget({ section, field, index });\n    setIsSignatureDialogOpen(true);\n  };\n\n  const handleSaveSignature = (signature: string) => {\n    if (!signingTarget) return;\n    const { section, field, index } = signingTarget;\n\n    if (index !== undefined) {\n      // Para listas como validacion.autoridad[0].firma o pruebasGasesPeriodicas.pruebas[0].firma\n      handleListChange(section, field, index, 'firma', signature);\n    } else if (section.includes('.')) {\n      // Para campos anidados profundos como cierre.autoridad.firma\n      const [mainSection, subSection] = section.split('.');\n      handleDeepNestedChange(mainSection, subSection, 'firma', signature);\n    } else {\n      // Para campos directos como resultadosPruebasGases.firmaQuienRealiza\n      handleNestedFieldChange(section, 'firmaQuienRealiza', signature);\n    }\n\n    setIsSignatureDialogOpen(false);\n    setSigningTarget(null);\n  };\n\n  // SectionWrapper con estado controlado\n  const SectionWrapper: React.FC<{ title: string; children: React.ReactNode; sectionId: string }> = ({ title, children, sectionId }) => (\n    <Collapsible open={openSections[sectionId]} onOpenChange={() => toggleSection(sectionId)}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n\n  return (\n    <>\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Anexo de Espacios Confinados\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">\n          Complete la informaci√≥n requerida para trabajos en espacios confinados.\n        </p>\n      </div>\n\n      <SectionWrapper title=\"Informaci√≥n General del Anexo\" sectionId=\"informacionGeneral\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n          <div><Label>√Årea de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n          <div><Label>Equipo o √Årea Espec√≠fica:</Label><Input value={generalInfo.proceso || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n            <div><Label>Responsable (Nombre):</Label><Input value={generalInfo.responsable?.nombre || ''} readOnly disabled /></div>\n            <div><Label>Cargo:</Label><Input value={generalInfo.responsable?.cargo || ''} readOnly disabled /></div>\n            <div><Label>Compa√±√≠a:</Label><Input value={generalInfo.responsable?.compania || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n          <div>\n            <Label>En caso de emergencia contactar a:</Label>\n            <Input \n              value={anexoConfinado?.emergencia?.contacto || ''} \n              onChange={(e) => handleNestedFieldChange('emergencia', 'contacto', e.target.value)} \n            />\n          </div>\n          <div>\n            <Label>Tel√©fono:</Label>\n            <Input \n              value={anexoConfinado?.emergencia?.telefono || ''} \n              onChange={(e) => handleNestedFieldChange('emergencia', 'telefono', e.target.value)} \n            />\n          </div>\n        </div>\n      </SectionWrapper>\n\n      <SectionWrapper title=\"Identificaci√≥n de Peligros y Aspectos\" sectionId=\"identificacionPeligros\">\n        <div className=\"space-y-2\">\n            {peligroSections.map((section) => (\n                <Collapsible key={section.title} open={openSections[section.title]} onOpenChange={() => toggleSection(section.title)}>\n                    <CollapsibleTrigger asChild>\n                        <Button variant=\"ghost\" className=\"w-full justify-between p-4 border rounded-lg\">\n                            <span className=\"font-semibold text-gray-700\">{section.title}</span>\n                            <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n                        </Button>\n                    </CollapsibleTrigger>\n                    <CollapsibleContent className=\"p-4 border border-t-0 rounded-b-lg space-y-3\">\n                        {section.items.map(itemId => {\n                            const item = identificacionPeligros.find(p => p.id === itemId);\n                            if (!item) return null;\n                            return (\n                                <div key={item.id} className=\"space-y-2\">\n                                    <RadioGroupField\n                                        id={`peligro-${item.id}`}\n                                        label={item.label}\n                                        value={anexoConfinado?.identificacionPeligros?.[item.id] || 'na'}\n                                        onChange={(value) => handleNestedFieldChange('identificacionPeligros', item.id, value)}\n                                    />\n                                    {item.id === 'procedimientoComunicacion' && anexoConfinado?.identificacionPeligros?.procedimientoComunicacion === 'si' && (\n                                        <Input\n                                            className=\"ml-8 w-[calc(100%-2rem)]\"\n                                            placeholder=\"Cu√°l procedimiento de comunicaci√≥n?\"\n                                            value={anexoConfinado?.procedimientoComunicacionCual || ''}\n                                            onChange={(e) => handleFieldChange('procedimientoComunicacionCual', e.target.value)}\n                                        />\n                                    )}\n                                </div>\n                            );\n                        })}\n                    </CollapsibleContent>\n                </Collapsible>\n            ))}\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Precauciones y Controles Espec√≠ficos\" sectionId=\"precaucionesControles\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {precaucionesControles.map(item => (\n                <RadioGroupField \n                  key={item.id} \n                  id={`precaucion-${item.id}`} \n                  label={item.label} \n                  value={anexoConfinado?.precauciones?.[item.id] || 'na'} \n                  onChange={(value) => handleNestedFieldChange('precauciones', item.id, value)} \n                />\n            ))}\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Resultados de Pruebas de Gases\" sectionId=\"resultadosPruebas\">\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 items-end\">\n            <div>\n              <Label>LEL (0%)</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.lel || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'lel', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>O2 (19.5-22%)</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.o2 || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'o2', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>H2S (0-10 PPM)</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.h2s || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'h2s', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>CO (0-25 PPM)</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.co || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'co', e.target.value)} \n              />\n            </div>\n            <div className=\"col-span-2\">\n              <Label>Otros</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.otros || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'otros', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>Serial Monitor</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.serialMonitor || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'serialMonitor', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>Hora Prueba</Label>\n              <Input \n                type=\"time\" \n                value={anexoConfinado?.resultadosPruebasGases?.horaPrueba || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'horaPrueba', e.target.value)} \n              />\n            </div>\n            <div className=\"col-span-full\">\n              <Label>Nombre de quien realiza</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.nombreQuienRealiza || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'nombreQuienRealiza', e.target.value)} \n              />\n            </div>\n            <div className=\"col-span-full\">\n                <Button \n                  variant=\"outline\" \n                  className=\"w-full\" \n                  onClick={() => openSignatureDialog('resultadosPruebasGases', 'firmaQuienRealiza')}\n                >\n                  <Signature className=\"mr-2\"/>Firmar\n                </Button>\n                {anexoConfinado?.resultadosPruebasGases?.firmaQuienRealiza && (\n                  <img \n                    src={anexoConfinado.resultadosPruebasGases.firmaQuienRealiza} \n                    alt=\"Firma\" \n                    className=\"mt-2 border rounded-md max-h-20\" \n                  />\n                )}\n            </div>\n        </div>\n      </SectionWrapper>\n      \n       <SectionWrapper title=\"Requerimientos y Equipos Revisados\" sectionId=\"requerimientosEquipos\">\n         <div className=\"space-y-4\">\n           {requerimientosEquipos.map(item => (\n              <RadioGroupField \n                key={item.id} \n                id={`req-${item.id}`} \n                label={item.label} \n                value={anexoConfinado?.requerimientosEquipos?.[item.id] || 'na'} \n                onChange={(value) => handleNestedFieldChange('requerimientosEquipos', item.id, value)} \n              />\n           ))}\n         </div>\n         <div className='mt-4'>\n            <Label>Las pruebas de gases se deben realizar cada:</Label>\n            <Input \n              value={anexoConfinado?.pruebasGasesPeriodicas?.intervalo || ''} \n              onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'intervalo', e.target.value)} \n              placeholder=\"Ej: 30 minutos\"\n            />\n         </div>\n       </SectionWrapper>\n\n      <SectionWrapper title=\"Pruebas de Gases Peri√≥dicas Requeridas\" sectionId=\"pruebasPeriodicas\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n             <div>\n               <Label>Prueba realizada por:</Label>\n               <Input \n                 value={anexoConfinado?.pruebasGasesPeriodicas?.pruebaRealizadaPor || ''} \n                 onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'pruebaRealizadaPor', e.target.value)} \n               />\n             </div>\n             <div>\n               <Label>Serial Monitor:</Label>\n               <Input \n                 value={anexoConfinado?.pruebasGasesPeriodicas?.serialMonitor || ''} \n                 onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'serialMonitor', e.target.value)} \n               />\n             </div>\n             <div>\n               <Label>Marca:</Label>\n               <Input \n                 value={anexoConfinado?.pruebasGasesPeriodicas?.marca || ''} \n                 onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'marca', e.target.value)} \n               />\n             </div>\n             <div>\n               <Label>Fecha y Hora Calibraci√≥n:</Label>\n               <Input \n                 type=\"datetime-local\" \n                 value={anexoConfinado?.pruebasGasesPeriodicas?.fechaCalibracion || ''} \n                 onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'fechaCalibracion', e.target.value)} \n               />\n             </div>\n          </div>\n          \n          <Table className=\"mt-4\">\n            <TableHeader>\n              <TableRow>\n                <TableHead>Hora</TableHead>\n                <TableHead>LEL</TableHead>\n                <TableHead>O2</TableHead>\n                <TableHead>H2S</TableHead>\n                <TableHead>CO</TableHead>\n                <TableHead>Firma</TableHead>\n                <TableHead></TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {(anexoConfinado?.pruebasGasesPeriodicas?.pruebas || []).map((prueba, index) => (\n                <TableRow key={prueba.id}>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        type=\"time\" \n                        value={prueba.hora || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'hora', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        value={prueba.lel || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'lel', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        value={prueba.o2 || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'o2', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        value={prueba.h2s || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'h2s', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        value={prueba.co || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'co', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"icon\" \n                        onClick={() => openSignatureDialog('pruebasGasesPeriodicas', 'pruebas', index)}\n                      >\n                        <Signature className=\"h-4 w-4\"/>\n                      </Button>\n                    </TableCell>\n                    <TableCell>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"icon\" \n                        onClick={() => removeFromList('pruebasGasesPeriodicas', 'pruebas', index)}\n                      >\n                        <Trash2 className=\"h-4 w-4 text-destructive\"/>\n                      </Button>\n                    </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          {(anexoConfinado?.pruebasGasesPeriodicas?.pruebas?.length || 0) < 4 && (\n            <Button \n              size=\"sm\" \n              onClick={() => addToList('pruebasGasesPeriodicas', 'pruebas', { \n                id: `prueba-${Date.now()}`, \n                hora: '', \n                lel: '', \n                o2: '', \n                h2s: '', \n                co: '', \n                firma: '' \n              })} \n              className=\"mt-2\"\n            >\n              <Plus className=\"mr-2 h-4 w-4\"/>Agregar Prueba\n            </Button>\n          )}\n      </SectionWrapper>\n\n       <SectionWrapper title=\"Autorizaciones\" sectionId=\"autorizaciones\">\n        <div className=\"space-y-6\">\n          <div className=\"p-4 border rounded-lg\">\n              <p className=\"text-sm font-semibold mb-2\">Autoridad del √Årea</p>\n              <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Autoridad del √Årea...\"</p>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Input \n                  placeholder=\"Nombre\" \n                  value={anexoConfinado?.autoridadDelArea?.nombre || ''} \n                  onChange={e => handleNestedFieldChange('autoridadDelArea', 'nombre', e.target.value)} \n                />\n                <Input \n                  type=\"time\" \n                  placeholder=\"Hora\" \n                  value={anexoConfinado?.autoridadDelArea?.hora || ''} \n                  onChange={e => handleNestedFieldChange('autoridadDelArea', 'hora', e.target.value)} \n                />\n              </div>\n              <Button \n                variant=\"outline\" \n                className=\"w-full mt-4\" \n                onClick={() => openSignatureDialog('autoridadDelArea', 'firma')}\n              >\n                <Signature className=\"mr-2\"/>Firmar\n              </Button>\n              {anexoConfinado?.autoridadDelArea?.firma && (\n                <img \n                  src={anexoConfinado.autoridadDelArea.firma} \n                  alt=\"Firma\" \n                  className=\"mt-2 border rounded-md max-h-20\" \n                />\n              )}\n          </div>\n\n          <div className=\"p-4 border rounded-lg\">\n              <p className=\"text-sm font-semibold mb-2\">Responsable del Trabajo</p>\n              <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Responsable del Trabajo...\"</p>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Input \n                  placeholder=\"Nombre\" \n                  value={anexoConfinado?.responsableDelTrabajo?.nombre || ''} \n                  onChange={e => handleNestedFieldChange('responsableDelTrabajo', 'nombre', e.target.value)} \n                />\n                <Input \n                  type=\"time\" \n                  placeholder=\"Hora\" \n                  value={anexoConfinado?.responsableDelTrabajo?.hora || ''} \n                  onChange={e => handleNestedFieldChange('responsableDelTrabajo', 'hora', e.target.value)} \n                />\n              </div>\n              <Button \n                variant=\"outline\" \n                className=\"w-full mt-4\" \n                onClick={() => openSignatureDialog('responsableDelTrabajo', 'firma')}\n              >\n                <Signature className=\"mr-2\"/>Firmar\n              </Button>\n              {anexoConfinado?.responsableDelTrabajo?.firma && (\n                <img \n                  src={anexoConfinado.responsableDelTrabajo.firma} \n                  alt=\"Firma\" \n                  className=\"mt-2 border rounded-md max-h-20\" \n                />\n              )}\n          </div>\n\n          <div className=\"p-4 border rounded-lg\">\n              <p className=\"text-sm font-semibold mb-2\">Supervisor de Trabajo en Espacios Confinados</p>\n              <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Supervisor...\"</p>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Input \n                  placeholder=\"Nombre\" \n                  value={anexoConfinado?.supervisorTrabajo?.nombre || ''} \n                  onChange={e => handleNestedFieldChange('supervisorTrabajo', 'nombre', e.target.value)} \n                />\n                <Input \n                  type=\"time\" \n                  placeholder=\"Hora\" \n                  value={anexoConfinado?.supervisorTrabajo?.hora || ''} \n                  onChange={e => handleNestedFieldChange('supervisorTrabajo', 'hora', e.target.value)} \n                />\n              </div>\n              <Button \n                variant=\"outline\" \n                className=\"w-full mt-4\" \n                onClick={() => openSignatureDialog('supervisorTrabajo', 'firma')}\n              >\n                <Signature className=\"mr-2\"/>Firmar\n              </Button>\n              {anexoConfinado?.supervisorTrabajo?.firma && (\n                <img \n                  src={anexoConfinado.supervisorTrabajo.firma} \n                  alt=\"Firma\" \n                  className=\"mt-2 border rounded-md max-h-20\" \n                />\n              )}\n          </div>\n        </div>\n      </SectionWrapper>\n    </div>\n    <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Registrar Firma</DialogTitle>\n        </DialogHeader>\n        <SignaturePad onSave={handleSaveSignature} />\n      </DialogContent>\n    </Dialog>\n    </>\n  );\n}\n\n    "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5733, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoEnergiaStep.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField = ({ id, label, value, onChange }: { id: string; label: string; value: string; onChange: (value: string) => void; }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\n\nexport function AnexoEnergiaStep() {\n    const { state, dispatch } = usePermitForm();\n    const { generalInfo, anexoEnergias } = state;\n\n    const handleFieldChange = (section: string, field: string, value: any) => {\n        const currentSection = (anexoEnergias as any)[section] || {};\n        dispatch({\n            type: 'UPDATE_ANEXO_ENERGIA',\n            payload: {\n                [section]: { ...currentSection, [field]: value }\n            }\n        });\n    };\n\n    const handleCheckboxGroupChange = (section: string, field: string, checked: boolean) => {\n        const currentSection = (anexoEnergias as any)[section] || {};\n        handleFieldChange(section, field, checked);\n    };\n    \n    const handleInputChange = (field: string, value: string) => {\n         dispatch({\n            type: 'UPDATE_ANEXO_ENERGIA',\n            payload: { [field]: value }\n        });\n    }\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n                    Anexo de Trabajos con Energ√≠as\n                </h2>\n                <p className=\"text-muted-foreground text-sm\">\n                    Complete la informaci√≥n requerida para trabajos con energ√≠as peligrosas.\n                </p>\n            </div>\n\n            <SectionWrapper title=\"Informaci√≥n General\" defaultOpen>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n                    <div><Label>√Årea de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n                    <div><Label>Equipo o √Årea Espec√≠fica:</Label><Input value={generalInfo.proceso || ''} readOnly disabled /></div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n                    <div><Label>Responsable (Nombre):</Label><Input value={generalInfo.responsable?.nombre || ''} readOnly disabled /></div>\n                    <div><Label>Cargo:</Label><Input value={generalInfo.responsable?.cargo || ''} readOnly disabled /></div>\n                    <div><Label>Compa√±√≠a:</Label><Input value={generalInfo.responsable?.compania || ''} readOnly disabled /></div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                    <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoEnergias?.emergencia?.contacto || ''} onChange={(e) => handleFieldChange('emergencia', 'contacto', e.target.value)} /></div>\n                    <div><Label>Tel√©fono:</Label><Input value={anexoEnergias?.emergencia?.telefono || ''} onChange={(e) => handleFieldChange('emergencia', 'telefono', e.target.value)} /></div>\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajos en Caliente\">\n                <div className=\"space-y-3\">\n                    <RadioGroupField id=\"distanciaSeguridad\" label=\"A.- Regla de distancia de seguridad de 11 m de materiales combustibles e inflamables\" value={anexoEnergias?.trabajosEnCaliente?.distanciaSeguridad as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'distanciaSeguridad', value)} />\n                    <RadioGroupField id=\"medicionAtmosfera\" label=\"B.- Medici√≥n de atm√≥sfera explosiva (uso de medidor de atm√≥sferas)\" value={anexoEnergias?.trabajosEnCaliente?.medicionAtmosfera as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'medicionAtmosfera', value)} />\n                    <RadioGroupField id=\"aislarArea\" label=\"C.- Aislar el √°rea de trabajo por medio de biombos, lonas, mamparas\" value={anexoEnergias?.trabajosEnCaliente?.aislarArea as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'aislarArea', value)} />\n                    <RadioGroupField id=\"taparAberturas\" label=\"D.- Tapar toda abertura existente a fin de impedir dispersi√≥n de chispas\" value={anexoEnergias?.trabajosEnCaliente?.taparAberturas as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'taparAberturas', value)} />\n                    <RadioGroupField id=\"extintores\" label=\"E.- Extintores port√°tiles en el √°rea de trabajo\" value={anexoEnergias?.trabajosEnCaliente?.extintores as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'extintores', value)} />\n                    <RadioGroupField id=\"vigiaFuego\" label=\"F - Vig√≠a o supervisor de fuego de incendio\" value={anexoEnergias?.trabajosEnCaliente?.vigiaFuego as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'vigiaFuego', value)} />\n                    <RadioGroupField id=\"personalCapacitado\" label=\"G - Personal capacitado, competente y entrenado\" value={anexoEnergias?.trabajosEnCaliente?.personalCapacitado as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'personalCapacitado', value)} />\n                    <RadioGroupField id=\"listasChequeo\" label=\"H - Listas de chequeo pre-operacional de equipos\" value={anexoEnergias?.trabajosEnCaliente?.listasChequeo as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'listasChequeo', value)} />\n                    <div className=\"flex items-center gap-2 pt-2\"><Label htmlFor=\"calienteOtro\">Otro (Cual):</Label><Input id=\"calienteOtro\" value={anexoEnergias?.trabajosEnCaliente?.otro as string || ''} onChange={(e) => handleFieldChange('trabajosEnCaliente', 'otro', e.target.value)} /></div>\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajos con Energ√≠as Peligrosas\">\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n                    {['mecanica', 'neumatica', 'hidraulica', 'agua', 'vapor', 'termica', 'quimica'].map(id => (\n                        <div key={id} className=\"flex items-center space-x-2\">\n                            <Checkbox id={`energia_${id}`} checked={(anexoEnergias?.energiasPeligrosas?.[id] as boolean) || false} onCheckedChange={(checked) => handleCheckboxGroupChange('energiasPeligrosas', id, !!checked)} />\n                            <Label htmlFor={`energia_${id}`} className=\"capitalize\">{id}</Label>\n                        </div>\n                    ))}\n                </div>\n                <div className=\"flex items-center gap-2 mb-6\"><Label htmlFor=\"energiaOtra\">Otra:</Label><Input id=\"energiaOtra\" value={anexoEnergias?.energiasPeligrosas?.otra as string || ''} onChange={(e) => handleFieldChange('energiasPeligrosas', 'otra', e.target.value)} /></div>\n\n                <div className=\"space-y-3\">\n                    <RadioGroupField id=\"procedimientoLOTO\" label=\"A.- Se cuenta procedimiento LO/TO\" value={anexoEnergias?.procedimientoLOTO?.procedimientoLOTO as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'procedimientoLOTO', value)} />\n                    <RadioGroupField id=\"identificadoFuentes\" label=\"B.- Se han identificado las fuentes de energ√≠a\" value={anexoEnergias?.procedimientoLOTO?.identificadoFuentes as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'identificadoFuentes', value)} />\n                    <RadioGroupField id=\"purgadoLimpieza\" label=\"C.- Purgado o limpieza del sistema\" value={anexoEnergias?.procedimientoLOTO?.purgadoLimpieza as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'purgadoLimpieza', value)} />\n                    <RadioGroupField id=\"corteVisible\" label=\"1. Corte visible de fuentes de energ√≠a\" value={anexoEnergias?.procedimientoLOTO?.corteVisible as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'corteVisible', value)} />\n                    <RadioGroupField id=\"instalarBloqueo\" label=\"2. Instalar dispositivos de bloqueo y tarjeta de bloqueo.\" value={anexoEnergias?.procedimientoLOTO?.instalarBloqueo as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'instalarBloqueo', value)} />\n                    <RadioGroupField id=\"disiparEnergia\" label=\"4. Disipar cualquier tipo de energ√≠a (puesta a tierra y en cortocircuito).\" value={anexoEnergias?.procedimientoLOTO?.disiparEnergia as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'disiparEnergia', value)} />\n                    <RadioGroupField id=\"verificarAusencia\" label=\"3. Verificar ausencia de fuentes de energ√≠a\" value={anexoEnergias?.procedimientoLOTO?.verificarAusencia as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'verificarAusencia', value)} />\n                    <RadioGroupField id=\"senalizarZona\" label=\"5. Se√±alizar y delimitar zona de trabajo.\" value={anexoEnergias?.procedimientoLOTO?.senalizarZona as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'senalizarZona', value)} />\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajos con Energ√≠a El√©ctrica\">\n                <Table>\n                    <TableHeader>\n                        <TableRow>\n                            <TableHead>Nivel de Tensi√≥n</TableHead>\n                            <TableHead>L√≠mite de aproximaci√≥n seguro</TableHead>\n                            <TableHead>L√≠mite de aproximaci√≥n restringido</TableHead>\n                            <TableHead>L√≠mite de aproximaci√≥n t√©cnico</TableHead>\n                        </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                        <TableRow><TableCell>0 V - 50 V</TableCell><TableCell>3,0 m</TableCell><TableCell>Evitar contacto</TableCell><TableCell>Evitar contacto</TableCell></TableRow>\n                        <TableRow><TableCell>51 V - 300 V</TableCell><TableCell>3,0 m</TableCell><TableCell>1,0 m</TableCell><TableCell>Evitar contacto</TableCell></TableRow>\n                        <TableRow><TableCell>301 V - 750 V</TableCell><TableCell>3,0 m</TableCell><TableCell>1,0 m</TableCell><TableCell>0,3 m</TableCell></TableRow>\n                        <TableRow><TableCell>751 V - 15 kV</TableCell><TableCell>3,0 m</TableCell><TableCell>1,5 m</TableCell><TableCell>0,6 m</TableCell></TableRow>\n                        <TableRow><TableCell>15,1 kV - 36 kV</TableCell><TableCell>3,0 m</TableCell><TableCell>1,8 m</TableCell><TableCell>0,7 m</TableCell></TableRow>\n                        <TableRow><TableCell>36,1 kV - 72,5 kV</TableCell><TableCell>3,0 m</TableCell><TableCell>2,5 m</TableCell><TableCell>0,8 m</TableCell></TableRow>\n                        <TableRow><TableCell>72,6 kV - 145 kV</TableCell><TableCell>3,0 m</TableCell><TableCell>3,0 m</TableCell><TableCell>1,0 m</TableCell></TableRow>\n                    </TableBody>\n                </Table>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Tensi√≥n a la cual el personal estar√° expuesto\">\n                 <div className=\"space-y-3\">\n                    <RadioGroupField id=\"muyBajaTension\" label=\"Muy baja tensi√≥n (Tensiones menores de 25 V).\" value={anexoEnergias?.tensionExpuesta?.muyBaja as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'muyBaja', value)} />\n                    <RadioGroupField id=\"bajaTension\" label=\"Baja tensi√≥n (Tensi√≥n nominal mayor o igual 25 V y menor o igual a 1000 V).\" value={anexoEnergias?.tensionExpuesta?.baja as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'baja', value)} />\n                    <RadioGroupField id=\"mediaTension\" label=\"Media tensi√≥n (Tensi√≥n nominal superior a 1000 V e inferior a 57,5 kV).\" value={anexoEnergias?.tensionExpuesta?.media as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'media', value)} />\n                    <RadioGroupField id=\"altaTension\" label=\"Alta tensi√≥n (Tensiones mayores o iguales a 57,5 kV y menores o iguales a 230 kV).\" value={anexoEnergias?.tensionExpuesta?.alta as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'alta', value)} />\n                    <RadioGroupField id=\"extraAltaTension\" label=\"Extra alta tensi√≥n (Tensiones superiores a 230kV)\" value={anexoEnergias?.tensionExpuesta?.extraAlta as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'extraAlta', value)} />\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Planeaci√≥n\">\n                <div className=\"space-y-3\">\n                    <RadioGroupField id=\"personalHabilitado\" label=\"Personal habilitado, certificado de competencia laboral vigente (Conte, Conaltel, Matr√≠cula profesional)\" value={anexoEnergias?.planeacion?.personalHabilitado as string} onChange={(value) => handleFieldChange('planeacion', 'personalHabilitado', value)} />\n                    <RadioGroupField id=\"viabilidadTecnica\" label=\"El personal habilitado eval√∫a la viabilidad t√©cnica (visita previa) y el riesgo asociado para las personas y para el sistema, cumpliendo las etapas de diagn√≥stico, planeaci√≥n y ejecuci√≥n de trabajos.\" value={anexoEnergias?.planeacion?.viabilidadTecnica as string} onChange={(value) => handleFieldChange('planeacion', 'viabilidadTecnica', value)} />\n                    <RadioGroupField id=\"noSimultaneo\" label=\"No se realizan trabajos simult√°neos sin y con tensi√≥n por el mismo trabajador en la misma √°rea de trabajo.\" value={anexoEnergias?.planeacion?.noSimultaneo as string} onChange={(value) => handleFieldChange('planeacion', 'noSimultaneo', value)} />\n                    <RadioGroupField id=\"autorizacionMantenimiento\" label=\"Autorizaci√≥n del √°rea de mantenimiento\" value={anexoEnergias?.planeacion?.autorizacionMantenimiento as string} onChange={(value) => handleFieldChange('planeacion', 'autorizacionMantenimiento', value)} />\n                    <RadioGroupField id=\"revisionInfo\" label=\"Revisi√≥n de informaci√≥n t√©cnica del sistema (diagrama unifilar, planos)\" value={anexoEnergias?.planeacion?.revisionInfo as string} onChange={(value) => handleFieldChange('planeacion', 'revisionInfo', value)} />\n                    <RadioGroupField id=\"procedimientoNormalizado\" label=\"Se cuenta con un procedimiento normalizado para realizar la actividad y ATS\" value={anexoEnergias?.planeacion?.procedimientoNormalizado as string} onChange={(value) => handleFieldChange('planeacion', 'procedimientoNormalizado', value)} />\n                    <RadioGroupField id=\"supervisionControl\" label=\"Se realizar supervisi√≥n y control en el sitio de trabajo considerando en forma prioritaria la detecci√≥n y el control de los riesgos, vigilando el cumplimiento estricto de las normas y procedimientos de seguridad aplicables\" value={anexoEnergias?.planeacion?.supervisionControl as string} onChange={(value) => handleFieldChange('planeacion', 'supervisionControl', value)} />\n                </div>\n                <div className=\"mt-6\">\n                    <Label>M√©todo de trabajo</Label>\n                    <div className=\"flex gap-4 p-4 border rounded-md\">\n                        <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoSinTension\" checked={anexoEnergias?.metodoTrabajo?.sinTension || false} onCheckedChange={(checked) => handleFieldChange('metodoTrabajo', 'sinTension', !!checked)} /><Label htmlFor=\"metodoSinTension\">Sin tensi√≥n</Label></div>\n                        <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoConTension\" checked={anexoEnergias?.metodoTrabajo?.conTension || false} onCheckedChange={(checked) => handleFieldChange('metodoTrabajo', 'conTension', !!checked)} /><Label htmlFor=\"metodoConTension\">Con tensi√≥n</Label></div>\n                    </div>\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajo con Tensi√≥n (TCT) - igual o superior a 25 voltios\">\n                <div className=\"flex items-center space-x-2 mb-4\">\n                    <Checkbox id=\"trabajoConTensionCheck\" checked={anexoEnergias?.trabajoConTension?.trabajoConTensionCheck as boolean} onCheckedChange={(checked) => handleFieldChange('trabajoConTension', 'trabajoConTensionCheck', !!checked)} />\n                    <Label htmlFor=\"trabajoConTensionCheck\">Trabajo con tensi√≥n - TCT, igual o superior a 25 voltios</Label>\n                </div>\n                 {(anexoEnergias?.trabajoConTension?.trabajoConTensionCheck) && <div className=\"space-y-3\">\n                    <Label>M√©todo de trabajo</Label>\n                    <div className=\"flex gap-4 p-4 border rounded-md\">\n                       <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoAPotencial\" checked={anexoEnergias?.trabajoConTension?.aPotencial as boolean} onCheckedChange={(checked) => handleFieldChange('trabajoConTension', 'aPotencial', !!checked)} /><Label htmlFor=\"metodoAPotencial\">A potencial</Label></div>\n                       <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoADistancia\" checked={anexoEnergias?.trabajoConTension?.aDistancia as boolean} onCheckedChange={(checked) => handleFieldChange('trabajoConTension', 'aDistancia', !!checked)} /><Label htmlFor=\"metodoADistancia\">A distancia</Label></div>\n                       <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoAContacto\" checked={anexoEnergias?.trabajoConTension?.aContacto as boolean} onCheckedChange={(checked) => handleFieldChange('trabajoConTension', 'aContacto', !!checked)} /><Label htmlFor=\"metodoAContacto\">A contacto</Label></div>\n                    </div>\n                    <RadioGroupField id=\"respetarDistancias\" label=\"Respetar distancias m√≠nimas de seguridad con base en lo establecido en RETIE tablas 13.7, 13.8 y 18.1 (L√≠mite de aproximaci√≥n seguro, restringido, t√©cnico).\" value={anexoEnergias?.trabajoConTension?.respetarDistancias as string} onChange={(value) => handleFieldChange('trabajoConTension', 'respetarDistancias', value)} />\n                    <RadioGroupField id=\"usoEppTCT\" label=\"Uso de EPP especifico para trabajos con circuitos energizados...\" value={anexoEnergias?.trabajoConTension?.usoEpp as string} onChange={(value) => handleFieldChange('trabajoConTension', 'usoEpp', value)} />\n                </div>}\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajo sin Tensi√≥n\">\n                 <div className=\"space-y-3\">\n                    <RadioGroupField id=\"trabajoSinTensionCheck\" label=\"Trabajo sin tensi√≥n\" value={anexoEnergias?.trabajoSinTension?.trabajoSinTensionCheck as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'trabajoSinTensionCheck', value)} />\n                    <RadioGroupField id=\"analizarFuentes\" label=\"Analizar fuentes de energ√≠a (fichas y diagrama de bloqueo).\" value={anexoEnergias?.trabajoSinTension?.analizarFuentes as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'analizarFuentes', value)} />\n                    <RadioGroupField id=\"comprobarNadieExpuesto\" label=\"Comprobar que nadie este expuesto a peligros.\" value={anexoEnergias?.trabajoSinTension?.comprobarNadieExpuesto as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'comprobarNadieExpuesto', value)} />\n                    <RadioGroupField id=\"aplicarLOTO\" label=\"Aplicar procedimiento de bloqueo y aislamiento de energ√≠as, (Anexo 3). Hasta tanto no se haya aplicado a cabalidad las 5 reglas de oro y durante la aplicaci√≥n de las mismas, se debe considerar el sistema energizado y cumplir los controles establecidos para sistemas energizados.\" value={anexoEnergias?.trabajoSinTension?.aplicarLOTO as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'aplicarLOTO', value)} />\n                    <RadioGroupField id=\"usoEppSinTension\" label=\"Uso de EPP especifico para trabajos con circuitos energizados (aplica durante aplicaci√≥n de 5 reglas de oro)...\" value={anexoEnergias?.trabajoSinTension?.usoEpp as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'usoEpp', value)} />\n                 </div>\n            </SectionWrapper>\n             <div className=\"mt-4\">\n                <Label>OBSERVACIONES / SUPERVISI√ìN DEL TRABAJO CON ALG√öN TIPO DE ENERG√çA</Label>\n                <Input value={anexoEnergias?.observaciones || ''} onChange={(e) => handleInputChange('observaciones', e.target.value)} />\n            </div>\n\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7296, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoIzajeStep.tsx"],"sourcesContent":["\n'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown, Signature } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport type { AutorizacionPersona, ValidacionDiaria } from '@/types';\nimport { Textarea } from '@/components/ui/textarea';\nimport Image from 'next/image';\n\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField: React.FC<{ id: string; label: string; value: string; onChange: (value: string) => void; }> = ({ id, label, value, onChange }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\nconst accionRealizarOptions = [\n    { id: 'levantar', label: 'Levantar' },\n    { id: 'trasladar', label: 'Trasladar' },\n    { id: 'montar', label: 'Montar' },\n    { id: 'desmontar', label: 'Desmontar' },\n    { id: 'cargar', label: 'Cargar' },\n    { id: 'descargar', label: 'Descargar' },\n];\n\nconst pesoCargaOptions = [\n    { id: 'menor1000', label: 'Menor a 1000 kg' },\n    { id: 'entre1000y2000', label: 'Entre 1000 kg y 2000 kg' },\n    { id: 'entre2000y3000', label: 'Entre 2000 kg y 3000 kg' },\n    { id: 'entre3000y4000', label: 'Entre 3000 kg y 4000 kg' },\n    { id: 'entre4000y5000', label: 'Entre 4000 kg y 5000 kg' },\n    { id: 'mas5000', label: 'Mas de 5000' },\n];\n\nconst equipoUtilizarOptions = [\n    { id: 'montacargas', label: 'Montacargas' },\n    { id: 'camionGrua', label: 'Cami√≥n Gr√∫a' },\n    { id: 'gruaMovil', label: 'Gr√∫a M√≥vil' },\n    { id: 'torreGrua', label: 'Torre Gr√∫a' },\n    { id: 'retroexcavadora', label: 'Retroexcavadora' },\n    { id: 'telehandler', label: 'Telehandler' },\n];\n\nconst aspectosRequeridos = [\n    { id: 'terrenoEstabilizado', label: 'A. Est√° estabilizado el terreno donde se encuentra el equipo de izaje.' },\n    { id: 'operadorVisualiza', label: 'B. El operador visualiza bien la carga y la operaci√≥n que va a realizar.' },\n    { id: 'calculoTecnico', label: 'C. Se calculo tecnicamente la maniobra. (Se cuenta con plan de izaje de cargas).' },\n    { id: 'areaSenalizada', label: 'D. Se encuentra se√±alizada y demarcada el √°rea de trabajo.' },\n    { id: 'capacidadVerificada', label: 'E. Se verifico la capacidad de cargue del equipo de izaje.' },\n    { id: 'curiososRetirados', label: 'F. Se retiraron los curiosos del √°rea de izaje y del radio del equipo de izaje.' },\n    { id: 'comunicacionClara', label: 'G. Existe comunicaci√≥n clara entre el operador, el encargado de la actividad y quienes participan en ella.' },\n    { id: 'atsRealizado', label: 'H. Se realizo el ATS (Analisis de Trabajo Seguro) para la ejecuci√≥n de la actividad.' },\n    { id: 'elementosBuenEstado', label: 'I. Se encuentran en buen estado las eslingas, aparejos y dem√°s elementos de sujeci√≥n o accesorios de izaje.' },\n    { id: 'polinesBuenEstado', label: 'J. Los polines para nivelaci√≥n de las gr√∫as est√°n en buen estado.' },\n    { id: 'polinesEstables', label: 'K. Los polines quedan estables con respecto al terreno.' },\n    { id: 'areaDespejada', label: 'L. Est√° dispuesta y despejada el √°rea donde se colocar√°n los elementos a izar.' },\n    { id: 'noPersonasBajoCarga', label: 'M. No existen personas bajo la carga izada.' },\n    { id: 'areaMovimientoEvaluada', label: 'N. Se evalu√≥ el √°rea donde se va a llevar la carga izada y el √°rea de movimiento de la carga.' },\n    { id: 'distanciaRedesElectricas', label: 'O. La actividad esta realiz√°ndose con la distancia de redes √©lectricas recomendada?' },\n    { id: 'condicionesClimaticas', label: 'P. Las condiciones climiticas son buenas para la realizaci√≥n de la actividad?' },\n    { id: 'equipoTierra', label: 'Q. El equipo tiene conexi√≥n a tierra?' },\n    { id: 'sinMaterialCaida', label: 'R. Se verifico que no halla ningun material que pudiera caer arriba de la carga al ser izada?' },\n    { id: 'senalizadorCapacitado', label: 'S. Hay un se√±alizador capacitado y entrenado para la actividad?' },\n    { id: 'colaboradoresAfiliados', label: 'T. Se verifico que los colaboradores est√©n afiliados al Sistema de Seguridad Social (EPS, ARL, AFP).' },\n];\n\nconst precaucionesControles = [\n    { id: 'inspeccionGrua', label: 'INSPECCI√ìN GR√öA/APAREJOS' },\n    { id: 'vigiaLineasElectricas', label: 'VIG√çA PARA L√çNEAS EL√âCTRICAS' },\n    { id: 'capacidadVsCarga', label: 'CAPACIDAD VS CARGA & LMI' },\n    { id: 'apoyoTerreno', label: 'APOYO DEL TERRENO' },\n    { id: 'certificacionOperador', label: 'CERTIFICACI√ìN OPERADOR-RIGGER' },\n    { id: 'comunicacionRadialLuminica', label: 'COMUNICACI√ìN RADIAL/LUM√çNICA' },\n    { id: 'planIzaje', label: 'PLAN DE IZAJE' },\n    { id: 'planRescate', label: 'PLAN DE RESCATE' },\n    { id: 'senalizacionDemarcacion', label: 'SE√ëALIZACI√ìN Y DEMARCACION AREA' },\n    { id: 'eppObligatorio', label: 'EPP OBLIGATORIO' },\n    { id: 'estabilizadoresTerreno', label: 'ESTABILIZADORES & TERRENO' },\n    { id: 'climaSeguro', label: 'CLIMA SEGURO' },\n];\n\nexport function AnexoIzajeStep() {\n    const { state, dispatch } = usePermitForm();\n    const { generalInfo, anexoIzaje } = state;\n    const [isSignatureDialogOpen, setIsSignatureDialogOpen] = React.useState(false);\n    const [signingTarget, setSigningTarget] = React.useState<{ section: string; field?: string; index?: number } | null>(null);\n\n    const handleUpdate = (payload: any) => {\n        dispatch({ type: 'UPDATE_ANEXO_IZAJE', payload });\n    };\n\n    const handleNestedChange = (section: keyof typeof anexoIzaje, field: string, value: any) => {\n        handleUpdate({ [section]: { ...(anexoIzaje as any)[section], [field]: value } });\n    };\n    \n    const handleCheckboxGroupChange = (section: 'informacionGeneral', subSection: 'accion' | 'pesoCarga' | 'equipoUtilizar', field: string, value: boolean) => {\n        const currentSubSection = (anexoIzaje[section] as any)?.[subSection] || {};\n        handleNestedChange(section, subSection, { ...currentSubSection, [field]: value });\n    };\n\n    const handleListChange = (section: 'validacion', list: 'autoridad' | 'responsable', index: number, field: keyof ValidacionDiaria, value: string) => {\n        const currentList = [...((anexoIzaje[section] as any)?.[list] || [])];\n        currentList[index] = { ...currentList[index], [field]: value };\n        handleNestedChange(section, list, currentList);\n    };\n\n    React.useEffect(() => {\n        if (!anexoIzaje.validacion || !anexoIzaje.validacion.autoridad || anexoIzaje.validacion.autoridad.length === 0) {\n            const authorityValidation = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n            const responsibleValidation = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n            handleUpdate({ validacion: { autoridad: authorityValidation, responsable: responsibleValidation } });\n        }\n    }, [anexoIzaje.validacion]);\n\n    const openSignatureDialog = (section: any, field?: string, index?: number) => {\n        setSigningTarget({ section, field, index });\n        setIsSignatureDialogOpen(true);\n    };\n\n    const handleSaveSignature = (signature: string) => {\n        if (!signingTarget) return;\n        const { section, field, index } = signingTarget;\n    \n        if (section.startsWith('validacion.')) {\n            const [valSection, list] = section.split('.');\n            handleListChange(valSection as 'validacion', list as 'autoridad' | 'responsable', index!, 'firma', signature);\n        } else if (section.startsWith('cierre.')) {\n            const [cierreSection, subSection] = section.split('.');\n            handleNestedChange('cierre', subSection, { ...((anexoIzaje.cierre as any)?.[subSection] || {}), firma: signature });\n        } else if (section === 'cancelacion') {\n             handleNestedChange('cancelacion', 'firma', signature);\n        } else {\n             handleNestedChange(section as any, 'firma', signature);\n        }\n        \n        setIsSignatureDialogOpen(false);\n    };\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">Anexo de Izaje de Cargas</h2>\n                <p className=\"text-muted-foreground text-sm\">Complete la informaci√≥n requerida para el izaje de cargas.</p>\n            </div>\n\n            <SectionWrapper title=\"Informaci√≥n General del Anexo\" defaultOpen>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n                    <div><Label>√Årea de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n                </div>\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                    <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoIzaje.emergencia?.contacto || ''} onChange={(e) => handleNestedChange('emergencia', 'contacto', e.target.value)} /></div>\n                    <div><Label>Tel√©fono:</Label><Input value={anexoIzaje.emergencia?.telefono || ''} onChange={(e) => handleNestedChange('emergencia', 'telefono', e.target.value)} /></div>\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Informaci√≥n de la Carga y Equipo\">\n                 <div className=\"space-y-4\">\n                    <div>\n                        <Label className=\"font-semibold\">Acci√≥n a Realizar</Label>\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                            {accionRealizarOptions.map(o => (\n                                <div key={o.id} className=\"flex items-center gap-2\"><Checkbox id={`accion-${o.id}`} checked={anexoIzaje.informacionGeneral?.accion?.[o.id] || false} onCheckedChange={(c) => handleCheckboxGroupChange('informacionGeneral', 'accion', o.id, !!c)} /><Label htmlFor={`accion-${o.id}`}>{o.label}</Label></div>\n                            ))}\n                        </div>\n                    </div>\n                     <div>\n                        <Label className=\"font-semibold\">Peso de la Carga</Label>\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                             {pesoCargaOptions.map(o => (\n                                <div key={o.id} className=\"flex items-center gap-2\"><Checkbox id={`peso-${o.id}`} checked={anexoIzaje.informacionGeneral?.pesoCarga?.[o.id] || false} onCheckedChange={(c) => handleCheckboxGroupChange('informacionGeneral', 'pesoCarga', o.id, !!c)} /><Label htmlFor={`peso-${o.id}`}>{o.label}</Label></div>\n                            ))}\n                        </div>\n                    </div>\n                     <div>\n                        <Label className=\"font-semibold\">Equipo a Utilizar</Label>\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                             {equipoUtilizarOptions.map(o => (\n                                <div key={o.id} className=\"flex items-center gap-2\"><Checkbox id={`equipo-${o.id}`} checked={anexoIzaje.informacionGeneral?.equipoUtilizar?.[o.id] || false} onCheckedChange={(c) => handleCheckboxGroupChange('informacionGeneral', 'equipoUtilizar', o.id, !!c)} /><Label htmlFor={`equipo-${o.id}`}>{o.label}</Label></div>\n                            ))}\n                        </div>\n                    </div>\n                    <div>\n                        <Label htmlFor=\"capacidadEquipo\" className=\"font-semibold\">Capacidad del Equipo</Label>\n                        <Input id=\"capacidadEquipo\" value={anexoIzaje.informacionGeneral?.capacidadEquipo || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'capacidadEquipo', e.target.value)} />\n                    </div>\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Aspectos Requeridos para Realizar Izaje\">\n                <div className=\"space-y-2\">\n                    {aspectosRequeridos.map(a => (\n                        <RadioGroupField key={a.id} id={`aspecto-${a.id}`} label={a.label} value={anexoIzaje.aspectosRequeridos?.[a.id] || 'na'} onChange={(v) => handleNestedChange('aspectosRequeridos', a.id, v)} />\n                    ))}\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Precauciones y Controles Espec√≠ficos\">\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                    {precaucionesControles.map(p => (\n                        <div key={p.id} className=\"flex items-center gap-2\"><Checkbox id={`preca-${p.id}`} checked={anexoIzaje.precauciones?.[p.id] || false} onCheckedChange={(c) => handleNestedChange('precauciones', p.id, !!c)} /><Label htmlFor={`preca-${p.id}`}>{p.label}</Label></div>\n                    ))}\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Autorizaciones\">\n                 <div className=\"space-y-6\">\n                    <div className=\"p-4 border rounded-lg\">\n                        <p className=\"text-sm font-semibold mb-2\">Autoridad del √Årea</p>\n                        <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Autoridad del Area, estoy enterado del trabajo a realizar y apruebo su ejecucion bajo las medidas de seguridad contempladas en este permiso y sus documentos  complementarios.\"</p>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <Input placeholder=\"Nombre Completo\" value={anexoIzaje.autoridadArea?.nombre || ''} onChange={(e) => handleNestedChange('autoridadArea', 'nombre', e.target.value)} />\n                            <Input type=\"time\" placeholder=\"Hora\" value={anexoIzaje.autoridadArea?.hora || ''} onChange={(e) => handleNestedChange('autoridadArea', 'hora', e.target.value)} />\n                        </div>\n                        <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('autoridadArea')}><Signature className=\"mr-2\"/>Firmar</Button>\n                        {anexoIzaje.autoridadArea?.firma && <img src={anexoIzaje.autoridadArea.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                    </div>\n                    <div className=\"p-4 border rounded-lg\">\n                        <p className=\"text-sm font-semibold mb-2\">Responsable del Trabajo</p>\n                        <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Responsable del Trabajo / Ejecutor, Manifiesto que entiendo el trabajo que voy a realizar y los riesgos asosciados a este, dispongo de los recursos necesarios y  tomare las medidas de seguridad.\"</p>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                             <Input placeholder=\"Nombre Completo\" value={anexoIzaje.responsableTrabajo?.nombre || ''} onChange={(e) => handleNestedChange('responsableTrabajo', 'nombre', e.target.value)} />\n                             <Input type=\"time\" placeholder=\"Hora\" value={anexoIzaje.responsableTrabajo?.hora || ''} onChange={(e) => handleNestedChange('responsableTrabajo', 'hora', e.target.value)} />\n                        </div>\n                        <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('responsableTrabajo')}><Signature className=\"mr-2\"/>Firmar</Button>\n                        {anexoIzaje.responsableTrabajo?.firma && <img src={anexoIzaje.responsableTrabajo.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                    </div>\n                </div>\n            </SectionWrapper>\n            \n            <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n                <DialogContent>\n                    <DialogHeader><DialogTitle>Registrar Firma</DialogTitle></DialogHeader>\n                    <SignaturePad onSave={handleSaveSignature} />\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8410, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoExcavacionesStep.tsx"],"sourcesContent":["\n'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown, Signature } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport type { ValidacionDiaria } from '@/types';\nimport { Textarea } from '@/components/ui/textarea';\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField: React.FC<{ id: string; label: string; value: string; onChange: (value: string) => void; }> = ({ id, label, value, onChange }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\nconst aspectosRequeridos = [\n    { id: 'sistemasEnterrados', label: 'A. SE HAN IDENTIFICADO PLENAMENTO TODOS LOS SISTEMAS ENTERRADOS PRESENTES EN EL AREA (TUBERIAS, BANCO DE DUCTOS, MALLAS A TIERRA, ETC.)' },\n    { id: 'metodoExcavacion', label: 'B. SE HA DETERMINADO EL METODO DE EXCAVACION Y SE VERIFICO EL ESTADO DE LOS EQUIPOS Y HERRAMIENTAS' },\n    { id: 'ejecutantesEntrenados', label: 'C. EST√ÅN LOS EJECUTANTES ENTRENADOS Y CONOCEN LOS RIESGOS A LOS QUE ESTAN EXPUESTOS. ESTAN INCLUIDOS Y DIVULGADOS' },\n    { id: 'controlesDeterminados', label: 'D. SE HAN DETERMINADO LOS CONTROLES, SISTEMAS DE ENTIBADO INGRESO Y SALIDA, ESCALONAMIENTO PARA EXCAVACIONES >1,20 MTS DE PROFUNDIDAD' },\n    { id: 'areaDelimitada', label: 'E. ESTA DELIMITADA Y SE√ëALIZADA EL AREA DE TRABAJO PARA PREVENIR RIESGOS DE CAIDAS DE PERSONAL O EQUIPOS EN LA EXCAVACION' },\n    { id: 'puentesRequeridos', label: 'F. SE REQUIERE LA CONSTRUCCION DE PUENTES O PASARELAS PARA FACILITAR EL PASO DE PERSONAL, VEHICULOS O EQUIPOS SOBRE LA EXCAVACION' },\n    { id: 'materialesRemovidos', label: 'G.LOS MATERIALES RERMOVIDOS DE LA EXCVAVACION, EQUIPOS Y VEHCULOS ESTAN UBICADOS MINIMO A UN METRO (1 MT) DE DEL BORDE DE LA EXCAVACION' },\n    { id: 'escalerasSobresalen', label: 'H. LAS ESCALERAS DE INGRESO Y SALIDA DE LA EXCAVACION SOBRESALE MINIMO 1 METRO DEL BORDE' },\n    { id: 'metodoRelleno', label: 'I. SE TIENE PREVISTO EL METODO DE RELLENO Y CONFORMACION DE LA EXCAVACION UNA VES SE TERMINE EL TRABAJO (ADECUACION DE AREA)' },\n    { id: 'elementosEmergencia', label: 'K. SE CUENTA CON ELEMENTOS PARA ATENCION DE EMERGENCIAS EN EL AREA' },\n    { id: 'planRescate', label: 'L. SE CUENTA CON PLAN DE EMERGENCIA PARA RESCATE' },\n    { id: 'hojasSeguridad', label: 'M. ESTAN DISPONIBLES LAS HOJAS DE SEGURIDAD DE PRODUCTOS QUIMICOS EN CASO DE USARSE.' },\n    { id: 'conexionesPuestaTierra', label: 'N.SE HA VERIFICADO EL ESTADO DE CONEXIONES Y PUESTA A TIERRA DE EQUIPOS Y ELEMENTOS A USAR.' },\n    { id: 'vigiaNecesario', label: '√ë.LA CRITICIDAD DE LA ACTIVIDADD Y LAS DIMENSIONES HACEN NECESARIO DISPNER EN EL AREA DE UN VIGIA DE SEGURIDAD' },\n    { id: 'profundidadMaxima', label: 'O.SE VERIFICO LA PROFUNDIDAD MAXIMA DE LA EXCAVACION, CUANDO ESTA SEA > A 1,50 MTS SE APLICARAN LOS REUQEIRMIENTOS PARA TRABAJO EN ALTURAS.' },\n    { id: 'personalSaludable', label: 'P. SE VERICO EL PERSONAL QUE REALIZA EL TRABAJO SE ENCUENTRA EN CONDICIONES ADECUADAS DE SALUD PARA LA ACTIVIDAD' },\n    { id: 'eppVerificado', label: 'Q. SE VERIFICO EL EQUIPO Y ELEMENTOS DE PROTECCION PERSONAL A UTILIZAR' },\n    { id: 'excavacionNoAfecta', label: 'R.SE VERIFICO QUE LA EXCAVACION A REALIZAR NO AFECTE LA ESTABILIDAD O INTEGRIDAD DE EQUIPOS O ESTRUCTURAS.' },\n];\n\nconst precaucionesControles = [\n    { id: 'hacerApiques', label: 'HACER APIQUES' },\n    { id: 'revisarEquipos', label: 'REVISAR EQUIPOS Y HERRAMIENTAS' },\n    { id: 'herramientaNeumatica', label: 'HERRAMIENTA NEUMATICA' },\n    { id: 'entibado', label: 'ENTIBADO' },\n    { id: 'herramientaManual', label: 'HERRAMIENTA MANUAL' },\n    { id: 'escalonarTaludes', label: 'ESCALONAR TALUDES' },\n    { id: 'equipoContraIncendio', label: 'EQUIPO CONTRA INCENDIO' },\n    { id: 'instalarSistemasAcceso', label: 'INSTALAR SISTEMAS ACCESO Y SALIDA' },\n    { id: 'usoEppsEspeciales', label: 'USO DE EPPS ESPECIALES' },\n    { id: 'hojaSeguridadMsds', label: 'HOJA DE SEGURIDAD MSDS' },\n    { id: 'bloqueoEtiquetado', label: 'BLOQUEO Y ETIQUETADO' },\n    { id: 'requiereVigia', label: 'REQUIERE VIGIA' },\n    { id: 'etiquetadoProductosQuimicos', label: 'ETIQUETADO PRODUCTOS QUIMICOS' },\n    { id: 'clasificacionResiduos', label: 'CLASIFICACION DE RESIDUOS' },\n    { id: 'senalizacion', label: 'SE√ëALIZACION' },\n    { id: 'recubrirMaterialExcavado', label: 'RECUBRIR MATERIAL EXCAVADO' },\n];\n\nexport function AnexoExcavacionesStep() {\n    const { state, dispatch } = usePermitForm();\n    const { generalInfo, anexoExcavaciones } = state;\n    const [isSignatureDialogOpen, setIsSignatureDialogOpen] = React.useState(false);\n    const [signingTarget, setSigningTarget] = React.useState<{ section: string; field?: string; index?: number } | null>(null);\n\n    const handleUpdate = (payload: any) => {\n        dispatch({ type: 'UPDATE_ANEXO_EXCAVACIONES', payload });\n    };\n\n    const handleNestedChange = (section: keyof typeof anexoExcavaciones, field: string, value: any) => {\n        handleUpdate({ [section]: { ...(anexoExcavaciones as any)[section], [field]: value } });\n    };\n\n    const handleListChange = (section: 'validacion', list: 'autoridad' | 'responsable', index: number, field: keyof ValidacionDiaria, value: string) => {\n        const currentList = [...((anexoExcavaciones[section] as any)?.[list] || [])];\n        currentList[index] = { ...currentList[index], [field]: value };\n        handleNestedChange(section, list, currentList);\n    };\n\n    React.useEffect(() => {\n        if (!anexoExcavaciones.validacion || !anexoExcavaciones.validacion.autoridad || anexoExcavaciones.validacion.autoridad.length === 0) {\n            const authorityValidation = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n            const responsibleValidation = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n            handleUpdate({ validacion: { autoridad: authorityValidation, responsable: responsibleValidation } });\n        }\n    }, [anexoExcavaciones.validacion]);\n\n    const openSignatureDialog = (section: any, field?: string, index?: number) => {\n        setSigningTarget({ section, field, index });\n        setIsSignatureDialogOpen(true);\n    };\n\n    const handleSaveSignature = (signature: string) => {\n        if (!signingTarget) return;\n        const { section, field, index } = signingTarget;\n    \n        if (section.startsWith('validacion.')) {\n            const [valSection, list] = section.split('.');\n            handleListChange(valSection as 'validacion', list as 'autoridad' | 'responsable', index!, 'firma', signature);\n        } else if (section.startsWith('cierre.')) {\n            const [cierreSection, subSection] = section.split('.');\n            handleNestedChange('cierre', subSection, { ...((anexoExcavaciones.cierre as any)?.[subSection] || {}), firma: signature });\n        } else if (section === 'cancelacion') {\n             handleNestedChange('cancelacion', 'firma', signature);\n        } else {\n             handleNestedChange(section as any, 'firma', signature);\n        }\n        \n        setIsSignatureDialogOpen(false);\n    };\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">Anexo de Excavaciones</h2>\n                <p className=\"text-muted-foreground text-sm\">Complete la informaci√≥n requerida para la excavaci√≥n.</p>\n            </div>\n\n            <SectionWrapper title=\"Informaci√≥n General del Anexo\" defaultOpen>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n                    <div><Label>√Årea de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n                </div>\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                    <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoExcavaciones.emergencia?.contacto || ''} onChange={(e) => handleNestedChange('emergencia', 'contacto', e.target.value)} /></div>\n                    <div><Label>Tel√©fono:</Label><Input value={anexoExcavaciones.emergencia?.telefono || ''} onChange={(e) => handleNestedChange('emergencia', 'telefono', e.target.value)} /></div>\n                </div>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4\">\n                    <div><Label>Dimensiones:</Label><Input value={anexoExcavaciones.informacionGeneral?.dimensiones || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'dimensiones', e.target.value)} /></div>\n                    <div><Label>Profundidad:</Label><Input value={anexoExcavaciones.informacionGeneral?.profundidad || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'profundidad', e.target.value)} /></div>\n                    <div><Label>Ancho:</Label><Input value={anexoExcavaciones.informacionGeneral?.ancho || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'ancho', e.target.value)} /></div>\n                    <div><Label>Largo:</Label><Input value={anexoExcavaciones.informacionGeneral?.largo || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'largo', e.target.value)} /></div>\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Aspectos Requeridos para Realizar Excavaciones\">\n                <div className=\"space-y-2\">\n                    {aspectosRequeridos.map(a => (\n                        <RadioGroupField key={a.id} id={`aspecto-${a.id}`} label={a.label} value={anexoExcavaciones.aspectosRequeridos?.[a.id] || 'na'} onChange={(v) => handleNestedChange('aspectosRequeridos', a.id, v)} />\n                    ))}\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Precauciones y Controles Espec√≠ficos\">\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                    {precaucionesControles.map(p => (\n                        <div key={p.id} className=\"flex items-center gap-2\"><Checkbox id={`preca-${p.id}`} checked={anexoExcavaciones.precauciones?.[p.id] || false} onCheckedChange={(c) => handleNestedChange('precauciones', p.id, !!c)} /><Label htmlFor={`preca-${p.id}`}>{p.label}</Label></div>\n                    ))}\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Autorizaciones\">\n                 <div className=\"space-y-6\">\n                    <div className=\"p-4 border rounded-lg\">\n                        <p className=\"text-sm font-semibold mb-2\">Autoridad del √Årea</p>\n                        <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Autoridad del Area, estoy enterado del trabajo a realizar y apruebo su ejecucion bajo las medidas de seguridad contempladas en este permiso y sus documentos complementarios.\"</p>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <Input placeholder=\"Nombre Completo\" value={anexoExcavaciones.autoridadArea?.nombre || ''} onChange={(e) => handleNestedChange('autoridadArea', 'nombre', e.target.value)} />\n                            <Input type=\"time\" placeholder=\"Hora\" value={anexoExcavaciones.autoridadArea?.hora || ''} onChange={(e) => handleNestedChange('autoridadArea', 'hora', e.target.value)} />\n                        </div>\n                        <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('autoridadArea')}><Signature className=\"mr-2\"/>Firmar</Button>\n                        {anexoExcavaciones.autoridadArea?.firma && <img src={anexoExcavaciones.autoridadArea.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                    </div>\n                    <div className=\"p-4 border rounded-lg\">\n                        <p className=\"text-sm font-semibold mb-2\">Responsable del Trabajo</p>\n                        <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Responsable del Trabajo / Ejecutor, Manifiesto que entiendo el trabajo que voy a realizar y los riesgos asosciados a este, dispongo de los recursos necesarios y tomare las medidas de seguridad.\"</p>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                             <Input placeholder=\"Nombre Completo\" value={anexoExcavaciones.responsableTrabajo?.nombre || ''} onChange={(e) => handleNestedChange('responsableTrabajo', 'nombre', e.target.value)} />\n                             <Input type=\"time\" placeholder=\"Hora\" value={anexoExcavaciones.responsableTrabajo?.hora || ''} onChange={(e) => handleNestedChange('responsableTrabajo', 'hora', e.target.value)} />\n                        </div>\n                        <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('responsableTrabajo')}><Signature className=\"mr-2\"/>Firmar</Button>\n                        {anexoExcavaciones.responsableTrabajo?.firma && <img src={anexoExcavaciones.responsableTrabajo.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                    </div>\n                </div>\n            </SectionWrapper>\n            \n            <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n                <DialogContent>\n                    <DialogHeader><DialogTitle>Registrar Firma</DialogTitle></DialogHeader>\n                    <SignaturePad onSave={handleSaveSignature} />\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9359, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/VerificacionPeligrosStep.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport type { VerificacionPeligros } from '@/types';\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField: React.FC<{ id: string; label: string; value: string; onChange: (value: string) => void; }> = ({ id, label, value, onChange }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\nconst peligrosCategorias = {\n    fisicos: [\n        { id: 'ruido', label: 'Ruido' },\n        { id: 'iluminacionDeficiente', label: 'Iluminaci√≥n Deficiente' },\n        { id: 'temperaturasExtremas', label: 'Temperaturas Extremas' },\n        { id: 'vibracion', label: 'Vibraci√≥n' },\n        { id: 'radiacionIonizante', label: 'Radiaci√≥n Ionizante' },\n        { id: 'radiacionNoIonizante', label: 'Radiaci√≥n NO ionizante' },\n        { id: 'disconfortTermico', label: 'Disconfort t√©rmico' },\n        { id: 'superficiesCalientes', label: 'Superficies calientes' },\n    ],\n    quimicos: [\n        { id: 'gasesVapores', label: 'Gases y vapores' },\n        { id: 'humosMetalicos', label: 'Humos met√°licos' },\n        { id: 'fibras', label: 'Fibras' },\n        { id: 'polvos', label: 'Polvos' },\n        { id: 'liquidosNieblas', label: 'L√≠quidos Nieblas' },\n        { id: 'liquidosRocios', label: 'L√≠quidos Rocios' },\n    ],\n    seguridad: [\n        { id: 'elementosMaquinas', label: 'Elementos de m√°quinas' },\n        { id: 'herramientasMecanicas', label: 'Herramientas mec√°nicas' },\n        { id: 'herramientasManuales', label: 'Herramientas manuales' },\n        { id: 'equiposMovimiento', label: 'Equipos en movimiento' },\n        { id: 'proyeccionParticulas', label: 'Proyecci√≥n de part√≠culas' },\n        { id: 'proyeccionFluidos', label: 'Proyecci√≥n de fluidos' },\n        { id: 'equiposPresurizados', label: 'Equipos presurizados' },\n        { id: 'intervencionSistemasElectricos', label: 'Intervenci√≥n sistemas el√©ctricos' },\n        { id: 'adyacenteEquiposLineasEnergizados', label: 'Adyacente equipos / l√≠neas energizados' },\n        { id: 'altaTension', label: 'Alta tensi√≥n' },\n        { id: 'bajaTension', label: 'Baja tensi√≥n' },\n        { id: 'estatica', label: 'Est√°tica' },\n        { id: 'fuga', label: 'Fuga' },\n        { id: 'incendio', label: 'Incendio' },\n        { id: 'explosion', label: 'Explosi√≥n' },\n    ],\n    locativos: [\n        { id: 'trabajoAlturas', label: 'Trabajo alturas' },\n        { id: 'espaciosConfinados', label: 'Espacios confinados' },\n        { id: 'superficiesIrregulares', label: 'Superficies irregulares' },\n        { id: 'superficiesDeslizantes', label: 'Superficies deslizantes' },\n        { id: 'superficiesConDesnivel', label: 'Superficies con desnivel' },\n        { id: 'condicionesOrdenAseo', label: 'Condiciones de orden y aseo' },\n        { id: 'transitoVehiculos', label: 'Tr√°nsito de veh√≠culos' },\n        { id: 'almacenamiento', label: 'Almacenamiento' },\n    ],\n    biologicoAmbiental: [\n        { id: 'picaduras', label: 'Picaduras' },\n        { id: 'mordeduras', label: 'Mordeduras' },\n        { id: 'bacteriasVirusHongos', label: 'Bacterias, virus hongos' },\n        { id: 'fluidosExcrementos', label: 'Fluidos o excrementos' },\n        { id: 'generacionResiduos', label: 'Generaci√≥n de residuos' },\n        { id: 'emisionesVertimientos', label: 'Emisiones y/o vertimientos' },\n        { id: 'derramePotencialSustanciasQuimicas', label: 'Derrame potencial sustancias qu√≠micas' },\n        { id: 'usoMaterialArrastreCantera', label: 'Uso material de arrastre o cantera' },\n    ],\n    biomecanicos: [\n        { id: 'posturasForzadas', label: 'Posturas forzadas' },\n        { id: 'posturasProlongada', label: 'Posturas prolongada' },\n        { id: 'esfuerzo', label: 'Esfuerzo' },\n        { id: 'movimientoRepetitivo', label: 'Movimiento repetitivo' },\n        { id: 'movimientoAntigravitacional', label: 'Movimiento antigravitacional' },\n        { id: 'manipulacionManualCargas', label: 'Manipulaci√≥n manual de cargas' },\n    ],\n    psicosocial: [\n        { id: 'pausas', label: 'Pausas' },\n        { id: 'trabajoNocturno', label: 'Trabajo nocturno' },\n        { id: 'rotacion', label: 'Rotaci√≥n' },\n        { id: 'horasExtras', label: 'Horas extras' },\n        { id: 'turno', label: 'Turno' },\n    ],\n};\n\nexport function VerificacionPeligrosStep() {\n    const { state, dispatch } = usePermitForm();\n    const { verificacionPeligros } = state;\n\n    const handleUpdate = (categoria: keyof VerificacionPeligros, campo: string, valor: string) => {\n        dispatch({\n            type: 'UPDATE_VERIFICACION_PELIGROS',\n            payload: {\n                [categoria]: {\n                    ...verificacionPeligros?.[categoria],\n                    [campo]: valor,\n                },\n            },\n        });\n    };\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n                    Verificaci√≥n de Peligros\n                </h2>\n                <p className=\"text-muted-foreground text-sm\">\n                    Identifique los peligros asociados a la actividad a realizar.\n                </p>\n            </div>\n\n            {Object.entries(peligrosCategorias).map(([categoria, peligros]) => (\n                <SectionWrapper key={categoria} title={categoria.charAt(0).toUpperCase() + categoria.slice(1).replace(/([A-Z])/g, ' $1')}>\n                    <div className=\"space-y-2\">\n                        {peligros.map(peligro => (\n                            <RadioGroupField\n                                key={peligro.id}\n                                id={`${categoria}-${peligro.id}`}\n                                label={peligro.label}\n                                value={(verificacionPeligros as any)?.[categoria]?.[peligro.id] || 'na'}\n                                onChange={(value) => handleUpdate(categoria as keyof VerificacionPeligros, peligro.id, value)}\n                            />\n                        ))}\n                    </div>\n                </SectionWrapper>\n            ))}\n\n            <div className=\"p-4 border-t-2 border-dashed mt-8\">\n                <h4 className=\"font-bold text-lg mb-2 text-gray-800\">PELIGROS ADICIONALES A LA ACTIVIDAD Y MEDIDAS DE CONTROL</h4>\n                <ul className=\"list-disc list-inside space-y-2 text-sm text-gray-600\">\n                    <li>Definir el √°rea adecuada para tomar agua, refrigerio, uso del ba√±o (si es necesario). No hacer consumo de alimentos en el √°rea de operaci√≥n.</li>\n                    <li>Todos los trabajadores envueltos en la actividad deben conocer y cumplir las reglas de seguridad de la compa√±√≠a as√≠ como las propias del √°rea.</li>\n                    <li>Cualquier cambio en las condiciones del trabajo se deber√° suspender actividades y realizar un ATS complementario.</li>\n                </ul>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9903, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/EppEmergenciasStep.tsx"],"sourcesContent":["\n'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport type { EppEmergencias } from '@/types';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\n\ninterface EppEmergenciasStepProps {\n    eppEmergencias: EppEmergencias;\n    onUpdate: (updates: Partial<EppEmergencias>) => void;\n}\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField: React.FC<{ \n    id: string; \n    label: string; \n    value: string; \n    onChange: (value: string) => void;\n    showInput?: boolean;\n    inputValue?: string;\n    onInputChange?: (value: string) => void;\n    placeholder?: string;\n    isSelect?: boolean;\n    selectOptions?: string[];\n}> = ({ \n    id, \n    label, \n    value, \n    onChange, \n    showInput = false, \n    inputValue, \n    onInputChange, \n    placeholder,\n    isSelect = false,\n    selectOptions = [] \n}) => (\n    <div className=\"flex flex-col space-y-2 p-3 border rounded-md bg-white\">\n        <div className=\"flex justify-between items-center\">\n            <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n            <RadioGroup id={id} value={value || ''} onValueChange={onChange} className=\"flex gap-4\">\n                <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n                <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n                <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n            </RadioGroup>\n        </div>\n        {value === 'si' && onInputChange && (\n            isSelect ? (\n                <Select value={inputValue} onValueChange={onInputChange}>\n                    <SelectTrigger className=\"mt-2\">\n                        <SelectValue placeholder={placeholder || \"Seleccione una opci√≥n\"} />\n                    </SelectTrigger>\n                    <SelectContent>\n                        {selectOptions.map(option => (\n                            <SelectItem key={option} value={option}>{option}</SelectItem>\n                        ))}\n                    </SelectContent>\n                </Select>\n            ) : showInput ? (\n                <Input \n                    className=\"mt-2\"\n                    placeholder={placeholder || 'Especificar...'}\n                    value={inputValue || ''}\n                    onChange={(e) => onInputChange(e.target.value)}\n                />\n            ) : null\n        )}\n    </div>\n);\n\n// ‚úÖ MANTENIDO: Array de EPP items (oculto en UI pero disponible para futuro uso)\nexport const eppItems = [\n    { id: 'ropaTrabajo', label: 'Ropa de trabajo', manual: false },\n    { id: 'overolIgnifugo', label: 'Overol Ign√≠fugo, Categor√≠a:', manual: true },\n    { id: 'proteccionCuerpoSoldador', label: 'Protecci√≥n cuerpo para soldador', manual: false },\n    { id: 'casco', label: 'Casco', manual: true, isSelect: true, selectOptions: ['Sin Barbuquejo', 'Con Barbuquejo'] },\n    { id: 'chavoTelaCarnaza', label: 'Chavo en tela o carnaza', manual: false },\n    { id: 'botasSeguridadDielectrica', label: 'Botas de seguridad + dielectrica', manual: false },\n    { id: 'proteccionMetatarso', label: 'Proteccion metatarso', manual: false },\n    { id: 'monogafasGafas', label: 'Monogafas / Gafas', manual: false },\n    { id: 'caretaSoldador', label: 'Careta de soldador', manual: false },\n    { id: 'gafasOxicorte', label: 'Gafas de oxicorte', manual: false },\n    { id: 'caretaProteccionTotal', label: 'Careta de proteccion total', manual: false },\n    { id: 'proteccionAuditivaInsercion', label: 'Proteccion auditiva Inserci√≥n', manual: false },\n    { id: 'proteccionAuditivaCopa', label: 'Proteccion auditiva copa', manual: false },\n    { id: 'guantesAntiCorte', label: 'Guantes anti corte', manual: false },\n    { id: 'guantesSustanciasQuimicas', label: 'Guantes sustancias qu√≠micas', manual: false },\n    { id: 'guantesTemperatura', label: 'Guantes temperatura', manual: false },\n    { id: 'arnes', label: 'Arn√©s, Tipo:', manual: true },\n    { id: 'mosqueton', label: 'Mosquet√≥n', manual: false },\n    { id: 'eslinga', label: 'Eslinga, Tipo:', manual: true },\n    { id: 'lineaVida', label: 'L√≠nea de vida, Tipo:', manual: true },\n    { id: 'puntoAnclaje', label: 'Punto de anclaje (Cual):', manual: true },\n    { id: 'senalizacion', label: 'Se√±alizaci√≥n', manual: false },\n    { id: 'barandas', label: 'Barandas', manual: false },\n    { id: 'delimitacionPerimetral', label: 'Delimitaci√≥n Perimetral', manual: false },\n    { id: 'controlAcceso', label: 'Control de acceso', manual: false },\n];\n\nconst emergenciasItems = [\n    { id: 'notificacion', label: 'NOTIFICACI√ìN: El personal del √°rea potencialmente afectado y los trabajadores vecinos fueron notificados del trabajo a realizar' },\n    { id: 'recordarVerificar', label: 'EMERGENCIAS: Recordar y verificar' },\n    { id: 'potenciales', label: 'A.- Las emergencias potenciales que pueden ocurrir' },\n    { id: 'procedimientos', label: 'B.- Los procedimientos establecidos para tales situaciones.' },\n    { id: 'rutasEvacuacion', label: 'C.- Rutas de Evacuaci√≥n' },\n    { id: 'puntosEncuentro', label: 'D.- Puntos de encuentro' },\n    { id: 'equiposEmergencia', label: 'E.- Ubicaci√≥n de equipos de emergencia en el sitio de trabajo' },\n    { id: 'ubicacionBrigadistas', label: 'F.- Ubicaci√≥n de Brigadistas cercanos' },\n];\n\nexport function EppEmergenciasStep({ eppEmergencias, onUpdate }: EppEmergenciasStepProps) {\n\n    const handleUpdate = (section: keyof EppEmergencias, field: string, value: string) => {\n        onUpdate({\n            [section]: {\n                ...(eppEmergencias as any)[section],\n                [field]: value,\n            },\n        });\n    };\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n                    Manejo de Emergencias\n                </h2>\n                <p className=\"text-muted-foreground text-sm\">\n                    Verifique las notificaciones y procedimientos de emergencia.\n                </p>\n            </div>\n\n            <SectionWrapper title=\"Notificaciones y Manejo de Emergencias\" defaultOpen>\n                <div className=\"space-y-2\">\n                    {emergenciasItems.map(item => {\n                        if (item.id === 'recordarVerificar') {\n                            return (\n                                <h3 key={item.id} className=\"font-semibold text-gray-800 pt-4 pb-2\">\n                                    {item.label}\n                                </h3>\n                            );\n                        }\n                        return (\n                            <RadioGroupField\n                                key={item.id}\n                                id={`emergencia-${item.id}`}\n                                label={item.label}\n                                value={eppEmergencias.emergencias?.[item.id] as string}\n                                onChange={(value) => handleUpdate('emergencias', item.id, value)}\n                            />\n                        );\n                    })}\n                </div>\n            </SectionWrapper>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10393, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/WorkersStep.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { UserPlus, Edit, Trash2 } from 'lucide-react';\nimport type { ExternalWorker } from '@/types';\nimport Image from 'next/image';\n\ninterface WorkersStepProps {\n  workers: ExternalWorker[];\n  onAddWorker: () => void;\n  onEditWorker: (worker: ExternalWorker, index: number) => void;\n  onRemoveWorker: (index: number) => void;\n}\n\nexport function WorkersStep({ workers, onAddWorker, onEditWorker, onRemoveWorker }: WorkersStepProps) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Gesti√≥n de Trabajadores\n        </h2>\n        <div className=\"text-muted-foreground text-sm max-w-3xl mx-auto text-left space-y-2\">\n            <p className=\"font-semibold\">FIRMAS:</p>\n            <ol className=\"list-decimal list-outside space-y-2 pl-5\">\n              <li>\n                Al firmar, los trabajadores aceptan el tratamiento de sus datos personales, manifiestan su buen estado de salud y confirman haber comprendido los riesgos y controles de la actividad.\n              </li>\n              <li>\n                Se verifican certificados de aptitud m√©dica para Trabajos en alturas y espacios confinados; seg√∫n aplique, con fecha de expedici√≥n inferior a un a√±o.\n              </li>\n              <li>\n                Se verifican competencia - entrenamiento para TSA, TEC, trabajo en caliente, energ√≠as peligrosas, operaci√≥n de equipo o maquinaria, trabajos con energ√≠a el√©ctrica; seg√∫n aplique.\n              </li>\n              <li>\n                Se verifican el estado de afiliaci√≥n al sistema de seguridad social (EPS, ARL, Fondo de Pensiones).\n              </li>\n              <li>\n                Para espacios confinados aplican lo siguientes ROLES: Trabajador Entrante, Vig√≠a, Supervisor.\n              </li>\n            </ol>\n        </div>\n      </div>\n\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <CardTitle>Lista de Trabajadores</CardTitle>\n          <Button onClick={onAddWorker} size=\"sm\">\n            <UserPlus className=\"mr-2\" /> Agregar Trabajador\n          </Button>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Nombre</TableHead>\n                <TableHead>C√©dula</TableHead>\n                <TableHead>Rol</TableHead>\n                <TableHead>Firma Apertura</TableHead>\n                <TableHead className=\"text-right\">Acciones</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {workers.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={5} className=\"h-24 text-center\">\n                    No hay trabajadores agregados.\n                  </TableCell>\n                </TableRow>\n              ) : (\n                workers.map((worker, index) => (\n                  <TableRow key={index}>\n                    <TableCell className=\"font-medium\">{worker.nombre}</TableCell>\n                    <TableCell>{worker.cedula}</TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\">{worker.rol}</Badge>\n                    </TableCell>\n                    <TableCell>\n                        {worker.firmaApertura ? (\n                           <Image src={worker.firmaApertura} alt={`Firma de ${worker.nombre}`} width={80} height={40} className=\"border rounded-md\" />\n                        ) : (\n                            <span className=\"text-xs text-muted-foreground\">Pendiente</span>\n                        )}\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex justify-end gap-2\">\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => onEditWorker(worker, index)}>\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => onRemoveWorker(index)}>\n                          <Trash2 className=\"h-4 w-4 text-destructive\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 10743, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/ReviewStep.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Card, CardHeader, CardTitle, CardContent, CardDescription } from '@/components/ui/card';\nimport { FileText, CheckCircle, ChevronDown, Users, Shield, AlertTriangle } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Badge } from '@/components/ui/badge';\nimport { format } from 'date-fns';\n\nconst DetailField = ({ label, value }: { label: string; value: React.ReactNode }) => (\n    <div>\n        <p className=\"text-xs font-semibold text-gray-500 uppercase\">{label}</p>\n        <div className=\"text-sm text-gray-800\">{value || 'N/A'}</div>\n    </div>\n);\n\n\nexport function ReviewStep() {\n    const { state } = usePermitForm();\n\n    const getWorkTypesString = () => {\n        const selected = Object.entries(state.selectedWorkTypes)\n            .filter(([, value]) => value)\n            .map(([key]) => {\n                switch(key) {\n                    case 'alturas': return 'Trabajo en Alturas';\n                    case 'confinado': return 'Espacios Confinados';\n                    case 'energia': return 'Control de Energ√≠as';\n                    case 'izaje': return 'Izaje de Cargas';\n                    case 'excavacion': return 'Excavaciones';\n                    case 'general': return 'Trabajo General';\n                    default: return '';\n                }\n            })\n            .filter(Boolean);\n        \n        return selected.length > 0 ? selected.join(', ') : 'Ninguno seleccionado';\n    };\n\n    const getCheckedItems = (obj: { [key: string]: any } | undefined) => {\n        if (!obj) return [];\n        return Object.entries(obj)\n            .filter(([, value]) => value === true || value === 'si')\n            .map(([key]) => key.replace(/([A-Z])/g, ' $1').replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()));\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n                    Revisi√≥n Final\n                </h2>\n                <p className=\"text-muted-foreground text-sm\">\n                    Por favor, revise toda la informaci√≥n antes de guardar el permiso.\n                </p>\n            </div>\n\n            <div className=\"space-y-4\">\n                {/* General Info */}\n                <Collapsible defaultOpen>\n                    <CollapsibleTrigger className=\"flex w-full items-center justify-between rounded-lg border bg-gray-50 px-4 py-3 text-left text-sm font-semibold\">\n                        <span className=\"flex items-center gap-2\"><FileText size={16} /> Informaci√≥n General</span>\n                        <ChevronDown className=\"h-4 w-4 transition-transform data-[state=open]:rotate-180\" />\n                    </CollapsibleTrigger>\n                    <CollapsibleContent className=\"space-y-4 border border-t-0 rounded-b-lg p-4\">\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n                            <DetailField label=\"Solicitante\" value={state.generalInfo.nombreSolicitante} />\n                            <DetailField label=\"Empresa\" value={state.generalInfo.empresa} />\n                            <DetailField label=\"√Årea Espec√≠fica\" value={state.generalInfo.areaEspecifica} />\n                            <DetailField label=\"Planta\" value={state.generalInfo.planta} />\n                            <DetailField label=\"Proceso\" value={state.generalInfo.proceso} />\n                            <DetailField label=\"Contrato\" value={state.generalInfo.contrato} />\n                            <DetailField label=\"Validez Desde\" value={state.generalInfo.validFrom ? format(new Date(state.generalInfo.validFrom), 'PPpp') : 'N/A'} />\n                            <DetailField label=\"Validez Hasta\" value={state.generalInfo.validUntil ? format(new Date(state.generalInfo.validUntil), 'PPpp') : 'N/A'} />\n                        </div>\n                        <DetailField label=\"Tipos de Trabajo Seleccionados\" value={<span className=\"font-medium text-primary\">{getWorkTypesString()}</span>} />\n                        <DetailField label=\"Descripci√≥n de la Tarea / Alcance\" value={<div className=\"whitespace-pre-wrap\">{state.generalInfo.workDescription}</div>} />\n                        <DetailField label=\"Herramientas\" value={state.generalInfo.tools?.map(t => t.name).join(', ') || 'Ninguna'} />\n                        <DetailField label=\"N√∫mero de Trabajadores\" value={state.generalInfo.numTrabajadores} />\n                        <DetailField label=\"Responsable del Trabajo\" value={`${state.generalInfo.responsable?.nombre} (${state.generalInfo.responsable?.cargo})`} />\n                    </CollapsibleContent>\n                </Collapsible>\n                \n                 {/* Anexo ATS */}\n                <Collapsible>\n                    <CollapsibleTrigger className=\"flex w-full items-center justify-between rounded-lg border bg-gray-50 px-4 py-3 text-left text-sm font-semibold\">\n                        <span className=\"flex items-center gap-2\"><Shield size={16} /> An√°lisis de Trabajo Seguro (ATS)</span>\n                        <ChevronDown className=\"h-4 w-4 transition-transform data-[state=open]:rotate-180\" />\n                    </CollapsibleTrigger>\n                    <CollapsibleContent className=\"space-y-4 border border-t-0 rounded-b-lg p-4\">\n                        <DetailField label=\"Peligros Identificados ('SI')\" value={getCheckedItems(state.anexoATS?.peligros).join(', ') || 'Ninguno'} />\n                        <DetailField label=\"EPP Requeridos\" value={getCheckedItems(state.anexoATS?.epp).join(', ') || 'Ninguno'} />\n                        <DetailField label=\"Justificaci√≥n de Uso\" value={getCheckedItems(state.anexoATS?.justificacion).join(', ') || 'Ninguna'} />\n                    </CollapsibleContent>\n                </Collapsible>\n                \n                 {/* Anexos condicionales */}\n                 {state.selectedWorkTypes.alturas && (\n                     <Collapsible>\n                        <CollapsibleTrigger className=\"flex w-full items-center justify-between rounded-lg border bg-gray-50 px-4 py-3 text-left text-sm font-semibold\">\n                            <span className=\"flex items-center gap-2\"><AlertTriangle size={16} /> Anexo: Trabajo en Alturas</span>\n                            <ChevronDown className=\"h-4 w-4 transition-transform data-[state=open]:rotate-180\" />\n                        </CollapsibleTrigger>\n                        <CollapsibleContent className=\"border border-t-0 rounded-b-lg p-4\">\n                            <DetailField label=\"Aspectos de Seguridad ('SI')\" value={getCheckedItems(state.anexoAltura?.aspectosSeguridad).join(', ') || 'Ninguno'} />\n                        </CollapsibleContent>\n                    </Collapsible>\n                 )}\n                \n                {/* Workers */}\n                <Collapsible>\n                    <CollapsibleTrigger className=\"flex w-full items-center justify-between rounded-lg border bg-gray-50 px-4 py-3 text-left text-sm font-semibold\">\n                       <span className=\"flex items-center gap-2\"><Users size={16} /> Trabajadores ({state.workers?.length || 0})</span>\n                       <ChevronDown className=\"h-4 w-4 transition-transform data-[state=open]:rotate-180\" />\n                    </CollapsibleTrigger>\n                    <CollapsibleContent className=\"border border-t-0 rounded-b-lg p-4\">\n                        <ul className=\"space-y-2\">\n                            {state.workers?.map((w, i) => (\n                                <li key={i} className=\"flex justify-between items-center text-sm p-2 bg-gray-50 rounded\">\n                                    <span>{w.nombre} <span className=\"text-muted-foreground\">({w.rol})</span></span>\n                                    {w.firmaApertura ? <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">Firmado</Badge> : <Badge variant=\"destructive\">Firma Pendiente</Badge>}\n                                </li>\n                            ))}\n                        </ul>\n                    </CollapsibleContent>\n                </Collapsible>\n            </div>\n\n             <Card className=\"bg-blue-50 border-blue-200 mt-6\">\n                <CardHeader>\n                    <CardTitle className=\"text-base text-blue-800 flex items-center gap-2\">\n                        <CheckCircle size={20}/>\n                        Pr√≥ximos Pasos\n                    </CardTitle>\n                </CardHeader>\n                <CardContent>\n                     <p className=\"text-sm text-blue-700\">\n                        Al guardar, se crear√° un borrador del permiso. Luego ser√° redirigido a la p√°gina de detalles para que el solicitante principal pueda firmar y activar el flujo de aprobaci√≥n.\n                    </p>\n                </CardContent>\n            </Card>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 11325, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/page.tsx"],"sourcesContent":["\n'use client';\nimport * as React from 'react';\nimport { useState, useEffect, useCallback } from 'react';\nimport { useUser } from '@/hooks/use-user';\nimport { useToast } from '@/hooks/use-toast';\nimport { createPermit, savePermitDraft } from '../actions';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport {\n  CheckCircle,\n  XCircle,\n  AlertTriangle,\n  FileText,\n  Users,\n  Shield,\n  Upload,\n  Camera,\n  Wand2,\n  Loader2,\n  X,\n  UserPlus,\n  Signature,\n  FileUp,\n  Edit,\n  Plus,\n  Trash2,\n  Clock,\n  Check,\n  ArrowRight,\n  ArrowLeft,\n  Copy,\n  Save,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport type { Permit, ExternalWorker, Tool, AnexoAltura, AnexoConfinado, AnexoIzaje, MedicionAtmosferica, AnexoEnergias, AnexoATS, PermitGeneralInfo, ValidacionDiaria, AutorizacionPersona, PruebaGasesPeriodica, JustificacionATS, EppEmergencias } from '@/types';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport Image from 'next/image';\nimport { PermitFormProvider, usePermitForm } from './form-context';\nimport { GeneralInfoStep } from './components/GeneralInfoStep';\nimport { AtsStep } from './components/AtsStep';\nimport { AnexoAlturaStep } from './components/AnexoAlturaStep';\nimport { AnexoConfinadoStep } from './components/AnexoConfinadoStep';\nimport { AnexoEnergiaStep } from './components/AnexoEnergiaStep';\nimport { AnexoIzajeStep } from './components/AnexoIzajeStep';\nimport { AnexoExcavacionesStep } from './components/AnexoExcavacionesStep';\nimport { VerificacionPeligrosStep } from './components/VerificacionPeligrosStep';\nimport { EppEmergenciasStep, eppItems } from './components/EppEmergenciasStep';\nimport { WorkersStep } from './components/WorkersStep';\nimport { ReviewStep } from './components/ReviewStep';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\n\n\nconst workerRoles = [\n  \"Trabajador autorizado\",\n  \"Ayudante de seguridad\",\n  \"Coordinador de TA\",\n  \"Supervisor de EC\",\n  \"Soldador\",\n  \"Operador de equipo para elevaci√≥n de personas\",\n  \"Vig√≠a\",\n  \"Otro\"\n];\n\nfunction CreatePermitWizard() {\n  const { user } = useUser();\n  const { toast } = useToast();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n\n  const { state: formData, dispatch } = usePermitForm();\n  \n  const [draftId, setDraftId] = useState<string | undefined>(undefined);\n  const [isLoadingForm, setIsLoadingForm] = useState(true);\n\n  const [step, setStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSavingDraft, setIsSavingDraft] = useState(false);\n  const [showSuccessDialog, setShowSuccessDialog] = useState(false);\n  const [newPermitInfo, setNewPermitInfo] = useState({ id: '', number: '' });\n\n  // Worker Dialog State\n  const [isWorkerDialogOpen, setIsWorkerDialogOpen] = useState(false);\n  const [currentWorker, setCurrentWorker] = useState<Partial<ExternalWorker> | null>(null);\n  const [editingWorkerIndex, setEditingWorkerIndex] = useState<number | null>(null);\n  \n  // Signature Pad State\n  const [isSignaturePadOpen, setIsSignaturePadOpen] = useState(false);\n  const [signatureTarget, setSignatureTarget] = useState<string | null>(null);\n  const [signatureContext, setSignatureContext] = useState<any>(null);\n  \n  // Scroll to top on step change\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [step]);\n\n\n  useEffect(() => {\n    const editId = searchParams.get('edit');\n    if (editId) {\n      setIsLoadingForm(true);\n      const fetchDraft = async () => {\n        try {\n          const docRef = doc(db, 'permits', editId);\n          const docSnap = await getDoc(docRef);\n          if (docSnap.exists() && (docSnap.data().status === 'borrador' || docSnap.data().status === 'pendiente_revision')) {\n            const draftData = docSnap.data() as Permit;\n            \n            dispatch({ type: 'SET_ENTIRE_STATE', payload: draftData });\n            \n            setDraftId(editId);\n          } else {\n            toast({ variant: \"destructive\", title: \"Permiso no encontrado o no editable\", description: \"El permiso que intenta editar no existe o ya no est√° en estado de borrador.\" });\n            router.push('/permits');\n          }\n        } catch (error) {\n          console.error(\"Error cargando borrador:\", error);\n          toast({ variant: \"destructive\", title: \"Error al Cargar\", description: \"No se pudo cargar la informaci√≥n del permiso.\" });\n        } finally {\n          setIsLoadingForm(false);\n        }\n      };\n      fetchDraft();\n    } else {\n      setIsLoadingForm(false);\n    }\n  }, [searchParams, dispatch, router, toast]);\n\n\n  useEffect(() => {\n    if (user && !formData.generalInfo.nombreSolicitante) {\n      dispatch({ type: 'UPDATE_GENERAL_INFO', payload: { nombreSolicitante: user.displayName || '' } });\n    }\n  }, [user, formData.generalInfo.nombreSolicitante, dispatch]);\n\n  const openNewWorkerDialog = () => {\n    setEditingWorkerIndex(null);\n    setCurrentWorker({\n      nombre: '',\n      cedula: '',\n      rol: '',\n      otroRol: '',\n      eps: '',\n      arl: '',\n      pensiones: '',\n      tsaTec: { tec: false, tsa: false },\n      entrenamiento: { tec: false, tsa: false, otro: false, otroCual: '' },\n      firmaApertura: '',\n      firmaCierre: ''\n    });\n    setIsWorkerDialogOpen(true);\n  };\n  \n  const openEditWorkerDialog = (worker: ExternalWorker, index: number) => {\n    setEditingWorkerIndex(index);\n    setCurrentWorker(worker);\n    setIsWorkerDialogOpen(true);\n  };\n\n  const handleSaveWorker = () => {\n    if (!currentWorker || !currentWorker.nombre || !currentWorker.cedula || !currentWorker.rol) {\n      toast({\n        variant: 'destructive',\n        title: 'Campos Incompletos',\n        description: 'Nombre, c√©dula y rol son requeridos.',\n      });\n      return;\n    }\n    \n    if (currentWorker.rol === 'Otro' && !currentWorker.otroRol?.trim()) {\n      toast({\n        variant: 'destructive',\n        title: 'Especificaci√≥n Requerida',\n        description: 'Por favor, especifique el rol \"Otro\".',\n      });\n      return;\n    }\n\n    if (editingWorkerIndex !== null) {\n      const updatedWorkers = [...(formData.workers || [])];\n      updatedWorkers[editingWorkerIndex] = currentWorker as ExternalWorker;\n      dispatch({ type: 'SET_WORKERS', payload: updatedWorkers });\n      toast({ title: 'Trabajador Actualizado' });\n    } else {\n      dispatch({ type: 'ADD_WORKER', payload: currentWorker as ExternalWorker });\n      toast({ title: 'Trabajador Agregado' });\n    }\n\n    setIsWorkerDialogOpen(false);\n    setCurrentWorker(null);\n    setEditingWorkerIndex(null);\n  };\n  \n  const removeWorker = (index: number) => {\n    const updatedWorkers = (formData.workers || []).filter((_, i) => i !== index);\n    dispatch({ type: 'SET_WORKERS', payload: updatedWorkers });\n  };\n  \n  const handleWorkerInputChange = (field: keyof ExternalWorker, value: any) => {\n    setCurrentWorker(prev => prev ? { ...prev, [field]: value } : null);\n  };\n\n  const openSignaturePad = (target: string, context?: any) => {\n    setSignatureTarget(target);\n    setSignatureContext(context);\n    setIsSignaturePadOpen(true);\n  };\n\n  const handleSaveSignature = (signatureDataUrl: string) => {\n    if (!signatureTarget) return;\n\n    if (signatureTarget === 'worker.firmaApertura' || signatureTarget === 'worker.firmaCierre') {\n       setCurrentWorker(prev => prev ? { ...prev, [signatureTarget.split('.')[1]]: signatureDataUrl } : null);\n    } else {\n       dispatch({ type: 'UPDATE_SIGNATURE', payload: { target: signatureTarget, signature: signatureDataUrl, context: signatureContext }});\n    }\n\n    setIsSignaturePadOpen(false);\n    setSignatureTarget(null);\n    setSignatureContext(null);\n  };\n  \n  const handleSaveDraft = async () => {\n    if (!user) {\n      toast({ variant: 'destructive', title: 'Error de Autenticaci√≥n' });\n      return;\n    }\n\n    setIsSavingDraft(true);\n    try {\n      const result = await savePermitDraft({\n          userId: user.uid, \n          userDisplayName: user.displayName || null, \n          userEmail: user.email || null,\n          userPhotoURL: user.photoURL || null,\n          draftId: draftId,\n          ...formData\n      });\n\n      if (result.success && result.permitId) {\n        if (!draftId) {\n          setDraftId(result.permitId);\n        }\n        toast({ title: \"Borrador Guardado\", description: \"Tu progreso ha sido guardado.\" });\n      } else {\n        throw new Error(result.error || 'No se pudo guardar el borrador.');\n      }\n    } catch (error: any) {\n      toast({ variant: 'destructive', title: 'Error al Guardar', description: error.message });\n    } finally {\n      setIsSavingDraft(false);\n    }\n  };\n\n  const colors = {\n    primary: 'hsl(var(--primary))',\n    dark: 'hsl(var(--primary))', \n    success: 'hsl(var(--accent))',\n  };\n  \n  const baseSteps = [\n    { label: \"Info General\", condition: true },\n    { label: \"ATS\", condition: true },\n    { label: \"Anexo Altura\", condition: formData.selectedWorkTypes.alturas},\n    { label: \"Anexo Confinado\", condition: formData.selectedWorkTypes.confinado},\n    { label: \"Anexo Energ√≠as\", condition: formData.selectedWorkTypes.energia},\n    { label: \"Anexo Izaje\", condition: formData.selectedWorkTypes.izaje},\n    { label: \"Anexo Excavaciones\", condition: formData.selectedWorkTypes.excavacion},\n    { label: \"Verificaci√≥n Peligros\", condition: false },\n    { label: \"Emergencias\", condition: true },\n    { label: \"Trabajadores\", condition: true },\n    { label: \"Revisi√≥n\", condition: true }\n  ];\n\n  const steps = baseSteps.filter(s => s.condition);\n  const currentStepInfo = steps[step - 1];\n\n  const canProceed = () => {\n    const currentLabel = steps[step - 1]?.label;\n\n    if (currentLabel === 'Info General') {\n        const { areaEspecifica, planta, nombreSolicitante, validFrom, validUntil, workDescription, numTrabajadores, responsable } = formData.generalInfo;\n        const missingFields = [];\n        if (!areaEspecifica) missingFields.push(\"√Årea espec√≠fica\");\n        if (!planta) missingFields.push(\"Planta\");\n        if (!nombreSolicitante) missingFields.push(\"Nombre solicitante\");\n        if (!validFrom) missingFields.push(\"Fecha de inicio\");\n        if (!validUntil) missingFields.push(\"Fecha de fin\");\n        if (!workDescription?.trim()) missingFields.push(\"Descripci√≥n de la Tarea\");\n        if (!numTrabajadores) missingFields.push(\"No. Trabajadores\");\n        if (!responsable?.nombre) missingFields.push(\"Nombre del Responsable\");\n        if (!responsable?.cargo) missingFields.push(\"Cargo del Responsable\");\n        if (!responsable?.compania) missingFields.push(\"Compa√±√≠a del Responsable\");\n\n        if (!Object.values(formData.selectedWorkTypes).some(v => v)) {\n            missingFields.push(\"Tipo de Trabajo (al menos uno)\");\n        }\n\n        if (missingFields.length > 0) {\n            toast({\n                variant: \"destructive\",\n                title: \"Campos Incompletos en Informaci√≥n General\",\n                description: `Por favor, complete los siguientes campos obligatorios: ${missingFields.join(', ')}.`,\n                duration: 6000,\n            });\n            return false;\n        }\n    }\n\n    if (currentLabel === 'ATS') {\n        const { peligros, justificacion, epp, peligrosAdicionales } = formData.anexoATS || {};\n        \n        const hasPeligro = (peligros && Object.values(peligros).some(value => value === 'si')) || (peligrosAdicionales && peligrosAdicionales.length > 0);\n        if (!hasPeligro) {\n          toast({\n              variant: \"destructive\",\n              title: \"Validaci√≥n Requerida en ATS\",\n              description: \"Debe seleccionar los peligros asociados e identificados para la actividad, para continuar.\",\n          });\n          return false;\n        }\n        \n        const hasEpp = epp && Object.values(epp).some(value => value === true || (typeof value === 'string' && value.trim() !== ''));\n        if (!hasEpp) {\n            toast({\n                variant: \"destructive\",\n                title: \"Validaci√≥n Requerida en ATS\",\n                description: \"El recuadro rojo para obligatoriedad de ‚ÄúEscoja o seleccione los EPP¬¥S requeridos, para continuar\",\n            });\n            return false;\n        }\n\n        if (!justificacion || !Object.values(justificacion).some(value => value === true)) {\n            toast({\n                variant: \"destructive\",\n                title: \"Validaci√≥n Requerida en ATS\",\n                description: \"Debe seleccionar al menos una 'Justificaci√≥n para el uso del ATS' para continuar.\",\n            });\n            return false;\n        }\n    }\n    \n    if (currentLabel === 'Anexo Altura') {\n      const anexo = formData.anexoAltura;\n      if (anexo?.tipoEstructura?.otros && !anexo.tipoEstructura.otrosCual?.trim()) {\n        toast({ variant: \"destructive\", title: \"Campo Requerido\", description: \"Debe especificar el otro tipo de estructura en el Anexo de Alturas.\" });\n        return false;\n      }\n      if (!anexo?.afectaciones?.observaciones?.trim()) {\n        toast({ variant: \"destructive\", title: \"Campo Requerido\", description: \"Debe ingresar las observaciones en la secci√≥n de Afectaciones del Anexo de Alturas.\" });\n        return false;\n      }\n    }\n\n    if (currentLabel === 'Anexo Confinado') {\n      const anexo = formData.anexoConfinado;\n      if (anexo?.identificacionPeligros?.procedimientoComunicacion === 'si' && !anexo.procedimientoComunicacionCual?.trim()) {\n        toast({ variant: \"destructive\", title: \"Campo Requerido\", description: \"Debe especificar cu√°l es el procedimiento de comunicaci√≥n en el Anexo de Espacios Confinados.\" });\n        return false;\n      }\n    }\n    \n    if (currentLabel === 'Anexo Energ√≠as') {\n      const anexo = formData.anexoEnergias;\n      const trabajosEnCaliente = anexo?.trabajosEnCaliente as any;\n      if (trabajosEnCaliente?.otro_check && !(trabajosEnCaliente?.otro || '').trim()) {\n        toast({ variant: \"destructive\", title: \"Campo Requerido\", description: \"Debe especificar el 'otro' aspecto en Trabajos en Caliente.\" });\n        return false;\n      }\n      const energiasPeligrosas = anexo?.energiasPeligrosas as any;\n      if (energiasPeligrosas?.otra_check && !(energiasPeligrosas?.otra || '').trim()) {\n          toast({ variant: \"destructive\", title: \"Campo Requerido\", description: \"Debe especificar el 'otro' tipo de energ√≠a peligrosa.\" });\n          return false;\n      }\n    }\n\n    if (currentLabel === 'Verificaci√≥n Peligros') {\n        const { verificacionPeligros } = formData;\n        if (!verificacionPeligros || Object.values(verificacionPeligros).every(category => !Object.values(category).some(value => value === 'si'))) {\n            toast({\n                variant: \"destructive\",\n                title: \"Validaci√≥n Requerida en Verificaci√≥n de Peligros\",\n                description: \"Debe seleccionar 'SI' en al menos un peligro para poder continuar.\",\n            });\n            return false;\n        }\n    }\n\n    if (currentLabel === 'Emergencias') {\n        const { emergencias } = formData.eppEmergencias || {};\n        if (!emergencias || !Object.values(emergencias).some(value => value === 'si')) {\n            toast({\n                variant: \"destructive\",\n                title: \"Validaci√≥n Requerida en Manejo de Emergencias\",\n                description: \"Debe seleccionar 'SI' en al menos una opci√≥n de 'Notificaci√≥n y Manejo de Emergencias' para continuar.\",\n                duration: 6000,\n            });\n            return false;\n        }\n    }\n    \n    if (currentLabel === 'Trabajadores') {\n      const numTrabajadores = parseInt(formData.generalInfo.numTrabajadores || '0', 10);\n      const workers = formData.workers || [];\n\n      if (workers.length !== numTrabajadores) {\n        toast({\n          variant: \"destructive\",\n          title: \"N√∫mero de Trabajadores no Coincide\",\n          description: `Ha especificado ${numTrabajadores} trabajadores, pero ha registrado ${workers.length}. Por favor, ajuste la lista.`,\n          duration: 6000,\n        });\n        return false;\n      }\n      \n      const missingSignatures = workers.filter(w => !w.firmaApertura);\n      if(missingSignatures.length > 0) {\n        toast({\n          variant: \"destructive\",\n          title: \"Faltan Firmas de Trabajadores\",\n          description: `Todos los trabajadores deben registrar su firma de apertura para poder continuar. Faltan ${missingSignatures.length} firmas.`,\n          duration: 6000,\n        });\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  const handleSavePermit = async () => {\n    if (!user) {\n      toast({ variant: 'destructive', title: 'Error de Autenticaci√≥n' });\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      const result = await savePermitDraft({\n        userId: user.uid,\n        userDisplayName: user.displayName || null,\n        userEmail: user.email || null,\n        userPhotoURL: user.photoURL || null,\n        draftId: draftId,\n        ...formData,\n      });\n\n      if (result.success && result.permitId) {\n        toast({\n          title: 'Borrador Guardado',\n          description: 'Ser√° redirigido para firmar y activar el permiso.',\n        });\n        router.push(`/permits/${result.permitId}`);\n      } else {\n        throw new Error(result.error || 'Hubo un error guardando el permiso.');\n      }\n    } catch (error: any) {\n      toast({\n        variant: 'destructive',\n        title: 'Fall√≥ el Env√≠o',\n        description: error.message,\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const handleUpdateATS = useCallback((updates: Partial<AnexoATS>) => {\n    dispatch({ type: 'UPDATE_ATS', payload: updates });\n  }, [dispatch]);\n\n  const handleUpdateEppEmergencias = useCallback((updates: Partial<EppEmergencias>) => {\n    dispatch({ type: 'UPDATE_EPP_EMERGENCIAS', payload: updates });\n  }, [dispatch]);\n\n  const renderStepContent = () => {\n    if (isLoadingForm) {\n      return (\n        <div className=\"flex justify-center items-center h-64\">\n          <Loader2 className=\"h-8 w-8 animate-spin\" />\n        </div>\n      );\n    }\n\n    const currentStepLabel = steps[step - 1]?.label;\n    switch (currentStepLabel) {\n      case \"Info General\":\n        return <GeneralInfoStep />;\n      case \"ATS\":\n        return <AtsStep anexoATS={formData.anexoATS as AnexoATS} onUpdateATS={handleUpdateATS} />;\n      case \"Anexo Altura\":\n        return <AnexoAlturaStep />;\n      case \"Anexo Confinado\":\n        return <AnexoConfinadoStep />;\n      case \"Anexo Energ√≠as\":\n        return <AnexoEnergiaStep />;\n      case \"Anexo Izaje\":\n        return <AnexoIzajeStep />;\n      case \"Anexo Excavaciones\":\n        return <AnexoExcavacionesStep />;\n      case \"Verificaci√≥n Peligros\":\n        return <VerificacionPeligrosStep />;\n      case \"Emergencias\":\n        return <EppEmergenciasStep eppEmergencias={formData.eppEmergencias as EppEmergencias} onUpdate={handleUpdateEppEmergencias} />;\n      case \"Trabajadores\":\n        return <WorkersStep \n                  workers={formData.workers || []}\n                  onAddWorker={openNewWorkerDialog}\n                  onEditWorker={openEditWorkerDialog}\n                  onRemoveWorker={removeWorker}\n               />;\n      case \"Revisi√≥n\":\n        return <ReviewStep />;\n      default:\n        return (\n          <div className=\"text-center p-8\">\n            <h3 className=\"text-xl font-bold\">Paso en Construcci√≥n</h3>\n            <p className=\"text-muted-foreground\">{currentStepLabel}</p>\n          </div>\n        );\n    }\n  };\n\n  return (\n    <>\n    <div className=\"flex flex-1 flex-col bg-gray-50 min-h-screen\">\n      <header className=\"text-white shadow-lg sticky top-0 z-20\" style={{ background: `linear-gradient(135deg, ${colors.primary} 0%, ${colors.dark} 100%)` }}>\n        <div className=\"max-w-7xl mx-auto px-4 py-3 md:py-4\">\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <div className=\"flex items-center gap-3\">\n                <Image \n                    src=\"https://i.postimg.cc/jShP2K6k/Whats-App-Image-2025-10-20-at-10-43-48-AM.jpg\"\n                    alt=\"Crear Permiso Icon\"\n                    width={48}\n                    height={48}\n                    className=\"rounded-full\"\n                />\n                <div className=\"hidden md:block border-l border-white border-opacity-30 pl-3\">\n                  <h1 className=\"text-xl font-bold\">Nuevo Permiso de Trabajo</h1>\n                  <p className=\"text-sm text-white text-opacity-80\">\n                    Paso {step} de {steps.length}: {currentStepInfo.label}\n                  </p>\n                </div>\n              </div>\n            </div>\n            <Button\n              onClick={() => {\n                if (confirm('¬øEst√° seguro de cancelar? Los cambios no guardados en el borrador actual se mantendr√°n.')) {\n                  router.push('/dashboard');\n                }\n              }}\n              variant=\"ghost\"\n              className=\"bg-white bg-opacity-20 hover:bg-opacity-30\"\n            >\n              <X size={18} className=\"mr-2\" />\n              <span className=\"hidden sm:inline\">Cancelar</span>\n            </Button>\n          </div>\n        </div>\n      </header>\n      \n      <div className=\"bg-white border-b shadow-sm sticky top-[68px] md:top-[80px] z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4 md:py-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            {steps.map((s_info, s_idx) => {\n              const s = s_idx + 1;\n              return(\n              <div key={s} className=\"flex items-center flex-1\">\n                <div className={`relative flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full font-bold text-sm transition-all ${\n                  s === step ? 'ring-4 scale-110 shadow-lg text-white' :\n                  s < step ? 'text-white' :\n                  'bg-gray-200 text-gray-600'\n                }`}\n                style={s <= step ? { backgroundColor: s === step ? colors.primary : colors.success } : {}}>\n                  {s < step ? <CheckCircle size={20}/> : s_idx + 1}\n                </div>\n                {s < steps.length && (\n                  <div className=\"flex-1 h-1 mx-1 md:mx-2 rounded\" style={{ \n                    backgroundColor: s < step ? colors.success : '#E5E7EB' \n                  }} />\n                )}\n              </div>\n            )})}\n          </div>\n          <div className=\"grid\" style={{gridTemplateColumns: `repeat(${steps.length}, minmax(0, 1fr))`}}>\n            {steps.map((s_info, s_idx) => (\n              <span key={s_idx} className=\"text-[10px] md:text-xs text-center font-medium\" style={{ color: step === s_idx + 1 ? colors.primary : '#6B7280' }}>{s_info.label}</span>\n            ))}\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"max-w-5xl mx-auto p-4 pb-24 md:pb-24 w-full\">\n        <div key={step} className=\"bg-white rounded-xl shadow-xl p-6 md:p-8\">\n          {renderStepContent()}\n        </div>\n\n        {/* Navigation Buttons */}\n        <div className=\"fixed bottom-0 left-0 right-0 bg-background/80 backdrop-blur-sm border-t shadow-lg z-20\">\n          <div className=\"max-w-5xl mx-auto px-4 py-3 flex gap-2 sm:gap-4\">\n            <Button\n              onClick={() => setStep(step - 1)}\n              disabled={isSubmitting || step === 1}\n              variant=\"outline\"\n              className=\"px-4 py-3 h-auto md:px-6\"\n            >\n              <ArrowLeft className=\"mr-2 h-4 w-4\" />\n              Anterior\n            </Button>\n            \n            <Button\n                onClick={handleSaveDraft}\n                variant=\"secondary\"\n                disabled={isSavingDraft || isSubmitting}\n                className=\"px-4 py-3 h-auto md:px-6\"\n            >\n                {isSavingDraft ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\"/> : <Save className=\"mr-2 h-4 w-4\"/>}\n                Borrador\n            </Button>\n\n            {step < steps.length ? (\n              <Button\n                onClick={() => {\n                  if (canProceed()) {\n                    setStep(step + 1);\n                  }\n                }}\n                disabled={isSubmitting}\n                className=\"flex-1 py-3 h-auto\"\n              >\n                Siguiente\n                <ArrowRight className=\"ml-2 h-4 w-4\" />\n              </Button>\n            ) : (\n                <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                         <Button\n                            disabled={isSubmitting}\n                            className=\"flex-1 py-3 h-auto bg-green-600 hover:bg-green-700 text-lg\"\n                        >\n                            {isSubmitting ? (\n                            <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\n                            ) : (\n                            <Save size={22} className=\"mr-2\" />\n                            )}\n                            <span>Guardar Permiso</span>\n                        </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                        <AlertDialogHeader>\n                            <AlertDialogTitle>¬øEst√° seguro de guardar el permiso?</AlertDialogTitle>\n                            <AlertDialogDescription>\n                                Se crear√° un borrador del permiso. Deber√° ir a la p√°gina de detalles para firmar y activar el flujo de aprobaci√≥n.\n                            </AlertDialogDescription>\n                        </AlertDialogHeader>\n                        <AlertDialogFooter>\n                            <AlertDialogCancel>Cancelar</AlertDialogCancel>\n                            <AlertDialogAction onClick={handleSavePermit} disabled={isSubmitting}>\n                                 {isSubmitting ? 'Guardando...' : 'S√≠, guardar ahora'}\n                            </AlertDialogAction>\n                        </AlertDialogFooter>\n                    </AlertDialogContent>\n                </AlertDialog>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      <Dialog open={showSuccessDialog} onOpenChange={setShowSuccessDialog}>\n          <DialogContent>\n              <DialogHeader>\n                  <DialogTitle className=\"flex items-center gap-2 text-green-600\">\n                      <CheckCircle />\n                      ¬°Permiso Creado Exitosamente!\n                  </DialogTitle>\n                  <DialogDescription>\n                      El permiso N¬∞ <strong>{newPermitInfo.number}</strong> ha sido creado y enviado para revisi√≥n.\n                  </DialogDescription>\n              </DialogHeader>\n              <DialogFooter className=\"sm:justify-between gap-2\">\n                  <Button variant=\"outline\" onClick={() => router.push('/dashboard')}>\n                      Ir al Dashboard\n                  </Button>\n                   <Button onClick={() => router.push(`/permits/${newPermitInfo.id}`)}>\n                      Ver Detalles del Permiso\n                   </Button>\n              </DialogFooter>\n          </DialogContent>\n      </Dialog>\n      \n        <Dialog open={isWorkerDialogOpen} onOpenChange={setIsWorkerDialogOpen}>\n            <DialogContent className=\"sm:max-w-lg\">\n                <DialogHeader>\n                    <DialogTitle>{editingWorkerIndex !== null ? 'Editar' : 'Agregar'} Trabajador</DialogTitle>\n                </DialogHeader>\n                <div className=\"space-y-4 max-h-[70vh] overflow-y-auto p-4\">\n                    <div>\n                        <Label htmlFor=\"worker-name\">Nombres y Apellidos</Label>\n                        <Input id=\"worker-name\" value={currentWorker?.nombre || ''} onChange={(e) => handleWorkerInputChange('nombre', e.target.value)} />\n                    </div>\n                    <div>\n                        <Label htmlFor=\"worker-cedula\">C√©dula</Label>\n                        <Input id=\"worker-cedula\" value={currentWorker?.cedula || ''} onChange={(e) => handleWorkerInputChange('cedula', e.target.value)} />\n                    </div>\n                    <div>\n                        <Label htmlFor=\"worker-rol\">Cargo/Rol</Label>\n                        <Select value={currentWorker?.rol || ''} onValueChange={(value) => handleWorkerInputChange('rol', value)}>\n                            <SelectTrigger id=\"worker-rol\"><SelectValue /></SelectTrigger>\n                            <SelectContent>\n                                {workerRoles.map(role => <SelectItem key={role} value={role}>{role}</SelectItem>)}\n                            </SelectContent>\n                        </Select>\n                    </div>\n                     {currentWorker?.rol === 'Otro' && (\n                        <div>\n                            <Label htmlFor=\"worker-otro-rol\">Especifique el rol</Label>\n                            <Input id=\"worker-otro-rol\" value={currentWorker?.otroRol || ''} onChange={(e) => handleWorkerInputChange('otroRol', e.target.value)} />\n                        </div>\n                    )}\n\n                    <div className=\"space-y-2\">\n                        <Label className=\"font-semibold\">Certificado Aptitud M√©dica</Label>\n                        <div className=\"flex gap-4\">\n                            <div className=\"flex items-center gap-2\">\n                                <Checkbox \n                                    id=\"cert-tec\" \n                                    checked={currentWorker?.tsaTec?.tec || false} \n                                    onCheckedChange={checked => handleWorkerInputChange('tsaTec', { ...currentWorker?.tsaTec, tec: !!checked })} \n                                /> \n                                <Label htmlFor=\"cert-tec\">TEC</Label>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <Checkbox \n                                    id=\"cert-tsa\" \n                                    checked={currentWorker?.tsaTec?.tsa || false} \n                                    onCheckedChange={checked => handleWorkerInputChange('tsaTec', { ...currentWorker?.tsaTec, tsa: !!checked })} \n                                /> \n                                <Label htmlFor=\"cert-tsa\">TSA</Label>\n                            </div>\n                        </div>\n                    </div>\n                     <div className=\"space-y-2\">\n                        <Label className=\"font-semibold\">Entrenamiento / Capacitaci√≥n</Label>\n                        <div className=\"flex gap-4\">\n                             <div className=\"flex items-center gap-2\">\n                                <Checkbox \n                                    id=\"ent-tec\" \n                                    checked={currentWorker?.entrenamiento?.tec || false} \n                                    onCheckedChange={checked => handleWorkerInputChange('entrenamiento', { ...currentWorker?.entrenamiento, tec: !!checked })} \n                                /> \n                                <Label htmlFor=\"ent-tec\">TEC</Label>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <Checkbox \n                                    id=\"ent-tsa\" \n                                    checked={currentWorker?.entrenamiento?.tsa || false} \n                                    onCheckedChange={checked => handleWorkerInputChange('entrenamiento', { ...currentWorker?.entrenamiento, tsa: !!checked })} \n                                /> \n                                <Label htmlFor=\"ent-tsa\">TSA</Label>\n                            </div>\n                             <div className=\"flex items-center gap-2\">\n                                <Checkbox \n                                    id=\"ent-otro\" \n                                    checked={currentWorker?.entrenamiento?.otro || false} \n                                    onCheckedChange={checked => handleWorkerInputChange('entrenamiento', { ...currentWorker?.entrenamiento, otro: !!checked })} \n                                /> \n                                <Label htmlFor=\"ent-otro\">Otro</Label>\n                            </div>\n                        </div>\n                         <Input \n                            placeholder=\"Especificar otro entrenamiento\" \n                            value={currentWorker?.entrenamiento?.otroCual || ''} \n                            onChange={e => handleWorkerInputChange('entrenamiento', { ...currentWorker?.entrenamiento, otroCual: e.target.value })}\n                            disabled={!currentWorker?.entrenamiento?.otro} \n                         />\n                    </div>\n                     <div className=\"space-y-2\">\n                        <Label className=\"font-semibold\">Afiliaci√≥n a Seguridad Social</Label>\n                        <div className=\"flex gap-4\">\n                           <div className=\"flex items-center gap-2\"><Checkbox id=\"afil-eps\" checked={!!currentWorker?.eps} onCheckedChange={checked => handleWorkerInputChange('eps', checked ? 'activo' : '')} /> <Label htmlFor=\"afil-eps\">EPS</Label></div>\n                           <div className=\"flex items-center gap-2\"><Checkbox id=\"afil-arl\" checked={!!currentWorker?.arl} onCheckedChange={checked => handleWorkerInputChange('arl', checked ? 'activo' : '')} /> <Label htmlFor=\"afil-arl\">ARL</Label></div>\n                           <div className=\"flex items-center gap-2\"><Checkbox id=\"afil-pension\" checked={!!currentWorker?.pensiones} onCheckedChange={checked => handleWorkerInputChange('pensiones', checked ? 'activo' : '')} /> <Label htmlFor=\"afil-pension\">Pensiones</Label></div>\n                        </div>\n                    </div>\n                    <div>\n                      <Label>Firma de Apertura</Label>\n                      <Button variant=\"outline\" className=\"w-full mt-2\" onClick={() => openSignaturePad('worker.firmaApertura')}>\n                        <Signature className=\"mr-2\"/> {currentWorker?.firmaApertura ? 'Ver/Cambiar Firma' : 'Registrar Firma'}\n                      </Button>\n                      {currentWorker?.firmaApertura && <Image src={currentWorker.firmaApertura} alt=\"Firma Apertura\" width={150} height={75} className=\"mx-auto mt-2 border rounded-md\"/>}\n                    </div>\n                </div>\n                 <DialogFooter>\n                    <Button variant=\"secondary\" onClick={() => setIsWorkerDialogOpen(false)}>Cancelar</Button>\n                    <Button onClick={handleSaveWorker}>Guardar Trabajador</Button>\n                </DialogFooter>\n            </DialogContent>\n        </Dialog>\n\n       <Dialog open={isSignaturePadOpen} onOpenChange={setIsSignaturePadOpen}>\n        <DialogContent className=\"w-[90vw] max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Registrar Firma</DialogTitle>\n          </DialogHeader>\n          <SignaturePad onSave={handleSaveSignature} />\n        </DialogContent>\n      </Dialog>\n    </div>\n    </>\n  );\n}\n\nexport default function CreatePermitPage() {\n  return (\n    <PermitFormProvider>\n      <CreatePermitWizard />\n    </PermitFormProvider>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}