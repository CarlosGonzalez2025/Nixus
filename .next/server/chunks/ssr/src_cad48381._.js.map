{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { adminDb } from '@/lib/firebase-admin';\nimport { revalidatePath } from 'next/cache';\nimport type { Permit, ExternalWorker, PermitStatus, PermitClosure, Approval, UserRole, AnexoAltura, AnexoCaliente, AnexoConfinado, AnexoEnergias, AnexoExcavaciones, AnexoIzaje, AnexoATS, PermitGeneralInfo, JustificacionATS } from '@/types';\nimport { FieldValue } from 'firebase-admin/firestore';\nimport { sendWhatsAppNotification } from '@/lib/notifications';\nimport { config } from 'dotenv';\nconfig();\n\nconst workTypesMap: {[key: string]: string} = {\n  'alturas': 'Trabajo en Alturas',\n  'confinado': 'Espacios Confinados',\n  'energia': 'Control de Energ√≠as',\n  'izaje': 'Izaje de Cargas',\n  'caliente': 'Trabajo en Caliente',\n  'excavacion': 'Excavaciones',\n  'general': 'Trabajo General'\n};\n\nconst getWorkTypesString = (permit: Partial<Permit>): string => {\n  const selectedTypes: string[] = [];\n  if (permit.trabajoAlturas) selectedTypes.push('Trabajo en Alturas');\n  if (permit.espaciosConfinados) selectedTypes.push('Espacios Confinados');\n  if (permit.controlEnergias) selectedTypes.push('Control de Energ√≠as');\n  if (permit.izajeCargas) selectedTypes.push('Izaje de Cargas');\n  if (permit.trabajoCaliente) selectedTypes.push('Trabajo en Caliente');\n  if (permit.excavaciones) selectedTypes.push('Excavaciones');\n  \n  if (selectedTypes.length === 0) {\n    if (permit.trabajoGeneral) return 'Trabajo General';\n    // Fallback for old data structure\n    if (permit.workType && Array.isArray(permit.workType)) {\n      return permit.workType.map(key => workTypesMap[key] || key).join(', ');\n    }\n    return 'Trabajo General';\n  }\n  return selectedTypes.join(', ');\n};\n\nconst getStatusText = (status: string) => {\n    const statusText: {[key: string]: string} = {\n      'borrador': 'Borrador',\n      'pendiente_revision': 'Pendiente de Revisi√≥n',\n      'aprobado': 'Aprobado',\n      'en_ejecucion': 'En Ejecuci√≥n',\n      'suspendido': 'Suspendido',\n      'cerrado': 'Cerrado',\n      'rechazado': 'Rechazado'\n    };\n    return statusText[status] || status;\n  };\n\nconst signatureRoles: { [key in UserRole | 'sst' | 'mantenimiento']: string } = {\n  solicitante: 'QUIEN SOLICITA (JEFES Y DUE√ëOS DE AREA)',\n  autorizante: 'QUIEN AUTORIZA (L√çDER A CARGO DEL EQUIPO EJECUTANTE)',\n  mantenimiento: 'PERSONAL DE MANTENIMIENTO',\n  sst: 'AREA SST (si aplica)',\n  lider_tarea: 'L√≠der de la Tarea',\n  ejecutante: 'Ejecutante del Trabajo',\n  lider_sst: 'L√≠der SST',\n  admin: 'Administrador'\n};\n\n\ntype PermitCreateData = Omit<Permit, 'id' | 'createdAt' | 'status' | 'createdBy' | 'number' | 'user'> & {\n  userId: string;\n  userDisplayName: string | null;\n  userEmail: string | null;\n  userPhotoURL: string | null;\n};\n\nexport async function createPermit(data: PermitCreateData) {\n  if (!data.userId) {\n    return { success: false, error: 'User not authenticated' };\n  }\n\n  const { userId, userDisplayName, userEmail, userPhotoURL, ...permitData } = data;\n\n  const initialApprovals = {\n    solicitante: { status: 'pendiente' as const },\n    autorizante: { status: 'pendiente' as const },\n    mantenimiento: { status: 'pendiente' as const },\n    sst: { status: 'pendiente' as const }\n  };\n\n  const permitPayload: Partial<Permit> = {\n    ...permitData,\n    status: 'pendiente_revision' as const,\n    createdBy: userId,\n    createdAt: FieldValue.serverTimestamp(),\n    user: {\n      displayName: userDisplayName,\n      email: userEmail,\n      photoURL: userPhotoURL,\n    },\n    approvals: initialApprovals,\n    closure: {},\n  };\n  \n  try {\n    const docRef = await adminDb.collection('permits').add(permitPayload as any);\n    const permitNumber = `PT-${Date.now()}-${docRef.id.substring(0, 6).toUpperCase()}`;\n    await docRef.update({ number: permitNumber });\n    \n    console.log('‚úÖ [Action] Permiso creado con √©xito en Firestore:', docRef.id);\n\n    const workTypesText = getWorkTypesString(permitPayload);\n    const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n    const permitUrl = `${baseUrl}/permits/${docRef.id}`;\n    \n    const messageBody = `*¬°Alerta de Seguridad SGPT!* üö®\nSe ha creado una nueva solicitud de permiso de trabajo.\n\nüìÑ *N√∫mero:* ${permitNumber}\nüë§ *Solicitante:* ${userDisplayName || 'N/A'}\nüõ†Ô∏è *Tipo de Trabajo:* ${workTypesText}\n\nPor favor, revise la solicitud para su aprobaci√≥n en el siguiente enlace:\n${permitUrl}`;\n    \n    await sendWhatsAppNotification(messageBody);\n    \n    revalidatePath('/permits');\n    revalidatePath('/dashboard');\n    \n    return { success: true, permitId: docRef.id, permitNumber };\n  } catch (error: any) {\n    console.error(\"‚ùå [Action] Error al crear permiso:\", error);\n    return { \n      success: false, \n      error: error.message || 'Could not create permit. Please try again.' \n    };\n  }\n}\n\nexport async function addSignatureAndNotify(\n  permitId: string, \n  role: 'solicitante' | 'autorizante' | 'mantenimiento' | 'sst', \n  signatureType: 'firmaApertura' | 'firmaCierre',\n  signatureDataUrl: string,\n  user: { uid: string, displayName: string | null }\n) {\n    if (!permitId || !role || !signatureDataUrl || !user) {\n        return { success: false, error: 'Faltan par√°metros para guardar la firma.' };\n    }\n\n    try {\n        const docRef = adminDb.collection('permits').doc(permitId);\n        \n        const signaturePath = `approvals.${role}.${signatureType}`;\n        const statusPath = `approvals.${role}.status`;\n        const userIdPath = `approvals.${role}.userId`;\n        const userNamePath = `approvals.${role}.userName`;\n        const signedAtPath = `approvals.${role}.signedAt`;\n\n        const updateData: { [key: string]: any } = {\n            [signaturePath]: signatureDataUrl,\n            [`${userNamePath}`]: user.displayName,\n            [`${userIdPath}`]: user.uid,\n        };\n\n        if (signatureType === 'firmaApertura') {\n            updateData[statusPath] = 'aprobado';\n            updateData[signedAtPath] = FieldValue.serverTimestamp();\n        }\n\n        await docRef.update(updateData);\n        \n        // Fetch permit for notification\n        const permitDoc = await docRef.get();\n        const permitData = permitDoc.data() as Permit;\n        \n        const signatureRoleName = (signatureRoles as any)[role] || role;\n        const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n        const permitUrl = `${baseUrl}/permits/${permitId}`;\n        \n        const messageBody = `*Notificaci√≥n de Firma - SGPT* üñãÔ∏è\nEl permiso *${permitData.number || permitId}* ha sido firmado.\n\nüë§ *Qui√©n firm√≥:* ${user.displayName || 'N/A'}\n‚ú® *Rol:* ${signatureRoleName}\n‚úçÔ∏è *Tipo de firma:* ${signatureType === 'firmaApertura' ? 'Apertura' : 'Cierre'}\n\nPuede ver los detalles aqu√≠:\n${permitUrl}`;\n        \n        await sendWhatsAppNotification(messageBody);\n\n        revalidatePath(`/permits/${permitId}`);\n        return { success: true };\n\n    } catch (error: any) {\n        console.error(\"‚ùå Error al guardar firma y notificar:\", error);\n        return {\n            success: false,\n            error: error.message || 'No se pudo guardar la firma.'\n        };\n    }\n}\n\n\nexport async function updatePermitStatus(permitId: string, status: PermitStatus, reason?: string, closureData?: Partial<PermitClosure>) {\n    if (!permitId) {\n        return { success: false, error: 'Permit ID is required.' };\n    }\n\n    try {\n        const docRef = adminDb.collection('permits').doc(permitId);\n        const updateData: { status: PermitStatus; rejectionReason?: string; closure?: Partial<PermitClosure> | FieldValue } = { status };\n\n        if (status === 'rechazado' && reason) {\n            updateData.rejectionReason = reason;\n        }\n\n        if (status === 'cerrado') {\n            updateData.closure = {\n                ...(closureData || {}),\n                fechaCierre: new Date().toISOString().split('T')[0], // YYYY-MM-DD\n            };\n        }\n\n        await docRef.update(updateData);\n\n        // Fetch permit for notification\n        const permitDoc = await docRef.get();\n        const permitData = permitDoc.data() as Permit;\n\n        const statusText = getStatusText(status);\n        const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n        const permitUrl = `${baseUrl}/permits/${permitId}`;\n\n        let messageBody = `*Actualizaci√≥n de Estado - SGPT* üîÑ\nEl estado del permiso *${permitData.number || permitId}* ha cambiado.\n\n*Nuevo Estado:* ${statusText}\n\nPuede ver los detalles aqu√≠:\n${permitUrl}`;\n\n        if (status === 'rechazado' && reason) {\n          messageBody += `\\n\\n*Motivo del rechazo:* ${reason}`;\n        }\n        \n        await sendWhatsAppNotification(messageBody);\n        \n        revalidatePath(`/permits/${permitId}`);\n        revalidatePath('/permits');\n        revalidatePath('/dashboard');\n\n        return { success: true };\n    } catch (error: any) {\n        console.error(\"‚ùå Error updating permit status:\", error);\n        return {\n            success: false,\n            error: error.message || 'Could not update permit status.'\n        };\n    }\n}\n"],"names":[],"mappings":";;;;;;IAyEsB,eAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/dialog.tsx"],"sourcesContent":["\n\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,kKAAA,CAAA,OAAoB;AAEnC,MAAM,gBAAgB,kKAAA,CAAA,UAAuB;AAE7C,MAAM,eAAe,kKAAA,CAAA,SAAsB;AAE3C,MAAM,cAAc,kKAAA,CAAA,QAAqB;AAEzC,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAuB;gBACtB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,kKAAA,CAAA,cAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oKAAA,CAAA,YAA2B;YAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE;sBAEd,cAAA,8OAAC,oMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,oKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/signature-pad.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport { Button } from './button';\nimport { Eraser, Loader2, Save } from 'lucide-react';\nimport { DialogFooter } from './dialog';\nimport { Checkbox } from './checkbox';\nimport { Label } from './label';\n\ninterface SignaturePadProps {\n  onSave: (signature: string) => void;\n  isSaving?: boolean;\n}\n\nexport const SignaturePad: React.FC<SignaturePadProps> = ({ onSave, isSaving = false }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [hasConsented, setHasConsented] = useState(false);\n\n  const getCanvasContext = () => {\n    const canvas = canvasRef.current;\n    if (!canvas) return null;\n    return canvas.getContext('2d');\n  };\n\n  const resizeCanvas = () => {\n    const canvas = canvasRef.current;\n    const container = containerRef.current;\n    if (canvas && container) {\n      canvas.width = container.offsetWidth;\n      canvas.height = 200; // Keep a fixed height or make it responsive too\n      const ctx = getCanvasContext();\n      if(ctx) {\n        ctx.strokeStyle = '#000';\n        ctx.lineWidth = 2;\n      }\n    }\n  };\n\n  useEffect(() => {\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n    return () => window.removeEventListener('resize', resizeCanvas);\n  }, []);\n\n  const startDrawing = (event: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    event.preventDefault();\n    const ctx = getCanvasContext();\n    if (!ctx) return;\n    \n    const pos = getMousePos(event);\n    ctx.beginPath();\n    ctx.moveTo(pos.x, pos.y);\n    setIsDrawing(true);\n  };\n\n  const draw = (event: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    event.preventDefault();\n    if (!isDrawing) return;\n    const ctx = getCanvasContext();\n    if (!ctx) return;\n\n    const pos = getMousePos(event);\n    ctx.lineTo(pos.x, pos.y);\n    ctx.stroke();\n  };\n\n  const stopDrawing = () => {\n    const ctx = getCanvasContext();\n    if (!ctx) return;\n    ctx.closePath();\n    setIsDrawing(false);\n  };\n  \n  const getMousePos = (event: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return { x: 0, y: 0 };\n    const rect = canvas.getBoundingClientRect();\n\n    let clientX, clientY;\n\n    if ('touches' in event.nativeEvent) {\n      if (event.nativeEvent.touches.length === 0) return { x: 0, y: 0};\n      clientX = event.nativeEvent.touches[0].clientX;\n      clientY = event.nativeEvent.touches[0].clientY;\n    } else {\n      clientX = (event.nativeEvent as MouseEvent).clientX;\n      clientY = (event.nativeEvent as MouseEvent).clientY;\n    }\n    \n    return {\n      x: clientX - rect.left,\n      y: clientY - rect.top,\n    };\n  }\n\n  const clearPad = () => {\n    const canvas = canvasRef.current;\n    const ctx = getCanvasContext();\n    if (canvas && ctx) {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n  };\n\n  const handleSave = () => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      const blank = document.createElement('canvas');\n      blank.width = canvas.width;\n      blank.height = canvas.height;\n      if(canvas.toDataURL() === blank.toDataURL()) {\n        alert(\"Por favor, provea una firma.\");\n        return;\n      }\n      \n      const dataUrl = canvas.toDataURL('image/png');\n      onSave(dataUrl);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center gap-4 w-full\" ref={containerRef}>\n      <canvas\n        ref={canvasRef}\n        className=\"border border-gray-300 rounded-md bg-white cursor-crosshair touch-none w-full\"\n        onMouseDown={startDrawing}\n        onMouseMove={draw}\n        onMouseUp={stopDrawing}\n        onMouseLeave={stopDrawing}\n        onTouchStart={startDrawing}\n        onTouchMove={draw}\n        onTouchEnd={stopDrawing}\n      />\n      <div className=\"flex items-start space-x-3 my-4\">\n        <Checkbox \n          id=\"terms\" \n          checked={hasConsented}\n          onCheckedChange={(checked) => setHasConsented(checked as boolean)}\n        />\n        <Label htmlFor=\"terms\" className=\"text-xs text-muted-foreground font-normal\">\n          Autorizo el tratamiento de mis datos personales y el uso de mi firma digital, de conformidad con la Ley 1581 de 2012 de Colombia, para la validaci√≥n y gesti√≥n de documentos dentro del sistema SGPT M√≥vil.\n        </Label>\n      </div>\n      <DialogFooter className=\"w-full\">\n         <Button variant=\"outline\" onClick={clearPad} disabled={isSaving}>\n          <Eraser className=\"mr-2 h-4 w-4\" />\n          Limpiar\n        </Button>\n        <Button onClick={handleSave} disabled={!hasConsented || isSaving}>\n          {isSaving ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Save className=\"mr-2 h-4 w-4\" />}\n          {isSaving ? 'Guardando...' : 'Guardar Firma'}\n        </Button>\n      </DialogFooter>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 457, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/form-context.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useReducer, useContext, Dispatch } from 'react';\nimport type { Permit, ExternalWorker, AnexoATS, AnexoAltura, AnexoConfinado } from '@/types';\n\n// Define the shape of the form data\ntype PermitFormData = Omit<Permit, 'id' | 'createdAt' | 'status' | 'createdBy' | 'number' | 'user' | 'approvals' | 'closure'>;\n\n// Define the shape of the state\ninterface FormState extends PermitFormData {}\n\n// Define the actions\ntype FormAction =\n  | { type: 'UPDATE_GENERAL_INFO'; payload: Partial<FormState['generalInfo']> }\n  | { type: 'UPDATE_WORK_TYPES'; payload: { type: keyof FormState['selectedWorkTypes'], value: boolean } }\n  | { type: 'UPDATE_ATS'; payload: Partial<FormState['anexoATS']> }\n  | { type: 'UPDATE_ANEXO_ALTURA'; payload: Partial<FormState['anexoAltura']> }\n  | { type: 'UPDATE_ANEXO_CONFINADO'; payload: Partial<FormState['anexoConfinado']> }\n  | { type: 'SET_WORKERS'; payload: ExternalWorker[] }\n  | { type: 'ADD_WORKER'; payload: ExternalWorker }\n  | { type: 'UPDATE_SIGNATURE', payload: { target: string, signature: string, context: any } }\n  | { type: 'RESET_FORM' };\n\n\n// Initial state\nconst initialState: FormState = {\n  generalInfo: {\n    areaEspecifica: '',\n    planta: '',\n    proceso: '',\n    contrato: '',\n    empresa: '',\n    nombreSolicitante: '',\n    fechaCreacion: new Date().toISOString(),\n    validFrom: '',\n    validUntil: '',\n    workDescription: '',\n    tools: [],\n    numTrabajadores: '',\n    reunionInicio: 'na',\n    atsVerificado: 'na',\n    responsable: { nombre: '', cargo: '', compania: '', alcance: '' }\n  },\n  selectedWorkTypes: {\n    alturas: false,\n    confinado: false,\n    energia: false,\n    izaje: false,\n    caliente: false,\n    excavacion: false,\n    general: false,\n  },\n  anexoATS: {\n    peligros: {},\n    controles: {},\n    epp: {},\n    justificacion: {},\n    protocolosBioseguridad: 'no'\n  },\n  anexoAltura: {\n    tipoEstructura: {\n        escaleraCuerpo: false,\n        escaleraDosCuerpos: false,\n        andamioTubular: false,\n        andamioColgante: false,\n        plataforma: false,\n        manLift: false,\n        otros: false,\n        otrosCual: '',\n    },\n    aspectosSeguridad: {},\n    precauciones: {},\n    afectaciones: {\n        riesgoOtrasAreas: 'na',\n        otrasAreasRiesgo: 'na',\n        personalNotificado: 'na',\n        observaciones: '',\n    },\n  },\n  anexoConfinado: {\n    identificacionPeligros: {},\n    precauciones: {},\n    resultadosPruebasGases: {},\n    requerimientosEquipos: {},\n    pruebasGasesPeriodicas: {\n      intervalo: '',\n      pruebas: [],\n      pruebaRealizadaPor: '',\n      serialMonitor: '',\n      marca: '',\n      fechaCalibracion: '',\n    },\n    validacion: {\n        autoridad: [],\n        responsable: [],\n    },\n  },\n  workers: [],\n};\n\n// Reducer function\nfunction formReducer(state: FormState, action: FormAction): FormState {\n  switch (action.type) {\n    case 'UPDATE_GENERAL_INFO':\n      return {\n        ...state,\n        generalInfo: { ...state.generalInfo, ...action.payload },\n      };\n    case 'UPDATE_WORK_TYPES':\n        return {\n            ...state,\n            selectedWorkTypes: { ...state.selectedWorkTypes, [action.payload.type]: action.payload.value }\n        }\n    case 'UPDATE_ATS':\n        return {\n            ...state,\n            anexoATS: { ...state.anexoATS, ...action.payload },\n        }\n    case 'UPDATE_ANEXO_ALTURA':\n        return {\n            ...state,\n            anexoAltura: { ...state.anexoAltura, ...action.payload },\n        }\n    case 'UPDATE_ANEXO_CONFINADO':\n        return {\n            ...state,\n            anexoConfinado: { ...state.anexoConfinado, ...action.payload },\n        }\n    case 'SET_WORKERS':\n        return {\n            ...state,\n            workers: action.payload,\n        }\n    case 'ADD_WORKER':\n        return {\n            ...state,\n            workers: [...(state.workers || []), action.payload]\n        }\n    case 'UPDATE_SIGNATURE':\n      // Complex logic for updating signatures in nested annexes can be handled here\n      // This is a simplified example\n      console.log('Signature update needs to be implemented in reducer:', action.payload);\n      return state;\n    case 'RESET_FORM':\n      return initialState;\n    default:\n      return state;\n  }\n}\n\n// Create the context\nconst PermitFormContext = createContext<{ state: FormState; dispatch: Dispatch<FormAction> } | undefined>(undefined);\n\n// Create the provider component\nexport function PermitFormProvider({ children }: { children: React.ReactNode }) {\n  const [state, dispatch] = useReducer(formReducer, initialState);\n\n  return (\n    <PermitFormContext.Provider value={{ state, dispatch }}>\n      {children}\n    </PermitFormContext.Provider>\n  );\n}\n\n// Custom hook to use the context\nexport function usePermitForm() {\n  const context = useContext(PermitFormContext);\n  if (!context) {\n    throw new Error('usePermitForm must be used within a PermitFormProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 642, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 670, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 862, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/GeneralInfoStep.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Trash2 } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { collection, onSnapshot, doc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\n\nconst workTypes: { key: keyof ReturnType<typeof usePermitForm>['state']['selectedWorkTypes'], name: string }[] = [\n  { key: 'alturas', name: 'Trabajo en Alturas' },\n  { key: 'confinado', name: 'Espacios Confinados' },\n  { key: 'energia', name: 'Control de Energ√≠as' },\n  { key: 'izaje', name: 'Izaje de Cargas' },\n  { key: 'caliente', name: 'Trabajo en Caliente' },\n  { key: 'excavacion', name: 'Excavaciones' },\n  { key: 'general', name: 'Trabajo General' },\n];\n\nexport function GeneralInfoStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, selectedWorkTypes } = state;\n  const { toast } = useToast();\n\n  const [newToolName, setNewToolName] = React.useState('');\n\n  const [dynamicLists, setDynamicLists] = React.useState({\n    areas: [] as string[],\n    plantas: [] as string[],\n    procesos: [] as string[],\n    contratos: [] as string[],\n    empresas: [] as string[],\n  });\n  const [loadingLists, setLoadingLists] = React.useState(true);\n\n  React.useEffect(() => {\n    setLoadingLists(true);\n    const listNames = ['areas', 'plantas', 'procesos', 'contratos', 'empresas'];\n    const unsubscribers = listNames.map(listName => {\n      const docRef = doc(db, 'dynamic_lists', listName);\n      return onSnapshot(docRef, (docSnap) => {\n        setDynamicLists(prev => ({\n          ...prev,\n          [listName]: docSnap.exists() ? docSnap.data().items?.sort() || [] : []\n        }));\n      }, (error) => {\n        console.error(`Error fetching ${listName}:`, error);\n        toast({\n          variant: \"destructive\",\n          title: \"Error de Carga\",\n          description: `No se pudo cargar la lista para ${listName}.`,\n        });\n      });\n    });\n\n    // This is a bit of a hack to know when all listeners have fired at least once\n    Promise.all(listNames.map(listName => new Promise(resolve => {\n      const docRef = doc(db, 'dynamic_lists', listName);\n      onSnapshot(docRef, () => resolve(true), () => resolve(true)); // Resolve even on error\n    }))).then(() => setLoadingLists(false));\n\n    return () => unsubscribers.forEach(unsub => unsub());\n  }, [toast]);\n\n\n  const handleInputChange = (field: keyof typeof generalInfo, value: any) => {\n    dispatch({ type: 'UPDATE_GENERAL_INFO', payload: { [field]: value } });\n  };\n\n  const handleWorkTypeChange = (type: keyof typeof selectedWorkTypes, value: boolean) => {\n    dispatch({ type: 'UPDATE_WORK_TYPES', payload: { type, value } });\n  };\n  \n  const handleResponsableChange = (field: keyof typeof generalInfo.responsable, value: string) => {\n    const newResponsable = { ...generalInfo.responsable, [field]: value };\n    handleInputChange('responsable', newResponsable);\n  };\n\n  const addTool = () => {\n    if (newToolName.trim()) {\n      const newTools = [...(generalInfo.tools || []), { name: newToolName.trim(), status: 'B' }];\n      handleInputChange('tools', newTools);\n      setNewToolName('');\n    }\n  };\n\n  const removeTool = (index: number) => {\n    const newTools = (generalInfo.tools || []).filter((_, i) => i !== index);\n    handleInputChange('tools', newTools);\n  };\n\n  const renderDynamicSelect = React.useCallback((listKey: keyof typeof dynamicLists, fieldKey: keyof typeof generalInfo, label: string, required: boolean) => (\n    <div>\n      <Label className={`font-bold text-gray-700 ${required ? 'after:content-[\"*\"] after:ml-0.5 after:text-red-500' : ''}`}>{label}</Label>\n      <Select\n        value={(generalInfo as any)[fieldKey] || ''}\n        onValueChange={(value) => handleInputChange(fieldKey, value)}\n        disabled={loadingLists}\n      >\n        <SelectTrigger>\n          <SelectValue placeholder={loadingLists ? \"Cargando...\" : `Seleccione una opci√≥n...`} />\n        </SelectTrigger>\n        <SelectContent>\n          {dynamicLists[listKey].map((item) => (\n            <SelectItem key={item} value={item}>{item}</SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n    </div>\n  ), [generalInfo, dynamicLists, loadingLists, handleInputChange]);\n\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Informaci√≥n General del Permiso\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">Complete todos los campos obligatorios (*)</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {renderDynamicSelect('areas', 'areaEspecifica', '√Årea o equipo espec√≠fico', true)}\n        {renderDynamicSelect('plantas', 'planta', 'Planta', true)}\n        {renderDynamicSelect('procesos', 'proceso', 'Proceso', false)}\n        {renderDynamicSelect('contratos', 'contrato', 'Contrato', false)}\n        {renderDynamicSelect('empresas', 'empresa', 'Empresa', false)}\n        <div>\n          <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Nombre del solicitante</Label>\n          <Input value={generalInfo.nombreSolicitante || ''} readOnly disabled />\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Listas de Verificaci√≥n Complementarias *</Label>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 p-4 border rounded-lg mt-2\">\n          {workTypes.map(({ key, name }) => (\n            <div key={key} className=\"flex items-center space-x-2\">\n              <Checkbox\n                id={key}\n                checked={selectedWorkTypes[key]}\n                onCheckedChange={(checked) => handleWorkTypeChange(key, !!checked)}\n              />\n              <label htmlFor={key} className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\">\n                {name}\n              </label>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Duraci√≥n del Permiso *</Label>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border rounded-lg\">\n          <div>\n            <label className=\"text-sm font-medium\">Desde</label>\n            <Input\n              type=\"datetime-local\"\n              value={generalInfo.validFrom}\n              onChange={(e) => handleInputChange('validFrom', e.target.value)}\n            />\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">Hasta</label>\n            <Input\n              type=\"datetime-local\"\n              value={generalInfo.validUntil}\n              onChange={(e) => handleInputChange('validUntil', e.target.value)}\n            />\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold\">Descripci√≥n de la Tarea - ALCANCE *</Label>\n        <Textarea\n          value={generalInfo.workDescription}\n          onChange={(e) => handleInputChange('workDescription', e.target.value)}\n          rows={3}\n          className=\"w-full mt-1\"\n          placeholder=\"Describa el alcance, descripci√≥n y √°rea/equipo...\"\n        />\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Equipos y/o Herramientas</Label>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg mt-2\">\n            <div className=\"space-y-2\">\n                {generalInfo.tools?.slice(0, 4).map((tool, index) => (\n                    <div key={index} className=\"flex items-center gap-4 p-2 bg-gray-50 rounded\">\n                    <span className=\"flex-1\">{tool.name}</span>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => removeTool(index)}><Trash2 className=\"h-4 w-4 text-destructive\"/></Button>\n                    </div>\n                ))}\n            </div>\n              <div className=\"space-y-2\">\n                {generalInfo.tools?.slice(4, 8).map((tool, index) => (\n                    <div key={index + 4} className=\"flex items-center gap-4 p-2 bg-gray-50 rounded\">\n                    <span className=\"flex-1\">{tool.name}</span>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => removeTool(index + 4)}><Trash2 className=\"h-4 w-4 text-destructive\"/></Button>\n                    </div>\n                ))}\n            </div>\n            <div className=\"md:col-span-2 flex gap-2\">\n                <Input value={newToolName} onChange={(e) => setNewToolName(e.target.value)} placeholder=\"Nueva herramienta...\" />\n                <Button onClick={addTool}><Plus/></Button>\n            </div>\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">No. Trabajadores *</Label>\n        <Input type=\"number\" value={generalInfo.numTrabajadores} onChange={e => handleInputChange('numTrabajadores', e.target.value)} placeholder=\"Cantidad de trabajadores\" />\n      </div>\n\n      {/* Boolean Radios would go here */}\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Responsable del Trabajo / Ejecutor</Label>\n        <div className=\"p-4 border rounded-lg mt-2 space-y-4\">\n          <Input placeholder=\"Nombre completo\" value={generalInfo.responsable?.nombre} onChange={e => handleResponsableChange('nombre', e.target.value)} />\n          <Input placeholder=\"Cargo\" value={generalInfo.responsable?.cargo} onChange={e => handleResponsableChange('cargo', e.target.value)} />\n          <Input placeholder=\"Compa√±√≠a\" value={generalInfo.responsable?.compania} onChange={e => handleResponsableChange('compania', e.target.value)} />\n          <Textarea placeholder=\"Alcance\" value={generalInfo.responsable?.alcance} onChange={e => handleResponsableChange('alcance', e.target.value)} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1525, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/collapsible.tsx"],"sourcesContent":["\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;AAIA,MAAM,cAAc,uKAAA,CAAA,OAAyB;AAE7C,MAAM,qBAAqB,uKAAA,CAAA,qBAAuC;AAElE,MAAM,qBAAqB,uKAAA,CAAA,qBAAuC","debugId":null}},
    {"offset": {"line": 1543, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/radio-group.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,0KAAA,CAAA,OAAwB;QACvB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;QAC3B,GAAG,KAAK;QACT,KAAK;;;;;;AAGX;AACA,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4OACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,YAA6B;YAAC,WAAU;sBACvC,cAAA,8OAAC,sMAAA,CAAA,SAAM;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI1B;AACA,eAAe,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1612, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YACC,KAAK;YACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIf,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAM,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAEzE,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2DACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+EACA;QAED,GAAG,KAAK;;;;;;AAGb,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oGACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1722, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoAlturaStep.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { Signature, Trash2, Plus } from 'lucide-react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\n\nconst anexoAlturaEstructuras = [\n  { id: 'escaleraCuerpo', label: 'Escalera de un cuerpo' },\n  { id: 'escaleraDosCuerpos', label: 'Escalera de dos cuerpos o mas' },\n  { id: 'andamioTubular', label: 'Andamio Tubular Certificado' },\n  { id: 'andamioColgante', label: 'Andamio Colgante' },\n  { id: 'plataforma', label: 'Plataforma' },\n  { id: 'manLift', label: 'Man Lift o Camion Canasta' },\n  { id: 'otros', label: 'Otros' },\n];\n\nconst anexoAlturaAspectos = [\n    { id: 'afiliacionVigente', label: 'A. EL PERSONAL EJECUTANTE DE LA ACTIVIDAD TIENE LA AFILIACI√ìN VIGENTE A SEGURIDAD SOCIAL? '},\n    { id: 'procedimientoActividad', label: 'B. SE CUENTA CON EL PROCEDIMIENTO DE LA ACTIVIDAD A EJECUTAR?' },\n    { id: 'medidasPrevencion', label: 'C. SE HAN DETERMINADO LAS MEDIDAS DE PREVENCI√ìN CONTRA CA√çDAS?' },\n    { id: 'conocenMedidas', label: 'D. TODOS LOS EJECUTANTES CONOCEN LAS MEDIDAS DE PRECAUCI√ìN ESTABLECIDAS EN LA EVALUACI√ìN DE RIESGOS?'},\n    { id: 'entrenadosCertificados', label: 'E. EST√ÅN LOS EJECUTANTES ENTRENADOS Y SE ENCUENTRAN LOS CERTIFICADOS EN SITIO PARA REALIZAR TRABAJOS EN ALTURA?'},\n    { id: 'elementosProteccionCertificados', label: 'F. EST√ÅN TODOS LOS ELEMENTOS DE PROTECCI√ìN CONTRA CA√çDAS EN BUEN ESTADO Y CERTIFICADOS?' },\n    { id: 'sistemaAseguramientoVerificado', label: 'G. SE VERIFICO EL SISTEMA DE ASEGURAMIENTO DE LA ESCALERA , ANDAMIO O PLATAFORMA A UNA ESTRUCTURA FIJA' },\n    { id: 'estadoElementosVerificado', label: 'H. SE VERIFICO EL ESTADO DE: ESLINGAS, ARNES, CASCO, MOSQUETONES, CASCO, Y DEMAS ELEMENTOS NECESARIOS PARA REALIZAR EL TRABAJO.' },\n    { id: 'puntosAnclajeCertificados', label: 'I. LOS PUNTOS DE ANCLAJE Y DEMAS ELEMENTOS CUMPLEN CON LA RESISTENCIA DE 5000 LBS POR PERSONA Y ESTAN CERTIFICADOS?' },\n    { id: 'areaDelimitada', label: 'J. ESTA DELIMITADA Y SE√ëALIZADA EL AREA DE TRABAJO' },\n    { id: 'personalSaludable', label: 'K. EL PERSONAL QUE REALIZA EL TRABAJO SE ENCUENTRA EN CONDICIONES ADECUADAS DE SALUD PARA LA ACTIVIDAD?.' },\n    { id: 'equiposAccesoBuenEstado', label: 'L. SE CUENTA CON TODOS LOS EQUIPOS Y SISTEMAS DE ACCESO PARA TRABJO EN ALTURAS EN BUEN ESTADO?' },\n    { id: 'espacioCaidaLibreSuficiente', label: 'M. EL ESPACIO DE CAIDA LIBRE ES SUFICIENTE PARA EVITAR QUE LA PERSONA SE GOLPEE CONTRA EL NIVEL INFERIOR.' },\n    { id: 'equiposEmergenciaDisponibles', label: 'N. SE CUENTA CON ELEMENTOS PARA ATENCION DE EMERGENCIAS EN EL AREA Y PLAN DE EMERGENCIAS PARA RESCATE EN ALTURAS?' },\n    { id: 'eppSeleccionadosCorrectamente', label: 'O. EST√ÅN LOS ELEMENTOS DE PROTECCI√ìN PERSONAL SELECCIONADOS TENIENDO EN CUENTA LOS RIESGOS Y REQUERIMIENTOS DE LA TAREA?' },\n    { id: 'plataformaSoportaCarga', label: 'P.LA PLATAFORMA O ESTRUCTURA SOPORTA LA CARGA DE TRABAJO, ES FIRME Y SE EVITA LA CA√çDA DE OBJETOS O HERRAMIENTAS?' },\n    { id: 'supervisorConstante', label: 'Q.EXISTE UN SUPERVISOR O ACOMPA√ëANTE CONSTASTE DURANTE EL TRABAJO' },\n    { id: 'andamiosCompletos', label: 'R. EN CASO DE TRABAJOS SOBRE ANDAMIOS, ESTOS ESTAN COMPLETOS Y ADECUADAMENTE ARMADOS (RODAPIES, BARANDAS, ETC.)' },\n    { id: 'condicionesClimaticasAdecuadas', label: 'S.LAS CONDICIONES CLIMATICAS SON ADECUADAS PARA REALIZAR EL TRABAJO' },\n    { id: 'metodoSubirHerramientasSeguro', label: 'T.EL METODO DE SUBIR HERRAMIENTAS ES SEGURO' },\n    { id: 'sistemasRestriccion', label: 'U. EN CASO DE REQUERIRSE SE CUENTA CON SISTEMAS DE RESTRICCI√ìN' },\n    { id: 'sistemasPosicionamiento', label: 'V. EN CASO DE REQUERIRSE SE CUENTA CON SISTEMAS DE POSICIONAMIENTO' },\n];\n\nconst anexoAlturaPrecauciones = [\n    { id: 'despresurizar', label: 'DESPRESURIZAR' },\n    { id: 'revisarEquipos', label: 'REVISAR EQUIPOS Y HERRAMIENTAS' },\n    { id: 'sistemaContencionDerrames', label: 'SISTEMA CONTENCION DERRAMES' },\n    { id: 'monitoreoAtmosferas', label: 'MONITOREO DE ATMOSFERAS' },\n    { id: 'verificarListaChequeo', label: 'VERIFICAR LISTA DE CHEQUEO' },\n    { id: 'clasificacionResiduos', label: 'CLASIFICACION DE RESIDUOS' },\n    { id: 'aislamientoMecanico', label: 'AISLAMIENTO MECACNICO' },\n    { id: 'aterrizarEquipo', label: 'ATERRIZAR EQUIPO' },\n    { id: 'planIzaje', label: 'PLAN DE IZAJE' },\n    { id: 'aislamientoProceso', label: 'AISLAMIENTO DE PROCESO' },\n    { id: 'instalarLineasVida', label: 'INSTALAR LINEAS DE VIDA ADICIONALES' },\n    { id: 'fichaSeguridad', label: 'FICHA DE SEGURIDAD' },\n    { id: 'aislamientoElectrico', label: 'AISLAMIENTO ELECTRICO' },\n    { id: 'drenar', label: 'DRENAR' },\n    { id: 'cierreRecipientes', label: 'CIERRE DE RECIPIENTES SIN USO' },\n    { id: 'bloqueoEtiquetado', label: 'BLOQUEO Y ETIQUETADO' },\n    { id: 'ventilar', label: 'VENTILAR' },\n    { id: 'usoEppEspeciales', label: 'USO DE EPPS ESPECIALES' },\n    { id: 'etiquetadoProductosQuimicos', label: 'ETIQUETADO PRODUCTOS QUIMICOS' },\n    { id: 'equipoContraIncendio', label: 'EQUIPO CONTRA INCENDIO' },\n    { id: 'requiereVigia', label: 'REQUIERE VIGIA' },\n    { id: 'senalizacion', label: 'SE√ëALIZACION' },\n    { id: 'kitDerrames', label: 'KIT DERRAMES' },\n    { id: 'otro', label: 'OTRO, CUAL:' },\n];\n\n\nexport function AnexoAlturaStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, anexoAltura } = state;\n  const [isSignatureDialogOpen, setIsSignatureDialogOpen] = React.useState(false);\n  const [signingTarget, setSigningTarget] = React.useState<{ section: string; field: string; index?: number } | null>(null);\n\n  const handleFieldChange = (section: keyof typeof anexoAltura, field: string, value: any) => {\n    dispatch({\n      type: 'UPDATE_ANEXO_ALTURA',\n      payload: {\n        [section]: {\n          ...(anexoAltura as any)[section],\n          [field]: value\n        }\n      }\n    });\n  };\n\n  const handleCheckboxGroupChange = (section: keyof typeof anexoAltura, field: string, checked: boolean) => {\n    const currentSection = (anexoAltura as any)[section] || {};\n    handleFieldChange(section, field, checked);\n  };\n  \n  const handleNestedFieldChange = (section: keyof typeof anexoAltura, subSection: string, field: string, value: any) => {\n      const currentSectionData = (anexoAltura as any)[section] || {};\n      const currentSubSectionData = currentSectionData[subSection] || {};\n      handleFieldChange(section, subSection, { ...currentSubSectionData, [field]: value });\n  };\n  \n  const handleListChange = (section: keyof typeof anexoAltura, listName: string, index: number, field: string, value: any) => {\n      const currentSectionData = (anexoAltura as any)[section] || {};\n      const list = [...(currentSectionData[listName] || [])];\n      list[index] = { ...list[index], [field]: value };\n      handleFieldChange(section, listName, list);\n  };\n  \n  const addToList = (section: keyof typeof anexoAltura, listName: string, defaultItem: any) => {\n      const currentSectionData = (anexoAltura as any)[section] || {};\n      const list = [...(currentSectionData[listName] || [])];\n      list.push(defaultItem);\n      handleFieldChange(section, listName, list);\n  };\n  \n  const removeFromList = (section: keyof typeof anexoAltura, listName: string, index: number) => {\n      const currentSectionData = (anexoAltura as any)[section] || {};\n      const list = (currentSectionData[listName] || []).filter((_: any, i: number) => i !== index);\n      handleFieldChange(section, listName, list);\n  };\n\n  React.useEffect(() => {\n    if (!anexoAltura.validacion?.autoridad || anexoAltura.validacion.autoridad.length < 7) {\n      const autoridad = Array(7).fill(0).map((_, i) => anexoAltura.validacion?.autoridad?.[i] || { dia: i + 1, nombre: '', firma: '', fecha: '' });\n      const responsable = Array(7).fill(0).map((_, i) => anexoAltura.validacion?.responsable?.[i] || { dia: i + 1, nombre: '', firma: '', fecha: '' });\n      dispatch({ type: 'UPDATE_ANEXO_ALTURA', payload: { validacion: { autoridad, responsable } } });\n    }\n  }, [anexoAltura.validacion, dispatch]);\n\n  const openSignatureDialog = (section: string, field: string, index?: number) => {\n    setSigningTarget({ section, field, index });\n    setIsSignatureDialogOpen(true);\n  };\n\n  const handleSaveSignature = (signature: string) => {\n    if (!signingTarget) return;\n\n    const { section, field, index } = signingTarget;\n\n    if (index !== undefined) {\n      const list = [...(anexoAltura[section as keyof typeof anexoAltura] as any)[field]];\n      list[index] = { ...list[index], firma: signature };\n      handleFieldChange(section as keyof typeof anexoAltura, field, list);\n    } else {\n      handleNestedFieldChange(section as keyof typeof anexoAltura, field, 'firma', signature);\n    }\n\n    setIsSignatureDialogOpen(false);\n    setSigningTarget(null);\n  };\n\n  const RadioGroupField = ({ id, label, value, onChange }: { id: string; label: string; value: 'si' | 'no' | 'na'; onChange: (value: 'si' | 'no' | 'na') => void; }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n  );\n\n  return (\n    <>\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Anexo de Trabajo en Alturas\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">\n          Complete la informaci√≥n requerida para trabajos en alturas.\n        </p>\n      </div>\n      \n      {/* Informaci√≥n General Anexos */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2\">\n          Informaci√≥n General del Anexo\n        </h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n            <div><Label>√Årea de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n            <div><Label>Equipo o √Årea Espec√≠fica:</Label><Input value={generalInfo.proceso || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div><Label>Responsable (Nombre):</Label><Input value={generalInfo.responsable?.nombre || ''} readOnly disabled /></div>\n            <div><Label>Cargo:</Label><Input value={generalInfo.responsable?.cargo || ''} readOnly disabled /></div>\n            <div><Label>Compa√±√≠a:</Label><Input value={generalInfo.responsable?.compania || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoAltura.emergencia?.contacto || ''} onChange={(e) => handleNestedFieldChange('emergencia', '', 'contacto', e.target.value)} /></div>\n            <div><Label>Tel√©fono:</Label><Input value={anexoAltura.emergencia?.telefono || ''} onChange={(e) => handleNestedFieldChange('emergencia', '', 'telefono', e.target.value)} /></div>\n        </div>\n        <div>\n            <Label>Altura aproximada a la cual se va a desarrollar la actividad (Indicar en metros)</Label>\n            <Input type=\"number\" value={anexoAltura.alturaAproximada || ''} onChange={(e) => handleFieldChange('alturaAproximada', '', e.target.value)} />\n        </div>\n      </div>\n      \n      {/* Identificaci√≥n de Peligros y Aspectos */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2\">\n          Identificaci√≥n de Peligros y Aspectos para Trabajo en Alturas\n        </h3>\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n            {anexoAlturaEstructuras.map(item => (\n                <div key={item.id} className=\"flex items-center space-x-2\">\n                    <Checkbox id={`struct-${item.id}`} checked={!!anexoAltura.tipoEstructura?.[item.id]} onCheckedChange={(checked) => handleCheckboxGroupChange('tipoEstructura', item.id, !!checked)} />\n                    <Label htmlFor={`struct-${item.id}`}>{item.label}</Label>\n                </div>\n            ))}\n        </div>\n        {anexoAltura.tipoEstructura?.otros && (\n            <Input placeholder=\"Especifique otros\" value={anexoAltura.tipoEstructura.otrosCual || ''} onChange={(e) => handleNestedFieldChange('tipoEstructura', '', 'otrosCual', e.target.value)} />\n        )}\n      </div>\n\n      {/* Aspectos de Seguridad */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2\">\n          Aspectos de Seguridad para Trabajo en Alturas\n        </h3>\n        <div className=\"space-y-3\">\n            {anexoAlturaAspectos.map(item => (\n                <RadioGroupField key={item.id} id={`aspecto-${item.id}`} label={item.label} value={(anexoAltura.aspectosSeguridad as any)?.[item.id] || 'na'} onChange={(value) => handleCheckboxGroupChange('aspectosSeguridad', item.id, value)} />\n            ))}\n        </div>\n      </div>\n\n      {/* Precauciones y Controles */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2\">\n          Precauciones y Controles Espec√≠ficos\n        </h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n             {anexoAlturaPrecauciones.map(item => (\n                <RadioGroupField key={item.id} id={`precaucion-${item.id}`} label={item.label} value={(anexoAltura.precauciones as any)?.[item.id] || 'na'} onChange={(value) => handleCheckboxGroupChange('precauciones', item.id, value)} />\n            ))}\n        </div>\n         {anexoAltura.precauciones?.otro === 'si' && (\n            <Input placeholder=\"Especifique otra precauci√≥n\" value={anexoAltura.precauciones.otroCual || ''} onChange={(e) => handleNestedFieldChange('precauciones', '', 'otroCual', e.target.value)} />\n        )}\n      </div>\n      \n       {/* Afectaciones */}\n       <div className=\"space-y-4\">\n        <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2\">Afectaciones</h3>\n        <RadioGroupField id=\"afect-riesgo-otras\" label=\"¬øEste trabajo produce riesgos para otros trabajos en √°reas adyacentes?\" value={anexoAltura.afectaciones?.riesgoOtrasAreas || 'na'} onChange={(value) => handleNestedFieldChange('afectaciones', '', 'riesgoOtrasAreas', value)} />\n        <RadioGroupField id=\"afect-otras-riesgo\" label=\"¬øLos otros trabajos en √°reas adyacentes producen riesgo a este trabajo?\" value={anexoAltura.afectaciones?.otrasAreasRiesgo || 'na'} onChange={(value) => handleNestedFieldChange('afectaciones', '', 'otrasAreasRiesgo', value)} />\n        <RadioGroupField id=\"afect-personal-notificado\" label=\"¬øEl personal del √°rea potencialmente afectado y los trabajadores fueron notificados del trabajo a realizar?\" value={anexoAltura.afectaciones?.personalNotificado || 'na'} onChange={(value) => handleNestedFieldChange('afectaciones', '', 'personalNotificado', value)} />\n        <div><Label>Observaciones:</Label><Textarea value={anexoAltura.afectaciones?.observaciones || ''} onChange={(e) => handleNestedFieldChange('afectaciones', '', 'observaciones', e.target.value)} /></div>\n       </div>\n\n        {/* Autorizaciones */}\n        <div className=\"space-y-6\">\n            <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2\">Autorizaciones</h3>\n            {/* Autoridad del √Årea */}\n            <div className=\"p-4 border rounded-lg\">\n                <p className=\"text-sm font-semibold mb-2\">Autoridad del √Årea</p>\n                <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Autoridad del √Årea, estoy enterado del trabajo a realizar y apruebo su ejecuci√≥n bajo las medidas de seguridad contempladas en este permiso y sus documentos complementarios.\"</p>\n                <div className=\"grid grid-cols-2 gap-4\">\n                    <Input placeholder=\"Nombre Completo\" value={anexoAltura.autoridadArea?.nombre || ''} onChange={(e) => handleNestedFieldChange('autoridadArea', '', 'nombre', e.target.value)} />\n                    <Input type=\"time\" placeholder=\"Hora\" value={anexoAltura.autoridadArea?.hora || ''} onChange={(e) => handleNestedFieldChange('autoridadArea', '', 'hora', e.target.value)} />\n                </div>\n                 <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('autoridadArea', 'firma')}><Signature className=\"mr-2\"/>Firmar</Button>\n                 {anexoAltura.autoridadArea?.firma && <img src={anexoAltura.autoridadArea.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n            </div>\n            {/* Responsable del Trabajo */}\n            <div className=\"p-4 border rounded-lg\">\n                <p className=\"text-sm font-semibold mb-2\">Responsable del Trabajo</p>\n                <p className=\"text-xs text-muted-foreground mb-4\">\"Manifiesto que entiendo el trabajo que voy a realizar y los riesgos asociados a este, dispongo de los recursos necesarios y tomar√© las medidas de seguridad...\"</p>\n                <div className=\"grid grid-cols-2 gap-4\">\n                    <Input placeholder=\"Nombre Completo\" value={anexoAltura.responsableTrabajo?.nombre || ''} onChange={(e) => handleNestedFieldChange('responsableTrabajo', '', 'nombre', e.target.value)} />\n                    <Input type=\"time\" placeholder=\"Hora\" value={anexoAltura.responsableTrabajo?.hora || ''} onChange={(e) => handleNestedFieldChange('responsableTrabajo', '', 'hora', e.target.value)} />\n                </div>\n                <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('responsableTrabajo', 'firma')}><Signature className=\"mr-2\"/>Firmar</Button>\n                {anexoAltura.responsableTrabajo?.firma && <img src={anexoAltura.responsableTrabajo.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n            </div>\n             {/* Coordinador */}\n            <div className=\"p-4 border rounded-lg\">\n                <p className=\"text-sm font-semibold mb-2\">Coordinador de Trabajos en Alturas</p>\n                 <p className=\"text-xs text-muted-foreground mb-4\">\"Manifiesto que entiendo el trabajo que se va a realizar y sus peligros, se han verificado las condiciones y formulado las medidas de prevenci√≥n necesarias.\"</p>\n                <div className=\"grid grid-cols-2 gap-4\">\n                    <Input placeholder=\"Nombre Completo\" value={anexoAltura.coordinadorTrabajosAltura?.nombre || ''} onChange={(e) => handleNestedFieldChange('coordinadorTrabajosAltura', '', 'nombre', e.target.value)} />\n                    <Input type=\"time\" placeholder=\"Hora\" value={anexoAltura.coordinadorTrabajosAltura?.hora || ''} onChange={(e) => handleNestedFieldChange('coordinadorTrabajosAltura', '', 'hora', e.target.value)} />\n                </div>\n                 <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('coordinadorTrabajosAltura', 'firma')}><Signature className=\"mr-2\"/>Firmar</Button>\n                 {anexoAltura.coordinadorTrabajosAltura?.firma && <img src={anexoAltura.coordinadorTrabajosAltura.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n            </div>\n        </div>\n        \n        {/* Validaci√≥n Diaria */}\n        <div className=\"space-y-4\">\n            <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2\">Validaci√≥n Diaria</h3>\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Autoridad */}\n                <div className=\"p-4 border rounded-lg space-y-2\">\n                    <h4 className=\"font-semibold\">Autoridad del √Årea</h4>\n                    <Table>\n                        <TableHeader><TableRow><TableHead>D√≠a</TableHead><TableHead>Nombre</TableHead><TableHead>Firma</TableHead><TableHead>Fecha</TableHead></TableRow></TableHeader>\n                        <TableBody>\n                            {anexoAltura.validacion?.autoridad.map((v, i) => (\n                                <TableRow key={i}>\n                                    <TableCell>{i + 1}</TableCell>\n                                    <TableCell><Input value={v.nombre} onChange={(e) => handleListChange('validacion', 'autoridad', i, 'nombre', e.target.value)} className=\"h-8\"/></TableCell>\n                                    <TableCell><Button variant=\"ghost\" size=\"icon\" onClick={() => openSignatureDialog('validacion', 'autoridad', i)}><Signature className=\"h-4 w-4\"/></Button></TableCell>\n                                    <TableCell><Input type=\"date\" value={v.fecha} onChange={(e) => handleListChange('validacion', 'autoridad', i, 'fecha', e.target.value)} className=\"h-8\"/></TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n                 {/* Responsable */}\n                <div className=\"p-4 border rounded-lg space-y-2\">\n                    <h4 className=\"font-semibold\">Responsable del Trabajo</h4>\n                    <Table>\n                        <TableHeader><TableRow><TableHead>D√≠a</TableHead><TableHead>Nombre</TableHead><TableHead>Firma</TableHead><TableHead>Fecha</TableHead></TableRow></TableHeader>\n                        <TableBody>\n                             {anexoAltura.validacion?.responsable.map((v, i) => (\n                                <TableRow key={i}>\n                                    <TableCell>{i + 1}</TableCell>\n                                    <TableCell><Input value={v.nombre} onChange={(e) => handleListChange('validacion', 'responsable', i, 'nombre', e.target.value)} className=\"h-8\"/></TableCell>\n                                    <TableCell><Button variant=\"ghost\" size=\"icon\" onClick={() => openSignatureDialog('validacion', 'responsable', i)}><Signature className=\"h-4 w-4\"/></Button></TableCell>\n                                    <TableCell><Input type=\"date\" value={v.fecha} onChange={(e) => handleListChange('validacion', 'responsable', i, 'fecha', e.target.value)} className=\"h-8\"/></TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n            </div>\n        </div>\n\n        {/* Cancelaci√≥n y Cierre */}\n         <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"space-y-4 p-4 border rounded-lg\">\n                <h3 className=\"font-semibold\">Cancelaci√≥n del Trabajo</h3>\n                <RadioGroupField id=\"cancelacion-si-no\" label=\"¬øSe cancel√≥ el trabajo?\" value={anexoAltura.cancelacion?.seCancelo || 'no'} onChange={(value) => handleNestedFieldChange('cancelacion', '', 'seCancelo', value)} />\n                {anexoAltura.cancelacion?.seCancelo === 'si' && (\n                    <div className=\"space-y-3\">\n                        <Textarea placeholder=\"Raz√≥n de la cancelaci√≥n\" value={anexoAltura.cancelacion.razon || ''} onChange={(e) => handleNestedFieldChange('cancelacion', '', 'razon', e.target.value)} />\n                        <Input placeholder=\"Nombre de quien cancela\" value={anexoAltura.cancelacion.nombre || ''} onChange={(e) => handleNestedFieldChange('cancelacion', '', 'nombre', e.target.value)} />\n                         <Input type=\"date\" value={anexoAltura.cancelacion.fecha || ''} onChange={(e) => handleNestedFieldChange('cancelacion', '', 'fecha', e.target.value)} />\n                        <Button variant=\"outline\" className=\"w-full\" onClick={() => openSignatureDialog('cancelacion', 'firma')}><Signature className=\"mr-2\"/>Firmar Cancelaci√≥n</Button>\n                        {anexoAltura.cancelacion?.firma && <img src={anexoAltura.cancelacion.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n                    </div>\n                )}\n            </div>\n             <div className=\"space-y-4 p-4 border rounded-lg\">\n                <h3 className=\"font-semibold\">Cierre del Permiso</h3>\n                <RadioGroupField id=\"cierre-si-no\" label=\"¬øSe termin√≥ el trabajo?\" value={anexoAltura.cierre?.seTermino || 'no'} onChange={(value) => handleNestedFieldChange('cierre', '', 'seTermino', value)} />\n                {anexoAltura.cierre?.seTermino === 'si' && (\n                    <div className=\"space-y-3\">\n                         <Textarea placeholder=\"Observaciones de cierre\" value={anexoAltura.cierre.observaciones || ''} onChange={(e) => handleNestedFieldChange('cierre', '', 'observaciones', e.target.value)} />\n                        <div className=\"p-3 border rounded-md\">\n                            <p className=\"text-xs font-bold\">Autoridad del √Årea</p>\n                            <Input placeholder=\"Nombre\" value={anexoAltura.cierre.autoridad?.nombre || ''} onChange={(e) => handleNestedFieldChange('cierre', 'autoridad', 'nombre', e.target.value)} />\n                             <Input type=\"date\" className=\"mt-2\" value={anexoAltura.cierre.autoridad?.fecha || ''} onChange={(e) => handleNestedFieldChange('cierre', 'autoridad', 'fecha', e.target.value)} />\n                            <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => openSignatureDialog('cierre', 'autoridad')}><Signature className=\"mr-2\"/>Firmar Cierre</Button>\n                            {anexoAltura.cierre.autoridad?.firma && <img src={anexoAltura.cierre.autoridad.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n                        </div>\n                        <div className=\"p-3 border rounded-md\">\n                            <p className=\"text-xs font-bold\">Responsable del Trabajo</p>\n                            <Input placeholder=\"Nombre\" value={anexoAltura.cierre.responsable?.nombre || ''} onChange={(e) => handleNestedFieldChange('cierre', 'responsable', 'nombre', e.target.value)} />\n                            <Input type=\"date\" className=\"mt-2\" value={anexoAltura.cierre.responsable?.fecha || ''} onChange={(e) => handleNestedFieldChange('cierre', 'responsable', 'fecha', e.target.value)} />\n                            <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => openSignatureDialog('cierre', 'responsable')}><Signature className=\"mr-2\"/>Firmar Cierre</Button>\n                            {anexoAltura.cierre.responsable?.firma && <img src={anexoAltura.cierre.responsable.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n\n    </div>\n    <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Registrar Firma</DialogTitle>\n        </DialogHeader>\n        <SignaturePad onSave={handleSaveSignature} />\n      </DialogContent>\n    </Dialog>\n  </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3569, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoConfinadoStep.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { Signature, Trash2, Plus, ChevronDown } from 'lucide-react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\n\n\nconst identificacionPeligros = [\n  { id: 'fuentesEnergiaAisladas', label: 'A. ESTAN LAS FUENTES DE ENERGIA (ELECTRICA, MECANICA, HIDRAULICA, TERMICA NEUMATICA) AISLADAS' },\n  { id: 'ejecutantesConocenMedidas', label: 'B. TODOS LOS EJECUTANTES CONOCEN LAS MEDIDAS DE PRECAUCI√ìN ESTABLECIDAS EN LA EVALUACI√ìN DE RIESGOS?' },\n  { id: 'ejecutantesEntrenados', label: 'C. EST√ÅN LOS EJECUTANTES ENTRENADOS' },\n  { id: 'entradasSalidasFlujoBloqueadas', label: 'D. ESTAN BLOQUEADAS LAS ENTRADAS Y SALIDAS DE FLUJO - SE INSTALARON AISLAMIENTOS (COLOMBINAS, CIEGOS)' },\n  { id: 'areaDelimitada', label: 'E. ESTA DELIMITADA Y SE√ëALIZADA EL AREA DE TRABAJO PARA PREVENIR EL INGRESO AL ESPACIO CONFINADO DE PERSONAL NO AUTORIZADO O AJENO A LA ACTIVIDAD' },\n  { id: 'monitorAtmosferasCalibrado', label: 'F. SE TIENE EN SITIO UN MONITOR DE ATMOSFERAS PELIGROSAS, CALIBRADO' },\n  { id: 'equiposIluminacionExplosion', label: 'G. SON A PRUEBA DE EXPLOSION LOS EQUIPOS DE ILUMINACION, Y LAS CONEXIONES DE LOS EQUIPOS' },\n  { id: 'equiposVentilacionExplosion', label: 'H. SON A PRUEBA DE EXPLOSION LOS EQUIPOS DE VENTILACION O SUMINISTRO DE AIRE FORZADO Y SUS CONEXIONES' },\n  { id: 'medidasSeguridadEquiposNoExplosion', label: 'I. EN CASO DE QUE LOS EQUIPOS NO SEAN A PRUEBA DE EXPLOSION SE SE TOMARON LAS MEDIDAS DE SEGURUDAD NECESARIA PARA EVITAR RIESGOS' },\n  { id: 'equiposVentilacionSuficientes', label: 'J. LOS EQUIPOS DE VENTILACION ESTAN DISPONIBLES Y SON SUFICIENTES' },\n  { id: 'chequeoVentilacionMecanica', label: 'CHEQUEO DE VENTILACION MECANICA' },\n  { id: 'chequeoVentilacionNatural', label: 'CHEQUEO DE VENTILACION (SOLO NATURAL)' },\n  { id: 'equiposRespiracionAutonoma', label: 'K. ESTAN DISPONIBLES EN EL SITIO EQUIPOS DE RESPIRACION AUTONOMA (AUTOCONTENIDO) EN CASO DE EMERGENCIA' },\n  { id: 'elementosAtencionEmergencias', label: 'L. SE CUENTA CON ELEMENTOS PARA ATENCION DE EMERGENCIAS EN EL AREA' },\n  { id: 'planEmergenciaRescate', label: 'M. SE CUENTA CON PLAN DE EMERGENCIA PARA RESCATE' },\n  { id: 'hojasSeguridadDisponibles', label: 'N. ESTAN DISPONIBLES LAS HOJAS DE SEGURIDAD DE PRODUCTOS QUIMICOS EN CASO DE USARSE.' },\n  { id: 'verificadoConexionesPuestaTierra', label: '√ë.SE HA VERIFICADO EL ESTADO DE CONEXIONES Y PUESTA A TIERRA DE EQUIPOS Y ELEMENTOS A USAR.' },\n  { id: 'vigiaPermanente', label: 'O.SE VERIFICA QUE PARA EL INGRESO A ESPACIOS CONFIANDOS SE CUENTE CON UN VIGIA PERMANENTE EN EL AREA' },\n  { id: 'herramientasAdecuadas', label: 'P. SE VERIFICO QUE LAS HERRAMIENTAS MANUALES Y OTROS ELEMENTOS SEAN LOS ADECUADOS PARA LAS CONDICIONES Y ATMOSFERAS DEL LUGAR' },\n  { id: 'personalSaludable', label: 'Q.EL PERSONAL QUE REALIZA EL TRABAJO SE ENCUENTRA EN CONDICIONES ADECUADAS DE SALUD PARA LA ACTIVIDAD' },\n  { id: 'verificadoEpp', label: 'R.SE VERIFICO EL EQUIPO Y ELEMENTOS DE PROTECCION PERSONAL A UTILIZAR' },\n  { id: 'circunstanciaModificadora', label: 'S.EXISTE ALGUNA CIRCUSTANCIA O FACTOR QUE PUEDA MODIFICAR EL TRABAJO' },\n  { id: 'equiposIntrinsecamenteSeguros', label: 'SE HA VERIFICADO QUE LOS EQUIPOS A USARSE SON INTRINSICAMENTE SEGUROS' },\n  { id: 'procedimientoComunicacion', label: 'SE CUENTA CON PROCEDMIENTO DE COMUNICACI√ìN CUAL ?' }\n];\n\nconst peligroSections: { title: string, items: string[] }[] = [\n    { title: \"Aislamiento y Preparaci√≥n del √Årea\", items: ['fuentesEnergiaAisladas', 'entradasSalidasFlujoBloqueadas', 'areaDelimitada'] },\n    { title: \"Personal y Entrenamiento\", items: ['ejecutantesConocenMedidas', 'ejecutantesEntrenados', 'personalSaludable', 'vigiaPermanente'] },\n    { title: \"Equipos y Monitoreo\", items: ['monitorAtmosferasCalibrado', 'equiposIluminacionExplosion', 'equiposVentilacionExplosion', 'medidasSeguridadEquiposNoExplosion', 'equiposVentilacionSuficientes', 'chequeoVentilacionMecanica', 'chequeoVentilacionNatural', 'equiposIntrinsecamenteSeguros'] },\n    { title: \"Emergencias y Rescate\", items: ['equiposRespiracionAutonoma', 'elementosAtencionEmergencias', 'planEmergenciaRescate'] },\n    { title: \"Materiales y Herramientas\", items: ['hojasSeguridadDisponibles', 'verificadoConexionesPuestaTierra', 'herramientasAdecuadas', 'verificadoEpp'] },\n    { title: \"Condiciones Adicionales\", items: ['circunstanciaModificadora', 'procedimientoComunicacion'] }\n];\n\n\nconst precaucionesControles = [\n    { id: 'despresurizar', label: 'DESPRESURIZAR' },\n    { id: 'revisarEquipos', label: 'REVISAR EQUIPOS Y HERRAMIENTAS' },\n    { id: 'monitoreoAtmosferas', label: 'MONITOREO DE ATMOSFERAS' },\n    { id: 'drenarVentilar', label: 'DRENAR Y VENTILAR' },\n    { id: 'aislamientoEnergias', label: 'AISLAMIENTO DE ENERGIAS' },\n    { id: 'aterrizarEquipo', label: 'ATERRIZAR EQUIPO' },\n    { id: 'equipoContraIncendio', label: 'EQUIPO CONTRA INCENDIO' },\n    { id: 'instalarLineasVida', label: 'INSTALAR LINEAS DE VIDA ADICIONALES' },\n    { id: 'usoEppsEspeciales', label: 'USO DE EPPS ESPECIALES' },\n    { id: 'hojaSeguridadMsds', label: 'HOJA DE SEGURIDAD MSDS' },\n    { id: 'bloqueoEtiquetado', label: 'BLOQUEO Y ETIQUETADO' },\n    { id: 'requiereVigia', label: 'REQUIERE VIGIA' },\n    { id: 'etiquetadoProductosQuimicos', label: 'ETIQUETADO PRODUCTOS QUIMICOS' },\n    { id: 'clasificacionResiduos', label: 'CLASIFICACION DE RESIDUOS' },\n    { id: 'senalizacion', label: 'SE√ëALIZACION' },\n    { id: 'sistemaContencionDerrames', label: 'SISTEMA DE CONTENCION DE DERRAMES' }\n];\n\nconst requerimientosEquipos = [\n    { id: 'arnesLineasVida', label: 'ARNES DE SEGURIDAD, LINEAS DE VIDA PARA PERSONAS QUE INGRESAN Y SALEN' },\n    { id: 'equiposIzar', label: 'EQUIPOS PARA IZAR (CUERDAS, CABLES, ETC)' },\n    { id: 'equiposComunicaciones', label: 'EQUIPOS DE COMUNICACIONES' },\n    { id: 'equiposAutonomos', label: 'EQUIPOS AUTONOMOS PARA PERSONAS DE ENTRADA Y SALIDA' },\n    { id: 'extintores', label: 'EXTINTORES' },\n    { id: 'ropaDotacionEspecial', label: 'ROPA Y DOTACION ESPECIAL DE PROTECCION' },\n    { id: 'bloqueosAislamientos', label: 'BLOQUEOS / AISLAMIENTOS /SALIDA ' },\n    { id: 'lineasElectricasChequeadas', label: 'L√çNEAS EL√âCTRICAS: EXPUESTAS, OCULTAS EST√ÅN CHEQUEADAS' },\n    { id: 'areaSegura', label: 'AREA SEGURA' },\n    { id: 'personalSeguridadCierre', label: 'PRESONAL DE SEGURIDAD DE CIERRE?' },\n    { id: 'equipoRecuperacionEmergencia', label: 'EQUIPO DE RECUPERACION DE EMERGENCIA' },\n    { id: 'iluminacionEquiposExplosion', label: 'ILUMINACION Y EQUIPOS A PRUEBA DE EXPLOSION' }\n];\n\nconst RadioGroupField = ({ id, label, value, onChange }: { id: string; label: string; value: 'si' | 'no' | 'na'; onChange: (value: 'si' | 'no' | 'na') => void; }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\nexport function AnexoConfinadoStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, anexoConfinado } = state;\n  const [isSignatureDialogOpen, setIsSignatureDialogOpen] = React.useState(false);\n  const [signingTarget, setSigningTarget] = React.useState<{ section: string; field: string; index?: number } | null>(null);\n\n  const handleFieldChange = (field: string, value: any) => {\n    dispatch({\n      type: 'UPDATE_ANEXO_CONFINADO',\n      payload: { [field]: value }\n    });\n  };\n\n  const handleNestedFieldChange = (section: keyof typeof anexoConfinado, field: string, value: any) => {\n      const currentSectionData = (anexoConfinado as any)[section] || {};\n      handleFieldChange(section, { ...currentSectionData, [field]: value });\n  };\n  \n  const handleListChange = (section: keyof typeof anexoConfinado, listName: string, index: number, field: string, value: any) => {\n      const currentSectionData = (anexoConfinado as any)[section] || {};\n      const list = [...(currentSectionData[listName] || [])];\n      list[index] = { ...list[index], [field]: value };\n      handleNestedFieldChange(section, listName, list);\n  };\n  \n  const addToList = (section: keyof typeof anexoConfinado, listName: string, defaultItem: any) => {\n      const currentSectionData = (anexoConfinado as any)[section] || {};\n      const list = [...(currentSectionData[listName] || [])];\n      if (list.length >= 4 && listName === 'pruebas') {\n          return; // Limit to 4\n      }\n      list.push(defaultItem);\n      handleNestedFieldChange(section, listName, list);\n  };\n  \n  const removeFromList = (section: keyof typeof anexoConfinado, listName: string, index: number) => {\n      const currentSectionData = (anexoConfinado as any)[section] || {};\n      const list = (currentSectionData[listName] || []).filter((_: any, i: number) => i !== index);\n      handleNestedFieldChange(section, listName, list);\n  };\n  \n  React.useEffect(() => {\n    if (!anexoConfinado?.validacion?.autoridad || anexoConfinado.validacion.autoridad.length < 7) {\n      const autoridad = Array(7).fill(0).map((_, i) => anexoConfinado?.validacion?.autoridad?.[i] || { dia: i + 1, nombre: '', firma: '', fecha: '' });\n      const responsable = Array(7).fill(0).map((_, i) => anexoConfinado?.validacion?.responsable?.[i] || { dia: i + 1, nombre: '', firma: '', fecha: '' });\n      dispatch({ type: 'UPDATE_ANEXO_CONFINADO', payload: { validacion: { autoridad, responsable } } });\n    }\n  }, [anexoConfinado?.validacion, dispatch]);\n\n  const openSignatureDialog = (section: string, field: string, index?: number) => {\n    setSigningTarget({ section, field, index });\n    setIsSignatureDialogOpen(true);\n  };\n\n  const handleSaveSignature = (signature: string) => {\n    if (!signingTarget) return;\n    const { section, field, index } = signingTarget;\n\n    if (section === 'resultadosPruebasGases' && field === 'firmaQuienRealiza') {\n      handleNestedFieldChange('resultadosPruebasGases', 'firmaQuienRealiza', signature);\n    } else if (section === 'pruebasGasesPeriodicas' && field === 'pruebas' && index !== undefined) {\n      handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'firma', signature);\n    } else if (section === 'validacion' && (field === 'autoridad' || field === 'responsable') && index !== undefined) {\n      handleListChange('validacion', field, index, 'firma', signature);\n    } else if (section === 'cancelacion' && field === 'firma') {\n      handleNestedFieldChange('cancelacion', 'firma', signature);\n    } else if (section === 'cierre' && (field === 'autoridad' || field === 'responsable')) {\n        const currentCierreData = (anexoConfinado as any)['cierre'] || {};\n        const currentSignatureData = currentCierreData[field] || {};\n        handleNestedFieldChange('cierre', field, { ...currentSignatureData, firma: signature });\n    } else {\n       handleNestedFieldChange(section as keyof typeof anexoConfinado, 'firma', signature);\n    }\n    \n    setIsSignatureDialogOpen(false);\n    setSigningTarget(null);\n  };\n\n  const SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => (\n    <Collapsible defaultOpen={defaultOpen}>\n      <CollapsibleTrigger className=\"w-full\">\n        <div className=\"flex items-center justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </div>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n\n  return (\n    <>\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Anexo de Espacios Confinados\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">\n          Complete la informaci√≥n requerida para trabajos en espacios confinados.\n        </p>\n      </div>\n\n      <SectionWrapper title=\"Informaci√≥n General del Anexo\" defaultOpen>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n          <div><Label>√Årea de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n          <div><Label>Equipo o √Årea Espec√≠fica:</Label><Input value={generalInfo.proceso || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n            <div><Label>Responsable (Nombre):</Label><Input value={generalInfo.responsable?.nombre || ''} readOnly disabled /></div>\n            <div><Label>Cargo:</Label><Input value={generalInfo.responsable?.cargo || ''} readOnly disabled /></div>\n            <div><Label>Compa√±√≠a:</Label><Input value={generalInfo.responsable?.compania || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n          <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoConfinado?.emergencia?.contacto || ''} onChange={(e) => handleNestedFieldChange('emergencia', 'contacto', e.target.value)} /></div>\n          <div><Label>Tel√©fono:</Label><Input value={anexoConfinado?.emergencia?.telefono || ''} onChange={(e) => handleNestedFieldChange('emergencia', 'telefono', e.target.value)} /></div>\n        </div>\n      </SectionWrapper>\n\n      <SectionWrapper title=\"Identificaci√≥n de Peligros y Aspectos\">\n        <div className=\"space-y-2\">\n            {peligroSections.map((section) => (\n                <Collapsible key={section.title}>\n                    <CollapsibleTrigger asChild>\n                        <Button variant=\"ghost\" className=\"w-full justify-between p-4 border rounded-lg\">\n                            <span className=\"font-semibold text-gray-700\">{section.title}</span>\n                            <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n                        </Button>\n                    </CollapsibleTrigger>\n                    <CollapsibleContent className=\"p-4 border border-t-0 rounded-b-lg space-y-3\">\n                        {section.items.map(itemId => {\n                            const item = identificacionPeligros.find(p => p.id === itemId);\n                            if (!item) return null;\n                            return (\n                                <div key={item.id} className=\"space-y-2\">\n                                    <RadioGroupField\n                                        id={`peligro-${item.id}`}\n                                        label={item.label}\n                                        value={(anexoConfinado?.identificacionPeligros as any)?.[item.id] || 'na'}\n                                        onChange={(value) => handleNestedFieldChange('identificacionPeligros', item.id, value)}\n                                    />\n                                    {item.id === 'procedimientoComunicacion' && anexoConfinado?.identificacionPeligros?.procedimientoComunicacion === 'si' && (\n                                        <Input\n                                            className=\"ml-8 w-[calc(100%-2rem)]\"\n                                            placeholder=\"Cu√°l procedimiento de comunicaci√≥n?\"\n                                            value={anexoConfinado?.procedimientoComunicacionCual || ''}\n                                            onChange={(e) => handleFieldChange('procedimientoComunicacionCual', e.target.value)}\n                                        />\n                                    )}\n                                </div>\n                            );\n                        })}\n                    </CollapsibleContent>\n                </Collapsible>\n            ))}\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Precauciones y Controles Espec√≠ficos\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {precaucionesControles.map(item => (\n                <RadioGroupField key={item.id} id={`precaucion-${item.id}`} label={item.label} value={(anexoConfinado?.precauciones as any)?.[item.id] || 'na'} onChange={(value) => handleNestedFieldChange('precauciones', item.id, value)} />\n            ))}\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Resultados de Pruebas de Gases\">\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 items-end\">\n            <div><Label>LEL (0%)</Label><Input value={anexoConfinado?.resultadosPruebasGases?.lel || ''} onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'lel', e.target.value)} /></div>\n            <div><Label>O2 (19.5-22%)</Label><Input value={anexoConfinado?.resultadosPruebasGases?.o2 || ''} onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'o2', e.target.value)} /></div>\n            <div><Label>H2S (0-10 PPM)</Label><Input value={anexoConfinado?.resultadosPruebasGases?.h2s || ''} onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'h2s', e.target.value)} /></div>\n            <div><Label>CO (0-25 PPM)</Label><Input value={anexoConfinado?.resultadosPruebasGases?.co || ''} onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'co', e.target.value)} /></div>\n            <div className=\"col-span-2\"><Label>Otros</Label><Input value={anexoConfinado?.resultadosPruebasGases?.otros || ''} onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'otros', e.target.value)} /></div>\n            <div><Label>Serial Monitor</Label><Input value={anexoConfinado?.resultadosPruebasGases?.serialMonitor || ''} onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'serialMonitor', e.target.value)} /></div>\n            <div><Label>Hora Prueba</Label><Input type=\"time\" value={anexoConfinado?.resultadosPruebasGases?.horaPrueba || ''} onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'horaPrueba', e.target.value)} /></div>\n            <div className=\"col-span-full\"><Label>Nombre de quien realiza</Label><Input value={anexoConfinado?.resultadosPruebasGases?.nombreQuienRealiza || ''} onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'nombreQuienRealiza', e.target.value)} /></div>\n            <div className=\"col-span-full\">\n                <Button variant=\"outline\" className=\"w-full\" onClick={() => openSignatureDialog('resultadosPruebasGases', 'firmaQuienRealiza')}><Signature className=\"mr-2\"/>Firmar</Button>\n                {anexoConfinado?.resultadosPruebasGases?.firmaQuienRealiza && <img src={anexoConfinado.resultadosPruebasGases.firmaQuienRealiza} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n            </div>\n        </div>\n      </SectionWrapper>\n      \n       <SectionWrapper title=\"Requerimientos y Equipos Revisados\">\n         {requerimientosEquipos.map(item => (\n            <RadioGroupField key={item.id} id={`req-${item.id}`} label={item.label} value={(anexoConfinado?.requerimientosEquipos as any)?.[item.id] || 'na'} onChange={(value) => handleNestedFieldChange('requerimientosEquipos', item.id, value)} />\n         ))}\n         <div className='mt-4'>\n            <Label>Las pruebas de gases se deben realizar cada:</Label>\n            <Input value={anexoConfinado?.pruebasGasesPeriodicas?.intervalo || ''} onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'intervalo', e.target.value)} placeholder=\"Ej: 30 minutos\"/>\n         </div>\n       </SectionWrapper>\n\n      <SectionWrapper title=\"Pruebas de Gases Peri√≥dicas Requeridas\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n             <div><Label>Prueba realizada por:</Label><Input value={anexoConfinado?.pruebasGasesPeriodicas?.pruebaRealizadaPor || ''} onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'pruebaRealizadaPor', e.target.value)} /></div>\n             <div><Label>Serial Monitor:</Label><Input value={anexoConfinado?.pruebasGasesPeriodicas?.serialMonitor || ''} onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'serialMonitor', e.target.value)} /></div>\n             <div><Label>Marca:</Label><Input value={anexoConfinado?.pruebasGasesPeriodicas?.marca || ''} onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'marca', e.target.value)} /></div>\n             <div><Label>Fecha y Hora Calibraci√≥n:</Label><Input type=\"datetime-local\" value={anexoConfinado?.pruebasGasesPeriodicas?.fechaCalibracion || ''} onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'fechaCalibracion', e.target.value)} /></div>\n          </div>\n          \n          <Table className=\"mt-4\">\n            <TableHeader>\n              <TableRow>\n                <TableHead>Hora</TableHead><TableHead>LEL</TableHead><TableHead>O2</TableHead><TableHead>H2S</TableHead><TableHead>CO</TableHead><TableHead>Firma</TableHead><TableHead></TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {anexoConfinado?.pruebasGasesPeriodicas?.pruebas?.map((prueba, index) => (\n                <TableRow key={prueba.id}>\n                    <TableCell><Input className=\"h-8\" type=\"time\" value={prueba.hora} onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'hora', e.target.value)} /></TableCell>\n                    <TableCell><Input className=\"h-8\" value={prueba.lel} onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'lel', e.target.value)} /></TableCell>\n                    <TableCell><Input className=\"h-8\" value={prueba.o2} onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'o2', e.target.value)} /></TableCell>\n                    <TableCell><Input className=\"h-8\" value={prueba.h2s} onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'h2s', e.target.value)} /></TableCell>\n                    <TableCell><Input className=\"h-8\" value={prueba.co} onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'co', e.target.value)} /></TableCell>\n                    <TableCell><Button variant=\"ghost\" size=\"icon\" onClick={() => openSignatureDialog('pruebasGasesPeriodicas', 'pruebas', index)}><Signature className=\"h-4 w-4\"/></Button></TableCell>\n                    <TableCell><Button variant=\"ghost\" size=\"icon\" onClick={() => removeFromList('pruebasGasesPeriodicas', 'pruebas', index)}><Trash2 className=\"h-4 w-4 text-destructive\"/></Button></TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          {(anexoConfinado?.pruebasGasesPeriodicas?.pruebas?.length || 0) < 4 && (\n            <Button size=\"sm\" onClick={() => addToList('pruebasGasesPeriodicas', 'pruebas', { id: `prueba-${Date.now()}` })} className=\"mt-2\"><Plus className=\"mr-2 h-4 w-4\"/>Agregar Prueba</Button>\n          )}\n      </SectionWrapper>\n\n       <SectionWrapper title=\"Autorizaciones\">\n        <div className=\"p-4 border rounded-lg mb-4\">\n            <p className=\"text-sm font-semibold mb-2\">Autoridad del √Årea</p>\n            <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Autoridad del √Årea...\"</p>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <Input placeholder=\"Nombre\" value={anexoConfinado?.autoridadDelArea?.nombre || ''} onChange={e => handleNestedFieldChange('autoridadDelArea', 'nombre', e.target.value)} />\n              <Input type=\"time\" placeholder=\"Hora\" value={anexoConfinado?.autoridadDelArea?.hora || ''} onChange={e => handleNestedFieldChange('autoridadDelArea', 'hora', e.target.value)} />\n            </div>\n            <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('autoridadDelArea', 'firma')}><Signature className=\"mr-2\"/>Firmar</Button>\n            {anexoConfinado?.autoridadDelArea?.firma && <img src={anexoConfinado.autoridadDelArea.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n        </div>\n        <div className=\"p-4 border rounded-lg mb-4\">\n            <p className=\"text-sm font-semibold mb-2\">Responsable del Trabajo</p>\n            <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Responsable del Trabajo...\"</p>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <Input placeholder=\"Nombre\" value={anexoConfinado?.responsableDelTrabajo?.nombre || ''} onChange={e => handleNestedFieldChange('responsableDelTrabajo', 'nombre', e.target.value)} />\n              <Input type=\"time\" placeholder=\"Hora\" value={anexoConfinado?.responsableDelTrabajo?.hora || ''} onChange={e => handleNestedFieldChange('responsableDelTrabajo', 'hora', e.target.value)} />\n            </div>\n            <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('responsableDelTrabajo', 'firma')}><Signature className=\"mr-2\"/>Firmar</Button>\n            {anexoConfinado?.responsableDelTrabajo?.firma && <img src={anexoConfinado.responsableDelTrabajo.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n        </div>\n        <div className=\"p-4 border rounded-lg\">\n            <p className=\"text-sm font-semibold mb-2\">Supervisor de Trabajo en Espacios Confinados</p>\n            <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Supervisor...\"</p>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <Input placeholder=\"Nombre\" value={anexoConfinado?.supervisorTrabajo?.nombre || ''} onChange={e => handleNestedFieldChange('supervisorTrabajo', 'nombre', e.target.value)} />\n              <Input type=\"time\" placeholder=\"Hora\" value={anexoConfinado?.supervisorTrabajo?.hora || ''} onChange={e => handleNestedFieldChange('supervisorTrabajo', 'hora', e.target.value)} />\n            </div>\n            <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('supervisorTrabajo', 'firma')}><Signature className=\"mr-2\"/>Firmar</Button>\n            {anexoConfinado?.supervisorTrabajo?.firma && <img src={anexoConfinado.supervisorTrabajo.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Validaci√≥n y Cierre\">\n         <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <div className=\"p-4 border rounded-lg space-y-2\">\n                    <h4 className=\"font-semibold\">Autoridad del √Årea</h4>\n                    <p className='text-xs text-muted-foreground'>Entiendo todas las condiciones de este trabajo y la responsabilidad de implementar las medidas de control establecidas.</p>\n                    <Table>\n                        <TableHeader><TableRow><TableHead>D√≠a</TableHead><TableHead>Nombre</TableHead><TableHead>Firma</TableHead><TableHead>Fecha</TableHead></TableRow></TableHeader>\n                        <TableBody>\n                            {anexoConfinado.validacion?.autoridad.map((v, i) => (\n                                <TableRow key={i}>\n                                    <TableCell>{i + 1}</TableCell>\n                                    <TableCell><Input value={v.nombre} onChange={(e) => handleListChange('validacion', 'autoridad', i, 'nombre', e.target.value)} className=\"h-8\"/></TableCell>\n                                    <TableCell><Button variant=\"ghost\" size=\"icon\" onClick={() => openSignatureDialog('validacion', 'autoridad', i)}><Signature className=\"h-4 w-4\"/></Button></TableCell>\n                                    <TableCell><Input type=\"date\" value={v.fecha} onChange={(e) => handleListChange('validacion', 'autoridad', i, 'fecha', e.target.value)} className=\"h-8\"/></TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n                <div className=\"p-4 border rounded-lg space-y-2\">\n                    <h4 className=\"font-semibold\">Responsable del Trabajo/Ejecutor</h4>\n                     <p className='text-xs text-muted-foreground'>Entiendo todas las condiciones de este trabajo y la responsabilidad de implementar las medidas de control establecidas.</p>\n                    <Table>\n                        <TableHeader><TableRow><TableHead>D√≠a</TableHead><TableHead>Nombre</TableHead><TableHead>Firma</TableHead><TableHead>Fecha</TableHead></TableRow></TableHeader>\n                        <TableBody>\n                             {anexoConfinado.validacion?.responsable.map((v, i) => (\n                                <TableRow key={i}>\n                                    <TableCell>{i + 1}</TableCell>\n                                    <TableCell><Input value={v.nombre} onChange={(e) => handleListChange('validacion', 'responsable', i, 'nombre', e.target.value)} className=\"h-8\"/></TableCell>\n                                    <TableCell><Button variant=\"ghost\" size=\"icon\" onClick={() => openSignatureDialog('validacion', 'responsable', i)}><Signature className=\"h-4 w-4\"/></Button></TableCell>\n                                    <TableCell><Input type=\"date\" value={v.fecha} onChange={(e) => handleListChange('validacion', 'responsable', i, 'fecha', e.target.value)} className=\"h-8\"/></TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6\">\n              <div className=\"space-y-4 p-4 border rounded-lg\">\n                  <h3 className=\"font-semibold\">Cancelaci√≥n del Trabajo</h3>\n                  <RadioGroupField id=\"cancelacion-si-no\" label=\"¬øSe cancel√≥ el trabajo?\" value={anexoConfinado.cancelacion?.seCancelo || 'no'} onChange={(value) => handleNestedFieldChange('cancelacion', 'seCancelo', value)} />\n                  {anexoConfinado.cancelacion?.seCancelo === 'si' && (\n                      <div className=\"space-y-3\">\n                          <Textarea placeholder=\"Raz√≥n de la cancelaci√≥n\" value={anexoConfinado.cancelacion.razon || ''} onChange={(e) => handleNestedFieldChange('cancelacion', 'razon', e.target.value)} />\n                          <Input placeholder=\"Nombre de quien cancela\" value={anexoConfinado.cancelacion.nombre || ''} onChange={(e) => handleNestedFieldChange('cancelacion', 'nombre', e.target.value)} />\n                          <Input type=\"date\" value={anexoConfinado.cancelacion.fecha || ''} onChange={(e) => handleNestedFieldChange('cancelacion', 'fecha', e.target.value)} />\n                          <Button variant=\"outline\" className=\"w-full\" onClick={() => openSignatureDialog('cancelacion', 'firma')}><Signature className=\"mr-2\"/>Firmar Cancelaci√≥n</Button>\n                          {anexoConfinado.cancelacion?.firma && <img src={anexoConfinado.cancelacion.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n                      </div>\n                  )}\n              </div>\n              <div className=\"space-y-4 p-4 border rounded-lg\">\n                  <h3 className=\"font-semibold\">Cierre del Permiso</h3>\n                  <RadioGroupField id=\"cierre-si-no\" label=\"¬øSe termin√≥ el trabajo?\" value={anexoConfinado.cierre?.seTermino || 'no'} onChange={(value) => handleNestedFieldChange('cierre', 'seTermino', value)} />\n                  {anexoConfinado.cierre?.seTermino === 'si' && (\n                      <div className=\"space-y-3\">\n                          <Textarea placeholder=\"Observaciones de cierre\" value={anexoConfinado.cierre.observaciones || ''} onChange={(e) => handleNestedFieldChange('cierre', 'observaciones', e.target.value)} />\n                          <div className=\"p-3 border rounded-md\">\n                              <p className=\"text-xs font-bold\">Autoridad del √Årea</p>\n                              <Input placeholder=\"Nombre\" value={anexoConfinado.cierre.autoridad?.nombre || ''} onChange={(e) => handleNestedFieldChange('cierre', 'autoridad', { ...anexoConfinado.cierre.autoridad, nombre: e.target.value })} />\n                              <Input type=\"date\" className=\"mt-2\" value={anexoConfinado.cierre.autoridad?.fecha || ''} onChange={(e) => handleNestedFieldChange('cierre', 'autoridad', { ...anexoConfinado.cierre.autoridad, fecha: e.target.value })} />\n                              <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => openSignatureDialog('cierre', 'autoridad')}><Signature className=\"mr-2\"/>Firmar Cierre</Button>\n                              {anexoConfinado.cierre.autoridad?.firma && <img src={anexoConfinado.cierre.autoridad.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n                          </div>\n                          <div className=\"p-3 border rounded-md\">\n                              <p className=\"text-xs font-bold\">Responsable del Trabajo</p>\n                              <Input placeholder=\"Nombre\" value={anexoConfinado.cierre.responsable?.nombre || ''} onChange={(e) => handleNestedFieldChange('cierre', 'responsable', { ...anexoConfinado.cierre.responsable, nombre: e.target.value })} />\n                              <Input type=\"date\" className=\"mt-2\" value={anexoConfinado.cierre.responsable?.fecha || ''} onChange={(e) => handleNestedFieldChange('cierre', 'responsable', { ...anexoConfinado.cierre.responsable, fecha: e.target.value })} />\n                              <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => openSignatureDialog('cierre', 'responsable')}><Signature className=\"mr-2\"/>Firmar Cierre</Button>\n                              {anexoConfinado.cierre.responsable?.firma && <img src={anexoConfinado.cierre.responsable.firma} alt=\"Firma\" className=\"mt-2 border rounded-md\" />}\n                          </div>\n                      </div>\n                  )}\n              </div>\n          </div>\n      </SectionWrapper>\n\n    </div>\n    <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Registrar Firma</DialogTitle>\n        </DialogHeader>\n        <SignaturePad onSave={handleSaveSignature} />\n      </DialogContent>\n    </Dialog>\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6033, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/page.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useUser } from '@/hooks/use-user';\nimport { useToast } from '@/hooks/use-toast';\nimport { createPermit } from '../actions';\nimport { useRouter } from 'next/navigation';\nimport {\n  CheckCircle,\n  XCircle,\n  AlertTriangle,\n  FileText,\n  Users,\n  Shield,\n  Upload,\n  Camera,\n  Wand2,\n  Loader2,\n  X,\n  UserPlus,\n  Signature,\n  FileUp,\n  Edit,\n  Plus,\n  Trash2,\n  Clock,\n  Check,\n  ArrowRight,\n  ArrowLeft,\n  Copy,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport type { Permit, ExternalWorker, Tool, AnexoAltura, AnexoConfinado, AnexoIzaje, MedicionAtmosferica, AnexoEnergias, AnexoATS, PermitGeneralInfo, ValidacionDiaria, AutorizacionPersona, PruebaGasesPeriodica, AnexoCaliente, AnexoExcavaciones, JustificacionATS } from '@/types';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport Image from 'next/image';\nimport { PermitFormProvider, usePermitForm } from './form-context';\nimport { GeneralInfoStep } from './components/GeneralInfoStep';\nimport { AtsStep } from './components/AtsStep';\nimport { AnexoAlturaStep } from './components/AnexoAlturaStep';\nimport { AnexoConfinadoStep } from './components/AnexoConfinadoStep';\n\n\nconst workerRoles = [\n  \"Trabajador autorizado\",\n  \"Ayudante de seguridad\",\n  \"Coordinador de TA\",\n  \"Supervisor de EC\",\n  \"Soldador\",\n  \"Operador de equipo para elevaci√≥n de personas\",\n  \"Vig√≠a\",\n  \"Otro\"\n];\n\nfunction CreatePermitWizard() {\n  const { user } = useUser();\n  const { toast } = useToast();\n  const router = useRouter();\n\n  const { state: formData, dispatch } = usePermitForm();\n\n  const [step, setStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isAssessing, setIsAssessing] = useState(false);\n  const [recommendations, setRecommendations] = useState('');\n  const [showSuccessDialog, setShowSuccessDialog] = useState(false);\n  const [newPermitInfo, setNewPermitInfo] = useState({ id: '', number: '' });\n\n  // Step 5 - Emergencia, Trabajadores\n  const [isWorkerDialogOpen, setIsWorkerDialogOpen] = useState(false);\n  const [currentWorker, setCurrentWorker] = useState<Partial<ExternalWorker> | null>(null);\n  const [editingWorkerIndex, setEditingWorkerIndex] = useState<number | null>(null);\n  const [isSignaturePadOpen, setIsSignaturePadOpen] = useState(false);\n  const [signatureTarget, setSignatureTarget] = useState<string | null>(null);\n  const [signatureContext, setSignatureContext] = useState<any>(null);\n\n  useEffect(() => {\n    if (user && !formData.generalInfo.nombreSolicitante) {\n      dispatch({ type: 'UPDATE_GENERAL_INFO', payload: { nombreSolicitante: user.displayName || '' } });\n    }\n  }, [user, formData.generalInfo.nombreSolicitante, dispatch]);\n\n  const openNewWorkerDialog = () => {\n    setEditingWorkerIndex(null);\n    setCurrentWorker({\n      nombre: '',\n      cedula: '',\n      rol: '',\n      eps: '',\n      arl: '',\n      pensiones: '',\n      tsaTec: 'na',\n      entrenamiento: 'otro',\n      firmaApertura: '',\n      firmaCierre: ''\n    });\n    setIsWorkerDialogOpen(true);\n  };\n  \n  const openEditWorkerDialog = (worker: ExternalWorker, index: number) => {\n    setEditingWorkerIndex(index);\n    setCurrentWorker(worker);\n    setIsWorkerDialogOpen(true);\n  };\n\n  const handleSaveWorker = () => {\n    if (!currentWorker || !currentWorker.nombre || !currentWorker.cedula || !currentWorker.rol) {\n      toast({\n        variant: 'destructive',\n        title: 'Campos Incompletos',\n        description: 'Nombre, c√©dula y rol son requeridos.',\n      });\n      return;\n    }\n\n    if (editingWorkerIndex !== null) {\n      const updatedWorkers = [...(formData.workers || [])];\n      updatedWorkers[editingWorkerIndex] = currentWorker as ExternalWorker;\n      dispatch({ type: 'SET_WORKERS', payload: updatedWorkers });\n      toast({ title: 'Trabajador Actualizado' });\n    } else {\n      dispatch({ type: 'ADD_WORKER', payload: currentWorker as ExternalWorker });\n      toast({ title: 'Trabajador Agregado' });\n    }\n\n    setIsWorkerDialogOpen(false);\n    setCurrentWorker(null);\n    setEditingWorkerIndex(null);\n  };\n  \n  const removeWorker = (index: number) => {\n    const updatedWorkers = (formData.workers || []).filter((_, i) => i !== index);\n    dispatch({ type: 'SET_WORKERS', payload: updatedWorkers });\n  };\n  \n  const handleWorkerInputChange = (field: keyof ExternalWorker, value: string) => {\n    setCurrentWorker(prev => prev ? { ...prev, [field]: value } : null);\n  };\n\n  const handleFileUpload = (field: keyof ExternalWorker) => {\n    // This is a simulation. In a real app, you'd handle file uploads.\n    handleWorkerInputChange(field, `archivo_cargado_${Date.now()}.pdf`);\n    toast({ title: 'Archivo Simulado', description: 'Se ha simulado la carga de un archivo.'})\n  }\n\n  const openSignaturePad = (target: string, context?: any) => {\n    setSignatureTarget(target);\n    setSignatureContext(context);\n    setIsSignaturePadOpen(true);\n  };\n\n  const handleSaveSignature = (signatureDataUrl: string) => {\n    if (!signatureTarget) return;\n\n    if (signatureTarget === 'worker.firmaApertura' || signatureTarget === 'worker.firmaCierre') {\n       setCurrentWorker(prev => prev ? { ...prev, [signatureTarget.split('.')[1]]: signatureDataUrl } : null);\n    } else {\n       dispatch({ type: 'UPDATE_SIGNATURE', payload: { target: signatureTarget, signature: signatureDataUrl, context: signatureContext }});\n    }\n\n    setIsSignaturePadOpen(false);\n    setSignatureTarget(null);\n    setSignatureContext(null);\n  };\n\n  const colors = {\n    primary: 'hsl(var(--primary))',\n    dark: 'hsl(var(--primary))', \n    success: 'hsl(var(--accent))',\n  };\n  \n  const canProceed = () => {\n    // Validate Step 1\n    if (step === 1) {\n        const { areaEspecifica, planta, nombreSolicitante, validFrom, validUntil, workDescription, numTrabajadores } = formData.generalInfo;\n        const missingFields = [];\n        if (!areaEspecifica) missingFields.push(\"√Årea espec√≠fica\");\n        if (!planta) missingFields.push(\"Planta\");\n        if (!nombreSolicitante) missingFields.push(\"Nombre solicitante\");\n        if (!validFrom) missingFields.push(\"Fecha de inicio\");\n        if (!validUntil) missingFields.push(\"Fecha de fin\");\n        if (!workDescription) missingFields.push(\"Descripci√≥n de la Tarea\");\n        if (!numTrabajadores) missingFields.push(\"No. Trabajadores\");\n\n        const workTypes = formData.selectedWorkTypes;\n        if (!Object.values(workTypes).some(v => v)) {\n            missingFields.push(\"Tipo de Trabajo (al menos uno)\");\n        }\n\n        if (missingFields.length > 0) {\n            toast({\n                variant: \"destructive\",\n                title: \"Campos Incompletos en Informaci√≥n General\",\n                description: `Por favor, complete los siguientes campos obligatorios: ${missingFields.join(', ')}.`,\n            });\n            return false;\n        }\n    }\n    \n    // Add validation for other steps if needed\n    return true;\n  };\n  \n  const handleAssessRisk = async () => {\n    // Implement AI risk assessment logic\n  };\n\n  const handleSavePermit = async () => {\n    if (!user) {\n      toast({ variant: 'destructive', title: 'Error de Autenticaci√≥n' });\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      const result = await createPermit({\n          userId: user.uid, \n          userDisplayName: user.displayName || null, \n          userEmail: user.email || null,\n          userPhotoURL: user.photoURL || null,\n          ...formData\n        });\n      \n      if (result.success && result.permitId) {\n        setNewPermitInfo({\n            id: result.permitId,\n            number: result.permitNumber || '',\n        });\n        setShowSuccessDialog(true);\n      } else {\n        throw new Error(result.error || 'Hubo un error creando el permiso.');\n      }\n      \n    } catch (error: any) {\n      toast({\n        variant: 'destructive',\n        title: 'Fall√≥ el Env√≠o',\n        description: error.message,\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const baseSteps = [\n    { label: \"Info General\", condition: true },\n    { label: \"ATS y Peligros\", condition: true },\n    { label: \"Anexo Altura\", condition: formData.selectedWorkTypes.alturas},\n    { label: \"Anexo Confinado\", condition: formData.selectedWorkTypes.confinado},\n    { label: \"Anexo Energ√≠as\", condition: formData.selectedWorkTypes.energia},\n    { label: \"Anexo Caliente\", condition: formData.selectedWorkTypes.caliente},\n    { label: \"Anexo Izaje\", condition: formData.selectedWorkTypes.izaje},\n    { label: \"Anexo Excavaciones\", condition: formData.selectedWorkTypes.excavacion},\n    { label: \"Verificaci√≥n Peligros\", condition: true },\n    { label: \"EPP y Emergencias\", condition: true },\n    { label: \"Trabajadores\", condition: true },\n    { label: \"Revisi√≥n\", condition: true }\n  ];\n\n  const steps = baseSteps.filter(s => s.condition);\n  const currentStepInfo = steps[step - 1];\n  \n  const getInitials = (name?: string | null) => {\n    if (!name) return 'U';\n    return name.split(' ').map(n => n[0]).slice(0, 2).join('').toUpperCase();\n  };\n  \n  const renderStepContent = () => {\n    const currentStepLabel = steps[step - 1]?.label;\n    switch (currentStepLabel) {\n      case \"Info General\":\n        return <GeneralInfoStep />;\n      case \"ATS y Peligros\":\n        return <AtsStep />;\n      case \"Anexo Altura\":\n        return <AnexoAlturaStep />;\n      case \"Anexo Confinado\":\n        return <AnexoConfinadoStep />;\n      // Add other cases as you create the components\n      default:\n        return (\n          <div className=\"text-center p-8\">\n            <h3 className=\"text-xl font-bold\">Paso en Construcci√≥n</h3>\n            <p className=\"text-muted-foreground\">{currentStepLabel}</p>\n          </div>\n        );\n    }\n  };\n\n  return (\n    <>\n    <div className=\"flex flex-1 flex-col bg-gray-50 min-h-screen\">\n      <header className=\"text-white shadow-lg sticky top-0 z-20\" style={{ background: `linear-gradient(135deg, ${colors.primary} 0%, ${colors.dark} 100%)` }}>\n        <div className=\"max-w-7xl mx-auto px-4 py-3 md:py-4\">\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <div className=\"flex items-center gap-3\">\n                <Image \n                    src=\"https://i.postimg.cc/jShP2K6k/Whats-App-Image-2025-10-20-at-10-43-48-AM.jpg\"\n                    alt=\"Crear Permiso Icon\"\n                    width={48}\n                    height={48}\n                    className=\"rounded-full\"\n                />\n                <div className=\"hidden md:block border-l border-white border-opacity-30 pl-3\">\n                  <h1 className=\"text-xl font-bold\">Nuevo Permiso de Trabajo</h1>\n                  <p className=\"text-sm text-white text-opacity-80\">\n                    Paso {step} de {steps.length}: {currentStepInfo.label}\n                  </p>\n                </div>\n              </div>\n            </div>\n            <Button\n              onClick={() => {\n                if (confirm('¬øEst√° seguro de cancelar? Los cambios no guardados se perder√°n.')) {\n                  router.push('/dashboard');\n                }\n              }}\n              variant=\"ghost\"\n              className=\"bg-white bg-opacity-20 hover:bg-opacity-30\"\n            >\n              <X size={18} className=\"mr-2\" />\n              <span className=\"hidden sm:inline\">Cancelar</span>\n            </Button>\n          </div>\n        </div>\n      </header>\n      \n      <div className=\"bg-white border-b shadow-sm sticky top-[68px] md:top-[80px] z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4 md:py-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            {steps.map((s_info, s_idx) => {\n              const s = s_idx + 1;\n              return(\n              <div key={s} className=\"flex items-center flex-1\">\n                <div className={`relative flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full font-bold text-sm transition-all ${\n                  s === step ? 'ring-4 scale-110 shadow-lg text-white' :\n                  s < step ? 'text-white' :\n                  'bg-gray-200 text-gray-600'\n                }`}\n                style={s <= step ? { backgroundColor: s === step ? colors.primary : colors.success } : {}}>\n                  {s < step ? <CheckCircle size={20}/> : s_idx + 1}\n                </div>\n                {s < steps.length && (\n                  <div className=\"flex-1 h-1 mx-1 md:mx-2 rounded\" style={{ \n                    backgroundColor: s < step ? colors.success : '#E5E7EB' \n                  }} />\n                )}\n              </div>\n            )})}\n          </div>\n          <div className=\"grid\" style={{gridTemplateColumns: `repeat(${steps.length}, minmax(0, 1fr))`}}>\n            {steps.map((s_info, s_idx) => (\n              <span key={s_idx} className=\"text-[10px] md:text-xs text-center font-medium\" style={{ color: step === s_idx + 1 ? colors.primary : '#6B7280' }}>{s_info.label}</span>\n            ))}\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"max-w-5xl mx-auto p-4 pb-24 md:pb-24 w-full\">\n        <div className=\"bg-white rounded-xl shadow-xl p-6 md:p-8\">\n          {renderStepContent()}\n        </div>\n\n        {/* Navigation Buttons */}\n        <div className=\"fixed bottom-0 left-0 right-0 bg-background/80 backdrop-blur-sm border-t shadow-lg z-20\">\n          <div className=\"max-w-5xl mx-auto px-4 py-3 flex gap-4\">\n            <Button\n              onClick={() => setStep(step - 1)}\n              disabled={isSubmitting || step === 1}\n              variant=\"outline\"\n              className=\"px-6 py-3 h-auto md:px-8\"\n            >\n              <ArrowLeft className=\"mr-2\" />\n              Anterior\n            </Button>\n            \n            {step < steps.length ? (\n              <Button\n                onClick={() => {\n                  if (canProceed()) {\n                    setStep(step + 1);\n                  }\n                }}\n                disabled={isSubmitting}\n                className=\"flex-1 py-3 h-auto\"\n              >\n                Siguiente\n                <ArrowRight className=\"ml-2\" />\n              </Button>\n            ) : (\n                <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                         <Button\n                            disabled={isSubmitting}\n                            className=\"flex-1 py-3 h-auto bg-green-600 hover:bg-green-700 text-lg\"\n                        >\n                            {isSubmitting ? (\n                            <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\n                            ) : (\n                            <CheckCircle size={22} className=\"mr-2\" />\n                            )}\n                            <span>Enviar para Aprobaci√≥n</span>\n                        </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                        <AlertDialogHeader>\n                            <AlertDialogTitle>¬øEst√° seguro de enviar el permiso?</AlertDialogTitle>\n                            <AlertDialogDescription>\n                                Una vez que env√≠e el permiso para su aprobaci√≥n, ya no podr√° realizar modificaciones. Aseg√∫rese de que toda la informaci√≥n es correcta.\n                            </AlertDialogDescription>\n                        </AlertDialogHeader>\n                        <AlertDialogFooter>\n                            <AlertDialogCancel>Cancelar</AlertDialogCancel>\n                            <AlertDialogAction onClick={handleSavePermit} disabled={isSubmitting}>\n                                 {isSubmitting ? 'Enviando...' : 'S√≠, enviar ahora'}\n                            </AlertDialogAction>\n                        </AlertDialogFooter>\n                    </AlertDialogContent>\n                </AlertDialog>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      <Dialog open={showSuccessDialog} onOpenChange={setShowSuccessDialog}>\n          <DialogContent>\n              <DialogHeader>\n                  <DialogTitle className=\"flex items-center gap-2 text-green-600\">\n                      <CheckCircle />\n                      ¬°Permiso Creado Exitosamente!\n                  </DialogTitle>\n                  <DialogDescription>\n                      El permiso N¬∞ <strong>{newPermitInfo.number}</strong> ha sido creado y enviado para revisi√≥n.\n                  </DialogDescription>\n              </DialogHeader>\n              <DialogFooter className=\"sm:justify-between gap-2\">\n                  <Button variant=\"outline\" onClick={() => router.push('/dashboard')}>\n                      Ir al Dashboard\n                  </Button>\n                   <Button onClick={() => router.push(`/permits/${newPermitInfo.id}`)}>\n                      Ver Detalles del Permiso\n                   </Button>\n              </DialogFooter>\n          </DialogContent>\n      </Dialog>\n      \n       <Dialog open={isSignaturePadOpen} onOpenChange={setIsSignaturePadOpen}>\n        <DialogContent className=\"w-[90vw] max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Registrar Firma</DialogTitle>\n          </DialogHeader>\n          <SignaturePad onSave={handleSaveSignature} />\n        </DialogContent>\n      </Dialog>\n    </div>\n    </>\n  );\n}\n\nexport default function CreatePermitPage() {\n  return (\n    <PermitFormProvider>\n      <CreatePermitWizard />\n    </PermitFormProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAwBA;AACA;AAQA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AA1DA;;;;;;;;;;;;;;;;;;AA6DA,MAAM,cAAc;IAClB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,SAAS;IACP,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,UAAO,AAAD;IACvB,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IACzB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,EAAE,OAAO,QAAQ,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,8JAAA,CAAA,gBAAa,AAAD;IAElD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3D,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QAAE,IAAI;QAAI,QAAQ;IAAG;IAExE,oCAAoC;IACpC,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7D,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkC;IACnF,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAC5E,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACtE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAO;IAE9D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ,CAAC,SAAS,WAAW,CAAC,iBAAiB,EAAE;YACnD,SAAS;gBAAE,MAAM;gBAAuB,SAAS;oBAAE,mBAAmB,KAAK,WAAW,IAAI;gBAAG;YAAE;QACjG;IACF,GAAG;QAAC;QAAM,SAAS,WAAW,CAAC,iBAAiB;QAAE;KAAS;IAE3D,MAAM,sBAAsB;QAC1B,sBAAsB;QACtB,iBAAiB;YACf,QAAQ;YACR,QAAQ;YACR,KAAK;YACL,KAAK;YACL,KAAK;YACL,WAAW;YACX,QAAQ;YACR,eAAe;YACf,eAAe;YACf,aAAa;QACf;QACA,sBAAsB;IACxB;IAEA,MAAM,uBAAuB,CAAC,QAAwB;QACpD,sBAAsB;QACtB,iBAAiB;QACjB,sBAAsB;IACxB;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,iBAAiB,CAAC,cAAc,MAAM,IAAI,CAAC,cAAc,MAAM,IAAI,CAAC,cAAc,GAAG,EAAE;YAC1F,MAAM;gBACJ,SAAS;gBACT,OAAO;gBACP,aAAa;YACf;YACA;QACF;QAEA,IAAI,uBAAuB,MAAM;YAC/B,MAAM,iBAAiB;mBAAK,SAAS,OAAO,IAAI,EAAE;aAAE;YACpD,cAAc,CAAC,mBAAmB,GAAG;YACrC,SAAS;gBAAE,MAAM;gBAAe,SAAS;YAAe;YACxD,MAAM;gBAAE,OAAO;YAAyB;QAC1C,OAAO;YACL,SAAS;gBAAE,MAAM;gBAAc,SAAS;YAAgC;YACxE,MAAM;gBAAE,OAAO;YAAsB;QACvC;QAEA,sBAAsB;QACtB,iBAAiB;QACjB,sBAAsB;IACxB;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,iBAAiB,CAAC,SAAS,OAAO,IAAI,EAAE,EAAE,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;QACvE,SAAS;YAAE,MAAM;YAAe,SAAS;QAAe;IAC1D;IAEA,MAAM,0BAA0B,CAAC,OAA6B;QAC5D,iBAAiB,CAAA,OAAQ,OAAO;gBAAE,GAAG,IAAI;gBAAE,CAAC,MAAM,EAAE;YAAM,IAAI;IAChE;IAEA,MAAM,mBAAmB,CAAC;QACxB,kEAAkE;QAClE,wBAAwB,OAAO,CAAC,gBAAgB,EAAE,KAAK,GAAG,GAAG,IAAI,CAAC;QAClE,MAAM;YAAE,OAAO;YAAoB,aAAa;QAAwC;IAC1F;IAEA,MAAM,mBAAmB,CAAC,QAAgB;QACxC,mBAAmB;QACnB,oBAAoB;QACpB,sBAAsB;IACxB;IAEA,MAAM,sBAAsB,CAAC;QAC3B,IAAI,CAAC,iBAAiB;QAEtB,IAAI,oBAAoB,0BAA0B,oBAAoB,sBAAsB;YACzF,iBAAiB,CAAA,OAAQ,OAAO;oBAAE,GAAG,IAAI;oBAAE,CAAC,gBAAgB,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;gBAAiB,IAAI;QACpG,OAAO;YACJ,SAAS;gBAAE,MAAM;gBAAoB,SAAS;oBAAE,QAAQ;oBAAiB,WAAW;oBAAkB,SAAS;gBAAiB;YAAC;QACpI;QAEA,sBAAsB;QACtB,mBAAmB;QACnB,oBAAoB;IACtB;IAEA,MAAM,SAAS;QACb,SAAS;QACT,MAAM;QACN,SAAS;IACX;IAEA,MAAM,aAAa;QACjB,kBAAkB;QAClB,IAAI,SAAS,GAAG;YACZ,MAAM,EAAE,cAAc,EAAE,MAAM,EAAE,iBAAiB,EAAE,SAAS,EAAE,UAAU,EAAE,eAAe,EAAE,eAAe,EAAE,GAAG,SAAS,WAAW;YACnI,MAAM,gBAAgB,EAAE;YACxB,IAAI,CAAC,gBAAgB,cAAc,IAAI,CAAC;YACxC,IAAI,CAAC,QAAQ,cAAc,IAAI,CAAC;YAChC,IAAI,CAAC,mBAAmB,cAAc,IAAI,CAAC;YAC3C,IAAI,CAAC,WAAW,cAAc,IAAI,CAAC;YACnC,IAAI,CAAC,YAAY,cAAc,IAAI,CAAC;YACpC,IAAI,CAAC,iBAAiB,cAAc,IAAI,CAAC;YACzC,IAAI,CAAC,iBAAiB,cAAc,IAAI,CAAC;YAEzC,MAAM,YAAY,SAAS,iBAAiB;YAC5C,IAAI,CAAC,OAAO,MAAM,CAAC,WAAW,IAAI,CAAC,CAAA,IAAK,IAAI;gBACxC,cAAc,IAAI,CAAC;YACvB;YAEA,IAAI,cAAc,MAAM,GAAG,GAAG;gBAC1B,MAAM;oBACF,SAAS;oBACT,OAAO;oBACP,aAAa,CAAC,wDAAwD,EAAE,cAAc,IAAI,CAAC,MAAM,CAAC,CAAC;gBACvG;gBACA,OAAO;YACX;QACJ;QAEA,2CAA2C;QAC3C,OAAO;IACT;IAEA,MAAM,mBAAmB;IACvB,qCAAqC;IACvC;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,MAAM;YACT,MAAM;gBAAE,SAAS;gBAAe,OAAO;YAAyB;YAChE;QACF;QAEA,gBAAgB;QAChB,IAAI;YACF,MAAM,SAAS,MAAM,CAAA,GAAA,wKAAA,CAAA,eAAY,AAAD,EAAE;gBAC9B,QAAQ,KAAK,GAAG;gBAChB,iBAAiB,KAAK,WAAW,IAAI;gBACrC,WAAW,KAAK,KAAK,IAAI;gBACzB,cAAc,KAAK,QAAQ,IAAI;gBAC/B,GAAG,QAAQ;YACb;YAEF,IAAI,OAAO,OAAO,IAAI,OAAO,QAAQ,EAAE;gBACrC,iBAAiB;oBACb,IAAI,OAAO,QAAQ;oBACnB,QAAQ,OAAO,YAAY,IAAI;gBACnC;gBACA,qBAAqB;YACvB,OAAO;gBACL,MAAM,IAAI,MAAM,OAAO,KAAK,IAAI;YAClC;QAEF,EAAE,OAAO,OAAY;YACnB,MAAM;gBACJ,SAAS;gBACT,OAAO;gBACP,aAAa,MAAM,OAAO;YAC5B;QACF,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,MAAM,YAAY;QAChB;YAAE,OAAO;YAAgB,WAAW;QAAK;QACzC;YAAE,OAAO;YAAkB,WAAW;QAAK;QAC3C;YAAE,OAAO;YAAgB,WAAW,SAAS,iBAAiB,CAAC,OAAO;QAAA;QACtE;YAAE,OAAO;YAAmB,WAAW,SAAS,iBAAiB,CAAC,SAAS;QAAA;QAC3E;YAAE,OAAO;YAAkB,WAAW,SAAS,iBAAiB,CAAC,OAAO;QAAA;QACxE;YAAE,OAAO;YAAkB,WAAW,SAAS,iBAAiB,CAAC,QAAQ;QAAA;QACzE;YAAE,OAAO;YAAe,WAAW,SAAS,iBAAiB,CAAC,KAAK;QAAA;QACnE;YAAE,OAAO;YAAsB,WAAW,SAAS,iBAAiB,CAAC,UAAU;QAAA;QAC/E;YAAE,OAAO;YAAyB,WAAW;QAAK;QAClD;YAAE,OAAO;YAAqB,WAAW;QAAK;QAC9C;YAAE,OAAO;YAAgB,WAAW;QAAK;QACzC;YAAE,OAAO;YAAY,WAAW;QAAK;KACtC;IAED,MAAM,QAAQ,UAAU,MAAM,CAAC,CAAA,IAAK,EAAE,SAAS;IAC/C,MAAM,kBAAkB,KAAK,CAAC,OAAO,EAAE;IAEvC,MAAM,cAAc,CAAC;QACnB,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC,CAAC,EAAE,EAAE,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,WAAW;IACxE;IAEA,MAAM,oBAAoB;QACxB,MAAM,mBAAmB,KAAK,CAAC,OAAO,EAAE,EAAE;QAC1C,OAAQ;YACN,KAAK;gBACH,qBAAO,8OAAC,4KAAA,CAAA,kBAAe;;;;;YACzB,KAAK;gBACH,qBAAO,8OAAC,oKAAA,CAAA,UAAO;;;;;YACjB,KAAK;gBACH,qBAAO,8OAAC,4KAAA,CAAA,kBAAe;;;;;YACzB,KAAK;gBACH,qBAAO,8OAAC,+KAAA,CAAA,qBAAkB;;;;;YAC5B,+CAA+C;YAC/C;gBACE,qBACE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAoB;;;;;;sCAClC,8OAAC;4BAAE,WAAU;sCAAyB;;;;;;;;;;;;QAG9C;IACF;IAEA,qBACE;kBACA,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAO,WAAU;oBAAyC,OAAO;wBAAE,YAAY,CAAC,wBAAwB,EAAE,OAAO,OAAO,CAAC,KAAK,EAAE,OAAO,IAAI,CAAC,MAAM,CAAC;oBAAC;8BACnJ,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;8CACC,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,6HAAA,CAAA,UAAK;gDACF,KAAI;gDACJ,KAAI;gDACJ,OAAO;gDACP,QAAQ;gDACR,WAAU;;;;;;0DAEd,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAG,WAAU;kEAAoB;;;;;;kEAClC,8OAAC;wDAAE,WAAU;;4DAAqC;4DAC1C;4DAAK;4DAAK,MAAM,MAAM;4DAAC;4DAAG,gBAAgB,KAAK;;;;;;;;;;;;;;;;;;;;;;;;8CAK7D,8OAAC,kIAAA,CAAA,SAAM;oCACL,SAAS;wCACP,IAAI,QAAQ,oEAAoE;4CAC9E,OAAO,IAAI,CAAC;wCACd;oCACF;oCACA,SAAQ;oCACR,WAAU;;sDAEV,8OAAC,4LAAA,CAAA,IAAC;4CAAC,MAAM;4CAAI,WAAU;;;;;;sDACvB,8OAAC;4CAAK,WAAU;sDAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAM3C,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACZ,MAAM,GAAG,CAAC,CAAC,QAAQ;oCAClB,MAAM,IAAI,QAAQ;oCAClB,qBACA,8OAAC;wCAAY,WAAU;;0DACrB,8OAAC;gDAAI,WAAW,CAAC,gHAAgH,EAC/H,MAAM,OAAO,0CACb,IAAI,OAAO,eACX,6BACA;gDACF,OAAO,KAAK,OAAO;oDAAE,iBAAiB,MAAM,OAAO,OAAO,OAAO,GAAG,OAAO,OAAO;gDAAC,IAAI,CAAC;0DACrF,IAAI,qBAAO,8OAAC,2NAAA,CAAA,cAAW;oDAAC,MAAM;;;;;2DAAQ,QAAQ;;;;;;4CAEhD,IAAI,MAAM,MAAM,kBACf,8OAAC;gDAAI,WAAU;gDAAkC,OAAO;oDACtD,iBAAiB,IAAI,OAAO,OAAO,OAAO,GAAG;gDAC/C;;;;;;;uCAZM;;;;;gCAeX;;;;;;0CAEH,8OAAC;gCAAI,WAAU;gCAAO,OAAO;oCAAC,qBAAqB,CAAC,OAAO,EAAE,MAAM,MAAM,CAAC,iBAAiB,CAAC;gCAAA;0CACzF,MAAM,GAAG,CAAC,CAAC,QAAQ,sBAClB,8OAAC;wCAAiB,WAAU;wCAAiD,OAAO;4CAAE,OAAO,SAAS,QAAQ,IAAI,OAAO,OAAO,GAAG;wCAAU;kDAAI,OAAO,KAAK;uCAAlJ;;;;;;;;;;;;;;;;;;;;;8BAMnB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACZ;;;;;;sCAIH,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,kIAAA,CAAA,SAAM;wCACL,SAAS,IAAM,QAAQ,OAAO;wCAC9B,UAAU,gBAAgB,SAAS;wCACnC,SAAQ;wCACR,WAAU;;0DAEV,8OAAC,gNAAA,CAAA,YAAS;gDAAC,WAAU;;;;;;4CAAS;;;;;;;oCAI/B,OAAO,MAAM,MAAM,iBAClB,8OAAC,kIAAA,CAAA,SAAM;wCACL,SAAS;4CACP,IAAI,cAAc;gDAChB,QAAQ,OAAO;4CACjB;wCACF;wCACA,UAAU;wCACV,WAAU;;4CACX;0DAEC,8OAAC,kNAAA,CAAA,aAAU;gDAAC,WAAU;;;;;;;;;;;6DAGtB,8OAAC,2IAAA,CAAA,cAAW;;0DACR,8OAAC,2IAAA,CAAA,qBAAkB;gDAAC,OAAO;0DACtB,cAAA,8OAAC,kIAAA,CAAA,SAAM;oDACJ,UAAU;oDACV,WAAU;;wDAET,6BACD,8OAAC,iNAAA,CAAA,UAAO;4DAAC,WAAU;;;;;iFAEnB,8OAAC,2NAAA,CAAA,cAAW;4DAAC,MAAM;4DAAI,WAAU;;;;;;sEAEjC,8OAAC;sEAAK;;;;;;;;;;;;;;;;;0DAGd,8OAAC,2IAAA,CAAA,qBAAkB;;kEACf,8OAAC,2IAAA,CAAA,oBAAiB;;0EACd,8OAAC,2IAAA,CAAA,mBAAgB;0EAAC;;;;;;0EAClB,8OAAC,2IAAA,CAAA,yBAAsB;0EAAC;;;;;;;;;;;;kEAI5B,8OAAC,2IAAA,CAAA,oBAAiB;;0EACd,8OAAC,2IAAA,CAAA,oBAAiB;0EAAC;;;;;;0EACnB,8OAAC,2IAAA,CAAA,oBAAiB;gEAAC,SAAS;gEAAkB,UAAU;0EAClD,eAAe,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAU3D,8OAAC,kIAAA,CAAA,SAAM;oBAAC,MAAM;oBAAmB,cAAc;8BAC3C,cAAA,8OAAC,kIAAA,CAAA,gBAAa;;0CACV,8OAAC,kIAAA,CAAA,eAAY;;kDACT,8OAAC,kIAAA,CAAA,cAAW;wCAAC,WAAU;;0DACnB,8OAAC,2NAAA,CAAA,cAAW;;;;;4CAAG;;;;;;;kDAGnB,8OAAC,kIAAA,CAAA,oBAAiB;;4CAAC;0DACD,8OAAC;0DAAQ,cAAc,MAAM;;;;;;4CAAU;;;;;;;;;;;;;0CAG7D,8OAAC,kIAAA,CAAA,eAAY;gCAAC,WAAU;;kDACpB,8OAAC,kIAAA,CAAA,SAAM;wCAAC,SAAQ;wCAAU,SAAS,IAAM,OAAO,IAAI,CAAC;kDAAe;;;;;;kDAGnE,8OAAC,kIAAA,CAAA,SAAM;wCAAC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,SAAS,EAAE,cAAc,EAAE,EAAE;kDAAG;;;;;;;;;;;;;;;;;;;;;;;8BAOhF,8OAAC,kIAAA,CAAA,SAAM;oBAAC,MAAM;oBAAoB,cAAc;8BAC/C,cAAA,8OAAC,kIAAA,CAAA,gBAAa;wBAAC,WAAU;;0CACvB,8OAAC,kIAAA,CAAA,eAAY;0CACX,cAAA,8OAAC,kIAAA,CAAA,cAAW;8CAAC;;;;;;;;;;;0CAEf,8OAAC,4IAAA,CAAA,eAAY;gCAAC,QAAQ;;;;;;;;;;;;;;;;;;;;;;;;AAMhC;AAEe,SAAS;IACtB,qBACE,8OAAC,8JAAA,CAAA,qBAAkB;kBACjB,cAAA,8OAAC;;;;;;;;;;AAGP","debugId":null}}]
}