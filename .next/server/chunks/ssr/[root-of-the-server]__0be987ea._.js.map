{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/firebase-admin.ts"],"sourcesContent":["\nimport { initializeApp, getApps, cert, App } from 'firebase-admin/app';\nimport { getFirestore } from 'firebase-admin/firestore';\n\nlet adminApp: App | undefined;\nlet adminFirestoreDb: ReturnType<typeof getFirestore> | undefined;\n\nfunction initializeAdminApp() {\n  const apps = getApps();\n  if (apps.length > 0) {\n    adminApp = apps[0];\n    adminFirestoreDb = getFirestore(adminApp);\n    return;\n  }\n\n  try {\n    const projectId = process.env.FIREBASE_PROJECT_ID;\n    const clientEmail = process.env.FIREBASE_CLIENT_EMAIL;\n    const privateKey = process.env.FIREBASE_PRIVATE_KEY;\n\n    if (projectId && clientEmail && privateKey && privateKey !== 'YOUR_PRIVATE_KEY' && clientEmail !== 'YOUR_CLIENT_EMAIL') {\n      const formattedPrivateKey = privateKey.replace(/\\\\n/g, '\\n');\n      adminApp = initializeApp({\n        credential: cert({\n          projectId,\n          clientEmail,\n          privateKey: formattedPrivateKey,\n        }),\n      });\n      adminFirestoreDb = getFirestore(adminApp);\n      console.log('✅ Firebase Admin SDK inicializado correctamente.');\n    } else {\n      console.warn('⚠️ [Firebase Admin] Credenciales de administrador no configuradas en .env. Las funciones de servidor (Server Actions) que requieren acceso de administrador no funcionarán.');\n    }\n  } catch (error: any) {\n    console.error('❌ Error al inicializar Firebase Admin SDK:', error.message);\n  }\n}\n\ninitializeAdminApp();\n\n// Función para verificar si el SDK de Admin está listo\nexport const isAdminReady = () => !!adminApp;\n\n// Exportamos la instancia de la base de datos de manera segura\n// Si no está inicializada, las funciones que la usen fallarán con el nuevo chequeo.\nexport const adminDb = adminFirestoreDb!;\n"],"names":[],"mappings":";;;;AACA;AACA;;;;;;;;AAEA,IAAI;AACJ,IAAI;AAEJ,SAAS;IACP,MAAM,OAAO,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD;IACnB,IAAI,KAAK,MAAM,GAAG,GAAG;QACnB,WAAW,IAAI,CAAC,EAAE;QAClB,mBAAmB,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD,EAAE;QAChC;IACF;IAEA,IAAI;QACF,MAAM,YAAY,QAAQ,GAAG,CAAC,mBAAmB;QACjD,MAAM,cAAc,QAAQ,GAAG,CAAC,qBAAqB;QACrD,MAAM,aAAa,QAAQ,GAAG,CAAC,oBAAoB;QAEnD,IAAI,aAAa,eAAe,cAAc,eAAe,sBAAsB,gBAAgB,qBAAqB;YACtH,MAAM,sBAAsB,WAAW,OAAO,CAAC,QAAQ;YACvD,WAAW,CAAA,GAAA,gJAAA,CAAA,gBAAa,AAAD,EAAE;gBACvB,YAAY,CAAA,GAAA,gJAAA,CAAA,OAAI,AAAD,EAAE;oBACf;oBACA;oBACA,YAAY;gBACd;YACF;YACA,mBAAmB,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD,EAAE;YAChC,QAAQ,GAAG,CAAC;QACd,OAAO;YACL,QAAQ,IAAI,CAAC;QACf;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,8CAA8C,MAAM,OAAO;IAC3E;AACF;AAEA;AAGO,MAAM,eAAe,IAAM,CAAC,CAAC;AAI7B,MAAM,UAAU","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/admin/lists/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { adminDb } from '@/lib/firebase-admin';\nimport { FieldValue } from 'firebase-admin/firestore';\nimport { revalidatePath } from 'next/cache';\n\ntype ListName = 'areas' | 'plantas' | 'procesos' | 'contratos' | 'empresas';\n\n/**\n * Adds a new item to a specified list in Firestore.\n * @param listName - The name of the list document in the `dynamic_lists` collection.\n * @param item - The string item to add to the list.\n */\nexport async function addListItem(listName: ListName, item: string) {\n  try {\n    const docRef = adminDb.collection('dynamic_lists').doc(listName);\n    \n    await docRef.set({\n      items: FieldValue.arrayUnion(item)\n    }, { merge: true });\n    \n    revalidatePath('/admin/lists');\n    revalidatePath('/permits/create');\n\n    return { success: true };\n  } catch (error: any) {\n    console.error(`Error adding item to ${listName}:`, error);\n    return { success: false, error: `No se pudo agregar el elemento: ${error.message}` };\n  }\n}\n\n/**\n * Removes an item from a specified list in Firestore.\n * @param listName - The name of the list document in the `dynamic_lists` collection.\n * @param item - The string item to remove from the list.\n */\nexport async function removeListItem(listName: ListName, item: string) {\n  try {\n    const docRef = adminDb.collection('dynamic_lists').doc(listName);\n\n    await docRef.update({\n      items: FieldValue.arrayRemove(item)\n    });\n    \n    revalidatePath('/admin/lists');\n    revalidatePath('/permits/create');\n    \n    return { success: true };\n  } catch (error: any) {\n    console.error(`Error removing item from ${listName}:`, error);\n    return { success: false, error: `No se pudo eliminar el elemento: ${error.message}` };\n  }\n}\n"],"names":[],"mappings":";;;;;;AAGA;AACA;AACA;;;;;;;;;;;;AASO,eAAe,YAAY,QAAkB,EAAE,IAAY;IAChE,IAAI;QACF,MAAM,SAAS,+HAAA,CAAA,UAAO,CAAC,UAAU,CAAC,iBAAiB,GAAG,CAAC;QAEvD,MAAM,OAAO,GAAG,CAAC;YACf,OAAO,4JAAA,CAAA,aAAU,CAAC,UAAU,CAAC;QAC/B,GAAG;YAAE,OAAO;QAAK;QAEjB,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;QACf,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;QAEf,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,CAAC,qBAAqB,EAAE,SAAS,CAAC,CAAC,EAAE;QACnD,OAAO;YAAE,SAAS;YAAO,OAAO,CAAC,gCAAgC,EAAE,MAAM,OAAO,EAAE;QAAC;IACrF;AACF;AAOO,eAAe,eAAe,QAAkB,EAAE,IAAY;IACnE,IAAI;QACF,MAAM,SAAS,+HAAA,CAAA,UAAO,CAAC,UAAU,CAAC,iBAAiB,GAAG,CAAC;QAEvD,MAAM,OAAO,MAAM,CAAC;YAClB,OAAO,4JAAA,CAAA,aAAU,CAAC,WAAW,CAAC;QAChC;QAEA,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;QACf,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;QAEf,OAAO;YAAE,SAAS;QAAK;IACzB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,CAAC,yBAAyB,EAAE,SAAS,CAAC,CAAC,EAAE;QACvD,OAAO;YAAE,SAAS;YAAO,OAAO,CAAC,iCAAiC,EAAE,MAAM,OAAO,EAAE;QAAC;IACtF;AACF;;;IAvCsB;IAuBA;;AAvBA,+OAAA;AAuBA,+OAAA","debugId":null}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/%28app%29/admin/lists/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {addListItem as '6040d4c4fa848a1987d52a337ad58660f94a06df10'} from 'ACTIONS_MODULE0'\nexport {removeListItem as '602f82969f60f9d40de41f2b03e493d261336deb66'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/admin/lists/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/(app)/admin/lists/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(app)/admin/lists/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAsS,GACnU,oEACA","debugId":null}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/admin/lists/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/(app)/admin/lists/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(app)/admin/lists/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAkR,GAC/S,gDACA","debugId":null}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}