{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/actions.ts"],"sourcesContent":["\n'use server';\n\nimport { adminDb } from '@/lib/firebase-admin';\nimport { revalidatePath } from 'next/cache';\nimport type { Permit, ExternalWorker, PermitStatus, PermitClosure, Approval, UserRole, AnexoAltura, AnexoCaliente, AnexoConfinado, AnexoEnergias, AnexoExcavaciones, AnexoIzaje, AnexoATS, PermitGeneralInfo, JustificacionATS } from '@/types';\nimport { FieldValue } from 'firebase-admin/firestore';\nimport { sendWhatsAppNotification } from '@/lib/notifications';\nimport { config } from 'dotenv';\nconfig();\n\nconst workTypesMap: {[key: string]: string} = {\n  'alturas': 'Trabajo en Alturas',\n  'confinado': 'Espacios Confinados',\n  'energia': 'Control de Energ√≠as',\n  'izaje': 'Izaje de Cargas',\n  'caliente': 'Trabajo en Caliente',\n  'excavacion': 'Excavaciones',\n  'general': 'Trabajo General'\n};\n\nconst getWorkTypesString = (permit: Partial<Permit>): string => {\n  const selectedTypes: string[] = [];\n  if (permit.trabajoAlturas) selectedTypes.push('Trabajo en Alturas');\n  if (permit.espaciosConfinados) selectedTypes.push('Espacios Confinados');\n  if (permit.controlEnergias) selectedTypes.push('Control de Energ√≠as');\n  if (permit.izajeCargas) selectedTypes.push('Izaje de Cargas');\n  if (permit.trabajoCaliente) selectedTypes.push('Trabajo en Caliente');\n  if (permit.excavaciones) selectedTypes.push('Excavaciones');\n  \n  if (selectedTypes.length === 0) {\n    if (permit.trabajoGeneral) return 'Trabajo General';\n    // Fallback for old data structure\n    if (permit.workType && Array.isArray(permit.workType)) {\n      return permit.workType.map(key => workTypesMap[key] || key).join(', ');\n    }\n    return 'Trabajo General';\n  }\n  return selectedTypes.join(', ');\n};\n\nconst getStatusText = (status: string) => {\n    const statusText: {[key: string]: string} = {\n      'borrador': 'Borrador',\n      'pendiente_revision': 'Pendiente de Revisi√≥n',\n      'aprobado': 'Aprobado',\n      'en_ejecucion': 'En Ejecuci√≥n',\n      'suspendido': 'Suspendido',\n      'cerrado': 'Cerrado',\n      'rechazado': 'Rechazado'\n    };\n    return statusText[status] || status;\n  };\n\nconst signatureRoles: { [key in UserRole | 'sst' | 'mantenimiento']: string } = {\n  solicitante: 'QUIEN SOLICITA (JEFES Y DUE√ëOS DE AREA)',\n  autorizante: 'QUIEN AUTORIZA (L√çDER A CARGO DEL EQUIPO EJECUTANTE)',\n  mantenimiento: 'PERSONAL DE MANTENIMIENTO',\n  sst: 'AREA SST (si aplica)',\n  lider_tarea: 'L√≠der de la Tarea',\n  ejecutante: 'Ejecutante del Trabajo',\n  lider_sst: 'L√≠der SST',\n  admin: 'Administrador'\n};\n\n\ntype PermitCreateData = Omit<Permit, 'id' | 'createdAt' | 'status' | 'createdBy' | 'number' | 'user'> & {\n  userId: string;\n  userDisplayName: string | null;\n  userEmail: string | null;\n  userPhotoURL: string | null;\n};\n\nexport async function createPermit(data: PermitCreateData) {\n  if (!data.userId) {\n    return { success: false, error: 'User not authenticated' };\n  }\n\n  const { userId, userDisplayName, userEmail, userPhotoURL, ...permitData } = data;\n\n  const initialApprovals = {\n    solicitante: { status: 'pendiente' as const },\n    autorizante: { status: 'pendiente' as const },\n    mantenimiento: { status: 'pendiente' as const },\n    sst: { status: 'pendiente' as const }\n  };\n\n  const permitPayload: Partial<Permit> = {\n    ...permitData,\n    status: 'pendiente_revision' as const,\n    createdBy: userId,\n    createdAt: FieldValue.serverTimestamp(),\n    user: {\n      displayName: userDisplayName,\n      email: userEmail,\n      photoURL: userPhotoURL,\n    },\n    approvals: initialApprovals,\n    closure: {},\n  };\n  \n  try {\n    const docRef = await adminDb.collection('permits').add(permitPayload as any);\n    const permitNumber = `PT-${Date.now()}-${docRef.id.substring(0, 6).toUpperCase()}`;\n    await docRef.update({ number: permitNumber });\n    \n    console.log('‚úÖ [Action] Permiso creado con √©xito en Firestore:', docRef.id);\n\n    const workTypesText = getWorkTypesString(permitPayload);\n    const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n    const permitUrl = `${baseUrl}/permits/${docRef.id}`;\n    \n    const messageBody = `*¬°Alerta de Seguridad SGPT!* üö®\nSe ha creado una nueva solicitud de permiso de trabajo.\n\nüìÑ *N√∫mero:* ${permitNumber}\nüë§ *Solicitante:* ${userDisplayName || 'N/A'}\nüõ†Ô∏è *Tipo de Trabajo:* ${workTypesText}\n\nPor favor, revise la solicitud para su aprobaci√≥n en el siguiente enlace:\n${permitUrl}`;\n    \n    await sendWhatsAppNotification(messageBody);\n    \n    revalidatePath('/permits');\n    revalidatePath('/dashboard');\n    \n    return { success: true, permitId: docRef.id, permitNumber };\n  } catch (error: any) {\n    console.error(\"‚ùå [Action] Error al crear permiso:\", error);\n    return { \n      success: false, \n      error: error.message || 'Could not create permit. Please try again.' \n    };\n  }\n}\n\nexport async function addSignatureAndNotify(\n  permitId: string, \n  role: 'solicitante' | 'autorizante' | 'mantenimiento' | 'sst', \n  signatureType: 'firmaApertura' | 'firmaCierre',\n  signatureDataUrl: string,\n  user: { uid: string, displayName: string | null }\n) {\n    if (!permitId || !role || !signatureDataUrl || !user) {\n        return { success: false, error: 'Faltan par√°metros para guardar la firma.' };\n    }\n\n    try {\n        const docRef = adminDb.collection('permits').doc(permitId);\n        \n        const signaturePath = `approvals.${role}.${signatureType}`;\n        const statusPath = `approvals.${role}.status`;\n        const userIdPath = `approvals.${role}.userId`;\n        const userNamePath = `approvals.${role}.userName`;\n        const signedAtPath = `approvals.${role}.signedAt`;\n\n        const updateData: { [key: string]: any } = {\n            [signaturePath]: signatureDataUrl,\n            [`${userNamePath}`]: user.displayName,\n            [`${userIdPath}`]: user.uid,\n        };\n\n        if (signatureType === 'firmaApertura') {\n            updateData[statusPath] = 'aprobado';\n            updateData[signedAtPath] = FieldValue.serverTimestamp();\n        }\n\n        await docRef.update(updateData);\n        \n        // Fetch permit for notification\n        const permitDoc = await docRef.get();\n        const permitData = permitDoc.data() as Permit;\n        \n        const signatureRoleName = (signatureRoles as any)[role] || role;\n        const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n        const permitUrl = `${baseUrl}/permits/${permitId}`;\n        \n        const messageBody = `*Notificaci√≥n de Firma - SGPT* üñãÔ∏è\nEl permiso *${permitData.number || permitId}* ha sido firmado.\n\nüë§ *Qui√©n firm√≥:* ${user.displayName || 'N/A'}\n‚ú® *Rol:* ${signatureRoleName}\n‚úçÔ∏è *Tipo de firma:* ${signatureType === 'firmaApertura' ? 'Apertura' : 'Cierre'}\n\nPuede ver los detalles aqu√≠:\n${permitUrl}`;\n        \n        await sendWhatsAppNotification(messageBody);\n\n        revalidatePath(`/permits/${permitId}`);\n        return { success: true };\n\n    } catch (error: any) {\n        console.error(\"‚ùå Error al guardar firma y notificar:\", error);\n        return {\n            success: false,\n            error: error.message || 'No se pudo guardar la firma.'\n        };\n    }\n}\n\n\nexport async function updatePermitStatus(permitId: string, status: PermitStatus, reason?: string, closureData?: Partial<PermitClosure>) {\n    if (!permitId) {\n        return { success: false, error: 'Permit ID is required.' };\n    }\n\n    try {\n        const docRef = adminDb.collection('permits').doc(permitId);\n        const updateData: { status: PermitStatus; rejectionReason?: string; closure?: Partial<PermitClosure> | FieldValue } = { status };\n\n        if (status === 'rechazado' && reason) {\n            updateData.rejectionReason = reason;\n        }\n\n        if (status === 'cerrado') {\n            updateData.closure = {\n                ...(closureData || {}),\n                fechaCierre: new Date().toISOString().split('T')[0], // YYYY-MM-DD\n            };\n        }\n\n        await docRef.update(updateData);\n\n        // Fetch permit for notification\n        const permitDoc = await docRef.get();\n        const permitData = permitDoc.data() as Permit;\n\n        const statusText = getStatusText(status);\n        const baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://sgpt-movil.web.app';\n        const permitUrl = `${baseUrl}/permits/${permitId}`;\n\n        let messageBody = `*Actualizaci√≥n de Estado - SGPT* üîÑ\nEl estado del permiso *${permitData.number || permitId}* ha cambiado.\n\n*Nuevo Estado:* ${statusText}\n\nPuede ver los detalles aqu√≠:\n${permitUrl}`;\n\n        if (status === 'rechazado' && reason) {\n          messageBody += `\\n\\n*Motivo del rechazo:* ${reason}`;\n        }\n        \n        await sendWhatsAppNotification(messageBody);\n        \n        revalidatePath(`/permits/${permitId}`);\n        revalidatePath('/permits');\n        revalidatePath('/dashboard');\n\n        return { success: true };\n    } catch (error: any) {\n        console.error(\"‚ùå Error updating permit status:\", error);\n        return {\n            success: false,\n            error: error.message || 'Could not update permit status.'\n        };\n    }\n}\n"],"names":[],"mappings":";;;;;;IAyEsB,eAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/dialog.tsx"],"sourcesContent":["\n\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,SAAS,kKAAA,CAAA,OAAoB;AAEnC,MAAM,gBAAgB,kKAAA,CAAA,UAAuB;AAE7C,MAAM,eAAe,kKAAA,CAAA,SAAsB;AAE3C,MAAM,cAAc,kKAAA,CAAA,QAAqB;AAEzC,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAuB;QACtB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAuB;gBACtB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAqB;wBAAC,WAAU;;0CAC/B,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,kKAAA,CAAA,UAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,kKAAA,CAAA,cAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/checkbox.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oKAAA,CAAA,OAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kTACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,oKAAA,CAAA,YAA2B;YAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE;sBAEd,cAAA,8OAAC,oMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;;;;;;;;;;;;AAIvB,SAAS,WAAW,GAAG,oKAAA,CAAA,OAAsB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/signature-pad.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport { Button } from './button';\nimport { Eraser, Loader2, Save } from 'lucide-react';\nimport { DialogFooter } from './dialog';\nimport { Checkbox } from './checkbox';\nimport { Label } from './label';\n\ninterface SignaturePadProps {\n  onSave: (signature: string) => void;\n  isSaving?: boolean;\n}\n\nexport const SignaturePad: React.FC<SignaturePadProps> = ({ onSave, isSaving = false }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [hasConsented, setHasConsented] = useState(false);\n\n  const getCanvasContext = () => {\n    const canvas = canvasRef.current;\n    if (!canvas) return null;\n    return canvas.getContext('2d');\n  };\n\n  const resizeCanvas = () => {\n    const canvas = canvasRef.current;\n    const container = containerRef.current;\n    if (canvas && container) {\n      canvas.width = container.offsetWidth;\n      canvas.height = 200; // Keep a fixed height or make it responsive too\n      const ctx = getCanvasContext();\n      if(ctx) {\n        ctx.strokeStyle = '#000';\n        ctx.lineWidth = 2;\n      }\n    }\n  };\n\n  useEffect(() => {\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n    return () => window.removeEventListener('resize', resizeCanvas);\n  }, []);\n\n  const startDrawing = (event: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    event.preventDefault();\n    const ctx = getCanvasContext();\n    if (!ctx) return;\n    \n    const pos = getMousePos(event);\n    ctx.beginPath();\n    ctx.moveTo(pos.x, pos.y);\n    setIsDrawing(true);\n  };\n\n  const draw = (event: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    event.preventDefault();\n    if (!isDrawing) return;\n    const ctx = getCanvasContext();\n    if (!ctx) return;\n\n    const pos = getMousePos(event);\n    ctx.lineTo(pos.x, pos.y);\n    ctx.stroke();\n  };\n\n  const stopDrawing = () => {\n    const ctx = getCanvasContext();\n    if (!ctx) return;\n    ctx.closePath();\n    setIsDrawing(false);\n  };\n  \n  const getMousePos = (event: React.MouseEvent<HTMLCanvasElement> | React.TouchEvent<HTMLCanvasElement>) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return { x: 0, y: 0 };\n    const rect = canvas.getBoundingClientRect();\n\n    let clientX, clientY;\n\n    if ('touches' in event.nativeEvent) {\n      if (event.nativeEvent.touches.length === 0) return { x: 0, y: 0};\n      clientX = event.nativeEvent.touches[0].clientX;\n      clientY = event.nativeEvent.touches[0].clientY;\n    } else {\n      clientX = (event.nativeEvent as MouseEvent).clientX;\n      clientY = (event.nativeEvent as MouseEvent).clientY;\n    }\n    \n    return {\n      x: clientX - rect.left,\n      y: clientY - rect.top,\n    };\n  }\n\n  const clearPad = () => {\n    const canvas = canvasRef.current;\n    const ctx = getCanvasContext();\n    if (canvas && ctx) {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n  };\n\n  const handleSave = () => {\n    const canvas = canvasRef.current;\n    if (canvas) {\n      const blank = document.createElement('canvas');\n      blank.width = canvas.width;\n      blank.height = canvas.height;\n      if(canvas.toDataURL() === blank.toDataURL()) {\n        alert(\"Por favor, provea una firma.\");\n        return;\n      }\n      \n      const dataUrl = canvas.toDataURL('image/png');\n      onSave(dataUrl);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center gap-4 w-full\" ref={containerRef}>\n      <canvas\n        ref={canvasRef}\n        className=\"border border-gray-300 rounded-md bg-white cursor-crosshair touch-none w-full\"\n        onMouseDown={startDrawing}\n        onMouseMove={draw}\n        onMouseUp={stopDrawing}\n        onMouseLeave={stopDrawing}\n        onTouchStart={startDrawing}\n        onTouchMove={draw}\n        onTouchEnd={stopDrawing}\n      />\n      <div className=\"flex items-start space-x-3 my-4\">\n        <Checkbox \n          id=\"terms\" \n          checked={hasConsented}\n          onCheckedChange={(checked) => setHasConsented(checked as boolean)}\n        />\n        <Label htmlFor=\"terms\" className=\"text-xs text-muted-foreground font-normal\">\n          Autorizo el tratamiento de mis datos personales y el uso de mi firma digital, de conformidad con la Ley 1581 de 2012 de Colombia, para la validaci√≥n y gesti√≥n de documentos dentro del sistema SGPT M√≥vil.\n        </Label>\n      </div>\n      <DialogFooter className=\"w-full\">\n         <Button variant=\"outline\" onClick={clearPad} disabled={isSaving}>\n          <Eraser className=\"mr-2 h-4 w-4\" />\n          Limpiar\n        </Button>\n        <Button onClick={handleSave} disabled={!hasConsented || isSaving}>\n          {isSaving ? <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> : <Save className=\"mr-2 h-4 w-4\" />}\n          {isSaving ? 'Guardando...' : 'Guardar Firma'}\n        </Button>\n      </DialogFooter>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 457, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/form-context.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useReducer, useContext, Dispatch } from 'react';\nimport type { Permit, ExternalWorker, AnexoATS } from '@/types';\n\n// Define the shape of the form data\ntype PermitFormData = Omit<Permit, 'id' | 'createdAt' | 'status' | 'createdBy' | 'number' | 'user' | 'approvals' | 'closure'>;\n\n// Define the shape of the state\ninterface FormState extends PermitFormData {}\n\n// Define the actions\ntype FormAction =\n  | { type: 'UPDATE_GENERAL_INFO'; payload: Partial<FormState['generalInfo']> }\n  | { type: 'UPDATE_WORK_TYPES'; payload: { type: keyof FormState['selectedWorkTypes'], value: boolean } }\n  | { type: 'UPDATE_ATS'; payload: Partial<FormState['anexoATS']> }\n  | { type: 'SET_WORKERS'; payload: ExternalWorker[] }\n  | { type: 'ADD_WORKER'; payload: ExternalWorker }\n  | { type: 'UPDATE_SIGNATURE', payload: { target: string, signature: string, context: any } }\n  | { type: 'RESET_FORM' };\n\n\n// Initial state\nconst initialState: FormState = {\n  generalInfo: {\n    areaEspecifica: '',\n    planta: '',\n    proceso: '',\n    contrato: '',\n    empresa: '',\n    nombreSolicitante: '',\n    fechaCreacion: new Date().toISOString(),\n    validFrom: '',\n    validUntil: '',\n    workDescription: '',\n    tools: [],\n    numTrabajadores: '',\n    reunionInicio: 'na',\n    atsVerificado: 'na',\n    responsable: { nombre: '', cargo: '', compania: '', alcance: '' }\n  },\n  selectedWorkTypes: {\n    alturas: false,\n    confinado: false,\n    energia: false,\n    izaje: false,\n    caliente: false,\n    excavacion: false,\n    general: false,\n  },\n  anexoATS: {\n    peligros: {},\n    controles: {},\n    epp: {},\n    justificacion: {},\n    protocolosBioseguridad: 'no'\n  },\n  workers: [],\n};\n\n// Reducer function\nfunction formReducer(state: FormState, action: FormAction): FormState {\n  switch (action.type) {\n    case 'UPDATE_GENERAL_INFO':\n      return {\n        ...state,\n        generalInfo: { ...state.generalInfo, ...action.payload },\n      };\n    case 'UPDATE_WORK_TYPES':\n        return {\n            ...state,\n            selectedWorkTypes: { ...state.selectedWorkTypes, [action.payload.type]: action.payload.value }\n        }\n    case 'UPDATE_ATS':\n        return {\n            ...state,\n            anexoATS: { ...state.anexoATS, ...action.payload },\n        }\n    case 'SET_WORKERS':\n        return {\n            ...state,\n            workers: action.payload,\n        }\n    case 'ADD_WORKER':\n        return {\n            ...state,\n            workers: [...(state.workers || []), action.payload]\n        }\n    case 'UPDATE_SIGNATURE':\n      // Complex logic for updating signatures in nested annexes can be handled here\n      // This is a simplified example\n      console.log('Signature update needs to be implemented in reducer:', action.payload);\n      return state;\n    case 'RESET_FORM':\n      return initialState;\n    default:\n      return state;\n  }\n}\n\n// Create the context\nconst PermitFormContext = createContext<{ state: FormState; dispatch: Dispatch<FormAction> } | undefined>(undefined);\n\n// Create the provider component\nexport function PermitFormProvider({ children }: { children: React.ReactNode }) {\n  const [state, dispatch] = useReducer(formReducer, initialState);\n\n  return (\n    <PermitFormContext.Provider value={{ state, dispatch }}>\n      {children}\n    </PermitFormContext.Provider>\n  );\n}\n\n// Custom hook to use the context\nexport function usePermitForm() {\n  const context = useContext(PermitFormContext);\n  if (!context) {\n    throw new Error('usePermitForm must be used within a PermitFormProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAsBA,gBAAgB;AAChB,MAAM,eAA0B;IAC9B,aAAa;QACX,gBAAgB;QAChB,QAAQ;QACR,SAAS;QACT,UAAU;QACV,SAAS;QACT,mBAAmB;QACnB,eAAe,IAAI,OAAO,WAAW;QACrC,WAAW;QACX,YAAY;QACZ,iBAAiB;QACjB,OAAO,EAAE;QACT,iBAAiB;QACjB,eAAe;QACf,eAAe;QACf,aAAa;YAAE,QAAQ;YAAI,OAAO;YAAI,UAAU;YAAI,SAAS;QAAG;IAClE;IACA,mBAAmB;QACjB,SAAS;QACT,WAAW;QACX,SAAS;QACT,OAAO;QACP,UAAU;QACV,YAAY;QACZ,SAAS;IACX;IACA,UAAU;QACR,UAAU,CAAC;QACX,WAAW,CAAC;QACZ,KAAK,CAAC;QACN,eAAe,CAAC;QAChB,wBAAwB;IAC1B;IACA,SAAS,EAAE;AACb;AAEA,mBAAmB;AACnB,SAAS,YAAY,KAAgB,EAAE,MAAkB;IACvD,OAAQ,OAAO,IAAI;QACjB,KAAK;YACH,OAAO;gBACL,GAAG,KAAK;gBACR,aAAa;oBAAE,GAAG,MAAM,WAAW;oBAAE,GAAG,OAAO,OAAO;gBAAC;YACzD;QACF,KAAK;YACD,OAAO;gBACH,GAAG,KAAK;gBACR,mBAAmB;oBAAE,GAAG,MAAM,iBAAiB;oBAAE,CAAC,OAAO,OAAO,CAAC,IAAI,CAAC,EAAE,OAAO,OAAO,CAAC,KAAK;gBAAC;YACjG;QACJ,KAAK;YACD,OAAO;gBACH,GAAG,KAAK;gBACR,UAAU;oBAAE,GAAG,MAAM,QAAQ;oBAAE,GAAG,OAAO,OAAO;gBAAC;YACrD;QACJ,KAAK;YACD,OAAO;gBACH,GAAG,KAAK;gBACR,SAAS,OAAO,OAAO;YAC3B;QACJ,KAAK;YACD,OAAO;gBACH,GAAG,KAAK;gBACR,SAAS;uBAAK,MAAM,OAAO,IAAI,EAAE;oBAAG,OAAO,OAAO;iBAAC;YACvD;QACJ,KAAK;YACH,8EAA8E;YAC9E,+BAA+B;YAC/B,QAAQ,GAAG,CAAC,wDAAwD,OAAO,OAAO;YAClF,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AAEA,qBAAqB;AACrB,MAAM,kCAAoB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAoE;AAGnG,SAAS,mBAAmB,EAAE,QAAQ,EAAiC;IAC5E,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,aAAa;IAElD,qBACE,8OAAC,kBAAkB,QAAQ;QAAC,OAAO;YAAE;YAAO;QAAS;kBAClD;;;;;;AAGP;AAGO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 588, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/select.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 808, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/GeneralInfoStep.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Trash2 } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { collection, onSnapshot, doc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\n\nconst workTypes: { key: keyof ReturnType<typeof usePermitForm>['state']['selectedWorkTypes'], name: string }[] = [\n  { key: 'alturas', name: 'Trabajo en Alturas' },\n  { key: 'confinado', name: 'Espacios Confinados' },\n  { key: 'energia', name: 'Control de Energ√≠as' },\n  { key: 'izaje', name: 'Izaje de Cargas' },\n  { key: 'caliente', name: 'Trabajo en Caliente' },\n  { key: 'excavacion', name: 'Excavaciones' },\n  { key: 'general', name: 'Trabajo General' },\n];\n\nexport function GeneralInfoStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, selectedWorkTypes } = state;\n  const { toast } = useToast();\n\n  const [newToolName, setNewToolName] = React.useState('');\n\n  const [dynamicLists, setDynamicLists] = React.useState({\n    areas: [] as string[],\n    plantas: [] as string[],\n    procesos: [] as string[],\n    contratos: [] as string[],\n    empresas: [] as string[],\n  });\n  const [loadingLists, setLoadingLists] = React.useState(true);\n\n  React.useEffect(() => {\n    setLoadingLists(true);\n    const listNames = ['areas', 'plantas', 'procesos', 'contratos', 'empresas'];\n    const unsubscribers = listNames.map(listName => {\n      const docRef = doc(db, 'dynamic_lists', listName);\n      return onSnapshot(docRef, (docSnap) => {\n        setDynamicLists(prev => ({\n          ...prev,\n          [listName]: docSnap.exists() ? docSnap.data().items?.sort() || [] : []\n        }));\n      }, (error) => {\n        console.error(`Error fetching ${listName}:`, error);\n        toast({\n          variant: \"destructive\",\n          title: \"Error de Carga\",\n          description: `No se pudo cargar la lista para ${listName}.`,\n        });\n      });\n    });\n\n    // This is a bit of a hack to know when all listeners have fired at least once\n    Promise.all(listNames.map(listName => new Promise(resolve => {\n      const docRef = doc(db, 'dynamic_lists', listName);\n      onSnapshot(docRef, () => resolve(true), () => resolve(true)); // Resolve even on error\n    }))).then(() => setLoadingLists(false));\n\n    return () => unsubscribers.forEach(unsub => unsub());\n  }, [toast]);\n\n\n  const handleInputChange = (field: keyof typeof generalInfo, value: any) => {\n    dispatch({ type: 'UPDATE_GENERAL_INFO', payload: { [field]: value } });\n  };\n\n  const handleWorkTypeChange = (type: keyof typeof selectedWorkTypes, value: boolean) => {\n    dispatch({ type: 'UPDATE_WORK_TYPES', payload: { type, value } });\n  };\n  \n  const handleResponsableChange = (field: keyof typeof generalInfo.responsable, value: string) => {\n    const newResponsable = { ...generalInfo.responsable, [field]: value };\n    handleInputChange('responsable', newResponsable);\n  };\n\n  const addTool = () => {\n    if (newToolName.trim()) {\n      const newTools = [...(generalInfo.tools || []), { name: newToolName.trim(), status: 'B' }];\n      handleInputChange('tools', newTools);\n      setNewToolName('');\n    }\n  };\n\n  const removeTool = (index: number) => {\n    const newTools = (generalInfo.tools || []).filter((_, i) => i !== index);\n    handleInputChange('tools', newTools);\n  };\n\n  const renderDynamicSelect = React.useCallback((listKey: keyof typeof dynamicLists, fieldKey: keyof typeof generalInfo, label: string, required: boolean) => (\n    <div>\n      <Label className={`font-bold text-gray-700 ${required ? 'after:content-[\"*\"] after:ml-0.5 after:text-red-500' : ''}`}>{label}</Label>\n      <Select\n        value={(generalInfo as any)[fieldKey] || ''}\n        onValueChange={(value) => handleInputChange(fieldKey, value)}\n        disabled={loadingLists}\n      >\n        <SelectTrigger>\n          <SelectValue placeholder={loadingLists ? \"Cargando...\" : `Seleccione una opci√≥n...`} />\n        </SelectTrigger>\n        <SelectContent>\n          {dynamicLists[listKey].map((item) => (\n            <SelectItem key={item} value={item}>{item}</SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n    </div>\n  ), [generalInfo, dynamicLists, loadingLists, handleInputChange]);\n\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Informaci√≥n General del Permiso\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">Complete todos los campos obligatorios (*)</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {renderDynamicSelect('areas', 'areaEspecifica', '√Årea o equipo espec√≠fico', true)}\n        {renderDynamicSelect('plantas', 'planta', 'Planta', true)}\n        {renderDynamicSelect('procesos', 'proceso', 'Proceso', false)}\n        {renderDynamicSelect('contratos', 'contrato', 'Contrato', false)}\n        {renderDynamicSelect('empresas', 'empresa', 'Empresa', false)}\n        <div>\n          <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Nombre del solicitante</Label>\n          <Input value={generalInfo.nombreSolicitante || ''} readOnly disabled />\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Listas de Verificaci√≥n Complementarias *</Label>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 p-4 border rounded-lg mt-2\">\n          {workTypes.map(({ key, name }) => (\n            <div key={key} className=\"flex items-center space-x-2\">\n              <Checkbox\n                id={key}\n                checked={selectedWorkTypes[key]}\n                onCheckedChange={(checked) => handleWorkTypeChange(key, !!checked)}\n              />\n              <label htmlFor={key} className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\">\n                {name}\n              </label>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Duraci√≥n del Permiso *</Label>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border rounded-lg\">\n          <div>\n            <label className=\"text-sm font-medium\">Desde</label>\n            <Input\n              type=\"datetime-local\"\n              value={generalInfo.validFrom}\n              onChange={(e) => handleInputChange('validFrom', e.target.value)}\n            />\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">Hasta</label>\n            <Input\n              type=\"datetime-local\"\n              value={generalInfo.validUntil}\n              onChange={(e) => handleInputChange('validUntil', e.target.value)}\n            />\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold\">Descripci√≥n de la Tarea - ALCANCE *</Label>\n        <Textarea\n          value={generalInfo.workDescription}\n          onChange={(e) => handleInputChange('workDescription', e.target.value)}\n          rows={3}\n          className=\"w-full mt-1\"\n          placeholder=\"Describa el alcance, descripci√≥n y √°rea/equipo...\"\n        />\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Equipos y/o Herramientas</Label>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg mt-2\">\n            <div className=\"space-y-2\">\n                {generalInfo.tools?.slice(0, 4).map((tool, index) => (\n                    <div key={index} className=\"flex items-center gap-4 p-2 bg-gray-50 rounded\">\n                    <span className=\"flex-1\">{tool.name}</span>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => removeTool(index)}><Trash2 className=\"h-4 w-4 text-destructive\"/></Button>\n                    </div>\n                ))}\n            </div>\n              <div className=\"space-y-2\">\n                {generalInfo.tools?.slice(4, 8).map((tool, index) => (\n                    <div key={index + 4} className=\"flex items-center gap-4 p-2 bg-gray-50 rounded\">\n                    <span className=\"flex-1\">{tool.name}</span>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => removeTool(index + 4)}><Trash2 className=\"h-4 w-4 text-destructive\"/></Button>\n                    </div>\n                ))}\n            </div>\n            <div className=\"md:col-span-2 flex gap-2\">\n                <Input value={newToolName} onChange={(e) => setNewToolName(e.target.value)} placeholder=\"Nueva herramienta...\" />\n                <Button onClick={addTool}><Plus/></Button>\n            </div>\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">No. Trabajadores *</Label>\n        <Input type=\"number\" value={generalInfo.numTrabajadores} onChange={e => handleInputChange('numTrabajadores', e.target.value)} placeholder=\"Cantidad de trabajadores\" />\n      </div>\n\n      {/* Boolean Radios would go here */}\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Responsable del Trabajo / Ejecutor</Label>\n        <div className=\"p-4 border rounded-lg mt-2 space-y-4\">\n          <Input placeholder=\"Nombre completo\" value={generalInfo.responsable?.nombre} onChange={e => handleResponsableChange('nombre', e.target.value)} />\n          <Input placeholder=\"Cargo\" value={generalInfo.responsable?.cargo} onChange={e => handleResponsableChange('cargo', e.target.value)} />\n          <Input placeholder=\"Compa√±√≠a\" value={generalInfo.responsable?.compania} onChange={e => handleResponsableChange('compania', e.target.value)} />\n          <Textarea placeholder=\"Alcance\" value={generalInfo.responsable?.alcance} onChange={e => handleResponsableChange('alcance', e.target.value)} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1471, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/collapsible.tsx"],"sourcesContent":["\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;AAIA,MAAM,cAAc,uKAAA,CAAA,OAAyB;AAE7C,MAAM,qBAAqB,uKAAA,CAAA,qBAAuC;AAElE,MAAM,qBAAqB,uKAAA,CAAA,qBAAuC","debugId":null}},
    {"offset": {"line": 1489, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/radio-group.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,0KAAA,CAAA,OAAwB;QACvB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;QAC3B,GAAG,KAAK;QACT,KAAK;;;;;;AAGX;AACA,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4OACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,YAA6B;YAAC,WAAU;sBACvC,cAAA,8OAAC,sMAAA,CAAA,SAAM;gBAAC,WAAU;;;;;;;;;;;;;;;;AAI1B;AACA,eAAe,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1549, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AtsStep.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown, Plus, Trash2 } from 'lucide-react';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\n\nconst hazardCategories = {\n  LOCATIVOS: [\n    { id: 'superficies_irregulares', label: 'Superficies irregulares', control: 'Uso de botas de seguridad con suela antideslizante. Controlar escapes, derrames o goteras sobre los sitios de desplazamiento. Limpiar de inmediato cualquier l√≠quido que se derrame en el piso. Caminar con precauci√≥n. No cargar piezas o equipos que limiten la vista. Respetar la se√±alizaci√≥n. Transitar con precauci√≥n verificando rutas de tr√°nsito; no pasar donde haya presencia de materiales u obst√°culos; mantener el √°rea ordenada.' },\n    { id: 'superficies_deslizantes', label: 'Superficies deslizantes', control: 'Al subir o bajar escaleras utilizar todos los pelda√±os y sujetarse del pasamanos; mantener los tres puntos de apoyo; ascender y descender pausadamente.' },\n    { id: 'diferencia_nivel', label: 'Superficies con diferencia de nivel', control: 'No caminar hacia atr√°s. No acercarse a los vac√≠os existentes cerca al √°rea de trabajo. Informar cualquier condici√≥n de inseguridad que observe en las √°reas de trabajo.' },\n    { id: 'techos_mal_estado', label: 'Techos, muros, pisos o paredes en mas estado', control: 'Hacer uso de los elementos de prevenci√≥n y protecci√≥n contra ca√≠das, diligenciar permiso de trabajo en alturas si se supera el 2,0 metros.' },\n    { id: 'espacios_reducidos', label: 'Espacios reducidos de trabajo', control: 'Si esta catalogado como espacio confinado, aplica permiso de trabajo en espacio confinado, aplique las medidas de prevenci√≥n y protecci√≥n definidas por la empesa' },\n  ],\n  F√çSICOS: [\n    { id: 'deficiencia_iluminacion', label: 'Deficiencia de iluminaci√≥n', control: 'Uso de reflectores y/o l√°mparas en √°reas con iluminaci√≥n deficiente y en trabajo nocturno. Informar al due√±o de √°rea ausencia o da√±o de iluminaci√≥n artificial. Usar gafas claras todo el tiempo en caso de luz deficiente. Permanecer √∫nicamente en el sitio autorizado de trabajo.' },\n    { id: 'exceso_iluminacion', label: 'Exceso de iluminaci√≥n', control: 'En trabajos en el exterior, uso de gafas oscuras en caso de exceso de iluminaci√≥n; evitar cambios bruscos de iluminaci√≥n (deslumbramientos)' },\n    { id: 'ruido_intermitente', label: 'Ruido (Intermitente/Continuo/Impacto)', control: 'Usar de manera permanente protecci√≥n auditiva tipo copa o de inserci√≥n y no retirarlo durante toda la tarea.' },\n    { id: 'contacto_superficies_calientes', label: 'Contacto superficies calientes', control: 'Usar de manera permanente guantes de protecci√≥n, uso de ropa manga larga, identificar con se√±alizaci√≥n o superficies calientes' },\n    { id: 'exposicion_soldadura', label: 'Exposici√≥n a arco de soldadura', control: 'Utilizar yelmo de soldar o la pantalla de mano siempre que se suelde, no mira nunca directamente al arco voltaico, no pique el cord√≥n de soldadura sin protecci√≥n ocular' },\n  ],\n  QU√çMICOS: [\n    { id: 'gases_humos_vapores', label: 'Gases, humos, vapores y neblinas', control: 'Uso permanente de protecci√≥n respiratoria de acuerdo al tipo de exposici√≥n. En caso de uso de mascarilla con filtros, verificar que se usen los adecuados para el tipo de agente qu√≠mico (gas, vapor, humo, material particulado, polvos, nieblas, roc√≠os, etc.)' },\n    { id: 'material_particulado', label: 'Material particulado', control: 'Realizar mantenimiento peri√≥dico de la mascarilla y hacer el cambio cuando sea necesario. Asegurar el sello efectivo de la mascarilla media cara al contacto con la piel.' },\n    { id: 'contacto_sustancias_peligrosas', label: 'Uso o contacto con materiales y sustancias peligrosas', control: 'Uso de elementos de protecci√≥n personal de acuerdo a la FDS Ficha de Datos de Seguridad, disponer en sitio de las medidas de protecci√≥n se√±aladas en la Ficha en caso de contacto accidental' },\n    { id: 'derrame_productos_quimicos', label: 'Derrame o fugas de productos Qu√≠micos', control: 'Definir un plan de emergencia en caso de derrame o fuga de productos qu√≠micos, contar con kit antiderrames y elementos de protecci√≥n personal aocrdes al producto qu√≠mico que se este usando' },\n  ],\n  MEC√ÅNICOS: [\n    { id: 'proyeccion_particulas', label: 'Proyecci√≥n de particulas y fracmentos', control: 'Uso obligatorio y permanente de elementos de protecci√≥n individual, protecci√≥n f√°cil y visual' },\n    { id: 'mecanismo_movimiento', label: 'Mecanismo en movimiento', control: 'Mantener protecciones como guardas y dispositivos instalados en el equipo, no posicionar segmentos corporales en √°reas de peligros, por ning√∫n motivo violar una guarda de seguridad' },\n    { id: 'manejo_herramientas', label: 'Manejo de herrramienta o equipos electricos', control: 'Uso de equipos y herramientas el√©ctricas en condiciones operativas que no exponen al trabajador a riesgos, realizar inspecci√≥n preoperacional' },\n    { id: 'movimiento_equipos_pesados', label: 'Movimiento de equipos de trabajo pesado en sitio', control: 'Se√±alizaci√≥n en sitio de trabajo, personal con paleta de pare y siga acompa√±ando el desplazamiento por v√≠as internas, manejo de trafico y control de senderos peatonas' },\n    { id: 'exposicion_vibraciones', label: 'Exposici√≥n a vibraciones por equipos', control: 'Pausas activas durante la jornada laboral, rotaci√≥n de personal para realizar la labor en jornada prolongadas donde se exponga a vibraciones' },\n  ],\n  BIOL√ìGICOS: [\n      { id: 'exposicion_vectores', label: 'Exposici√≥n a vectores transmisi√≥n de enfermedades', control: 'Orden y aseo en el lugar de trabajo, evitar la acumulaci√≥n de agua que pueda ser foco de proliferaci√≥n de vectores' },\n      { id: 'contaminacion_biologica', label: 'Contaminaci√≥n biol√≥gica', control: 'Prevenir y contener derrames de productos peligros, ubicaci√≥n y disposici√≥n de kit de contenci√≥n de derrames' },\n  ],\n  VIAL: [\n      { id: 'accidente_incidente_vial', label: 'Accidente o incidente vial', control: 'Para el transito peatonal hacer uso de las vias definidas por la empresa para el desplazamiento seguro' },\n      { id: 'atropellamiento_personas', label: 'Atropellamiento a personas', control: 'Respatar los limites de velocidad definidos por Italcol de 10 Km/h, no usar dispostivos de comunicaci√≥n como telefono celular.' },\n  ],\n  BIOMEC√ÅNICOS: [\n      { id: 'carga_estatica', label: 'Carga Est√°tica (Posturas inadecuadas, prolongadas, forzadas, antigravitaci√≥n)', control: 'Realizar calentamiento previo al inicio de las actividades (ejercicios pre-laborales); Tomar pausas activas. Higiene postural. Realizar cambios peri√≥dicos de actividad dentro de la tarea a ejecutar.' },\n      { id: 'carga_dinamica', label: 'Carga Din√°mica (Esfuerzo, Movilizaci√≥n de cargas, Movimientos repetitivos / repetidos)', control: 'No levantar cargas superiores a 25 kg (hombres) / 12.5Kg (mujeres) de peso; levantar una carga a la vez, en piezas pesadas y/o voluminosas, hacer el movimiento entre 2 personas. Aplicar t√©cnicas de levantamiento de cargas, manteniendo la espalda recta y flexionando las piernas, busque siempre primero ayudas mec√°nicas.' },\n  ],\n  AMBIENTALES: [\n      { id: 'generacion_residuos', label: 'Generaci√≥n de residuos escombros', control: 'ReaIizar la separaci√≥n y disponer de acuerdo a la clasificaci√≥n de colores definida por Italcol , disposici√≥n de residuos fuera de las instalaciones de acuerdo al marco normativo definido' },\n      { id: 'consumo_agua', label: 'Consumo de agua en grandes cantidades', control: 'Uso eficiente de recursos, eliminaci√≥n de fugas de agua, prevenir y contener derrames de productos peligrosos.' },\n      { id: 'mezcla_concreto', label: 'Mezcla de concerto en suelo', control: 'Uso de mezcladora o recipiente para evitar la mezcla en piso, de no ser posible utilizar una barrera fisica que aisle los materiales de cosntroccu√≥n de las superficies y sirvan como mecaniosmo de contenci√≥n.' },\n      { id: 'emisiones_material_particulado', label: 'Emisiones de material particulado', control: 'Cubrir materiales que puedan generar material particulado o barreras fisicas que mitiquen la generaci√≥n al medio ambiente' },\n  ],\n};\n\nconst eppOptions = {\n    'Protecci√≥n Corporal': [\n        { id: 'ropa_trabajo', label: 'Ropa de trabajo', type: 'text' },\n        { id: 'overol_ignifugo', label: 'Overol Ign√≠fugo, Categor√≠a:', type: 'text' },\n        { id: 'proteccion_soldador', label: 'Proteccion cuerpo para soldador y/o', type: 'boolean' },\n    ],\n    'Protecci√≥n Respiratoria': [\n        { id: 'proteccion_respiratoria', label: 'Proteccion respiratoria', type: 'text' },\n        { id: 'mascarilla_material_particulado', label: 'Mascarilla material particulado', type: 'boolean' },\n    ],\n    'Protecci√≥n para la Cabeza': [\n        { id: 'casco', label: 'Casco Tipo__ Clase__ SIN__ CON__ Barbuquejo', type: 'boolean' },\n        { id: 'chavo_tela_carnaza', label: 'Chavo en tela o carnaza', type: 'boolean' },\n    ],\n    'Protecci√≥n para Pies y Piernas': [\n        { id: 'botas_seguridad_dielectrica', label: 'Botas de seguridad + dielectrica', type: 'boolean' },\n        { id: 'proteccion_metatarso', label: 'Proteccion metatarso', type: 'boolean' },\n    ],\n    'Protecci√≥n Visual y Facial': [\n        { id: 'monogafas_gafas', label: 'Monogafas / Gafas', type: 'boolean' },\n        { id: 'careta_soldador', label: 'Careta de soldador', type: 'boolean' },\n        { id: 'gafas_oxicorte', label: 'Gafas de oxicorte', type: 'boolean' },\n        { id: 'careta_proteccion_total', label: 'Careta de proteccion total', type: 'boolean' },\n    ],\n    'Protecci√≥n Auditiva': [\n        { id: 'proteccion_auditiva_insercion', label: 'Proteccion auditiva Inserci√≥n', type: 'boolean' },\n        { id: 'proteccion_auditiva_copa', label: 'Proteccion auditiva copa', type: 'boolean' },\n    ],\n    'Protecci√≥n para Manos': [\n        { id: 'guantes_anticorte', label: 'Guantes anti corte', type: 'boolean' },\n        { id: 'guantes_quimicos', label: 'Guantes sustancias qu√≠micas', type: 'boolean' },\n        { id: 'guantes_temperatura', label: 'Guantes temperatura', type: 'text' },\n    ],\n    'Protecci√≥n Contra Ca√≠das': [\n        { id: 'arnes', label: 'Arn√©s, Tipo:', type: 'text' },\n        { id: 'mosqueton', label: 'Mosquet√≥n', type: 'text' },\n        { id: 'eslinga', label: 'Eslinga, Tipo:', type: 'text' },\n        { id: 'linea_vida', label: 'L√≠nea de vida, Tipo:', type: 'text' },\n        { id: 'punto_anclaje', label: 'Punto de anclaje (Cual):', type: 'boolean' },\n    ],\n    'Se√±alizaci√≥n y Barreras': [\n        { id: 'senalizacion', label: 'Se√±alizaci√≥n', type: 'boolean' },\n        { id: 'barandas', label: 'Barandas', type: 'boolean' },\n        { id: 'delimitacion_perimetral', label: 'Delimitaci√≥n Perimetral', type: 'boolean' },\n        { id: 'control_acceso', label: 'Control de acceso', type: 'boolean' },\n    ],\n};\n\n\nconst justificacionOptions = [\n    { id: 'rutinario_3_meses', label: 'TRABAJO RUTINARIO REALIZADO 1 VEZ CADA 3 MESES' },\n    { id: 'no_rutinario_emergencia', label: 'TRABAJO NO RUTINARIO (EMERGENCIA)' },\n    { id: 'rutinario_sin_procedimiento', label: 'TRABAJO RUTINARIO QUE NO POSEE UN PROCEDIMIENTO SEGURO DE TRABAJO O INDICACI√ìN CORRECTA DE RIESGOS O MEDIDAS PREVENTIVAS' },\n    { id: 'no_rutinario_planeado', label: 'TRABAJO NO RUTINARIO (PLANEADO)' },\n    { id: 'rutinario_condicion_especifica', label: 'TRABAJO RUTINARIO QUE POR UNA CONDICI√ìN ESPEC√çFICA/TEMPORAL, NO ES POSIBLE APLICAR UN PROCEDIMIENTO DE FORMA INTEGRAL' },\n];\n\nexport function AtsStep() {\n  const { state, dispatch } = usePermitForm();\n  const { anexoATS } = state;\n  const [openCategories, setOpenCategories] = React.useState<string[]>([]);\n  const [newPeligro, setNewPeligro] = React.useState('');\n  const [newPeligroDesc, setNewPeligroDesc] = React.useState('');\n\n  const handlePeligroChange = (id: string, value: 'si' | 'no') => {\n    dispatch({\n      type: 'UPDATE_ATS',\n      payload: { peligros: { ...anexoATS.peligros, [id]: value } },\n    });\n  };\n\n  const handleControlChange = (id: string, value: 'si' | 'no' | 'na') => {\n    dispatch({\n        type: 'UPDATE_ATS',\n        payload: { controles: { ...anexoATS.controles, [id]: value } },\n    });\n  };\n  \n  const handleEppChange = (id: string, value: boolean | string) => {\n    dispatch({\n        type: 'UPDATE_ATS',\n        payload: { epp: { ...anexoATS.epp, [id]: value } },\n    });\n  };\n\n  const handleJustificacionChange = (id: string, value: boolean) => {\n    dispatch({\n        type: 'UPDATE_ATS',\n        payload: { justificacion: { ...anexoATS.justificacion, [id]: value } },\n    });\n  };\n  \n  const handleProtocoloChange = (value: 'si' | 'no') => {\n    dispatch({\n        type: 'UPDATE_ATS',\n        payload: { protocolosBioseguridad: value },\n    });\n  };\n\n  const handleAddOtroPeligro = () => {\n    if (newPeligro.trim() && newPeligroDesc.trim()) {\n        const newPeligros = [...(anexoATS.peligrosAdicionales || []), { peligro: newPeligro, descripcion: newPeligroDesc }];\n        dispatch({ type: 'UPDATE_ATS', payload: { peligrosAdicionales: newPeligros } });\n        setNewPeligro('');\n        setNewPeligroDesc('');\n    }\n  };\n\n  const handleRemoveOtroPeligro = (index: number) => {\n    const newPeligros = (anexoATS.peligrosAdicionales || []).filter((_, i) => i !== index);\n    dispatch({ type: 'UPDATE_ATS', payload: { peligrosAdicionales: newPeligros } });\n  };\n\n\n  const toggleCategory = (category: string) => {\n    setOpenCategories(prev =>\n      prev.includes(category)\n        ? prev.filter(c => c !== category)\n        : [...prev, category]\n    );\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          An√°lisis de Peligros y ATS\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">\n          Identifique los peligros, controles y EPP necesarios para la tarea.\n        </p>\n      </div>\n\n      {/* Identificaci√≥n de Peligros */}\n      <div className=\"space-y-4\">\n        <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2\">\n          1. Identificaci√≥n de Peligros, Riesgos y Controles\n        </h3>\n        <p className=\"text-xs text-muted-foreground\">\n          Coloque \"SI\" o \"NO\" para los peligros envueltos en el trabajo. Cuando asigne un \"SI\", se desplegar√°n los controles recomendados.\n        </p>\n        <div className=\"space-y-2\">\n          {Object.entries(hazardCategories).map(([category, hazards]) => (\n            <Collapsible key={category} open={openCategories.includes(category)} onOpenChange={() => toggleCategory(category)}>\n              <CollapsibleTrigger asChild>\n                <Button variant=\"ghost\" className=\"w-full justify-between p-4 border rounded-lg\">\n                  <span className=\"font-semibold\">{category}</span>\n                  <ChevronDown className={`h-5 w-5 transition-transform ${openCategories.includes(category) ? 'rotate-180' : ''}`} />\n                </Button>\n              </CollapsibleTrigger>\n              <CollapsibleContent className=\"p-4 border border-t-0 rounded-b-lg space-y-4\">\n                {hazards.map((hazard) => (\n                  <div key={hazard.id} className=\"space-y-3 p-3 bg-gray-50/50 rounded-md\">\n                    <div className=\"flex items-center justify-between\">\n                      <Label htmlFor={hazard.id} className=\"font-medium flex-1\">\n                        {hazard.label}\n                      </Label>\n                      <RadioGroup\n                        value={anexoATS.peligros?.[hazard.id]}\n                        onValueChange={(value: 'si' | 'no') => handlePeligroChange(hazard.id, value)}\n                        className=\"flex gap-4\"\n                      >\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"si\" id={`${hazard.id}-si`} />\n                          <Label htmlFor={`${hazard.id}-si`}>SI</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"no\" id={`${hazard.id}-no`} />\n                          <Label htmlFor={`${hazard.id}-no`}>NO</Label>\n                        </div>\n                      </RadioGroup>\n                    </div>\n                    {anexoATS.peligros?.[hazard.id] === 'si' && (\n                      <div className=\"pl-4 border-l-4 border-primary/50 ml-2\">\n                        <p className=\"text-xs font-semibold text-primary mb-1\">CONTROL RECOMENDADO:</p>\n                        <p className=\"text-xs text-muted-foreground\">{hazard.control}</p>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </CollapsibleContent>\n            </Collapsible>\n          ))}\n        </div>\n      </div>\n\n       {/* Otros Peligros */}\n        <div>\n            <h4 className=\"font-semibold text-lg text-gray-700 mb-2\">Otros Peligros</h4>\n            <div className=\"p-4 border rounded-lg space-y-4\">\n            {anexoATS.peligrosAdicionales?.map((item, index) => (\n                <div key={index} className=\"flex items-start gap-2 p-3 bg-gray-50 rounded-md\">\n                    <div className=\"flex-1\">\n                        <p className=\"font-bold\">{item.peligro}</p>\n                        <p className=\"text-sm text-muted-foreground\">{item.descripcion}</p>\n                    </div>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => handleRemoveOtroPeligro(index)}>\n                        <Trash2 className=\"h-4 w-4 text-destructive\" />\n                    </Button>\n                </div>\n            ))}\n            <div className=\"space-y-2\">\n                <Input value={newPeligro} onChange={(e) => setNewPeligro(e.target.value)} placeholder=\"Nombre del nuevo peligro\"/>\n                <Textarea value={newPeligroDesc} onChange={(e) => setNewPeligroDesc(e.target.value)} placeholder=\"Descripci√≥n y control del peligro\"/>\n            </div>\n            <Button onClick={handleAddOtroPeligro} size=\"sm\">\n                <Plus className=\"mr-2 h-4 w-4\" /> Agregar Peligro\n            </Button>\n            </div>\n        </div>\n\n      {/* Protocolos de Bioseguridad */}\n       <div>\n        <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2 mb-4\">\n          2. ¬øProtocolos de bioseguridad?\n        </h3>\n        <div className=\"p-4 border rounded-lg flex items-center justify-between\">\n            <p className=\"text-sm text-muted-foreground flex-1 pr-4\">Respetar distanciamiento social de 2m, uso de tapabocas permanente cubriendo nariz y boca, asegurar punto de lavado de manos y desinfecci√≥n de superficies, herramientas y equipos. Reporte diarios de condiciones de salud, reporte y aislamiento preventivo en caso de nexo epidemiol√≥gico o contagio con COVID -19. Cumplimiento de Protocolos de Bioseguridad establecidos y disposiciones legales vigentes.</p>\n             <RadioGroup\n                value={anexoATS.protocolosBioseguridad}\n                onValueChange={(value: 'si' | 'no') => handleProtocoloChange(value)}\n                className=\"flex gap-4\"\n                >\n                <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"si\" id=\"bioseguridad-si\" />\n                    <Label htmlFor=\"bioseguridad-si\">SI</Label>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"no\" id=\"bioseguridad-no\" />\n                    <Label htmlFor=\"bioseguridad-no\">NO</Label>\n                </div>\n            </RadioGroup>\n        </div>\n       </div>\n\n      {/* EPP Requeridos */}\n      <div>\n        <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2 mb-4\">\n          3. EPP Requeridos\n        </h3>\n         <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6\">\n            {Object.entries(eppOptions).map(([category, items]) => (\n                <div key={category} className=\"space-y-3\">\n                    <h4 className=\"font-semibold text-md text-gray-700\">{category}</h4>\n                    <div className=\"space-y-2 p-3 border rounded-md\">\n                        {items.map(item => (\n                             <div key={item.id} className=\"flex flex-col gap-1\">\n                                <div className=\"flex items-center space-x-2\">\n                                    <Checkbox id={item.id} checked={!!anexoATS.epp?.[item.id]} onCheckedChange={(checked) => handleEppChange(item.id, !!checked)} />\n                                    <Label htmlFor={item.id} className=\"text-sm\">{item.label}</Label>\n                                </div>\n                                {item.type === 'text' && anexoATS.epp?.[item.id] && (\n                                     <Input \n                                        className=\"h-8 text-xs ml-6\"\n                                        placeholder=\"Especificar...\"\n                                        value={typeof anexoATS.epp?.[`${item.id}_spec`] === 'string' ? (anexoATS.epp[`${item.id}_spec`] as string) : ''}\n                                        onChange={(e) => handleEppChange(`${item.id}_spec`, e.target.value)}\n                                     />\n                                )}\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            ))}\n         </div>\n      </div>\n      \n        {/* Justificaci√≥n ATS */}\n        <div>\n            <h3 className=\"text-xl font-bold text-gray-800 border-b pb-2 mb-4\">\n            4. Justificaci√≥n para el uso del ATS\n            </h3>\n            <div className=\"space-y-3 p-4 border rounded-lg\">\n                {justificacionOptions.map(option => (\n                    <div key={option.id} className=\"flex items-center space-x-3\">\n                        <Checkbox\n                            id={option.id}\n                            checked={!!anexoATS.justificacion?.[option.id]}\n                            onCheckedChange={(checked) => handleJustificacionChange(option.id, !!checked)}\n                        />\n                        <Label htmlFor={option.id} className=\"text-sm font-normal\">{option.label}</Label>\n                    </div>\n                ))}\n            </div>\n        </div>\n\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAKA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAfA;;;;;;;;;;;;AAiBA,MAAM,mBAAmB;IACvB,WAAW;QACT;YAAE,IAAI;YAA2B,OAAO;YAA2B,SAAS;QAAkb;QAC9f;YAAE,IAAI;YAA2B,OAAO;YAA2B,SAAS;QAA0J;QACtO;YAAE,IAAI;YAAoB,OAAO;YAAuC,SAAS;QAA0K;QAC3P;YAAE,IAAI;YAAqB,OAAO;YAAgD,SAAS;QAA6I;QACxO;YAAE,IAAI;YAAsB,OAAO;YAAiC,SAAS;QAAoK;KAClP;IACD,SAAS;QACP;YAAE,IAAI;YAA2B,OAAO;YAA8B,SAAS;QAAuR;QACtW;YAAE,IAAI;YAAsB,OAAO;YAAyB,SAAS;QAA8I;QACnN;YAAE,IAAI;YAAsB,OAAO;YAAyC,SAAS;QAA+G;QACpM;YAAE,IAAI;YAAkC,OAAO;YAAkC,SAAS;QAAiI;QAC3N;YAAE,IAAI;YAAwB,OAAO;YAAkC,SAAS;QAA2K;KAC5P;IACD,UAAU;QACR;YAAE,IAAI;YAAuB,OAAO;YAAoC,SAAS;QAAmQ;QACpV;YAAE,IAAI;YAAwB,OAAO;YAAwB,SAAS;QAA4K;QAClP;YAAE,IAAI;YAAkC,OAAO;YAAyD,SAAS;QAA+L;QAChT;YAAE,IAAI;YAA8B,OAAO;YAAyC,SAAS;QAA+L;KAC7R;IACD,WAAW;QACT;YAAE,IAAI;YAAyB,OAAO;YAAyC,SAAS;QAAgG;QACxL;YAAE,IAAI;YAAwB,OAAO;YAA2B,SAAS;QAAuL;QAChQ;YAAE,IAAI;YAAuB,OAAO;YAA+C,SAAS;QAAgJ;QAC5O;YAAE,IAAI;YAA8B,OAAO;YAAoD,SAAS;QAAyK;QACjR;YAAE,IAAI;YAA0B,OAAO;YAAwC,SAAS;QAA+I;KACxO;IACD,YAAY;QACR;YAAE,IAAI;YAAuB,OAAO;YAAqD,SAAS;QAAqH;QACvN;YAAE,IAAI;YAA2B,OAAO;YAA2B,SAAS;QAA+G;KAC9L;IACD,MAAM;QACF;YAAE,IAAI;YAA4B,OAAO;YAA8B,SAAS;QAAyG;QACzL;YAAE,IAAI;YAA4B,OAAO;YAA8B,SAAS;QAAiI;KACpN;IACD,cAAc;QACV;YAAE,IAAI;YAAkB,OAAO;YAAiF,SAAS;QAAyM;QAClU;YAAE,IAAI;YAAkB,OAAO;YAA0F,SAAS;QAAkU;KACvc;IACD,aAAa;QACT;YAAE,IAAI;YAAuB,OAAO;YAAoC,SAAS;QAA8L;QAC/Q;YAAE,IAAI;YAAgB,OAAO;YAAyC,SAAS;QAAiH;QAChM;YAAE,IAAI;YAAmB,OAAO;YAA+B,SAAS;QAAkN;QAC1R;YAAE,IAAI;YAAkC,OAAO;YAAqC,SAAS;QAA4H;KAC5N;AACH;AAEA,MAAM,aAAa;IACf,uBAAuB;QACnB;YAAE,IAAI;YAAgB,OAAO;YAAmB,MAAM;QAAO;QAC7D;YAAE,IAAI;YAAmB,OAAO;YAA+B,MAAM;QAAO;QAC5E;YAAE,IAAI;YAAuB,OAAO;YAAuC,MAAM;QAAU;KAC9F;IACD,2BAA2B;QACvB;YAAE,IAAI;YAA2B,OAAO;YAA2B,MAAM;QAAO;QAChF;YAAE,IAAI;YAAmC,OAAO;YAAmC,MAAM;QAAU;KACtG;IACD,6BAA6B;QACzB;YAAE,IAAI;YAAS,OAAO;YAA+C,MAAM;QAAU;QACrF;YAAE,IAAI;YAAsB,OAAO;YAA2B,MAAM;QAAU;KACjF;IACD,kCAAkC;QAC9B;YAAE,IAAI;YAA+B,OAAO;YAAoC,MAAM;QAAU;QAChG;YAAE,IAAI;YAAwB,OAAO;YAAwB,MAAM;QAAU;KAChF;IACD,8BAA8B;QAC1B;YAAE,IAAI;YAAmB,OAAO;YAAqB,MAAM;QAAU;QACrE;YAAE,IAAI;YAAmB,OAAO;YAAsB,MAAM;QAAU;QACtE;YAAE,IAAI;YAAkB,OAAO;YAAqB,MAAM;QAAU;QACpE;YAAE,IAAI;YAA2B,OAAO;YAA8B,MAAM;QAAU;KACzF;IACD,uBAAuB;QACnB;YAAE,IAAI;YAAiC,OAAO;YAAiC,MAAM;QAAU;QAC/F;YAAE,IAAI;YAA4B,OAAO;YAA4B,MAAM;QAAU;KACxF;IACD,yBAAyB;QACrB;YAAE,IAAI;YAAqB,OAAO;YAAsB,MAAM;QAAU;QACxE;YAAE,IAAI;YAAoB,OAAO;YAA+B,MAAM;QAAU;QAChF;YAAE,IAAI;YAAuB,OAAO;YAAuB,MAAM;QAAO;KAC3E;IACD,4BAA4B;QACxB;YAAE,IAAI;YAAS,OAAO;YAAgB,MAAM;QAAO;QACnD;YAAE,IAAI;YAAa,OAAO;YAAa,MAAM;QAAO;QACpD;YAAE,IAAI;YAAW,OAAO;YAAkB,MAAM;QAAO;QACvD;YAAE,IAAI;YAAc,OAAO;YAAwB,MAAM;QAAO;QAChE;YAAE,IAAI;YAAiB,OAAO;YAA4B,MAAM;QAAU;KAC7E;IACD,2BAA2B;QACvB;YAAE,IAAI;YAAgB,OAAO;YAAgB,MAAM;QAAU;QAC7D;YAAE,IAAI;YAAY,OAAO;YAAY,MAAM;QAAU;QACrD;YAAE,IAAI;YAA2B,OAAO;YAA2B,MAAM;QAAU;QACnF;YAAE,IAAI;YAAkB,OAAO;YAAqB,MAAM;QAAU;KACvE;AACL;AAGA,MAAM,uBAAuB;IACzB;QAAE,IAAI;QAAqB,OAAO;IAAiD;IACnF;QAAE,IAAI;QAA2B,OAAO;IAAoC;IAC5E;QAAE,IAAI;QAA+B,OAAO;IAA2H;IACvK;QAAE,IAAI;QAAyB,OAAO;IAAkC;IACxE;QAAE,IAAI;QAAkC,OAAO;IAAwH;CAC1K;AAEM,SAAS;IACd,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,8JAAA,CAAA,gBAAa,AAAD;IACxC,MAAM,EAAE,QAAQ,EAAE,GAAG;IACrB,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAc,AAAD,EAAY,EAAE;IACvE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAc,AAAD,EAAE;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAc,AAAD,EAAE;IAE3D,MAAM,sBAAsB,CAAC,IAAY;QACvC,SAAS;YACP,MAAM;YACN,SAAS;gBAAE,UAAU;oBAAE,GAAG,SAAS,QAAQ;oBAAE,CAAC,GAAG,EAAE;gBAAM;YAAE;QAC7D;IACF;IAEA,MAAM,sBAAsB,CAAC,IAAY;QACvC,SAAS;YACL,MAAM;YACN,SAAS;gBAAE,WAAW;oBAAE,GAAG,SAAS,SAAS;oBAAE,CAAC,GAAG,EAAE;gBAAM;YAAE;QACjE;IACF;IAEA,MAAM,kBAAkB,CAAC,IAAY;QACnC,SAAS;YACL,MAAM;YACN,SAAS;gBAAE,KAAK;oBAAE,GAAG,SAAS,GAAG;oBAAE,CAAC,GAAG,EAAE;gBAAM;YAAE;QACrD;IACF;IAEA,MAAM,4BAA4B,CAAC,IAAY;QAC7C,SAAS;YACL,MAAM;YACN,SAAS;gBAAE,eAAe;oBAAE,GAAG,SAAS,aAAa;oBAAE,CAAC,GAAG,EAAE;gBAAM;YAAE;QACzE;IACF;IAEA,MAAM,wBAAwB,CAAC;QAC7B,SAAS;YACL,MAAM;YACN,SAAS;gBAAE,wBAAwB;YAAM;QAC7C;IACF;IAEA,MAAM,uBAAuB;QAC3B,IAAI,WAAW,IAAI,MAAM,eAAe,IAAI,IAAI;YAC5C,MAAM,cAAc;mBAAK,SAAS,mBAAmB,IAAI,EAAE;gBAAG;oBAAE,SAAS;oBAAY,aAAa;gBAAe;aAAE;YACnH,SAAS;gBAAE,MAAM;gBAAc,SAAS;oBAAE,qBAAqB;gBAAY;YAAE;YAC7E,cAAc;YACd,kBAAkB;QACtB;IACF;IAEA,MAAM,0BAA0B,CAAC;QAC/B,MAAM,cAAc,CAAC,SAAS,mBAAmB,IAAI,EAAE,EAAE,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;QAChF,SAAS;YAAE,MAAM;YAAc,SAAS;gBAAE,qBAAqB;YAAY;QAAE;IAC/E;IAGA,MAAM,iBAAiB,CAAC;QACtB,kBAAkB,CAAA,OAChB,KAAK,QAAQ,CAAC,YACV,KAAK,MAAM,CAAC,CAAA,IAAK,MAAM,YACvB;mBAAI;gBAAM;aAAS;IAE3B;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmD;;;;;;kCAGjE,8OAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;0BAM/C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAgD;;;;;;kCAG9D,8OAAC;wBAAE,WAAU;kCAAgC;;;;;;kCAG7C,8OAAC;wBAAI,WAAU;kCACZ,OAAO,OAAO,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC,UAAU,QAAQ,iBACxD,8OAAC,uIAAA,CAAA,cAAW;gCAAgB,MAAM,eAAe,QAAQ,CAAC;gCAAW,cAAc,IAAM,eAAe;;kDACtG,8OAAC,uIAAA,CAAA,qBAAkB;wCAAC,OAAO;kDACzB,cAAA,8OAAC,kIAAA,CAAA,SAAM;4CAAC,SAAQ;4CAAQ,WAAU;;8DAChC,8OAAC;oDAAK,WAAU;8DAAiB;;;;;;8DACjC,8OAAC,oNAAA,CAAA,cAAW;oDAAC,WAAW,CAAC,6BAA6B,EAAE,eAAe,QAAQ,CAAC,YAAY,eAAe,IAAI;;;;;;;;;;;;;;;;;kDAGnH,8OAAC,uIAAA,CAAA,qBAAkB;wCAAC,WAAU;kDAC3B,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;gDAAoB,WAAU;;kEAC7B,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,iIAAA,CAAA,QAAK;gEAAC,SAAS,OAAO,EAAE;gEAAE,WAAU;0EAClC,OAAO,KAAK;;;;;;0EAEf,8OAAC,0IAAA,CAAA,aAAU;gEACT,OAAO,SAAS,QAAQ,EAAE,CAAC,OAAO,EAAE,CAAC;gEACrC,eAAe,CAAC,QAAuB,oBAAoB,OAAO,EAAE,EAAE;gEACtE,WAAU;;kFAEV,8OAAC;wEAAI,WAAU;;0FACb,8OAAC,0IAAA,CAAA,iBAAc;gFAAC,OAAM;gFAAK,IAAI,GAAG,OAAO,EAAE,CAAC,GAAG,CAAC;;;;;;0FAChD,8OAAC,iIAAA,CAAA,QAAK;gFAAC,SAAS,GAAG,OAAO,EAAE,CAAC,GAAG,CAAC;0FAAE;;;;;;;;;;;;kFAErC,8OAAC;wEAAI,WAAU;;0FACb,8OAAC,0IAAA,CAAA,iBAAc;gFAAC,OAAM;gFAAK,IAAI,GAAG,OAAO,EAAE,CAAC,GAAG,CAAC;;;;;;0FAChD,8OAAC,iIAAA,CAAA,QAAK;gFAAC,SAAS,GAAG,OAAO,EAAE,CAAC,GAAG,CAAC;0FAAE;;;;;;;;;;;;;;;;;;;;;;;;oDAIxC,SAAS,QAAQ,EAAE,CAAC,OAAO,EAAE,CAAC,KAAK,sBAClC,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAE,WAAU;0EAA0C;;;;;;0EACvD,8OAAC;gEAAE,WAAU;0EAAiC,OAAO,OAAO;;;;;;;;;;;;;+CAvBxD,OAAO,EAAE;;;;;;;;;;;+BATP;;;;;;;;;;;;;;;;0BA4CtB,8OAAC;;kCACG,8OAAC;wBAAG,WAAU;kCAA2C;;;;;;kCACzD,8OAAC;wBAAI,WAAU;;4BACd,SAAS,mBAAmB,EAAE,IAAI,CAAC,MAAM,sBACtC,8OAAC;oCAAgB,WAAU;;sDACvB,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAE,WAAU;8DAAa,KAAK,OAAO;;;;;;8DACtC,8OAAC;oDAAE,WAAU;8DAAiC,KAAK,WAAW;;;;;;;;;;;;sDAElE,8OAAC,kIAAA,CAAA,SAAM;4CAAC,SAAQ;4CAAQ,MAAK;4CAAO,SAAS,IAAM,wBAAwB;sDACvE,cAAA,8OAAC,0MAAA,CAAA,SAAM;gDAAC,WAAU;;;;;;;;;;;;mCANhB;;;;;0CAUd,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,iIAAA,CAAA,QAAK;wCAAC,OAAO;wCAAY,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wCAAG,aAAY;;;;;;kDACtF,8OAAC,oIAAA,CAAA,WAAQ;wCAAC,OAAO;wCAAgB,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;wCAAG,aAAY;;;;;;;;;;;;0CAErG,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAS;gCAAsB,MAAK;;kDACxC,8OAAC,kMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;;;;;;;;0BAM1C,8OAAC;;kCACA,8OAAC;wBAAG,WAAU;kCAAqD;;;;;;kCAGnE,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAE,WAAU;0CAA4C;;;;;;0CACxD,8OAAC,0IAAA,CAAA,aAAU;gCACR,OAAO,SAAS,sBAAsB;gCACtC,eAAe,CAAC,QAAuB,sBAAsB;gCAC7D,WAAU;;kDAEV,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,0IAAA,CAAA,iBAAc;gDAAC,OAAM;gDAAK,IAAG;;;;;;0DAC9B,8OAAC,iIAAA,CAAA,QAAK;gDAAC,SAAQ;0DAAkB;;;;;;;;;;;;kDAErC,8OAAC;wCAAI,WAAU;;0DACX,8OAAC,0IAAA,CAAA,iBAAc;gDAAC,OAAM;gDAAK,IAAG;;;;;;0DAC9B,8OAAC,iIAAA,CAAA,QAAK;gDAAC,SAAQ;0DAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAO/C,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAqD;;;;;;kCAGlE,8OAAC;wBAAI,WAAU;kCACX,OAAO,OAAO,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,UAAU,MAAM,iBAC9C,8OAAC;gCAAmB,WAAU;;kDAC1B,8OAAC;wCAAG,WAAU;kDAAuC;;;;;;kDACrD,8OAAC;wCAAI,WAAU;kDACV,MAAM,GAAG,CAAC,CAAA,qBACN,8OAAC;gDAAkB,WAAU;;kEAC1B,8OAAC;wDAAI,WAAU;;0EACX,8OAAC,oIAAA,CAAA,WAAQ;gEAAC,IAAI,KAAK,EAAE;gEAAE,SAAS,CAAC,CAAC,SAAS,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC;gEAAE,iBAAiB,CAAC,UAAY,gBAAgB,KAAK,EAAE,EAAE,CAAC,CAAC;;;;;;0EACpH,8OAAC,iIAAA,CAAA,QAAK;gEAAC,SAAS,KAAK,EAAE;gEAAE,WAAU;0EAAW,KAAK,KAAK;;;;;;;;;;;;oDAE3D,KAAK,IAAI,KAAK,UAAU,SAAS,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC,kBAC3C,8OAAC,iIAAA,CAAA,QAAK;wDACH,WAAU;wDACV,aAAY;wDACZ,OAAO,OAAO,SAAS,GAAG,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,KAAK,CAAC,CAAC,KAAK,WAAY,SAAS,GAAG,CAAC,GAAG,KAAK,EAAE,CAAC,KAAK,CAAC,CAAC,GAAc;wDAC7G,UAAU,CAAC,IAAM,gBAAgB,GAAG,KAAK,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;;;;;;;+CAVnE,KAAK,EAAE;;;;;;;;;;;+BAJpB;;;;;;;;;;;;;;;;0BA0BlB,8OAAC;;kCACG,8OAAC;wBAAG,WAAU;kCAAqD;;;;;;kCAGnE,8OAAC;wBAAI,WAAU;kCACV,qBAAqB,GAAG,CAAC,CAAA,uBACtB,8OAAC;gCAAoB,WAAU;;kDAC3B,8OAAC,oIAAA,CAAA,WAAQ;wCACL,IAAI,OAAO,EAAE;wCACb,SAAS,CAAC,CAAC,SAAS,aAAa,EAAE,CAAC,OAAO,EAAE,CAAC;wCAC9C,iBAAiB,CAAC,UAAY,0BAA0B,OAAO,EAAE,EAAE,CAAC,CAAC;;;;;;kDAEzE,8OAAC,iIAAA,CAAA,QAAK;wCAAC,SAAS,OAAO,EAAE;wCAAE,WAAU;kDAAuB,OAAO,KAAK;;;;;;;+BANlE,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;;AAcvC","debugId":null}},
    {"offset": {"line": 2601, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/page.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useUser } from '@/hooks/use-user';\nimport { useToast } from '@/hooks/use-toast';\nimport { createPermit } from '../actions';\nimport { useRouter } from 'next/navigation';\nimport {\n  CheckCircle,\n  XCircle,\n  AlertTriangle,\n  FileText,\n  Users,\n  Shield,\n  Upload,\n  Camera,\n  Wand2,\n  Loader2,\n  X,\n  UserPlus,\n  Signature,\n  FileUp,\n  Edit,\n  Plus,\n  Trash2,\n  Clock,\n  Check,\n  ArrowRight,\n  ArrowLeft,\n  Copy,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\nimport type { Permit, ExternalWorker, Tool, AnexoAltura, AnexoConfinado, AnexoIzaje, MedicionAtmosferica, AnexoEnergias, AnexoATS, PermitGeneralInfo, ValidacionDiaria, AutorizacionPersona, PruebaGasesPeriodica, AnexoCaliente, AnexoExcavaciones, JustificacionATS } from '@/types';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport Image from 'next/image';\nimport { PermitFormProvider, usePermitForm } from './form-context';\nimport { GeneralInfoStep } from './components/GeneralInfoStep';\nimport { AtsStep } from './components/AtsStep';\n\n\nconst workerRoles = [\n  \"Trabajador autorizado\",\n  \"Ayudante de seguridad\",\n  \"Coordinador de TA\",\n  \"Supervisor de EC\",\n  \"Soldador\",\n  \"Operador de equipo para elevaci√≥n de personas\",\n  \"Vig√≠a\",\n  \"Otro\"\n];\n\nfunction CreatePermitWizard() {\n  const { user } = useUser();\n  const { toast } = useToast();\n  const router = useRouter();\n\n  const { state: formData, dispatch } = usePermitForm();\n\n  const [step, setStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isAssessing, setIsAssessing] = useState(false);\n  const [recommendations, setRecommendations] = useState('');\n  const [showSuccessDialog, setShowSuccessDialog] = useState(false);\n  const [newPermitInfo, setNewPermitInfo] = useState({ id: '', number: '' });\n\n  // Step 5 - Emergencia, Trabajadores\n  const [isWorkerDialogOpen, setIsWorkerDialogOpen] = useState(false);\n  const [currentWorker, setCurrentWorker] = useState<Partial<ExternalWorker> | null>(null);\n  const [editingWorkerIndex, setEditingWorkerIndex] = useState<number | null>(null);\n  const [isSignaturePadOpen, setIsSignaturePadOpen] = useState(false);\n  const [signatureTarget, setSignatureTarget] = useState<string | null>(null);\n  const [signatureContext, setSignatureContext] = useState<any>(null);\n\n  useEffect(() => {\n    if (user && !formData.generalInfo.nombreSolicitante) {\n      dispatch({ type: 'UPDATE_GENERAL_INFO', payload: { nombreSolicitante: user.displayName || '' } });\n    }\n  }, [user, formData.generalInfo.nombreSolicitante, dispatch]);\n\n  const openNewWorkerDialog = () => {\n    setEditingWorkerIndex(null);\n    setCurrentWorker({\n      nombre: '',\n      cedula: '',\n      rol: '',\n      eps: '',\n      arl: '',\n      pensiones: '',\n      tsaTec: 'na',\n      entrenamiento: 'otro',\n      firmaApertura: '',\n      firmaCierre: ''\n    });\n    setIsWorkerDialogOpen(true);\n  };\n  \n  const openEditWorkerDialog = (worker: ExternalWorker, index: number) => {\n    setEditingWorkerIndex(index);\n    setCurrentWorker(worker);\n    setIsWorkerDialogOpen(true);\n  };\n\n  const handleSaveWorker = () => {\n    if (!currentWorker || !currentWorker.nombre || !currentWorker.cedula || !currentWorker.rol) {\n      toast({\n        variant: 'destructive',\n        title: 'Campos Incompletos',\n        description: 'Nombre, c√©dula y rol son requeridos.',\n      });\n      return;\n    }\n\n    if (editingWorkerIndex !== null) {\n      const updatedWorkers = [...(formData.workers || [])];\n      updatedWorkers[editingWorkerIndex] = currentWorker as ExternalWorker;\n      dispatch({ type: 'SET_WORKERS', payload: updatedWorkers });\n      toast({ title: 'Trabajador Actualizado' });\n    } else {\n      dispatch({ type: 'ADD_WORKER', payload: currentWorker as ExternalWorker });\n      toast({ title: 'Trabajador Agregado' });\n    }\n\n    setIsWorkerDialogOpen(false);\n    setCurrentWorker(null);\n    setEditingWorkerIndex(null);\n  };\n  \n  const removeWorker = (index: number) => {\n    const updatedWorkers = (formData.workers || []).filter((_, i) => i !== index);\n    dispatch({ type: 'SET_WORKERS', payload: updatedWorkers });\n  };\n  \n  const handleWorkerInputChange = (field: keyof ExternalWorker, value: string) => {\n    setCurrentWorker(prev => prev ? { ...prev, [field]: value } : null);\n  };\n\n  const handleFileUpload = (field: keyof ExternalWorker) => {\n    // This is a simulation. In a real app, you'd handle file uploads.\n    handleWorkerInputChange(field, `archivo_cargado_${Date.now()}.pdf`);\n    toast({ title: 'Archivo Simulado', description: 'Se ha simulado la carga de un archivo.'})\n  }\n\n  const openSignaturePad = (target: string, context?: any) => {\n    setSignatureTarget(target);\n    setSignatureContext(context);\n    setIsSignaturePadOpen(true);\n  };\n\n  const handleSaveSignature = (signatureDataUrl: string) => {\n    if (!signatureTarget) return;\n\n    if (signatureTarget === 'worker.firmaApertura' || signatureTarget === 'worker.firmaCierre') {\n       setCurrentWorker(prev => prev ? { ...prev, [signatureTarget.split('.')[1]]: signatureDataUrl } : null);\n    } else {\n       dispatch({ type: 'UPDATE_SIGNATURE', payload: { target: signatureTarget, signature: signatureDataUrl, context: signatureContext }});\n    }\n\n    setIsSignaturePadOpen(false);\n    setSignatureTarget(null);\n    setSignatureContext(null);\n  };\n\n  const colors = {\n    primary: 'hsl(var(--primary))',\n    dark: 'hsl(var(--primary))', \n    success: 'hsl(var(--accent))',\n  };\n  \n  const canProceed = () => {\n    // Validate Step 1\n    if (step === 1) {\n        const { areaEspecifica, planta, nombreSolicitante, validFrom, validUntil, workDescription, numTrabajadores } = formData.generalInfo;\n        const missingFields = [];\n        if (!areaEspecifica) missingFields.push(\"√Årea espec√≠fica\");\n        if (!planta) missingFields.push(\"Planta\");\n        if (!nombreSolicitante) missingFields.push(\"Nombre solicitante\");\n        if (!validFrom) missingFields.push(\"Fecha de inicio\");\n        if (!validUntil) missingFields.push(\"Fecha de fin\");\n        if (!workDescription) missingFields.push(\"Descripci√≥n de la Tarea\");\n        if (!numTrabajadores) missingFields.push(\"No. Trabajadores\");\n\n        const workTypes = formData.selectedWorkTypes;\n        if (!Object.values(workTypes).some(v => v)) {\n            missingFields.push(\"Tipo de Trabajo (al menos uno)\");\n        }\n\n        if (missingFields.length > 0) {\n            toast({\n                variant: \"destructive\",\n                title: \"Campos Incompletos en Informaci√≥n General\",\n                description: `Por favor, complete los siguientes campos obligatorios: ${missingFields.join(', ')}.`,\n            });\n            return false;\n        }\n    }\n    \n    // Add validation for other steps if needed\n    return true;\n  };\n  \n  const handleAssessRisk = async () => {\n    // Implement AI risk assessment logic\n  };\n\n  const handleSavePermit = async () => {\n    if (!user) {\n      toast({ variant: 'destructive', title: 'Error de Autenticaci√≥n' });\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      const result = await createPermit({\n          userId: user.uid, \n          userDisplayName: user.displayName || null, \n          userEmail: user.email || null,\n          userPhotoURL: user.photoURL || null,\n          ...formData\n        });\n      \n      if (result.success && result.permitId) {\n        setNewPermitInfo({\n            id: result.permitId,\n            number: result.permitNumber || '',\n        });\n        setShowSuccessDialog(true);\n      } else {\n        throw new Error(result.error || 'Hubo un error creando el permiso.');\n      }\n      \n    } catch (error: any) {\n      toast({\n        variant: 'destructive',\n        title: 'Fall√≥ el Env√≠o',\n        description: error.message,\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const baseSteps = [\n    { label: \"Info General\", condition: true },\n    { label: \"ATS y Peligros\", condition: true },\n    { label: \"Anexo Altura\", condition: formData.selectedWorkTypes.alturas},\n    { label: \"Anexo Confinado\", condition: formData.selectedWorkTypes.confinado},\n    { label: \"Anexo Energ√≠as\", condition: formData.selectedWorkTypes.energia},\n    { label: \"Anexo Caliente\", condition: formData.selectedWorkTypes.caliente},\n    { label: \"Anexo Izaje\", condition: formData.selectedWorkTypes.izaje},\n    { label: \"Anexo Excavaciones\", condition: formData.selectedWorkTypes.excavacion},\n    { label: \"Verificaci√≥n Peligros\", condition: true },\n    { label: \"EPP y Emergencias\", condition: true },\n    { label: \"Trabajadores\", condition: true },\n    { label: \"Revisi√≥n\", condition: true }\n  ];\n\n  const steps = baseSteps.filter(s => s.condition);\n  const currentStepInfo = steps[step - 1];\n  \n  const getInitials = (name?: string | null) => {\n    if (!name) return 'U';\n    return name.split(' ').map(n => n[0]).slice(0, 2).join('').toUpperCase();\n  };\n\n  return (\n    <>\n    <div className=\"flex flex-1 flex-col bg-gray-50 min-h-screen\">\n      <header className=\"text-white shadow-lg sticky top-0 z-20\" style={{ background: `linear-gradient(135deg, ${colors.primary} 0%, ${colors.dark} 100%)` }}>\n        <div className=\"max-w-7xl mx-auto px-4 py-3 md:py-4\">\n          <div className=\"flex justify-between items-center\">\n            <div>\n              <div className=\"flex items-center gap-3\">\n                <Image \n                    src=\"https://i.postimg.cc/jShP2K6k/Whats-App-Image-2025-10-20-at-10-43-48-AM.jpg\"\n                    alt=\"Crear Permiso Icon\"\n                    width={48}\n                    height={48}\n                    className=\"rounded-full\"\n                />\n                <div className=\"hidden md:block border-l border-white border-opacity-30 pl-3\">\n                  <h1 className=\"text-xl font-bold\">Nuevo Permiso de Trabajo</h1>\n                  <p className=\"text-sm text-white text-opacity-80\">\n                    Paso {step} de {steps.length}: {currentStepInfo.label}\n                  </p>\n                </div>\n              </div>\n            </div>\n            <Button\n              onClick={() => {\n                if (confirm('¬øEst√° seguro de cancelar? Los cambios no guardados se perder√°n.')) {\n                  router.push('/dashboard');\n                }\n              }}\n              variant=\"ghost\"\n              className=\"bg-white bg-opacity-20 hover:bg-opacity-30\"\n            >\n              <X size={18} className=\"mr-2\" />\n              <span className=\"hidden sm:inline\">Cancelar</span>\n            </Button>\n          </div>\n        </div>\n      </header>\n      \n      <div className=\"bg-white border-b shadow-sm sticky top-[68px] md:top-[80px] z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4 md:py-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            {steps.map((s_info, s_idx) => {\n              const s = s_idx + 1;\n              return(\n              <div key={s} className=\"flex items-center flex-1\">\n                <div className={`relative flex items-center justify-center w-8 h-8 md:w-10 md:h-10 rounded-full font-bold text-sm transition-all ${\n                  s === step ? 'ring-4 scale-110 shadow-lg text-white' :\n                  s < step ? 'text-white' :\n                  'bg-gray-200 text-gray-600'\n                }`}\n                style={s <= step ? { backgroundColor: s === step ? colors.primary : colors.success } : {}}>\n                  {s < step ? <CheckCircle size={20}/> : s_idx + 1}\n                </div>\n                {s < steps.length && (\n                  <div className=\"flex-1 h-1 mx-1 md:mx-2 rounded\" style={{ \n                    backgroundColor: s < step ? colors.success : '#E5E7EB' \n                  }} />\n                )}\n              </div>\n            )})}\n          </div>\n          <div className=\"grid\" style={{gridTemplateColumns: `repeat(${steps.length}, minmax(0, 1fr))`}}>\n            {steps.map((s_info, s_idx) => (\n              <span key={s_idx} className=\"text-[10px] md:text-xs text-center font-medium\" style={{ color: step === s_idx + 1 ? colors.primary : '#6B7280' }}>{s_info.label}</span>\n            ))}\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"max-w-5xl mx-auto p-4 pb-24 md:pb-24 w-full\">\n        <div className=\"bg-white rounded-xl shadow-xl p-6 md:p-8\">\n          {currentStepInfo.label === \"Info General\" && <GeneralInfoStep />}\n          {currentStepInfo.label === \"ATS y Peligros\" && <AtsStep />}\n\n          {/* ... otros pasos del formulario ir√°n aqu√≠ ... */}\n\n          {currentStepInfo.label === \"Revisi√≥n\" && (\n             <div className=\"space-y-8\">\n              <div className=\"text-center mb-6\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2\" style={{ color: colors.dark }}>\n                  Revisi√≥n Final y Env√≠o\n                </h2>\n                <p className=\"text-muted-foreground text-sm\">Verifique toda la informaci√≥n antes de enviar</p>\n              </div>\n                <div className=\"border-2 border-gray-200 rounded-xl p-6\">\n                   <h3 className=\"font-bold text-xl mb-4 flex items-center gap-2\" style={{ color: colors.dark }}>\n                    <Wand2 size={24} />\n                    An√°lisis de Riesgo con IA\n                  </h3>\n                   <div className=\"flex flex-col sm:flex-row items-center gap-4\">\n                      <Button\n                        type=\"button\"\n                        onClick={handleAssessRisk}\n                        disabled={isAssessing}\n                        variant=\"outline\"\n                      >\n                        {isAssessing ? (\n                          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                        ) : (\n                          <Wand2 className=\"mr-2 h-4 w-4\" />\n                        )}\n                        Evaluar Riesgo con IA\n                      </Button>\n                      {recommendations &&\n                        <p className=\"flex-1 text-sm text-muted-foreground p-4 bg-muted rounded-md\">{recommendations}</p>\n                      }\n                      {isAssessing && <p className=\"flex-1 text-sm text-muted-foreground\">Analizando...</p>}\n                   </div>\n                 </div>\n\n                 <div className=\"border-2 border-gray-200 rounded-xl p-6\">\n                    <h3 className=\"font-bold text-xl mb-4 flex items-center gap-2\" style={{ color: colors.dark }}>\n                        <Signature size={24} />\n                        Autorizaciones\n                    </h3>\n                    <p className='text-xs text-muted-foreground mb-4'>He tenido conocimiento de la actividad que se realizar√° en mi √°rea a cargo, valido las recomendaciones descritas en el cuerpo del PERMISO DE TRABAJO Y ATS, realic√© inspecci√≥n de seguridad del √°rea donde se realizar√° el trabajo (incluir √°reas o actividades vecinas), Alert√© sobre los riesgos espec√≠ficos del lugar donde se realizar√° el trabajo. Se garantizar que las recomendaciones de SST descritas y consignadas ser√°n cumplidas. Verifiqu√© las buenas condiciones de los equipos y herramientas que ser√°n utilizados. Me asegur√© que las personas implicadas est√°n calificadas para la ejecuci√≥n del servicio y conocen las reglas de seguridad aplicables al trabajo, los procedimientos, normas, pol√≠ticas aplicables, el plan de emergencias.</p>\n                    <div className=\"space-y-4\">\n                        <div className=\"flex items-center justify-between p-4 rounded-lg bg-gray-50 border\">\n                            <div>\n                                <p className=\"font-bold text-gray-700\">QUIEN SOLICITA (JEFES Y DUE√ëOS DE AREA)</p>\n                                <p className=\"text-sm text-gray-600\">{user?.displayName}</p>\n                            </div>\n                            <div className=\"text-right\">\n                               <p className=\"font-semibold text-sm text-yellow-600 flex items-center gap-2\"><Clock size={16}/> Pendiente de Firma</p>\n                            </div>\n                        </div>\n                         <div className=\"flex items-center justify-between p-4 rounded-lg bg-gray-50 border\">\n                            <div>\n                                <p className=\"font-bold text-gray-700\">QUIEN AUTORIZA (L√çDER A CARGO DEL EQUIPO EJECUTANTE)</p>\n                                <p className=\"text-sm text-muted-foreground\">Pendiente</p>\n                            </div>\n                            <div className=\"text-right\">\n                               <p className=\"font-semibold text-sm text-yellow-600 flex items-center gap-2\"><Clock size={16}/> Pendiente</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n          )}\n\n        </div>\n\n        {/* Navigation Buttons */}\n        <div className=\"fixed bottom-0 left-0 right-0 bg-background/80 backdrop-blur-sm border-t shadow-lg z-20\">\n          <div className=\"max-w-5xl mx-auto px-4 py-3 flex gap-4\">\n            <Button\n              onClick={() => setStep(step - 1)}\n              disabled={isSubmitting || step === 1}\n              variant=\"outline\"\n              className=\"px-6 py-3 h-auto md:px-8\"\n            >\n              <ArrowLeft className=\"mr-2\" />\n              Anterior\n            </Button>\n            \n            {step < steps.length ? (\n              <Button\n                onClick={() => {\n                  if (canProceed()) {\n                    setStep(step + 1);\n                  }\n                }}\n                disabled={isSubmitting}\n                className=\"flex-1 py-3 h-auto\"\n              >\n                Siguiente\n                <ArrowRight className=\"ml-2\" />\n              </Button>\n            ) : (\n                <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                         <Button\n                            disabled={isSubmitting}\n                            className=\"flex-1 py-3 h-auto bg-green-600 hover:bg-green-700 text-lg\"\n                        >\n                            {isSubmitting ? (\n                            <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\n                            ) : (\n                            <CheckCircle size={22} className=\"mr-2\" />\n                            )}\n                            <span>Enviar para Aprobaci√≥n</span>\n                        </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                        <AlertDialogHeader>\n                            <AlertDialogTitle>¬øEst√° seguro de enviar el permiso?</AlertDialogTitle>\n                            <AlertDialogDescription>\n                                Una vez que env√≠e el permiso para su aprobaci√≥n, ya no podr√° realizar modificaciones. Aseg√∫rese de que toda la informaci√≥n es correcta.\n                            </AlertDialogDescription>\n                        </AlertDialogHeader>\n                        <AlertDialogFooter>\n                            <AlertDialogCancel>Cancelar</AlertDialogCancel>\n                            <AlertDialogAction onClick={handleSavePermit} disabled={isSubmitting}>\n                                 {isSubmitting ? 'Enviando...' : 'S√≠, enviar ahora'}\n                            </AlertDialogAction>\n                        </AlertDialogFooter>\n                    </AlertDialogContent>\n                </AlertDialog>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      <Dialog open={showSuccessDialog} onOpenChange={setShowSuccessDialog}>\n          <DialogContent>\n              <DialogHeader>\n                  <DialogTitle className=\"flex items-center gap-2 text-green-600\">\n                      <CheckCircle />\n                      ¬°Permiso Creado Exitosamente!\n                  </DialogTitle>\n                  <DialogDescription>\n                      El permiso N¬∞ <strong>{newPermitInfo.number}</strong> ha sido creado y enviado para revisi√≥n.\n                  </DialogDescription>\n              </DialogHeader>\n              <DialogFooter className=\"sm:justify-between gap-2\">\n                  <Button variant=\"outline\" onClick={() => router.push('/dashboard')}>\n                      Ir al Dashboard\n                  </Button>\n                   <Button onClick={() => router.push(`/permits/${newPermitInfo.id}`)}>\n                      Ver Detalles del Permiso\n                   </Button>\n              </DialogFooter>\n          </DialogContent>\n      </Dialog>\n      \n       <Dialog open={isSignaturePadOpen} onOpenChange={setIsSignaturePadOpen}>\n        <DialogContent className=\"w-[90vw] max-w-lg\">\n          <DialogHeader>\n            <DialogTitle>Registrar Firma</DialogTitle>\n          </DialogHeader>\n          <SignaturePad onSave={handleSaveSignature} />\n        </DialogContent>\n      </Dialog>\n    </div>\n    </>\n  );\n}\n\nexport default function CreatePermitPage() {\n  return (\n    <PermitFormProvider>\n      <CreatePermitWizard />\n    </PermitFormProvider>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}