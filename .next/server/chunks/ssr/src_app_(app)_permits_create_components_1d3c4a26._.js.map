{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/GeneralInfoStep.tsx"],"sourcesContent":["\n'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Trash2 } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { collection, onSnapshot, doc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { addDays, format } from 'date-fns';\n\nconst workTypes: { key: keyof ReturnType<typeof usePermitForm>['state']['selectedWorkTypes'], name: string }[] = [\n  { key: 'alturas', name: 'Trabajo en Alturas' },\n  { key: 'confinado', name: 'Espacios Confinados' },\n  { key: 'energia', name: 'Control de Energías' },\n  { key: 'izaje', name: 'Izaje de Cargas' },\n  { key: 'caliente', name: 'Trabajo en Caliente' },\n  { key: 'excavacion', name: 'Excavaciones' },\n  { key: 'general', name: 'Trabajo General' },\n];\n\nexport function GeneralInfoStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, selectedWorkTypes } = state;\n  const { toast } = useToast();\n\n  const [newToolName, setNewToolName] = React.useState('');\n\n  const [dynamicLists, setDynamicLists] = React.useState({\n    areas: [] as string[],\n    plantas: [] as string[],\n    procesos: [] as string[],\n    contratos: [] as string[],\n    empresas: [] as string[],\n  });\n  const [loadingLists, setLoadingLists] = React.useState(true);\n\n  React.useEffect(() => {\n    setLoadingLists(true);\n    const listNames = ['areas', 'plantas', 'procesos', 'contratos', 'empresas'];\n    const unsubscribers = listNames.map(listName => {\n      const docRef = doc(db, 'dynamic_lists', listName);\n      return onSnapshot(docRef, (docSnap) => {\n        setDynamicLists(prev => ({\n          ...prev,\n          [listName]: docSnap.exists() ? docSnap.data().items?.sort() || [] : []\n        }));\n      }, (error) => {\n        console.error(`Error fetching ${listName}:`, error);\n        toast({\n          variant: \"destructive\",\n          title: \"Error de Carga\",\n          description: `No se pudo cargar la lista para ${listName}.`,\n        });\n      });\n    });\n\n    // This is a bit of a hack to know when all listeners have fired at least once\n    Promise.all(listNames.map(listName => new Promise(resolve => {\n      const docRef = doc(db, 'dynamic_lists', listName);\n      onSnapshot(docRef, () => resolve(true), () => resolve(true)); // Resolve even on error\n    }))).then(() => setLoadingLists(false));\n\n    return () => unsubscribers.forEach(unsub => unsub());\n  }, [toast]);\n\n\n  const handleInputChange = (field: keyof typeof generalInfo, value: any) => {\n    dispatch({ type: 'UPDATE_GENERAL_INFO', payload: { [field]: value } });\n  };\n\n  const handleWorkTypeChange = (type: keyof typeof selectedWorkTypes, value: boolean) => {\n    dispatch({ type: 'UPDATE_WORK_TYPES', payload: { type, value } });\n  };\n  \n  const handleResponsableChange = (field: keyof typeof generalInfo.responsable, value: string) => {\n    const newResponsable = { ...generalInfo.responsable, [field]: value };\n    handleInputChange('responsable', newResponsable);\n  };\n\n  const addTool = () => {\n    if (newToolName.trim()) {\n      const newTools = [...(generalInfo.tools || []), { name: newToolName.trim(), status: 'B' }];\n      handleInputChange('tools', newTools);\n      setNewToolName('');\n    }\n  };\n\n  const removeTool = (index: number) => {\n    const newTools = (generalInfo.tools || []).filter((_, i) => i !== index);\n    handleInputChange('tools', newTools);\n  };\n  \n  const maxDate = React.useMemo(() => {\n    if (!generalInfo.validFrom) return '';\n    const startDate = new Date(generalInfo.validFrom);\n    const maxDate = addDays(startDate, 7);\n    // Format for datetime-local which is 'yyyy-MM-ddThh:mm'\n    return format(maxDate, \"yyyy-MM-dd'T'HH:mm\");\n  }, [generalInfo.validFrom]);\n\n  const handleUntilChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newUntilDate = e.target.value;\n    if (maxDate && newUntilDate > maxDate) {\n        toast({\n            variant: \"destructive\",\n            title: \"Fecha Inválida\",\n            description: \"La duración del permiso no puede exceder los 7 días.\",\n        });\n        handleInputChange('validUntil', maxDate);\n    } else {\n        handleInputChange('validUntil', newUntilDate);\n    }\n  };\n\n  const renderDynamicSelect = React.useCallback((listKey: keyof typeof dynamicLists, fieldKey: keyof typeof generalInfo, label: string, required: boolean) => (\n    <div>\n      <Label className={`font-bold text-gray-700 ${required ? 'after:content-[\"*\"] after:ml-0.5 after:text-red-500' : ''}`}>{label}</Label>\n      <Select\n        value={(generalInfo as any)[fieldKey] || ''}\n        onValueChange={(value) => handleInputChange(fieldKey, value)}\n        disabled={loadingLists}\n      >\n        <SelectTrigger>\n          <SelectValue placeholder={loadingLists ? \"Cargando...\" : `Seleccione una opción...`} />\n        </SelectTrigger>\n        <SelectContent>\n          {dynamicLists[listKey].map((item) => (\n            <SelectItem key={item} value={item}>{item}</SelectItem>\n          ))}\n        </SelectContent>\n      </Select>\n    </div>\n  ), [generalInfo, dynamicLists, loadingLists, handleInputChange]);\n\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center mb-6\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Información General del Permiso\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">Complete todos los campos obligatorios (*)</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {renderDynamicSelect('areas', 'areaEspecifica', 'Área o equipo específico', true)}\n        {renderDynamicSelect('plantas', 'planta', 'Planta', true)}\n        {renderDynamicSelect('procesos', 'proceso', 'Proceso', false)}\n        {renderDynamicSelect('contratos', 'contrato', 'Contrato', false)}\n        {renderDynamicSelect('empresas', 'empresa', 'Empresa', false)}\n        <div>\n          <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Nombre del solicitante</Label>\n          <Input value={generalInfo.nombreSolicitante || ''} readOnly disabled />\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Listas de Verificación Complementarias</Label>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 p-4 border rounded-lg mt-2\">\n          {workTypes.map(({ key, name }) => (\n            <div key={key} className=\"flex items-center space-x-2\">\n              <Checkbox\n                id={key}\n                checked={selectedWorkTypes[key]}\n                onCheckedChange={(checked) => handleWorkTypeChange(key, !!checked)}\n              />\n              <label htmlFor={key} className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\">\n                {name}\n              </label>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Duración del Permiso</Label>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border rounded-lg\">\n          <div>\n            <label className=\"text-sm font-medium\">Desde</label>\n            <Input\n              type=\"datetime-local\"\n              value={generalInfo.validFrom}\n              onChange={(e) => handleInputChange('validFrom', e.target.value)}\n              min={format(new Date(), \"yyyy-MM-dd'T'HH:mm\")}\n            />\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">Hasta</label>\n            <Input\n              type=\"datetime-local\"\n              value={generalInfo.validUntil}\n              onChange={handleUntilChange}\n              disabled={!generalInfo.validFrom}\n              min={generalInfo.validFrom}\n              max={maxDate}\n            />\n          </div>\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold after:content-['*'] after:ml-0.5 after:text-red-500\">Descripción de la Tarea - ALCANCE</Label>\n        <Textarea\n          value={generalInfo.workDescription}\n          onChange={(e) => handleInputChange('workDescription', e.target.value)}\n          rows={3}\n          className=\"w-full mt-1\"\n          placeholder=\"Describa el alcance, descripción y área/equipo...\"\n        />\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700\">Equipos y/o Herramientas</Label>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg mt-2\">\n            <div className=\"space-y-2\">\n                {generalInfo.tools?.slice(0, 4).map((tool, index) => (\n                    <div key={index} className=\"flex items-center gap-4 p-2 bg-gray-50 rounded\">\n                    <span className=\"flex-1\">{tool.name}</span>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => removeTool(index)}><Trash2 className=\"h-4 w-4 text-destructive\"/></Button>\n                    </div>\n                ))}\n            </div>\n              <div className=\"space-y-2\">\n                {generalInfo.tools?.slice(4, 8).map((tool, index) => (\n                    <div key={index + 4} className=\"flex items-center gap-4 p-2 bg-gray-50 rounded\">\n                    <span className=\"flex-1\">{tool.name}</span>\n                    <Button variant=\"ghost\" size=\"icon\" onClick={() => removeTool(index + 4)}><Trash2 className=\"h-4 w-4 text-destructive\"/></Button>\n                    </div>\n                ))}\n            </div>\n            <div className=\"md:col-span-2 flex gap-2\">\n                <Input value={newToolName} onChange={(e) => setNewToolName(e.target.value)} placeholder=\"Nueva herramienta...\" />\n                <Button onClick={addTool}><Plus/></Button>\n            </div>\n        </div>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">No. Trabajadores</Label>\n        <Input type=\"number\" value={generalInfo.numTrabajadores} onChange={e => handleInputChange('numTrabajadores', e.target.value)} placeholder=\"Cantidad de trabajadores\" />\n        <p className=\"text-xs text-muted-foreground mt-1\">\n            Tener presente que el número de trabajadores aquí relacionados debe ser el mismo número de trabajadores firmantes, si la cantidad de firmantes no es igual el sistema no le permitirá generar el permiso.\n        </p>\n      </div>\n\n      <div>\n        <Label className=\"font-bold text-gray-700 after:content-['*'] after:ml-0.5 after:text-red-500\">Responsable del Trabajo / Ejecutor</Label>\n        <div className=\"p-4 border rounded-lg mt-2 space-y-4\">\n          <div>\n            <Label className=\"text-sm text-muted-foreground after:content-['*'] after:ml-0.5 after:text-red-500\">Nombre completo</Label>\n            <Input placeholder=\"Nombre completo\" value={generalInfo.responsable?.nombre} onChange={e => handleResponsableChange('nombre', e.target.value)} />\n          </div>\n          <div>\n            <Label className=\"text-sm text-muted-foreground after:content-['*'] after:ml-0.5 after:text-red-500\">Cargo</Label>\n            <Input placeholder=\"Cargo\" value={generalInfo.responsable?.cargo} onChange={e => handleResponsableChange('cargo', e.target.value)} />\n          </div>\n          <div>\n            <Label className=\"text-sm text-muted-foreground after:content-['*'] after:ml-0.5 after:text-red-500\">Compañía</Label>\n            <Input placeholder=\"Compañía\" value={generalInfo.responsable?.compania} onChange={e => handleResponsableChange('compania', e.target.value)} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 746, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AtsStep.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { Label } from '@/components/ui/label';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown, Plus, Trash2 } from 'lucide-react';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport type { AnexoATS } from '@/types';\n\n// Props del componente\ninterface AtsStepProps {\n  anexoATS: AnexoATS;\n  onUpdateATS: (updates: Partial<AnexoATS>) => void;\n}\n\n// Hook personalizado para debounce\nfunction useDebounce(value: string, delay: number) {\n  const [debouncedValue, setDebouncedValue] = React.useState(value);\n\n  React.useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n// Hook para input con estado local y debounce\nfunction useLocalInput(initialValue: string, onUpdate: (value: string) => void, delay: number = 300) {\n  const [localValue, setLocalValue] = React.useState(initialValue);\n  const debouncedValue = useDebounce(localValue, delay);\n\n  React.useEffect(() => {\n    if (debouncedValue !== initialValue) {\n      onUpdate(debouncedValue);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [debouncedValue, onUpdate]);\n\n  React.useEffect(() => {\n    setLocalValue(initialValue);\n  }, [initialValue]);\n\n  return [localValue, setLocalValue] as const;\n}\n\nconst hazardCategories = {\n  LOCATIVOS: [\n    { id: 'superficies_irregulares', label: 'Superficies irregulares', control: 'Uso de botas de seguridad con suela antideslizante. Controlar escapes, derrames o goteras sobre los sitios de desplazamiento. Limpiar de inmediato cualquier líquido que se derrame en el piso. Caminar con precaución. No cargar piezas o equipos que limiten la vista. Respetar la señalización. Transitar con precaución verificando rutas de tránsito; no pasar donde haya presencia de materiales u obstáculos; mantener el área ordenada.' },\n    { id: 'superficies_deslizantes', label: 'Superficies deslizantes', control: 'Al subir o bajar escaleras utilizar todos los peldaños y sujetarse del pasamanos; mantener los tres puntos de apoyo; ascender y descender pausadamente.' },\n    { id: 'diferencia_nivel', label: 'Superficies con diferencia de nivel', control: 'No caminar hacia atrás. No acercarse a los vacíos existentes cerca al área de trabajo. Informar cualquier condición de inseguridad que observe en las áreas de trabajo.' },\n    { id: 'techos_mal_estado', label: 'Techos, muros, pisos o paredes en mas estado', control: 'Hacer uso de los elementos de prevención y protección contra caídas, diligenciar permiso de trabajo en alturas si se supera el 2,0 metros.' },\n    { id: 'espacios_reducidos', label: 'Espacios reducidos de trabajo', control: 'Si esta catalogado como espacio confinado, aplica permiso de trabajo en espacio confinado, aplique las medidas de prevención y protección definidas por la empesa' },\n  ],\n  FÍSICOS: [\n    { id: 'deficiencia_iluminacion', label: 'Deficiencia de iluminación', control: 'Uso de reflectores y/o lámparas en áreas con iluminación deficiente y en trabajo nocturno. Informar al dueño de área ausencia o daño de iluminación artificial. Usar gafas claras todo el tiempo en caso de luz deficiente. Permanecer únicamente en el sitio autorizado de trabajo.' },\n    { id: 'exceso_iluminacion', label: 'Exceso de iluminación', control: 'En trabajos en el exterior, uso de gafas oscuras en caso de exceso de iluminación; evitar cambios bruscos de iluminación (deslumbramientos)' },\n    { id: 'ruido_intermitente', label: 'Ruido (Intermitente/Continuo)', control: 'Usar de manera permanente protección auditiva tipo copa o de inserción y no retirarlo durante toda la tarea.' },\n    { id: 'contacto_superficies_calientes', label: 'Contacto superficies calientes', control: 'Usar de manera permanente guantes de protección, uso de ropa manga larga, identificar con señalización o superficies calientes' },\n    { id: 'exposicion_soldadura', label: 'Exposición a arco de soldadura', control: 'Utilizar yelmo de soldar o la pantalla de mano siempre que se suelde, no mira nunca directamente al arco voltaico, no pique el cordón de soldadura sin protección ocular' },\n  ],\n  QUÍMICOS: [\n    { id: 'gases_humos_vapores', label: 'Gases, humos, vapores y neblinas', control: 'Uso permanente de protección respiratoria de acuerdo al tipo de exposición. En caso de uso de mascarilla con filtros, verificar que se usen los adecuados para el tipo de agente químico (gas, vapor, humo, material particulado, polvos, nieblas, rocíos, etc.)' },\n    { id: 'material_particulado', label: 'Material particulado', control: 'Realizar mantenimiento periódico de la mascarilla y hacer el cambio cuando sea necesario. Asegurar el sello efectivo de la mascarilla media cara al contacto con la piel.' },\n    { id: 'contacto_sustancias_peligrosas', label: 'Uso o contacto con materiales y sustancias peligrosas', control: 'Uso de elementos de protección personal de acuerdo a la FDS Ficha de Datos de Seguridad, disponer en sitio de las medidas de protección señaladas en la Ficha en caso de contacto accidental' },\n    { id: 'derrame_productos_quimicos', label: 'Derrame o fugas de productos Químicos', control: 'Definir un plan de emergencia en caso de derrame o fuga de productos químicos, contar con kit antiderrames y elementos de protección personal aocrdes al producto químico que se este usando' },\n  ],\n  MECÁNICOS: [\n    { id: 'proyeccion_particulas', label: 'Proyección de particulas y fracmentos', control: 'Uso obligatorio y permanente de elementos de protección individual, protección fácil y visual' },\n    { id: 'mecanismo_movimiento', label: 'Mecanismo en movimiento', control: 'Mantener protecciones como guardas y dispositivos instalados en el equipo, no posicionar segmentos corporales en áreas de peligros, por ningún motivo violar una guarda de seguridad' },\n    { id: 'manejo_herramientas', label: 'Manejo de herrramienta o equipos electricos', control: 'Uso de equipos y herramientas eléctricas en condiciones operativas que no exponen al trabajador a riesgos, realizar inspección preoperacional' },\n    { id: 'movimiento_equipos_pesados', label: 'Movimiento de equipos de trabajo pesado en sitio', control: 'Señalización en sitio de trabajo, personal con paleta de pare y siga acompañando el desplazamiento por vías internas, manejo de trafico y control de senderos peatonas' },\n    { id: 'exposicion_vibraciones', label: 'Exposición a vibraciones por equipos', control: 'Pausas activas durante la jornada laboral, rotación de personal para realizar la labor en jornada prolongadas donde se exponga a vibraciones' },\n  ],\n  BIOLÓGICOS: [\n      { id: 'exposicion_vectores', label: 'Exposición a vectores transmisión de enfermedades', control: 'Orden y aseo en el lugar de trabajo, evitar la acumulación de agua que pueda ser foco de proliferación de vectores' },\n      { id: 'contaminacion_biologica', label: 'Contaminación biológica', control: 'Prevenir y contener derrames de productos peligros, ubicación y disposición de kit de contención de derrames' },\n  ],\n  VIAL: [\n      { id: 'accidente_incidente_vial', label: 'Accidente o incidente vial', control: 'Para el transito peatonal hacer uso de las vias definidas por la empresa para el desplazamiento seguro' },\n      { id: 'atropellamiento_personas', label: 'Atropellamiento a personas', control: 'Respatar los limites de velocidad definidos por Italcol de 10 Km/h, no usar dispostivos de comunicación como telefono celular.' },\n  ],\n  BIOMECÁNICOS: [\n      { id: 'carga_estatica', label: 'Carga Estática (Posturas inadecuadas, prolongadas, forzadas, antigravitación)', control: 'Realizar calentamiento previo al inicio de las actividades (ejercicios pre-laborales); Tomar pausas activas. Higiene postural. Realizar cambios periódicos de actividad dentro de la tarea a ejecutar.' },\n      { id: 'carga_dinamica', label: 'Carga Dinámica (Esfuerzo, Movilización de cargas, Movimientos repetitivos / repetidos)', control: 'No levantar cargas superiores a 25 kg (hombres) / 12.5Kg (mujeres) de peso; levantar una carga a la vez, en piezas pesadas y/o voluminosas, hacer el movimiento entre 2 personas. Aplicar técnicas de levantamiento de cargas, manteniendo la espalda recta y flexionando las piernas, busque siempre primero ayudas mecánicas.' },\n  ],\n  AMBIENTALES: [\n      { id: 'generacion_residuos', label: 'Generación de residuos escombros', control: 'ReaIizar la separación y disponer de acuerdo a la clasificación de colores definida por Italcol , disposición de residuos fuera de las instalaciones de acuerdo al marco normativo definido' },\n      { id: 'consumo_agua', label: 'Consumo de agua en grandes cantidades', control: 'Uso eficiente de recursos, eliminación de fugas de agua, prevenir y contener derrames de productos peligrosos.' },\n      { id: 'mezcla_concreto', label: 'Mezcla de concreto en suelo', control: 'Uso de mezcladora o recipiente para evitar la mezcla en piso, de no ser posible utilizar una barrera fisica que aisle los materiales de cosntroccuón de las superficies y sirvan como mecaniosmo de contención.' },\n      { id: 'emisiones_material_particulado', label: 'Emisiones de material particulado', control: 'Cubrir materiales que puedan generar material particulado o barreras fisicas que mitiguen la generación al medio ambiente' },\n  ],\n};\n\nconst eppOptions = {\n    'Equipos Especiales': [\n        { id: 'aire_respirable', label: 'Aire respirable (compresor o cilindro)', type: 'boolean' },\n        { id: 'tapete_dielectrico', label: 'Tapete dieléctrico clase', type: 'text' },\n    ],\n    'Protección Corporal': [\n        { id: 'traje_tyvek', label: 'Traje tyvek', type: 'boolean' },\n        { id: 'chaleco_reflectivo', label:'Chaleco reflectivo', type: 'boolean' },\n        { id: 'chaqueta_cuero_carnaza', label: 'Chaqueta de cuero o carnaza', type: 'boolean' },\n        { id: 'delantal_cuero_carnaza', label: 'Delantal de cuero o carnaza', type: 'boolean' },\n        { id: 'delantal_pvc', label: 'Delantal de PVC', type: 'boolean' },\n        { id: 'overol_trabajo', label: 'Overol de trabajo', type: 'boolean' },\n        { id: 'overol_ignifugo', label: 'Overol ignífugo clase', type: 'text' },\n        { id: 'polainas', label: 'Polainas', type: 'boolean' },\n    ],\n    'Protección para Pies': [\n        { id: 'botas_caucho_seguridad', label: 'Botas de caucho de seguridad', type: 'boolean' },\n        { id: 'botas_dielectricas', label: 'Botas dieléctricas', type: 'boolean' },\n        { id: 'botas_seguridad', label: 'Botas de seguridad', type: 'boolean' },\n    ],\n    'Protección Contra Caídas': [\n        { id: 'eslinga', label: 'Eslinga tipo/absorbedor', type: 'text' },\n        { id: 'linea_vida', label: 'Línea de vida', type: 'text' },\n        { id: 'arnes', label: 'Arnés', type: 'boolean' },\n        { id: 'adaptador_anclaje', label: 'Adaptador de anclaje', type: 'text' },\n    ],\n    'Protección para la Cabeza': [\n        { id: 'casco_seguridad', label: 'Casco de seguridad Tipo/Clase/Barbuquejo', type: 'text' },\n    ],\n    'Protección para Manos': [\n        { id: 'guante_dielectrico', label: 'Guante dieléctrico clase (guantín, guante dieléctrico, protección mecánica)', type: 'text' },\n        { id: 'guante_caucho_nitrilo', label: 'Guante de caucho y/o nitrilo', type: 'boolean' },\n        { id: 'guante_cuero_carnaza', label: 'Guante de cuero o carnaza', type: 'boolean' },\n        { id: 'guante_vaqueta_anticorte', label: 'Guante de vaqueta o Anticorte', type: 'boolean' },\n    ],\n    'Protección Respiratoria': [\n        { id: 'mascarilla_filtro', label: 'Mascarilla con filtro', type: 'text' },\n        { id: 'mascarilla_material_particulado', label: 'Mascarilla material particulado', type: 'boolean' },\n    ],\n    'Protección Auditiva': [\n        { id: 'protector_auditivo', label: 'Protector auditivo tipo', type: 'text' },\n    ],\n    'Protección Visual y Facial': [\n        { id: 'gafas_antisalpicaduras', label: 'Gafas antisalpicaduras', type: 'boolean' },\n        { id: 'gafas_seguridad', label: 'Gafas de seguridad', type: 'boolean' },\n        { id: 'visor_careta', label: 'Visor / careta para', type: 'text' },\n        { id: 'careta_arco_electrico', label: 'Careta arco eléctrico clase', type: 'text' },\n    ],\n    'Otro': [\n        { id: 'otro_epp', label: 'Otro:', type: 'text' },\n    ],\n};\n\nconst justificacionOptions = [\n    { id: 'rutinario_3_meses', label: 'TRABAJO RUTINARIO REALIZADO 1 VEZ CADA 3 MESES' },\n    { id: 'no_rutinario_emergencia', label: 'TRABAJO NO RUTINARIO (EMERGENCIA)' },\n    { id: 'rutinario_sin_procedimiento', label: 'TRABAJO RUTINARIO QUE NO POSEE UN PROCEDIMIENTO SEGURO DE TRABAJO O INDICACIÓN CORRECTA DE RIESGOS O MEDIDAS PREVENTIVAS' },\n    { id: 'no_rutinario_planeado', label: 'TRABAJO NO RUTINARIO (PLANEADO)' },\n    { id: 'rutinario_condicion_especifica', label: 'TRABAJO RUTINARIO QUE POR UNA CONDICIÓN ESPECÍFICA/TEMPORAL, NO ES POSIBLE APLICAR UN PROCEDIMIENTO DE FORMA INTEGRAL' },\n];\n\n// Componente para input de texto con estado local y debounce\nconst DebouncedTextInput = React.memo(({ \n  id, \n  value, \n  onChange, \n  placeholder,\n  className = \"h-8 text-xs ml-6\"\n}: { \n  id: string; \n  value: string; \n  onChange: (value: string) => void; \n  placeholder: string;\n  className?: string;\n}) => {\n  const updateValue = React.useCallback((newValue: string) => {\n    onChange(newValue);\n  }, [onChange]);\n\n  const [localValue, setLocalValue] = useLocalInput(value || '', updateValue, 500);\n\n  return (\n    <Input \n      id={id}\n      className={className}\n      placeholder={placeholder}\n      value={localValue}\n      onChange={(e) => setLocalValue(e.target.value)}\n      autoComplete=\"off\"\n      type=\"text\"\n    />\n  );\n});\n\nDebouncedTextInput.displayName = 'DebouncedTextInput';\n\n// Componente optimizado para items de EPP con debounce\nconst EppItem = React.memo(({ \n  item, \n  checked, \n  textValue, \n  onCheckedChange, \n  onTextChange \n}: { \n  item: { id: string; label: string; type: string };\n  checked: boolean;\n  textValue: string;\n  onCheckedChange: (checked: boolean) => void;\n  onTextChange: (value: string) => void;\n}) => {\n  const handleCheckedChange = React.useCallback((checkedValue: boolean) => {\n    onCheckedChange(checkedValue);\n  }, [onCheckedChange]);\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      <div className=\"flex items-center space-x-2\">\n        <Checkbox \n          id={item.id} \n          checked={checked} \n          onCheckedChange={handleCheckedChange}\n        />\n        <Label htmlFor={item.id} className=\"text-sm\">{item.label}</Label>\n      </div>\n      {item.type === 'text' && checked && (\n        <DebouncedTextInput\n          id={`${item.id}_spec`}\n          value={textValue}\n          onChange={onTextChange}\n          placeholder=\"Especificar...\"\n        />\n      )}\n    </div>\n  );\n});\n\nEppItem.displayName = 'EppItem';\n\n// Componente optimizado para categorías de EPP\nconst EppCategory = React.memo(({ \n  category, \n  items, \n  eppData, \n  onEppChange \n}: { \n  category: string;\n  items: Array<{ id: string; label: string; type: string }>;\n  eppData: any;\n  onEppChange: (id: string, value: boolean | string) => void;\n}) => {\n  return (\n    <div className=\"space-y-3\">\n      <h4 className=\"font-semibold text-md text-gray-700\">{category}</h4>\n      <div className=\"space-y-2 p-3 border rounded-md\">\n        {items.map(item => (\n          <EppItem\n            key={item.id}\n            item={item}\n            checked={!!eppData?.[item.id]}\n            textValue={typeof eppData?.[`${item.id}_spec`] === 'string' ? (eppData[`${item.id}_spec`] as string) : ''}\n            onCheckedChange={(checked) => {\n              if (item.type === 'boolean') {\n                onEppChange(item.id, checked);\n              } else if (item.type === 'text') {\n                if (checked) {\n                  onEppChange(item.id, true);\n                } else {\n                  onEppChange(item.id, false);\n                  onEppChange(`${item.id}_spec`, '');\n                }\n              }\n            }}\n            onTextChange={(value) => onEppChange(`${item.id}_spec`, value)}\n          />\n        ))}\n      </div>\n    </div>\n  );\n});\n\nEppCategory.displayName = 'EppCategory';\n\n// Componente optimizado para \"Otros Peligros\"\nconst OtrosPeligrosSection = React.memo(({ \n  peligrosAdicionales, \n  onUpdatePeligros \n}: { \n  peligrosAdicionales: Array<{peligro: string, descripcion: string}> | undefined,\n  onUpdatePeligros: (peligros: Array<{peligro: string, descripcion: string}>) => void \n}) => {\n  const [newPeligro, setNewPeligro] = React.useState('');\n  const [newPeligroDesc, setNewPeligroDesc] = React.useState('');\n\n  const handleAddPeligro = React.useCallback(() => {\n    if (newPeligro.trim() && newPeligroDesc.trim()) {\n      const newPeligros = [...(peligrosAdicionales || []), { \n        peligro: newPeligro.trim(), \n        descripcion: newPeligroDesc.trim() \n      }];\n      onUpdatePeligros(newPeligros);\n      setNewPeligro('');\n      setNewPeligroDesc('');\n    }\n  }, [newPeligro, newPeligroDesc, peligrosAdicionales, onUpdatePeligros]);\n\n  const handleRemovePeligro = React.useCallback((index: number) => {\n    const newPeligros = (peligrosAdicionales || []).filter((_, i) => i !== index);\n    onUpdatePeligros(newPeligros);\n  }, [peligrosAdicionales, onUpdatePeligros]);\n\n  return (\n    <div className=\"mt-6\">\n      <h4 className=\"font-semibold text-lg text-gray-700 mb-2\">Otros Peligros</h4>\n      <div className=\"p-4 border rounded-lg space-y-4\">\n        {/* Lista de peligros existentes */}\n        {peligrosAdicionales?.map((item, index) => (\n          <div key={`peligro-${index}`} className=\"flex items-start gap-2 p-3 bg-gray-50 rounded-md\">\n            <div className=\"flex-1\">\n              <p className=\"font-bold\">{item.peligro}</p>\n              <p className=\"text-sm text-muted-foreground\">{item.descripcion}</p>\n            </div>\n            <Button \n              variant=\"ghost\" \n              size=\"icon\" \n              onClick={() => handleRemovePeligro(index)}\n              type=\"button\"\n            >\n              <Trash2 className=\"h-4 w-4 text-destructive\" />\n            </Button>\n          </div>\n        ))}\n        \n        {/* Formulario para nuevo peligro */}\n        <div className=\"space-y-3\">\n          <div>\n            <Label htmlFor=\"nuevo-peligro-nombre\">Nombre del nuevo peligro</Label>\n            <Input \n              id=\"nuevo-peligro-nombre\"\n              value={newPeligro} \n              onChange={(e) => setNewPeligro(e.target.value)} \n              placeholder=\"Escriba el nombre del peligro...\"\n              autoComplete=\"off\"\n              type=\"text\"\n            />\n          </div>\n          <div>\n            <Label htmlFor=\"nuevo-peligro-desc\">Descripción y control del peligro</Label>\n            <Textarea \n              id=\"nuevo-peligro-desc\"\n              value={newPeligroDesc} \n              onChange={(e) => setNewPeligroDesc(e.target.value)} \n              placeholder=\"Escriba la descripción y medidas de control...\"\n              autoComplete=\"off\"\n              rows={3}\n            />\n          </div>\n          <Button \n            onClick={handleAddPeligro} \n            size=\"sm\" \n            type=\"button\"\n            disabled={!newPeligro.trim() || !newPeligroDesc.trim()}\n          >\n            <Plus className=\"mr-2 h-4 w-4\" /> Agregar Peligro\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nOtrosPeligrosSection.displayName = 'OtrosPeligrosSection';\n\nexport function AtsStep({ anexoATS, onUpdateATS }: AtsStepProps) {\n  \n  const [openSections, setOpenSections] = React.useState<Record<string, boolean>>({});\n\n  const toggleSection = (section: string) => {\n    setOpenSections(prev => ({ ...prev, [section]: !prev[section] }));\n  };\n\n  const handlePeligroChange = React.useCallback((id: string, value: 'si' | 'no') => {\n    onUpdateATS({ \n      peligros: { ...anexoATS.peligros, [id]: value } \n    });\n  }, [anexoATS.peligros, onUpdateATS]);\n  \n  const handleEppChange = React.useCallback((id: string, value: boolean | string) => {\n    onUpdateATS({ \n      epp: { ...anexoATS.epp, [id]: value } \n    });\n  }, [anexoATS.epp, onUpdateATS]);\n\n  const handleJustificacionChange = React.useCallback((id: string, value: boolean) => {\n    onUpdateATS({ \n      justificacion: { ...anexoATS.justificacion, [id]: value } \n    });\n  }, [anexoATS.justificacion, onUpdateATS]);\n\n  // Handler optimizado para peligros adicionales\n  const handleUpdatePeligrosAdicionales = React.useCallback((peligros: Array<{peligro: string, descripcion: string}>) => {\n    onUpdateATS({ peligrosAdicionales: peligros });\n  }, [onUpdateATS]);\n\n  const SectionWrapper: React.FC<{ title: string; children: React.ReactNode; sectionId: string; }> = React.memo(({ title, children, sectionId }) => (\n    <Collapsible open={openSections[sectionId]} onOpenChange={() => toggleSection(sectionId)}>\n        <CollapsibleTrigger asChild>\n            <Button \n                variant=\"ghost\" \n                className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\"\n            >\n                <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n                <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n            </Button>\n        </CollapsibleTrigger>\n        <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n            {children}\n        </CollapsibleContent>\n    </Collapsible>\n  ));\n  SectionWrapper.displayName = \"SectionWrapper\";\n\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Análisis de Peligros y ATS\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">\n          Identifique los peligros, controles y EPP necesarios para la tarea.\n        </p>\n      </div>\n\n      <SectionWrapper title=\"1. Identificación de Peligros, Riesgos y Controles\" sectionId=\"peligros\">\n        <p className=\"text-xs text-muted-foreground mb-4\">\n          Coloque \"SI\" o \"NO\" para los peligros envueltos en el trabajo. Cuando asigne un \"SI\", se desplegarán los controles recomendados.\n        </p>\n        <div className=\"space-y-2\">\n          {Object.entries(hazardCategories).map(([category, hazards]) => (\n            <Collapsible key={category} open={openSections[category]} onOpenChange={() => toggleSection(category)}>\n              <CollapsibleTrigger asChild>\n                <Button \n                    variant=\"ghost\" \n                    className=\"w-full justify-between p-4 border rounded-lg\"\n                >\n                  <span className=\"font-semibold\">{category}</span>\n                  <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n                </Button>\n              </CollapsibleTrigger>\n              <CollapsibleContent className=\"p-4 border border-t-0 rounded-b-lg space-y-4\">\n                {hazards.map((hazard) => (\n                  <div key={hazard.id} className=\"space-y-3 p-3 bg-gray-50/50 rounded-md\">\n                    <div className=\"flex items-center justify-between\">\n                      <Label htmlFor={hazard.id} className=\"font-medium flex-1\">\n                        {hazard.label}\n                      </Label>\n                      <RadioGroup\n                        value={anexoATS.peligros?.[hazard.id]}\n                        onValueChange={(value: 'si' | 'no') => handlePeligroChange(hazard.id, value)}\n                        className=\"flex gap-4\"\n                      >\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"si\" id={`${hazard.id}-si`} />\n                          <Label htmlFor={`${hazard.id}-si`}>SI</Label>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <RadioGroupItem value=\"no\" id={`${hazard.id}-no`} />\n                          <Label htmlFor={`${hazard.id}-no`}>NO</Label>\n                        </div>\n                      </RadioGroup>\n                    </div>\n                    {anexoATS.peligros?.[hazard.id] === 'si' && (\n                      <div className=\"pl-4 border-l-4 border-primary/50 ml-2\">\n                        <p className=\"text-xs font-semibold text-primary mb-1\">CONTROL RECOMENDADO:</p>\n                        <p className=\"text-xs text-muted-foreground\">{hazard.control}</p>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </CollapsibleContent>\n            </Collapsible>\n          ))}\n        </div>\n        \n        {/* Sección de Otros Peligros optimizada */}\n        <OtrosPeligrosSection \n          peligrosAdicionales={anexoATS.peligrosAdicionales}\n          onUpdatePeligros={handleUpdatePeligrosAdicionales}\n        />\n      </SectionWrapper>\n\n      <SectionWrapper title=\"2. EPP Requeridos\" sectionId=\"epp\">\n         <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6\">\n            {Object.entries(eppOptions).map(([category, items]) => (\n              <EppCategory\n                key={category}\n                category={category}\n                items={items}\n                eppData={anexoATS.epp}\n                onEppChange={handleEppChange}\n              />\n            ))}\n         </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"3. Justificación para el uso del ATS\" sectionId=\"justificacion\">\n        <div className=\"space-y-3 p-4 border rounded-lg\">\n            {justificacionOptions.map(option => (\n                <div key={option.id} className=\"flex items-center space-x-3\">\n                    <Checkbox\n                        id={option.id}\n                        checked={!!anexoATS.justificacion?.[option.id]}\n                        onCheckedChange={(checked) => handleJustificacionChange(option.id, !!checked)}\n                    />\n                    <Label htmlFor={option.id} className=\"text-sm font-normal\">{option.label}</Label>\n                </div>\n            ))}\n        </div>\n      </SectionWrapper>\n\n    </div>\n  );\n}\n\n// Exportar con React.memo para optimización\nexport default React.memo(AtsStep);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1895, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoAlturaStep.tsx"],"sourcesContent":["\n'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { Signature, Trash2, Plus, ChevronDown } from 'lucide-react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\nimport type { AutorizacionPersona, ValidacionDiaria, AnexoAltura } from '@/types';\n\nconst anexoAlturaEstructuras = [\n  { id: 'escaleraCuerpo', label: 'Escalera de un cuerpo' },\n  { id: 'escaleraDosCuerpos', label: 'Escalera de dos cuerpos o mas' },\n  { id: 'andamioTubular', label: 'Andamio Tubular Certificado' },\n  { id: 'andamioColgante', label: 'Andamio Colgante' },\n  { id: 'plataforma', label: 'Plataforma' },\n  { id: 'manLift', label: 'Man Lift o Camion Canasta' },\n  { id: 'otros', label: 'Otros' },\n];\n\nconst anexoAlturaAspectos = [\n    { id: 'afiliacionVigente', label: 'A. EL PERSONAL EJECUTANTE DE LA ACTIVIDAD TIENE LA AFILIACIÓN VIGENTE A SEGURIDAD SOCIAL? '},\n    { id: 'procedimientoActividad', label: 'B. SE CUENTA CON EL PROCEDIMIENTO DE LA ACTIVIDAD A EJECUTAR?' },\n    { id: 'medidasPrevencion', label: 'C. SE HAN DETERMINADO LAS MEDIDAS DE PREVENCIÓN CONTRA CAÍDAS?' },\n    { id: 'conocenMedidas', label: 'D. TODOS LOS EJECUTANTES CONOCEN LAS MEDIDAS DE PRECAUCIÓN ESTABLECIDAS EN LA EVALUACIÓN DE RIESGOS?'},\n    { id: 'entrenadosCertificados', label: 'E. ESTÁN LOS EJECUTANTES ENTRENADOS Y SE ENCUENTRAN LOS CERTIFICADOS EN SITIO PARA REALIZAR   TRABAJOS EN ALTURA?'},\n    { id: 'elementosProteccionCertificados', label: 'F. ESTÁN TODOS LOS ELEMENTOS DE PROTECCIÓN CONTRA CAÍDAS EN BUEN ESTADO Y CERTIFICADOS?' },\n    { id: 'sistemaAseguramientoVerificado', label: 'G. SE VERIFICO EL SISTEMA DE ASEGURAMIENTO DE LA ESCALERA , ANDAMIO O PLATAFORMA A UNA ESTRUCTURA FIJA' },\n    { id: 'estadoElementosVerificado', label: 'H. SE VERIFICO EL ESTADO DE: ESLINGAS, ARNES, CASCO, MOSQUETONES, CASCO, Y DEMAS ELEMENTOS NECESARIOS PARA REALIZAR EL TRABAJO.' },\n    { id: 'puntosAnclajeCertificados', label: 'I. LOS PUNTOS DE ANCLAJE Y DEMAS ELEMENTOS CUMPLEN CON LA RESISTENCIA DE 5000 LBS POR PERSONA Y ESTAN CERTIFICADOS?' },\n    { id: 'areaDelimitada', label: 'J. ESTA DELIMITADA Y SEÑALIZADA EL AREA DE TRABAJO' },\n    { id: 'personalSaludable', label: 'K. EL PERSONAL QUE REALIZA EL TRABAJO SE ENCUENTRA EN CONDICIONES ADECUADAS DE SALUD PARA LA ACTIVIDAD?.' },\n    { id: 'equiposAccesoBuenEstado', label: 'L. SE CUENTA CON TODOS LOS EQUIPOS Y SISTEMAS DE ACCESO PARA TRABJO EN ALTURAS EN BUEN ESTADO?' },\n    { id: 'espacioCaidaLibreSuficiente', label: 'M. EL ESPACIO DE CAIDA LIBRE ES SUFICIENTE PARA EVITAR QUE LA PERSONA SE GOLPEE CONTRA EL NIVEL INFERIOR.' },\n    { id: 'equiposEmergenciaDisponibles', label: 'N. SE CUENTA CON ELEMENTOS PARA ATENCION DE EMERGENCIAS EN EL AREA Y PLAN DE EMERGENCIAS PARA RESCATE EN ALTURAS?' },\n    { id: 'eppSeleccionadosCorrectamente', label: 'O. ESTÁN LOS ELEMENTOS DE PROTECCIÓN PERSONAL SELECCIONADOS TENIENDO EN CUENTA LOS RIESGOS Y REQUERIMIENTOS DE LA TAREA?' },\n    { id: 'plataformaSoportaCarga', label: 'P.LA PLATAFORMA O ESTRUCTURA SOPORTA LA CARGA DE TRABAJO, ES FIRME Y SE EVITA LA CAÍDA DE OBJETOS O HERRAMIENTAS?' },\n    { id: 'supervisorConstante', label: 'Q.EXISTE UN SUPERVISOR O ACOMPAÑANTE CONSTASTE DURANTE EL TRABAJO' },\n    { id: 'andamiosCompletos', label: 'R. EN CASO DE TRABAJOS SOBRE ANDAMIOS, ESTOS ESTAN COMPLETOS Y ADECUADAMENTE ARMADOS (RODAPIES, BARANDAS, ETC.)' },\n    { id: 'condicionesClimaticasAdecuadas', label: 'S.LAS CONDICIONES CLIMATICAS SON ADECUADAS PARA REALIZAR EL TRABAJO' },\n    { id: 'metodoSubirHerramientasSeguro', label: 'T.EL METODO DE SUBIR HERRAMIENTAS ES SEGURO' },\n    { id: 'sistemasRestriccion', label: 'U. EN CASO DE REQUERIRSE SE CUENTA CON SISTEMAS DE RESTRICCIÓN' },\n    { id: 'sistemasPosicionamiento', label: 'V. EN CASO DE REQUERIRSE SE CUENTA CON SISTEMAS DE POSICIONAMIENTO' },\n];\n\nconst anexoAlturaPrecauciones = [\n    { id: 'despresurizar', label: 'DESPRESURIZAR' },\n    { id: 'revisarEquipos', label: 'REVISAR EQUIPOS Y HERRAMIENTAS' },\n    { id: 'sistemaContencionDerrames', label: 'SISTEMA CONTENCION DERRAMES' },\n    { id: 'monitoreoAtmosferas', label: 'MONITOREO DE ATMOSFERAS' },\n    { id: 'verificarListaChequeo', label: 'VERIFICAR LISTA DE CHEQUEO' },\n    { id: 'clasificacionResiduos', label: 'CLASIFICACION DE RESIDUOS' },\n    { id: 'aislamientoMecanico', label: 'AISLAMIENTO MECACNICO' },\n    { id: 'aterrizarEquipo', label: 'ATERRIZAR EQUIPO' },\n    { id: 'planIzaje', label: 'PLAN DE IZAJE' },\n    { id: 'aislamientoProceso', label: 'AISLAMIENTO DE PROCESO' },\n    { id: 'instalarLineasVida', label: 'INSTALAR LINEAS DE VIDA ADICIONALES' },\n    { id: 'fichaSeguridad', label: 'FICHA DE SEGURIDAD' },\n    { id: 'aislamientoElectrico', label: 'AISLAMIENTO ELECTRICO' },\n    { id: 'drenar', label: 'DRENAR' },\n    { id: 'cierreRecipientes', label: 'CIERRE DE RECIPIENTES SIN USO' },\n    { id: 'bloqueoEtiquetado', label: 'BLOQUEO Y ETIQUETADO' },\n    { id: 'ventilar', label: 'VENTILAR' },\n    { id: 'usoEppEspeciales', label: 'USO DE EPPS ESPECIALES' },\n    { id: 'etiquetadoProductosQuimicos', label: 'ETIQUETADO PRODUCTOS QUIMICOS' },\n    { id: 'equipoContraIncendio', label: 'EQUIPO CONTRA INCENDIO' },\n    { id: 'requiereVigia', label: 'REQUIERE VIGIA' },\n    { id: 'senalizacion', label: 'SEÑALIZACION' },\n    { id: 'kitDerrames', label: 'KIT DERRAMES' },\n    { id: 'otro', label: 'OTRO, CUAL:' },\n];\n\nconst RadioGroupField = ({ id, label, value, onChange }: { id: string; label: string; value: 'si' | 'no' | 'na'; onChange: (value: 'si' | 'no' | 'na') => void; }) => (\n  <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n      <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n      <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n          <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n          <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n          <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n      </RadioGroup>\n  </div>\n);\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => (\n    <Collapsible defaultOpen={defaultOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n);\n\nexport function AnexoAlturaStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, anexoAltura } = state;\n  const [isSignatureDialogOpen, setIsSignatureDialogOpen] = React.useState(false);\n  const [signingTarget, setSigningTarget] = React.useState<{ section: keyof AnexoAltura, field?: string, index?: number } | null>(null);\n\n  const handleUpdate = (payload: Partial<AnexoAltura>) => {\n    dispatch({ type: 'UPDATE_ANEXO_ALTURA', payload });\n  };\n\n  const handleNestedChange = (section: keyof AnexoAltura, field: string, value: any) => {\n    const currentSection = (anexoAltura as any)[section] || {};\n    handleUpdate({ [section]: { ...currentSection, [field]: value } });\n  };\n  \n  const handleListChange = (section: 'validacion', list: 'autoridad' | 'responsable', index: number, field: keyof ValidacionDiaria, value: string) => {\n    const currentList = [...(anexoAltura[section]?.[list] || [])];\n    currentList[index] = { ...currentList[index], [field]: value };\n    handleNestedChange(section, list, currentList);\n  };\n  \n  const handleDeepNestedChange = (section: 'cierre', subSection: 'autoridad' | 'responsable', field: keyof AutorizacionPersona, value: string) => {\n    const currentSubSection = anexoAltura[section]?.[subSection] || {};\n    handleNestedChange(section, subSection, { ...currentSubSection, [field]: value });\n  };\n\n  React.useEffect(() => {\n    if (!anexoAltura.validacion || !anexoAltura.validacion.autoridad || anexoAltura.validacion.autoridad.length === 0) {\n      const autoridad = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n      const responsable = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n      handleUpdate({ validacion: { autoridad, responsable } });\n    }\n  }, []);\n\n  const openSignatureDialog = (section: any, field?: string, index?: number) => {\n    setSigningTarget({ section, field, index });\n    setIsSignatureDialogOpen(true);\n  };\n\n  const handleSaveSignature = (signature: string) => {\n    if (!signingTarget) return;\n\n    const { section, field, index } = signingTarget;\n\n    if (section === 'validacion' && field && index !== undefined) {\n      handleListChange('validacion', field as 'autoridad' | 'responsable', index, 'firma', signature);\n    } else if (section === 'cierre' && field) {\n      handleDeepNestedChange('cierre', field as 'autoridad' | 'responsable', 'firma', signature);\n    } else if (section === 'cancelacion') {\n      handleNestedChange('cancelacion', 'firma', signature);\n    } else {\n      handleNestedChange(section, 'firma', signature);\n    }\n\n    setIsSignatureDialogOpen(false);\n    setSigningTarget(null);\n  };\n\n  return (\n    <>\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Anexo de Trabajo en Alturas\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">\n          Complete la información requerida para trabajos en alturas.\n        </p>\n      </div>\n      \n      <SectionWrapper title=\"Información General del Anexo\" defaultOpen>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n            <div><Label>Área de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n            <div><Label>Equipo o Área Específica:</Label><Input value={generalInfo.proceso || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n            <div><Label>Responsable (Nombre):</Label><Input value={generalInfo.responsable?.nombre || ''} readOnly disabled /></div>\n            <div><Label>Cargo:</Label><Input value={generalInfo.responsable?.cargo || ''} readOnly disabled /></div>\n            <div><Label>Compañía:</Label><Input value={generalInfo.responsable?.compania || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n            <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoAltura.emergencia?.contacto || ''} onChange={(e) => handleNestedChange('emergencia', 'contacto', e.target.value)} /></div>\n            <div><Label>Teléfono:</Label><Input value={anexoAltura.emergencia?.telefono || ''} onChange={(e) => handleNestedChange('emergencia', 'telefono', e.target.value)} /></div>\n        </div>\n        <div className=\"mt-4\">\n            <Label>Altura aproximada a la cual se va a desarrollar la actividad (Indicar en metros)</Label>\n            <Input type=\"number\" value={anexoAltura.alturaAproximada || ''} onChange={(e) => handleUpdate({ alturaAproximada: e.target.value })} />\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Identificación de Peligros y Aspectos para Trabajo en Alturas\">\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n            {anexoAlturaEstructuras.map(item => (\n                <div key={item.id} className=\"flex items-center space-x-2\">\n                    <Checkbox \n                      id={`struct-${item.id}`} \n                      checked={!!anexoAltura.tipoEstructura?.[item.id]} \n                      onCheckedChange={(checked) => handleNestedChange('tipoEstructura', item.id, !!checked)} \n                    />\n                    <Label htmlFor={`struct-${item.id}`}>{item.label}</Label>\n                </div>\n            ))}\n        </div>\n        {anexoAltura.tipoEstructura?.otros && (\n            <Input \n              placeholder=\"Especifique otros\" \n              value={anexoAltura.tipoEstructura.otrosCual || ''} \n              onChange={(e) => handleNestedChange('tipoEstructura', 'otrosCual', e.target.value)} \n              className=\"mt-4\" \n            />\n        )}\n      </SectionWrapper>\n\n      <SectionWrapper title=\"Aspectos de Seguridad para Trabajo en Alturas\">\n        <div className=\"space-y-3\">\n            {anexoAlturaAspectos.map(item => (\n                <RadioGroupField \n                  key={item.id} \n                  id={`aspecto-${item.id}`} \n                  label={item.label} \n                  value={anexoAltura.aspectosSeguridad?.[item.id] || 'na'} \n                  onChange={(value) => handleNestedChange('aspectosSeguridad', item.id, value)} \n                />\n            ))}\n        </div>\n      </SectionWrapper>\n\n      <SectionWrapper title=\"Precauciones y Controles Específicos\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n             {anexoAlturaPrecauciones.map(item => (\n                <RadioGroupField \n                  key={item.id} \n                  id={`precaucion-${item.id}`} \n                  label={item.label} \n                  value={anexoAltura.precauciones?.[item.id] || 'na'} \n                  onChange={(value) => handleNestedChange('precauciones', item.id, value)} \n                />\n            ))}\n        </div>\n         {anexoAltura.precauciones?.otro === 'si' && (\n            <Input \n              placeholder=\"Especifique otra precaución\" \n              value={anexoAltura.precauciones.otroCual || ''} \n              onChange={(e) => handleNestedChange('precauciones', 'otroCual', e.target.value)} \n              className=\"mt-4\" \n            />\n        )}\n      </SectionWrapper>\n      \n       <SectionWrapper title=\"Afectaciones\">\n        <div className=\"space-y-4\">\n            <RadioGroupField \n              id=\"afect-riesgo-otras\" \n              label=\"¿Este trabajo produce riesgos para otros trabajos en áreas adyacentes?\" \n              value={anexoAltura.afectaciones?.riesgoOtrasAreas || 'na'} \n              onChange={(value) => handleNestedChange('afectaciones', 'riesgoOtrasAreas', value)} \n            />\n            <RadioGroupField \n              id=\"afect-otras-riesgo\" \n              label=\"¿Los otros trabajos en áreas adyacentes producen riesgo a este trabajo?\" \n              value={anexoAltura.afectaciones?.otrasAreasRiesgo || 'na'} \n              onChange={(value) => handleNestedChange('afectaciones', 'otrasAreasRiesgo', value)} \n            />\n            <RadioGroupField \n              id=\"afect-personal-notificado\" \n              label=\"¿El personal del área potencialmente afectado y los trabajadores fueron notificados del trabajo a realizar?\" \n              value={anexoAltura.afectaciones?.personalNotificado || 'na'} \n              onChange={(value) => handleNestedChange('afectaciones', 'personalNotificado', value)} \n            />\n            <div>\n              <Label>Observaciones:</Label>\n              <Textarea \n                value={anexoAltura.afectaciones?.observaciones || ''} \n                onChange={(e) => handleNestedChange('afectaciones', 'observaciones', e.target.value)} \n              />\n            </div>\n        </div>\n       </SectionWrapper>\n\n        <SectionWrapper title=\"Autorizaciones\">\n            <div className=\"space-y-6\">\n                <div className=\"p-4 border rounded-lg\">\n                    <p className=\"text-sm font-semibold mb-2\">Autoridad del Área</p>\n                    <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Autoridad del Área, estoy enterado del trabajo a realizar y apruebo su ejecución bajo las medidas de seguridad contempladas en este permiso y sus documentos complementarios.\"</p>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <Input \n                          placeholder=\"Nombre Completo\" \n                          value={anexoAltura.autoridadArea?.nombre || ''} \n                          onChange={(e) => handleNestedChange('autoridadArea', 'nombre', e.target.value)} \n                        />\n                        <Input \n                          type=\"time\" \n                          placeholder=\"Hora\" \n                          value={anexoAltura.autoridadArea?.hora || ''} \n                          onChange={(e) => handleNestedChange('autoridadArea', 'hora', e.target.value)} \n                        />\n                    </div>\n                    <Button \n                      variant=\"outline\" \n                      className=\"w-full mt-4\" \n                      onClick={() => openSignatureDialog('autoridadArea')}\n                    >\n                      <Signature className=\"mr-2\"/>Firmar\n                    </Button>\n                    {anexoAltura.autoridadArea?.firma && (\n                      <img src={anexoAltura.autoridadArea.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />\n                    )}\n                </div>\n                \n                <div className=\"p-4 border rounded-lg\">\n                    <p className=\"text-sm font-semibold mb-2\">Responsable del Trabajo</p>\n                    <p className=\"text-xs text-muted-foreground mb-4\">\"Manifiesto que entiendo el trabajo que voy a realizar y los riesgos asociados a este, dispongo de los recursos necesarios y tomaré las medidas de seguridad...\"</p>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <Input \n                          placeholder=\"Nombre Completo\" \n                          value={anexoAltura.responsableTrabajo?.nombre || ''} \n                          onChange={(e) => handleNestedChange('responsableTrabajo', 'nombre', e.target.value)} \n                        />\n                        <Input \n                          type=\"time\" \n                          placeholder=\"Hora\" \n                          value={anexoAltura.responsableTrabajo?.hora || ''} \n                          onChange={(e) => handleNestedChange('responsableTrabajo', 'hora', e.target.value)} \n                        />\n                    </div>\n                    <Button \n                      variant=\"outline\" \n                      className=\"w-full mt-4\" \n                      onClick={() => openSignatureDialog('responsableTrabajo')}\n                    >\n                      <Signature className=\"mr-2\"/>Firmar\n                    </Button>\n                    {anexoAltura.responsableTrabajo?.firma && (\n                      <img src={anexoAltura.responsableTrabajo.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />\n                    )}\n                </div>\n                \n                <div className=\"p-4 border rounded-lg\">\n                    <p className=\"text-sm font-semibold mb-2\">Coordinador de Trabajos en Alturas</p>\n                    <p className=\"text-xs text-muted-foreground mb-4\">\"Manifiesto que entiendo el trabajo que se va a realizar y sus peligros, se han verificado las condiciones y formulado las medidas de prevención necesarias.\"</p>\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <Input \n                          placeholder=\"Nombre Completo\" \n                          value={anexoAltura.coordinadorTrabajosAltura?.nombre || ''} \n                          onChange={(e) => handleNestedChange('coordinadorTrabajosAltura', 'nombre', e.target.value)} \n                        />\n                        <Input \n                          type=\"time\" \n                          placeholder=\"Hora\" \n                          value={anexoAltura.coordinadorTrabajosAltura?.hora || ''} \n                          onChange={(e) => handleNestedChange('coordinadorTrabajosAltura', 'hora', e.target.value)} \n                        />\n                    </div>\n                    <Button \n                      variant=\"outline\" \n                      className=\"w-full mt-4\" \n                      onClick={() => openSignatureDialog('coordinadorTrabajosAltura')}\n                    >\n                      <Signature className=\"mr-2\"/>Firmar\n                    </Button>\n                    {anexoAltura.coordinadorTrabajosAltura?.firma && (\n                      <img src={anexoAltura.coordinadorTrabajosAltura.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />\n                    )}\n                </div>\n            </div>\n        </SectionWrapper>\n        \n        <SectionWrapper title=\"Validación Diaria\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <div className=\"p-4 border rounded-lg space-y-2\">\n                    <h4 className=\"font-semibold\">Autoridad del Área</h4>\n                    <Table>\n                        <TableHeader>\n                          <TableRow>\n                            <TableHead>Día</TableHead>\n                            <TableHead>Nombre</TableHead>\n                            <TableHead>Firma</TableHead>\n                            <TableHead>Fecha</TableHead>\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                            {(anexoAltura.validacion?.autoridad || []).map((v, i) => (\n                                <TableRow key={i}>\n                                    <TableCell>{i + 1}</TableCell>\n                                    <TableCell>\n                                      <Input \n                                        value={v.nombre || ''} \n                                        onChange={(e) => handleListChange('validacion', 'autoridad', i, 'nombre', e.target.value)} \n                                        className=\"h-8\"\n                                      />\n                                    </TableCell>\n                                    <TableCell>\n                                      <Button \n                                        variant=\"ghost\" \n                                        size=\"icon\" \n                                        onClick={() => openSignatureDialog('validacion', 'autoridad', i)}\n                                      >\n                                        <Signature className=\"h-4 w-4\"/>\n                                      </Button>\n                                    </TableCell>\n                                    <TableCell>\n                                      <Input \n                                        type=\"date\" \n                                        value={v.fecha || ''} \n                                        onChange={(e) => handleListChange('validacion', 'autoridad', i, 'fecha', e.target.value)} \n                                        className=\"h-8\"\n                                      />\n                                    </TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n                <div className=\"p-4 border rounded-lg space-y-2\">\n                    <h4 className=\"font-semibold\">Responsable del Trabajo</h4>\n                    <Table>\n                        <TableHeader>\n                          <TableRow>\n                            <TableHead>Día</TableHead>\n                            <TableHead>Nombre</TableHead>\n                            <TableHead>Firma</TableHead>\n                            <TableHead>Fecha</TableHead>\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                             {(anexoAltura.validacion?.responsable || []).map((v, i) => (\n                                <TableRow key={i}>\n                                    <TableCell>{i + 1}</TableCell>\n                                    <TableCell>\n                                      <Input \n                                        value={v.nombre || ''} \n                                        onChange={(e) => handleListChange('validacion', 'responsable', i, 'nombre', e.target.value)} \n                                        className=\"h-8\"\n                                      />\n                                    </TableCell>\n                                    <TableCell>\n                                      <Button \n                                        variant=\"ghost\" \n                                        size=\"icon\" \n                                        onClick={() => openSignatureDialog('validacion', 'responsable', i)}\n                                      >\n                                        <Signature className=\"h-4 w-4\"/>\n                                      </Button>\n                                    </TableCell>\n                                    <TableCell>\n                                      <Input \n                                        type=\"date\" \n                                        value={v.fecha || ''} \n                                        onChange={(e) => handleListChange('validacion', 'responsable', i, 'fecha', e.target.value)} \n                                        className=\"h-8\"\n                                      />\n                                    </TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n            </div>\n        </SectionWrapper>\n\n        <SectionWrapper title=\"Cancelación y Cierre\">\n         <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"space-y-4 p-4 border rounded-lg\">\n                <h3 className=\"font-semibold\">Cancelación del Trabajo</h3>\n                <RadioGroupField \n                  id=\"cancelacion-si-no\" \n                  label=\"¿Se canceló el trabajo?\" \n                  value={anexoAltura.cancelacion?.seCancelo || 'no'} \n                  onChange={(value) => handleNestedChange('cancelacion', 'seCancelo', value)} \n                />\n                {anexoAltura.cancelacion?.seCancelo === 'si' && (\n                    <div className=\"space-y-3\">\n                        <Textarea \n                          placeholder=\"Razón de la cancelación\" \n                          value={anexoAltura.cancelacion.razon || ''} \n                          onChange={(e) => handleNestedChange('cancelacion', 'razon', e.target.value)} \n                        />\n                        <Input \n                          placeholder=\"Nombre de quien cancela\" \n                          value={anexoAltura.cancelacion.nombre || ''} \n                          onChange={(e) => handleNestedChange('cancelacion', 'nombre', e.target.value)} \n                        />\n                         <Input \n                          type=\"date\" \n                          value={anexoAltura.cancelacion.fecha || ''} \n                          onChange={(e) => handleNestedChange('cancelacion', 'fecha', e.target.value)} \n                        />\n                        <Button \n                          variant=\"outline\" \n                          className=\"w-full\" \n                          onClick={() => openSignatureDialog('cancelacion')}\n                        >\n                          <Signature className=\"mr-2\"/>Firmar Cancelación\n                        </Button>\n                        {anexoAltura.cancelacion?.firma && (\n                          <img src={anexoAltura.cancelacion.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />\n                        )}\n                    </div>\n                )}\n            </div>\n             <div className=\"space-y-4 p-4 border rounded-lg\">\n                <h3 className=\"font-semibold\">Cierre del Permiso</h3>\n                <RadioGroupField \n                  id=\"cierre-si-no\" \n                  label=\"¿Se terminó el trabajo?\" \n                  value={anexoAltura.cierre?.seTermino || 'no'} \n                  onChange={(value) => handleNestedChange('cierre', 'seTermino', value)} \n                />\n                {anexoAltura.cierre?.seTermino === 'si' && (\n                    <div className=\"space-y-3\">\n                         <Textarea \n                          placeholder=\"Observaciones de cierre\" \n                          value={anexoAltura.cierre.observaciones || ''} \n                          onChange={(e) => handleNestedChange('cierre', 'observaciones', e.target.value)} \n                        />\n                        <div className=\"p-3 border rounded-md\">\n                            <p className=\"text-xs font-bold\">Autoridad del Área</p>\n                            <Input \n                              placeholder=\"Nombre\" \n                              value={anexoAltura.cierre.autoridad?.nombre || ''} \n                              onChange={(e) => handleDeepNestedChange('cierre', 'autoridad', 'nombre', e.target.value)} \n                            />\n                             <Input \n                              type=\"date\" \n                              className=\"mt-2\" \n                              value={anexoAltura.cierre.autoridad?.fecha || ''} \n                              onChange={(e) => handleDeepNestedChange('cierre', 'autoridad', 'fecha', e.target.value)} \n                            />\n                            <Button \n                              variant=\"outline\" \n                              size=\"sm\" \n                              className=\"w-full mt-2\" \n                              onClick={() => openSignatureDialog('cierre', 'autoridad')}\n                            >\n                              <Signature className=\"mr-2\"/>Firmar Cierre\n                            </Button>\n                            {anexoAltura.cierre.autoridad?.firma && (\n                              <img src={anexoAltura.cierre.autoridad.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />\n                            )}\n                        </div>\n                        <div className=\"p-3 border rounded-md\">\n                            <p className=\"text-xs font-bold\">Responsable del Trabajo</p>\n                            <Input \n                              placeholder=\"Nombre\" \n                              value={anexoAltura.cierre.responsable?.nombre || ''} \n                              onChange={(e) => handleDeepNestedChange('cierre', 'responsable', 'nombre', e.target.value)} \n                            />\n                            <Input \n                              type=\"date\" \n                              className=\"mt-2\" \n                              value={anexoAltura.cierre.responsable?.fecha || ''} \n                              onChange={(e) => handleDeepNestedChange('cierre', 'responsable', 'fecha', e.target.value)} \n                            />\n                            <Button \n                              variant=\"outline\" \n                              size=\"sm\" \n                              className=\"w-full mt-2\" \n                              onClick={() => openSignatureDialog('cierre', 'responsable')}\n                            >\n                              <Signature className=\"mr-2\"/>Firmar Cierre\n                            </Button>\n                            {anexoAltura.cierre.responsable?.firma && (\n                              <img src={anexoAltura.cierre.responsable.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />\n                            )}\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    </SectionWrapper>\n    </div>\n    \n    <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Registrar Firma</DialogTitle>\n        </DialogHeader>\n        <SignaturePad onSave={handleSaveSignature} />\n      </DialogContent>\n    </Dialog>\n  </>\n  );\n}\n\n    "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3737, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoConfinadoStep.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { Signature, Trash2, Plus, ChevronDown } from 'lucide-react';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\n\nconst identificacionPeligros = [\n  { id: 'fuentesEnergiaAisladas', label: 'A. ESTAN LAS FUENTES DE ENERGIA (ELECTRICA, MECANICA, HIDRAULICA, TERMICA NEUMATICA) AISLADAS' },\n  { id: 'ejecutantesConocenMedidas', label: 'B. TODOS LOS EJECUTANTES CONOCEN LAS MEDIDAS DE PRECAUCIÓN ESTABLECIDAS EN LA EVALUACIÓN DE RIESGOS?' },\n  { id: 'ejecutantesEntrenados', label: 'C. ESTÁN LOS EJECUTANTES ENTRENADOS' },\n  { id: 'entradasSalidasFlujoBloqueadas', label: 'D. ESTAN BLOQUEADAS LAS ENTRADAS Y SALIDAS DE FLUJO - SE INSTALARON AISLAMIENTOS (COLOMBINAS, CIEGOS)' },\n  { id: 'areaDelimitada', label: 'E. ESTA DELIMITADA Y SEÑALIZADA EL AREA DE TRABAJO PARA PREVENIR EL INGRESO AL ESPACIO CONFINADO DE PERSONAL NO AUTORIZADO O AJENO A LA ACTIVIDAD' },\n  { id: 'monitorAtmosferasCalibrado', label: 'F. SE TIENE EN SITIO UN MONITOR DE ATMOSFERAS PELIGROSAS, CALIBRADO' },\n  { id: 'equiposIluminacionExplosion', label: 'G. SON A PRUEBA DE EXPLOSION LOS EQUIPOS DE ILUMINACION, Y LAS CONEXIONES DE LOS EQUIPOS' },\n  { id: 'equiposVentilacionExplosion', label: 'H. SON A PRUEBA DE EXPLOSION LOS EQUIPOS DE VENTILACION O SUMINISTRO DE AIRE FORZADO Y SUS CONEXIONES' },\n  { id: 'medidasSeguridadEquiposNoExplosion', label: 'I. EN CASO DE QUE LOS EQUIPOS NO SEAN A PRUEBA DE EXPLOSION SE SE TOMARON LAS MEDIDAS DE SEGURUDAD NECESARIA PARA EVITAR RIESGOS' },\n  { id: 'equiposVentilacionSuficientes', label: 'J. LOS EQUIPOS DE VENTILACION ESTAN DISPONIBLES Y SON SUFICIENTES' },\n  { id: 'chequeoVentilacionMecanica', label: 'CHEQUEO DE VENTILACION MECANICA' },\n  { id: 'chequeoVentilacionNatural', label: 'CHEQUEO DE VENTILACION (SOLO NATURAL)' },\n  { id: 'equiposRespiracionAutonoma', label: 'K. ESTAN DISPONIBLES EN EL SITIO EQUIPOS DE RESPIRACION AUTONOMA (AUTOCONTENIDO) EN CASO DE EMERGENCIA' },\n  { id: 'elementosAtencionEmergencias', label: 'L. SE CUENTA CON ELEMENTOS PARA ATENCION DE EMERGENCIAS EN EL AREA' },\n  { id: 'planEmergenciaRescate', label: 'M. SE CUENTA CON PLAN DE EMERGENCIA PARA RESCATE' },\n  { id: 'hojasSeguridadDisponibles', label: 'N. ESTAN DISPONIBLES LAS HOJAS DE SEGURIDAD DE PRODUCTOS QUIMICOS EN CASO DE USARSE.' },\n  { id: 'verificadoConexionesPuestaTierra', label: 'Ñ.SE HA VERIFICADO EL ESTADO DE CONEXIONES Y PUESTA A TIERRA DE EQUIPOS Y ELEMENTOS A USAR.' },\n  { id: 'vigiaPermanente', label: 'O.SE VERIFICA QUE PARA EL INGRESO A ESPACIOS CONFIANDOS SE CUENTE CON UN VIGIA PERMANENTE EN EL AREA' },\n  { id: 'herramientasAdecuadas', label: 'P. SE VERIFICO QUE LAS HERRAMIENTAS MANUALES Y OTROS ELEMENTOS SEAN LOS ADECUADOS PARA LAS CONDICIONES Y ATMOSFERAS DEL LUGAR' },\n  { id: 'personalSaludable', label: 'Q.EL PERSONAL QUE REALIZA EL TRABAJO SE ENCUENTRA EN CONDICIONES ADECUADAS DE SALUD PARA LA ACTIVIDAD' },\n  { id: 'verificadoEpp', label: 'R.SE VERIFICO EL EQUIPO Y ELEMENTOS DE PROTECCION PERSONAL A UTILIZAR' },\n  { id: 'circunstanciaModificadora', label: 'S.EXISTE ALGUNA CIRCUSTANCIA O FACTOR QUE PUEDA MODIFICAR EL TRABAJO' },\n  { id: 'equiposIntrinsecamenteSeguros', label: 'SE HA VERIFICADO QUE LOS EQUIPOS A USARSE SON INTRINSICAMENTE SEGUROS' },\n  { id: 'procedimientoComunicacion', label: 'SE CUENTA CON PROCEDMIENTO DE COMUNICACIÓN CUAL ?' }\n];\n\nconst peligroSections: { title: string, items: string[] }[] = [\n    { title: \"Aislamiento y Preparación del Área\", items: ['fuentesEnergiaAisladas', 'entradasSalidasFlujoBloqueadas', 'areaDelimitada'] },\n    { title: \"Personal y Entrenamiento\", items: ['ejecutantesConocenMedidas', 'ejecutantesEntrenados', 'personalSaludable', 'vigiaPermanente'] },\n    { title: \"Equipos y Monitoreo\", items: ['monitorAtmosferasCalibrado', 'equiposIluminacionExplosion', 'equiposVentilacionExplosion', 'medidasSeguridadEquiposNoExplosion', 'equiposVentilacionSuficientes', 'chequeoVentilacionMecanica', 'chequeoVentilacionNatural', 'equiposIntrinsecamenteSeguros'] },\n    { title: \"Emergencias y Rescate\", items: ['equiposRespiracionAutonoma', 'elementosAtencionEmergencias', 'planEmergenciaRescate'] },\n    { title: \"Materiales y Herramientas\", items: ['hojasSeguridadDisponibles', 'verificadoConexionesPuestaTierra', 'herramientasAdecuadas', 'verificadoEpp'] },\n    { title: \"Condiciones Adicionales\", items: ['circunstanciaModificadora', 'procedimientoComunicacion'] }\n];\n\nconst precaucionesControles = [\n    { id: 'despresurizar', label: 'DESPRESURIZAR' },\n    { id: 'revisarEquipos', label: 'REVISAR EQUIPOS Y HERRAMIENTAS' },\n    { id: 'monitoreoAtmosferas', label: 'MONITOREO DE ATMOSFERAS' },\n    { id: 'drenarVentilar', label: 'DRENAR Y VENTILAR' },\n    { id: 'aislamientoEnergias', label: 'AISLAMIENTO DE ENERGIAS' },\n    { id: 'aterrizarEquipo', label: 'ATERRIZAR EQUIPO' },\n    { id: 'equipoContraIncendio', label: 'EQUIPO CONTRA INCENDIO' },\n    { id: 'instalarLineasVida', label: 'INSTALAR LINEAS DE VIDA ADICIONALES' },\n    { id: 'usoEppsEspeciales', label: 'USO DE EPPS ESPECIALES' },\n    { id: 'hojaSeguridadMsds', label: 'HOJA DE SEGURIDAD MSDS' },\n    { id: 'bloqueoEtiquetado', label: 'BLOQUEO Y ETIQUETADO' },\n    { id: 'requiereVigia', label: 'REQUIERE VIGIA' },\n    { id: 'etiquetadoProductosQuimicos', label: 'ETIQUETADO PRODUCTOS QUIMICOS' },\n    { id: 'clasificacionResiduos', label: 'CLASIFICACION DE RESIDUOS' },\n    { id: 'senalizacion', label: 'SEÑALIZACION' },\n    { id: 'sistemaContencionDerrames', label: 'SISTEMA DE CONTENCION DE DERRAMES' }\n];\n\nconst requerimientosEquipos = [\n    { id: 'arnesLineasVida', label: 'ARNES DE SEGURIDAD, LINEAS DE VIDA PARA PERSONAS QUE INGRESAN Y SALEN' },\n    { id: 'equiposIzar', label: 'EQUIPOS PARA IZAR (CUERDAS, CABLES, ETC)' },\n    { id: 'equiposComunicaciones', label: 'EQUIPOS DE COMUNICACIONES' },\n    { id: 'equiposAutonomos', label: 'EQUIPOS AUTONOMOS PARA PERSONAS DE ENTRADA Y SALIDA' },\n    { id: 'extintores', label: 'EXTINTORES' },\n    { id: 'ropaDotacionEspecial', label: 'ROPA Y DOTACION ESPECIAL DE PROTECCION' },\n    { id: 'bloqueosAislamientos', label: 'BLOQUEOS / AISLAMIENTOS /SALIDA ' },\n    { id: 'lineasElectricasChequeadas', label: 'LÍNEAS ELÉCTRICAS: EXPUESTAS, OCULTAS ESTÁN CHEQUEADAS' },\n    { id: 'areaSegura', label: 'AREA SEGURA' },\n    { id: 'personalSeguridadCierre', label: 'PRESONAL DE SEGURIDAD DE CIERRE?' },\n    { id: 'equipoRecuperacionEmergencia', label: 'EQUIPO DE RECUPERACION DE EMERGENCIA' },\n    { id: 'iluminacionEquiposExplosion', label: 'ILUMINACION Y EQUIPOS A PRUEBA DE EXPLOSION' }\n];\n\nconst RadioGroupField = ({ id, label, value, onChange }: { id: string; label: string; value: 'si' | 'no' | 'na'; onChange: (value: 'si' | 'no' | 'na') => void; }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\nexport function AnexoConfinadoStep() {\n  const { state, dispatch } = usePermitForm();\n  const { generalInfo, anexoConfinado } = state;\n  \n  // Estado controlado para TODAS las secciones principales\n  const [openSections, setOpenSections] = React.useState<Record<string, boolean>>({\n    informacionGeneral: true,    // Información General abierta por defecto\n    identificacionPeligros: false,\n    precaucionesControles: false,\n    resultadosPruebas: false,\n    requerimientosEquipos: false,\n    pruebasPeriodicas: false,\n    autorizaciones: false,\n    validacionCierre: false,\n    // También para las subcategorías de peligros\n    ...Object.fromEntries(peligroSections.map(section => [section.title, false]))\n  });\n  \n  const [isSignatureDialogOpen, setIsSignatureDialogOpen] = React.useState(false);\n  const [signingTarget, setSigningTarget] = React.useState<{ section: string; field: string; index?: number } | null>(null);\n\n  const toggleSection = (sectionId: string) => {\n    setOpenSections(prev => ({\n      ...prev,\n      [sectionId]: !prev[sectionId]\n    }));\n  };\n\n  // Función principal para actualizar campos del anexo\n  const handleFieldChange = (field: string, value: any) => {\n    dispatch({\n      type: 'UPDATE_ANEXO_CONFINADO',\n      payload: { [field]: value }\n    });\n  };\n\n  // Función para campos anidados (ej: emergencia.contacto)\n  const handleNestedFieldChange = (section: string, field: string, value: any) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    handleFieldChange(section, {\n      ...currentSection,\n      [field]: value\n    });\n  };\n\n  // Función para campos anidados profundos (ej: cierre.autoridad.nombre)\n  const handleDeepNestedChange = (section: string, subSection: string, field: string, value: any) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    const currentSubSection = currentSection[subSection] || {};\n    \n    handleFieldChange(section, {\n      ...currentSection,\n      [subSection]: {\n        ...currentSubSection,\n        [field]: value\n      }\n    });\n  };\n\n  // Función para listas (ej: validacion.autoridad[index])\n  const handleListChange = (section: string, listName: string, index: number, field: string, value: any) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    const currentList = [...(currentSection[listName] || [])];\n    \n    // Asegurar que el índice existe\n    while (currentList.length <= index) {\n      if (listName === 'pruebas') {\n        currentList.push({ \n          id: `prueba-${Date.now()}-${currentList.length}`, \n          hora: '', \n          lel: '', \n          o2: '', \n          h2s: '', \n          co: '', \n          firma: '' \n        });\n      } else {\n        currentList.push({ \n          dia: currentList.length + 1, \n          nombre: '', \n          firma: '', \n          fecha: '' \n        });\n      }\n    }\n    \n    currentList[index] = { ...currentList[index], [field]: value };\n    \n    handleFieldChange(section, {\n      ...currentSection,\n      [listName]: currentList\n    });\n  };\n\n  // Función para agregar elementos a listas\n  const addToList = (section: string, listName: string, defaultItem: any) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    const currentList = [...(currentSection[listName] || [])];\n    \n    if (listName === 'pruebas' && currentList.length >= 4) {\n      return; // Límite de 4 pruebas\n    }\n    \n    currentList.push(defaultItem);\n    handleFieldChange(section, {\n      ...currentSection,\n      [listName]: currentList\n    });\n  };\n\n  // Función para remover elementos de listas\n  const removeFromList = (section: string, listName: string, index: number) => {\n    const currentSection = (anexoConfinado as any)[section] || {};\n    const currentList = (currentSection[listName] || []).filter((_: any, i: number) => i !== index);\n    handleFieldChange(section, {\n      ...currentSection,\n      [listName]: currentList\n    });\n  };\n\n  // Inicializar validación diaria\n  React.useEffect(() => {\n    if (!anexoConfinado?.validacion) {\n      const autoridad = Array(7).fill(0).map((_, i) => ({ \n        dia: i + 1, \n        nombre: '', \n        firma: '', \n        fecha: '' \n      }));\n      const responsable = Array(7).fill(0).map((_, i) => ({ \n        dia: i + 1, \n        nombre: '', \n        firma: '', \n        fecha: '' \n      }));\n      \n      handleFieldChange('validacion', { autoridad, responsable });\n    }\n  }, []); // Solo ejecutar una vez\n\n  const openSignatureDialog = (section: string, field: string, index?: number) => {\n    setSigningTarget({ section, field, index });\n    setIsSignatureDialogOpen(true);\n  };\n\n  const handleSaveSignature = (signature: string) => {\n    if (!signingTarget) return;\n    const { section, field, index } = signingTarget;\n\n    if (index !== undefined) {\n      // Para listas como validacion.autoridad[0].firma o pruebasGasesPeriodicas.pruebas[0].firma\n      handleListChange(section, field, index, 'firma', signature);\n    } else if (section.includes('.')) {\n      // Para campos anidados profundos como cierre.autoridad.firma\n      const [mainSection, subSection] = section.split('.');\n      handleDeepNestedChange(mainSection, subSection, 'firma', signature);\n    } else {\n      // Para campos directos como resultadosPruebasGases.firmaQuienRealiza\n      handleNestedFieldChange(section, 'firmaQuienRealiza', signature);\n    }\n\n    setIsSignatureDialogOpen(false);\n    setSigningTarget(null);\n  };\n\n  // SectionWrapper con estado controlado\n  const SectionWrapper: React.FC<{ title: string; children: React.ReactNode; sectionId: string }> = ({ title, children, sectionId }) => (\n    <Collapsible open={openSections[sectionId]} onOpenChange={() => toggleSection(sectionId)}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n\n  return (\n    <>\n    <div className=\"space-y-8\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Anexo de Espacios Confinados\n        </h2>\n        <p className=\"text-muted-foreground text-sm\">\n          Complete la información requerida para trabajos en espacios confinados.\n        </p>\n      </div>\n\n      <SectionWrapper title=\"Información General del Anexo\" sectionId=\"informacionGeneral\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n          <div><Label>Área de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n          <div><Label>Equipo o Área Específica:</Label><Input value={generalInfo.proceso || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n            <div><Label>Responsable (Nombre):</Label><Input value={generalInfo.responsable?.nombre || ''} readOnly disabled /></div>\n            <div><Label>Cargo:</Label><Input value={generalInfo.responsable?.cargo || ''} readOnly disabled /></div>\n            <div><Label>Compañía:</Label><Input value={generalInfo.responsable?.compania || ''} readOnly disabled /></div>\n        </div>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n          <div>\n            <Label>En caso de emergencia contactar a:</Label>\n            <Input \n              value={anexoConfinado?.emergencia?.contacto || ''} \n              onChange={(e) => handleNestedFieldChange('emergencia', 'contacto', e.target.value)} \n            />\n          </div>\n          <div>\n            <Label>Teléfono:</Label>\n            <Input \n              value={anexoConfinado?.emergencia?.telefono || ''} \n              onChange={(e) => handleNestedFieldChange('emergencia', 'telefono', e.target.value)} \n            />\n          </div>\n        </div>\n      </SectionWrapper>\n\n      <SectionWrapper title=\"Identificación de Peligros y Aspectos\" sectionId=\"identificacionPeligros\">\n        <div className=\"space-y-2\">\n            {peligroSections.map((section) => (\n                <Collapsible key={section.title} open={openSections[section.title]} onOpenChange={() => toggleSection(section.title)}>\n                    <CollapsibleTrigger asChild>\n                        <Button variant=\"ghost\" className=\"w-full justify-between p-4 border rounded-lg\">\n                            <span className=\"font-semibold text-gray-700\">{section.title}</span>\n                            <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n                        </Button>\n                    </CollapsibleTrigger>\n                    <CollapsibleContent className=\"p-4 border border-t-0 rounded-b-lg space-y-3\">\n                        {section.items.map(itemId => {\n                            const item = identificacionPeligros.find(p => p.id === itemId);\n                            if (!item) return null;\n                            return (\n                                <div key={item.id} className=\"space-y-2\">\n                                    <RadioGroupField\n                                        id={`peligro-${item.id}`}\n                                        label={item.label}\n                                        value={anexoConfinado?.identificacionPeligros?.[item.id] || 'na'}\n                                        onChange={(value) => handleNestedFieldChange('identificacionPeligros', item.id, value)}\n                                    />\n                                    {item.id === 'procedimientoComunicacion' && anexoConfinado?.identificacionPeligros?.procedimientoComunicacion === 'si' && (\n                                        <Input\n                                            className=\"ml-8 w-[calc(100%-2rem)]\"\n                                            placeholder=\"Cuál procedimiento de comunicación?\"\n                                            value={anexoConfinado?.procedimientoComunicacionCual || ''}\n                                            onChange={(e) => handleFieldChange('procedimientoComunicacionCual', e.target.value)}\n                                        />\n                                    )}\n                                </div>\n                            );\n                        })}\n                    </CollapsibleContent>\n                </Collapsible>\n            ))}\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Precauciones y Controles Específicos\" sectionId=\"precaucionesControles\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {precaucionesControles.map(item => (\n                <RadioGroupField \n                  key={item.id} \n                  id={`precaucion-${item.id}`} \n                  label={item.label} \n                  value={anexoConfinado?.precauciones?.[item.id] || 'na'} \n                  onChange={(value) => handleNestedFieldChange('precauciones', item.id, value)} \n                />\n            ))}\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Resultados de Pruebas de Gases\" sectionId=\"resultadosPruebas\">\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 items-end\">\n            <div>\n              <Label>LEL (0%)</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.lel || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'lel', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>O2 (19.5-22%)</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.o2 || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'o2', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>H2S (0-10 PPM)</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.h2s || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'h2s', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>CO (0-25 PPM)</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.co || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'co', e.target.value)} \n              />\n            </div>\n            <div className=\"col-span-2\">\n              <Label>Otros</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.otros || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'otros', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>Serial Monitor</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.serialMonitor || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'serialMonitor', e.target.value)} \n              />\n            </div>\n            <div>\n              <Label>Hora Prueba</Label>\n              <Input \n                type=\"time\" \n                value={anexoConfinado?.resultadosPruebasGases?.horaPrueba || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'horaPrueba', e.target.value)} \n              />\n            </div>\n            <div className=\"col-span-full\">\n              <Label>Nombre de quien realiza</Label>\n              <Input \n                value={anexoConfinado?.resultadosPruebasGases?.nombreQuienRealiza || ''} \n                onChange={e => handleNestedFieldChange('resultadosPruebasGases', 'nombreQuienRealiza', e.target.value)} \n              />\n            </div>\n            <div className=\"col-span-full\">\n                <Button \n                  variant=\"outline\" \n                  className=\"w-full\" \n                  onClick={() => openSignatureDialog('resultadosPruebasGases', 'firmaQuienRealiza')}\n                >\n                  <Signature className=\"mr-2\"/>Firmar\n                </Button>\n                {anexoConfinado?.resultadosPruebasGases?.firmaQuienRealiza && (\n                  <img \n                    src={anexoConfinado.resultadosPruebasGases.firmaQuienRealiza} \n                    alt=\"Firma\" \n                    className=\"mt-2 border rounded-md max-h-20\" \n                  />\n                )}\n            </div>\n        </div>\n      </SectionWrapper>\n      \n       <SectionWrapper title=\"Requerimientos y Equipos Revisados\" sectionId=\"requerimientosEquipos\">\n         <div className=\"space-y-4\">\n           {requerimientosEquipos.map(item => (\n              <RadioGroupField \n                key={item.id} \n                id={`req-${item.id}`} \n                label={item.label} \n                value={anexoConfinado?.requerimientosEquipos?.[item.id] || 'na'} \n                onChange={(value) => handleNestedFieldChange('requerimientosEquipos', item.id, value)} \n              />\n           ))}\n         </div>\n         <div className='mt-4'>\n            <Label>Las pruebas de gases se deben realizar cada:</Label>\n            <Input \n              value={anexoConfinado?.pruebasGasesPeriodicas?.intervalo || ''} \n              onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'intervalo', e.target.value)} \n              placeholder=\"Ej: 30 minutos\"\n            />\n         </div>\n       </SectionWrapper>\n\n      <SectionWrapper title=\"Pruebas de Gases Periódicas Requeridas\" sectionId=\"pruebasPeriodicas\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n             <div>\n               <Label>Prueba realizada por:</Label>\n               <Input \n                 value={anexoConfinado?.pruebasGasesPeriodicas?.pruebaRealizadaPor || ''} \n                 onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'pruebaRealizadaPor', e.target.value)} \n               />\n             </div>\n             <div>\n               <Label>Serial Monitor:</Label>\n               <Input \n                 value={anexoConfinado?.pruebasGasesPeriodicas?.serialMonitor || ''} \n                 onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'serialMonitor', e.target.value)} \n               />\n             </div>\n             <div>\n               <Label>Marca:</Label>\n               <Input \n                 value={anexoConfinado?.pruebasGasesPeriodicas?.marca || ''} \n                 onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'marca', e.target.value)} \n               />\n             </div>\n             <div>\n               <Label>Fecha y Hora Calibración:</Label>\n               <Input \n                 type=\"datetime-local\" \n                 value={anexoConfinado?.pruebasGasesPeriodicas?.fechaCalibracion || ''} \n                 onChange={e => handleNestedFieldChange('pruebasGasesPeriodicas', 'fechaCalibracion', e.target.value)} \n               />\n             </div>\n          </div>\n          \n          <Table className=\"mt-4\">\n            <TableHeader>\n              <TableRow>\n                <TableHead>Hora</TableHead>\n                <TableHead>LEL</TableHead>\n                <TableHead>O2</TableHead>\n                <TableHead>H2S</TableHead>\n                <TableHead>CO</TableHead>\n                <TableHead>Firma</TableHead>\n                <TableHead></TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {(anexoConfinado?.pruebasGasesPeriodicas?.pruebas || []).map((prueba, index) => (\n                <TableRow key={prueba.id}>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        type=\"time\" \n                        value={prueba.hora || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'hora', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        value={prueba.lel || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'lel', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        value={prueba.o2 || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'o2', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        value={prueba.h2s || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'h2s', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Input \n                        className=\"h-8\" \n                        value={prueba.co || ''} \n                        onChange={e => handleListChange('pruebasGasesPeriodicas', 'pruebas', index, 'co', e.target.value)} \n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"icon\" \n                        onClick={() => openSignatureDialog('pruebasGasesPeriodicas', 'pruebas', index)}\n                      >\n                        <Signature className=\"h-4 w-4\"/>\n                      </Button>\n                    </TableCell>\n                    <TableCell>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"icon\" \n                        onClick={() => removeFromList('pruebasGasesPeriodicas', 'pruebas', index)}\n                      >\n                        <Trash2 className=\"h-4 w-4 text-destructive\"/>\n                      </Button>\n                    </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          {(anexoConfinado?.pruebasGasesPeriodicas?.pruebas?.length || 0) < 4 && (\n            <Button \n              size=\"sm\" \n              onClick={() => addToList('pruebasGasesPeriodicas', 'pruebas', { \n                id: `prueba-${Date.now()}`, \n                hora: '', \n                lel: '', \n                o2: '', \n                h2s: '', \n                co: '', \n                firma: '' \n              })} \n              className=\"mt-2\"\n            >\n              <Plus className=\"mr-2 h-4 w-4\"/>Agregar Prueba\n            </Button>\n          )}\n      </SectionWrapper>\n\n       <SectionWrapper title=\"Autorizaciones\" sectionId=\"autorizaciones\">\n        <div className=\"space-y-6\">\n          <div className=\"p-4 border rounded-lg\">\n              <p className=\"text-sm font-semibold mb-2\">Autoridad del Área</p>\n              <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Autoridad del Área...\"</p>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Input \n                  placeholder=\"Nombre\" \n                  value={anexoConfinado?.autoridadDelArea?.nombre || ''} \n                  onChange={e => handleNestedFieldChange('autoridadDelArea', 'nombre', e.target.value)} \n                />\n                <Input \n                  type=\"time\" \n                  placeholder=\"Hora\" \n                  value={anexoConfinado?.autoridadDelArea?.hora || ''} \n                  onChange={e => handleNestedFieldChange('autoridadDelArea', 'hora', e.target.value)} \n                />\n              </div>\n              <Button \n                variant=\"outline\" \n                className=\"w-full mt-4\" \n                onClick={() => openSignatureDialog('autoridadDelArea', 'firma')}\n              >\n                <Signature className=\"mr-2\"/>Firmar\n              </Button>\n              {anexoConfinado?.autoridadDelArea?.firma && (\n                <img \n                  src={anexoConfinado.autoridadDelArea.firma} \n                  alt=\"Firma\" \n                  className=\"mt-2 border rounded-md max-h-20\" \n                />\n              )}\n          </div>\n\n          <div className=\"p-4 border rounded-lg\">\n              <p className=\"text-sm font-semibold mb-2\">Responsable del Trabajo</p>\n              <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Responsable del Trabajo...\"</p>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Input \n                  placeholder=\"Nombre\" \n                  value={anexoConfinado?.responsableDelTrabajo?.nombre || ''} \n                  onChange={e => handleNestedFieldChange('responsableDelTrabajo', 'nombre', e.target.value)} \n                />\n                <Input \n                  type=\"time\" \n                  placeholder=\"Hora\" \n                  value={anexoConfinado?.responsableDelTrabajo?.hora || ''} \n                  onChange={e => handleNestedFieldChange('responsableDelTrabajo', 'hora', e.target.value)} \n                />\n              </div>\n              <Button \n                variant=\"outline\" \n                className=\"w-full mt-4\" \n                onClick={() => openSignatureDialog('responsableDelTrabajo', 'firma')}\n              >\n                <Signature className=\"mr-2\"/>Firmar\n              </Button>\n              {anexoConfinado?.responsableDelTrabajo?.firma && (\n                <img \n                  src={anexoConfinado.responsableDelTrabajo.firma} \n                  alt=\"Firma\" \n                  className=\"mt-2 border rounded-md max-h-20\" \n                />\n              )}\n          </div>\n\n          <div className=\"p-4 border rounded-lg\">\n              <p className=\"text-sm font-semibold mb-2\">Supervisor de Trabajo en Espacios Confinados</p>\n              <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Supervisor...\"</p>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <Input \n                  placeholder=\"Nombre\" \n                  value={anexoConfinado?.supervisorTrabajo?.nombre || ''} \n                  onChange={e => handleNestedFieldChange('supervisorTrabajo', 'nombre', e.target.value)} \n                />\n                <Input \n                  type=\"time\" \n                  placeholder=\"Hora\" \n                  value={anexoConfinado?.supervisorTrabajo?.hora || ''} \n                  onChange={e => handleNestedFieldChange('supervisorTrabajo', 'hora', e.target.value)} \n                />\n              </div>\n              <Button \n                variant=\"outline\" \n                className=\"w-full mt-4\" \n                onClick={() => openSignatureDialog('supervisorTrabajo', 'firma')}\n              >\n                <Signature className=\"mr-2\"/>Firmar\n              </Button>\n              {anexoConfinado?.supervisorTrabajo?.firma && (\n                <img \n                  src={anexoConfinado.supervisorTrabajo.firma} \n                  alt=\"Firma\" \n                  className=\"mt-2 border rounded-md max-h-20\" \n                />\n              )}\n          </div>\n        </div>\n      </SectionWrapper>\n      \n      <SectionWrapper title=\"Validación y Cierre\" sectionId=\"validacionCierre\">\n         <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <div className=\"p-4 border rounded-lg space-y-2\">\n                    <h4 className=\"font-semibold\">Autoridad del Área</h4>\n                    <p className='text-xs text-muted-foreground'>Entiendo todas las condiciones de este trabajo y la responsabilidad de implementar las medidas de control establecidas.</p>\n                    <Table>\n                        <TableHeader>\n                          <TableRow>\n                            <TableHead>Día</TableHead>\n                            <TableHead>Nombre</TableHead>\n                            <TableHead>Firma</TableHead>\n                            <TableHead>Fecha</TableHead>\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                            {(anexoConfinado.validacion?.autoridad || []).map((v, i) => (\n                                <TableRow key={i}>\n                                    <TableCell>{i + 1}</TableCell>\n                                    <TableCell>\n                                      <Input \n                                        value={v.nombre || ''} \n                                        onChange={(e) => handleListChange('validacion', 'autoridad', i, 'nombre', e.target.value)} \n                                        className=\"h-8\"\n                                      />\n                                    </TableCell>\n                                    <TableCell>\n                                      <Button \n                                        variant=\"ghost\" \n                                        size=\"icon\" \n                                        onClick={() => openSignatureDialog('validacion', 'autoridad', i)}\n                                      >\n                                        <Signature className=\"h-4 w-4\"/>\n                                      </Button>\n                                    </TableCell>\n                                    <TableCell>\n                                      <Input \n                                        type=\"date\" \n                                        value={v.fecha || ''} \n                                        onChange={(e) => handleListChange('validacion', 'autoridad', i, 'fecha', e.target.value)} \n                                        className=\"h-8\"\n                                      />\n                                    </TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n                <div className=\"p-4 border rounded-lg space-y-2\">\n                    <h4 className=\"font-semibold\">Responsable del Trabajo/Ejecutor</h4>\n                     <p className='text-xs text-muted-foreground'>Entiendo todas las condiciones de este trabajo y la responsabilidad de implementar las medidas de control establecidas.</p>\n                    <Table>\n                        <TableHeader>\n                          <TableRow>\n                            <TableHead>Día</TableHead>\n                            <TableHead>Nombre</TableHead>\n                            <TableHead>Firma</TableHead>\n                            <TableHead>Fecha</TableHead>\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                             {(anexoConfinado.validacion?.responsable || []).map((v, i) => (\n                                <TableRow key={i}>\n                                    <TableCell>{i + 1}</TableCell>\n                                    <TableCell>\n                                      <Input \n                                        value={v.nombre || ''} \n                                        onChange={(e) => handleListChange('validacion', 'responsable', i, 'nombre', e.target.value)} \n                                        className=\"h-8\"\n                                      />\n                                    </TableCell>\n                                    <TableCell>\n                                      <Button \n                                        variant=\"ghost\" \n                                        size=\"icon\" \n                                        onClick={() => openSignatureDialog('validacion', 'responsable', i)}\n                                      >\n                                        <Signature className=\"h-4 w-4\"/>\n                                      </Button>\n                                    </TableCell>\n                                    <TableCell>\n                                      <Input \n                                        type=\"date\" \n                                        value={v.fecha || ''} \n                                        onChange={(e) => handleListChange('validacion', 'responsable', i, 'fecha', e.target.value)} \n                                        className=\"h-8\"\n                                      />\n                                    </TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                    </Table>\n                </div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6\">\n              <div className=\"space-y-4 p-4 border rounded-lg\">\n                  <h3 className=\"font-semibold\">Cancelación del Trabajo</h3>\n                  <RadioGroupField \n                    id=\"cancelacion-si-no\" \n                    label=\"¿Se canceló el trabajo?\" \n                    value={anexoConfinado.cancelacion?.seCancelo || 'no'} \n                    onChange={(value) => handleNestedFieldChange('cancelacion', 'seCancelo', value)} \n                  />\n                  {anexoConfinado.cancelacion?.seCancelo === 'si' && (\n                      <div className=\"space-y-3\">\n                          <Textarea \n                            placeholder=\"Razón de la cancelación\" \n                            value={anexoConfinado.cancelacion.razon || ''} \n                            onChange={(e) => handleNestedFieldChange('cancelacion', 'razon', e.target.value)} \n                          />\n                          <Input \n                            placeholder=\"Nombre de quien cancela\" \n                            value={anexoConfinado.cancelacion.nombre || ''} \n                            onChange={(e) => handleNestedFieldChange('cancelacion', 'nombre', e.target.value)} \n                          />\n                          <Input \n                            type=\"date\" \n                            value={anexoConfinado.cancelacion.fecha || ''} \n                            onChange={(e) => handleNestedFieldChange('cancelacion', 'fecha', e.target.value)} \n                          />\n                          <Button \n                            variant=\"outline\" \n                            className=\"w-full\" \n                            onClick={() => openSignatureDialog('cancelacion', 'firma')}\n                          >\n                            <Signature className=\"mr-2\"/>Firmar Cancelación\n                          </Button>\n                          {anexoConfinado.cancelacion?.firma && (\n                            <img \n                              src={anexoConfinado.cancelacion.firma} \n                              alt=\"Firma\" \n                              className=\"mt-2 border rounded-md max-h-20\" \n                            />\n                          )}\n                      </div>\n                  )}\n              </div>\n              <div className=\"space-y-4 p-4 border rounded-lg\">\n                  <h3 className=\"font-semibold\">Cierre del Permiso</h3>\n                  <RadioGroupField \n                    id=\"cierre-si-no\" \n                    label=\"¿Se terminó el trabajo?\" \n                    value={anexoConfinado.cierre?.seTermino || 'no'} \n                    onChange={(value) => handleNestedFieldChange('cierre', 'seTermino', value)} \n                  />\n                  {anexoConfinado.cierre?.seTermino === 'si' && (\n                      <div className=\"space-y-3\">\n                          <Textarea \n                            placeholder=\"Observaciones de cierre\" \n                            value={anexoConfinado.cierre.observaciones || ''} \n                            onChange={(e) => handleNestedFieldChange('cierre', 'observaciones', e.target.value)} \n                          />\n                          <div className=\"p-3 border rounded-md\">\n                              <p className=\"text-xs font-bold\">Autoridad del Área</p>\n                              <Input \n                                placeholder=\"Nombre\" \n                                value={anexoConfinado.cierre.autoridad?.nombre || ''} \n                                onChange={(e) => handleDeepNestedChange('cierre', 'autoridad', 'nombre', e.target.value)} \n                              />\n                              <Input \n                                type=\"date\" \n                                className=\"mt-2\" \n                                value={anexoConfinado.cierre.autoridad?.fecha || ''} \n                                onChange={(e) => handleDeepNestedChange('cierre', 'autoridad', 'fecha', e.target.value)} \n                              />\n                              <Button \n                                variant=\"outline\" \n                                size=\"sm\" \n                                className=\"w-full mt-2\" \n                                onClick={() => openSignatureDialog('cierre.autoridad', 'firma')}\n                              >\n                                <Signature className=\"mr-2\"/>Firmar Cierre\n                              </Button>\n                              {anexoConfinado.cierre.autoridad?.firma && (\n                                <img \n                                  src={anexoConfinado.cierre.autoridad.firma} \n                                  alt=\"Firma\" \n                                  className=\"mt-2 border rounded-md max-h-20\" \n                                />\n                              )}\n                          </div>\n                          <div className=\"p-3 border rounded-md\">\n                              <p className=\"text-xs font-bold\">Responsable del Trabajo</p>\n                              <Input \n                                placeholder=\"Nombre\" \n                                value={anexoConfinado.cierre.responsable?.nombre || ''} \n                                onChange={(e) => handleDeepNestedChange('cierre', 'responsable', 'nombre', e.target.value)} \n                              />\n                              <Input \n                                type=\"date\" \n                                className=\"mt-2\" \n                                value={anexoConfinado.cierre.responsable?.fecha || ''} \n                                onChange={(e) => handleDeepNestedChange('cierre', 'responsable', 'fecha', e.target.value)} \n                              />\n                              <Button \n                                variant=\"outline\" \n                                size=\"sm\" \n                                className=\"w-full mt-2\" \n                                onClick={() => openSignatureDialog('cierre.responsable', 'firma')}\n                              >\n                                <Signature className=\"mr-2\"/>Firmar Cierre\n                              </Button>\n                              {anexoConfinado.cierre.responsable?.firma && (\n                                <img \n                                  src={anexoConfinado.cierre.responsable.firma} \n                                  alt=\"Firma\" \n                                  className=\"mt-2 border rounded-md max-h-20\" \n                                />\n                              )}\n                          </div>\n                      </div>\n                  )}\n              </div>\n          </div>\n      </SectionWrapper>\n\n    </div>\n    <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Registrar Firma</DialogTitle>\n        </DialogHeader>\n        <SignaturePad onSave={handleSaveSignature} />\n      </DialogContent>\n    </Dialog>\n    </>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6276, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoEnergiaStep.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField = ({ id, label, value, onChange }: { id: string; label: string; value: string; onChange: (value: string) => void; }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\n\nexport function AnexoEnergiaStep() {\n    const { state, dispatch } = usePermitForm();\n    const { generalInfo, anexoEnergias } = state;\n\n    const handleFieldChange = (section: string, field: string, value: any) => {\n        const currentSection = (anexoEnergias as any)[section] || {};\n        dispatch({\n            type: 'UPDATE_ANEXO_ENERGIA',\n            payload: {\n                [section]: { ...currentSection, [field]: value }\n            }\n        });\n    };\n\n    const handleCheckboxGroupChange = (section: string, field: string, checked: boolean) => {\n        const currentSection = (anexoEnergias as any)[section] || {};\n        handleFieldChange(section, field, checked);\n    };\n    \n    const handleInputChange = (field: string, value: string) => {\n         dispatch({\n            type: 'UPDATE_ANEXO_ENERGIA',\n            payload: { [field]: value }\n        });\n    }\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n                    Anexo de Trabajos con Energías\n                </h2>\n                <p className=\"text-muted-foreground text-sm\">\n                    Complete la información requerida para trabajos con energías peligrosas.\n                </p>\n            </div>\n\n            <SectionWrapper title=\"Información General\" defaultOpen>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n                    <div><Label>Área de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n                    <div><Label>Equipo o Área Específica:</Label><Input value={generalInfo.proceso || ''} readOnly disabled /></div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n                    <div><Label>Responsable (Nombre):</Label><Input value={generalInfo.responsable?.nombre || ''} readOnly disabled /></div>\n                    <div><Label>Cargo:</Label><Input value={generalInfo.responsable?.cargo || ''} readOnly disabled /></div>\n                    <div><Label>Compañía:</Label><Input value={generalInfo.responsable?.compania || ''} readOnly disabled /></div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                    <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoEnergias?.emergencia?.contacto || ''} onChange={(e) => handleFieldChange('emergencia', 'contacto', e.target.value)} /></div>\n                    <div><Label>Teléfono:</Label><Input value={anexoEnergias?.emergencia?.telefono || ''} onChange={(e) => handleFieldChange('emergencia', 'telefono', e.target.value)} /></div>\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajos en Caliente\">\n                <div className=\"space-y-3\">\n                    <RadioGroupField id=\"distanciaSeguridad\" label=\"A.- Regla de distancia de seguridad de 11 m de materiales combustibles e inflamables\" value={anexoEnergias?.trabajosEnCaliente?.distanciaSeguridad as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'distanciaSeguridad', value)} />\n                    <RadioGroupField id=\"medicionAtmosfera\" label=\"B.- Medición de atmósfera explosiva (uso de medidor de atmósferas)\" value={anexoEnergias?.trabajosEnCaliente?.medicionAtmosfera as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'medicionAtmosfera', value)} />\n                    <RadioGroupField id=\"aislarArea\" label=\"C.- Aislar el área de trabajo por medio de biombos, lonas, mamparas\" value={anexoEnergias?.trabajosEnCaliente?.aislarArea as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'aislarArea', value)} />\n                    <RadioGroupField id=\"taparAberturas\" label=\"D.- Tapar toda abertura existente a fin de impedir dispersión de chispas\" value={anexoEnergias?.trabajosEnCaliente?.taparAberturas as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'taparAberturas', value)} />\n                    <RadioGroupField id=\"extintores\" label=\"E.- Extintores portátiles en el área de trabajo\" value={anexoEnergias?.trabajosEnCaliente?.extintores as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'extintores', value)} />\n                    <RadioGroupField id=\"vigiaFuego\" label=\"F - Vigía o supervisor de fuego de incendio\" value={anexoEnergias?.trabajosEnCaliente?.vigiaFuego as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'vigiaFuego', value)} />\n                    <RadioGroupField id=\"personalCapacitado\" label=\"G - Personal capacitado, competente y entrenado\" value={anexoEnergias?.trabajosEnCaliente?.personalCapacitado as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'personalCapacitado', value)} />\n                    <RadioGroupField id=\"listasChequeo\" label=\"H - Listas de chequeo pre-operacional de equipos\" value={anexoEnergias?.trabajosEnCaliente?.listasChequeo as string} onChange={(value) => handleFieldChange('trabajosEnCaliente', 'listasChequeo', value)} />\n                    <div className=\"flex items-center gap-2 pt-2\"><Label htmlFor=\"calienteOtro\">Otro (Cual):</Label><Input id=\"calienteOtro\" value={anexoEnergias?.trabajosEnCaliente?.otro as string || ''} onChange={(e) => handleFieldChange('trabajosEnCaliente', 'otro', e.target.value)} /></div>\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajos con Energías Peligrosas\">\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n                    {['mecanica', 'neumatica', 'hidraulica', 'agua', 'vapor', 'termica', 'quimica'].map(id => (\n                        <div key={id} className=\"flex items-center space-x-2\">\n                            <Checkbox id={`energia_${id}`} checked={(anexoEnergias?.energiasPeligrosas?.[id] as boolean) || false} onCheckedChange={(checked) => handleCheckboxGroupChange('energiasPeligrosas', id, !!checked)} />\n                            <Label htmlFor={`energia_${id}`} className=\"capitalize\">{id}</Label>\n                        </div>\n                    ))}\n                </div>\n                <div className=\"flex items-center gap-2 mb-6\"><Label htmlFor=\"energiaOtra\">Otra:</Label><Input id=\"energiaOtra\" value={anexoEnergias?.energiasPeligrosas?.otra as string || ''} onChange={(e) => handleFieldChange('energiasPeligrosas', 'otra', e.target.value)} /></div>\n\n                <div className=\"space-y-3\">\n                    <RadioGroupField id=\"procedimientoLOTO\" label=\"A.- Se cuenta procedimiento LO/TO\" value={anexoEnergias?.procedimientoLOTO?.procedimientoLOTO as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'procedimientoLOTO', value)} />\n                    <RadioGroupField id=\"identificadoFuentes\" label=\"B.- Se han identificado las fuentes de energía\" value={anexoEnergias?.procedimientoLOTO?.identificadoFuentes as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'identificadoFuentes', value)} />\n                    <RadioGroupField id=\"purgadoLimpieza\" label=\"C.- Purgado o limpieza del sistema\" value={anexoEnergias?.procedimientoLOTO?.purgadoLimpieza as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'purgadoLimpieza', value)} />\n                    <RadioGroupField id=\"corteVisible\" label=\"1. Corte visible de fuentes de energía\" value={anexoEnergias?.procedimientoLOTO?.corteVisible as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'corteVisible', value)} />\n                    <RadioGroupField id=\"instalarBloqueo\" label=\"2. Instalar dispositivos de bloqueo y tarjeta de bloqueo.\" value={anexoEnergias?.procedimientoLOTO?.instalarBloqueo as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'instalarBloqueo', value)} />\n                    <RadioGroupField id=\"disiparEnergia\" label=\"4. Disipar cualquier tipo de energía (puesta a tierra y en cortocircuito).\" value={anexoEnergias?.procedimientoLOTO?.disiparEnergia as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'disiparEnergia', value)} />\n                    <RadioGroupField id=\"verificarAusencia\" label=\"3. Verificar ausencia de fuentes de energía\" value={anexoEnergias?.procedimientoLOTO?.verificarAusencia as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'verificarAusencia', value)} />\n                    <RadioGroupField id=\"senalizarZona\" label=\"5. Señalizar y delimitar zona de trabajo.\" value={anexoEnergias?.procedimientoLOTO?.senalizarZona as string} onChange={(value) => handleFieldChange('procedimientoLOTO', 'senalizarZona', value)} />\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajos con Energía Eléctrica\">\n                <Table>\n                    <TableHeader>\n                        <TableRow>\n                            <TableHead>Nivel de Tensión</TableHead>\n                            <TableHead>Límite de aproximación seguro</TableHead>\n                            <TableHead>Límite de aproximación restringido</TableHead>\n                            <TableHead>Límite de aproximación técnico</TableHead>\n                        </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                        <TableRow><TableCell>0 V - 50 V</TableCell><TableCell>3,0 m</TableCell><TableCell>Evitar contacto</TableCell><TableCell>Evitar contacto</TableCell></TableRow>\n                        <TableRow><TableCell>51 V - 300 V</TableCell><TableCell>3,0 m</TableCell><TableCell>1,0 m</TableCell><TableCell>Evitar contacto</TableCell></TableRow>\n                        <TableRow><TableCell>301 V - 750 V</TableCell><TableCell>3,0 m</TableCell><TableCell>1,0 m</TableCell><TableCell>0,3 m</TableCell></TableRow>\n                        <TableRow><TableCell>751 V - 15 kV</TableCell><TableCell>3,0 m</TableCell><TableCell>1,5 m</TableCell><TableCell>0,6 m</TableCell></TableRow>\n                        <TableRow><TableCell>15,1 kV - 36 kV</TableCell><TableCell>3,0 m</TableCell><TableCell>1,8 m</TableCell><TableCell>0,7 m</TableCell></TableRow>\n                        <TableRow><TableCell>36,1 kV - 72,5 kV</TableCell><TableCell>3,0 m</TableCell><TableCell>2,5 m</TableCell><TableCell>0,8 m</TableCell></TableRow>\n                        <TableRow><TableCell>72,6 kV - 145 kV</TableCell><TableCell>3,0 m</TableCell><TableCell>3,0 m</TableCell><TableCell>1,0 m</TableCell></TableRow>\n                    </TableBody>\n                </Table>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Tensión a la cual el personal estará expuesto\">\n                 <div className=\"space-y-3\">\n                    <RadioGroupField id=\"muyBajaTension\" label=\"Muy baja tensión (Tensiones menores de 25 V).\" value={anexoEnergias?.tensionExpuesta?.muyBaja as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'muyBaja', value)} />\n                    <RadioGroupField id=\"bajaTension\" label=\"Baja tensión (Tensión nominal mayor o igual 25 V y menor o igual a 1000 V).\" value={anexoEnergias?.tensionExpuesta?.baja as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'baja', value)} />\n                    <RadioGroupField id=\"mediaTension\" label=\"Media tensión (Tensión nominal superior a 1000 V e inferior a 57,5 kV).\" value={anexoEnergias?.tensionExpuesta?.media as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'media', value)} />\n                    <RadioGroupField id=\"altaTension\" label=\"Alta tensión (Tensiones mayores o iguales a 57,5 kV y menores o iguales a 230 kV).\" value={anexoEnergias?.tensionExpuesta?.alta as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'alta', value)} />\n                    <RadioGroupField id=\"extraAltaTension\" label=\"Extra alta tensión (Tensiones superiores a 230kV)\" value={anexoEnergias?.tensionExpuesta?.extraAlta as string} onChange={(value) => handleFieldChange('tensionExpuesta', 'extraAlta', value)} />\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Planeación\">\n                <div className=\"space-y-3\">\n                    <RadioGroupField id=\"personalHabilitado\" label=\"Personal habilitado, certificado de competencia laboral vigente (Conte, Conaltel, Matrícula profesional)\" value={anexoEnergias?.planeacion?.personalHabilitado as string} onChange={(value) => handleFieldChange('planeacion', 'personalHabilitado', value)} />\n                    <RadioGroupField id=\"viabilidadTecnica\" label=\"El personal habilitado evalúa la viabilidad técnica (visita previa) y el riesgo asociado para las personas y para el sistema, cumpliendo las etapas de diagnóstico, planeación y ejecución de trabajos.\" value={anexoEnergias?.planeacion?.viabilidadTecnica as string} onChange={(value) => handleFieldChange('planeacion', 'viabilidadTecnica', value)} />\n                    <RadioGroupField id=\"noSimultaneo\" label=\"No se realizan trabajos simultáneos sin y con tensión por el mismo trabajador en la misma área de trabajo.\" value={anexoEnergias?.planeacion?.noSimultaneo as string} onChange={(value) => handleFieldChange('planeacion', 'noSimultaneo', value)} />\n                    <RadioGroupField id=\"autorizacionMantenimiento\" label=\"Autorización del área de mantenimiento\" value={anexoEnergias?.planeacion?.autorizacionMantenimiento as string} onChange={(value) => handleFieldChange('planeacion', 'autorizacionMantenimiento', value)} />\n                    <RadioGroupField id=\"revisionInfo\" label=\"Revisión de información técnica del sistema (diagrama unifilar, planos)\" value={anexoEnergias?.planeacion?.revisionInfo as string} onChange={(value) => handleFieldChange('planeacion', 'revisionInfo', value)} />\n                    <RadioGroupField id=\"procedimientoNormalizado\" label=\"Se cuenta con un procedimiento normalizado para realizar la actividad y ATS\" value={anexoEnergias?.planeacion?.procedimientoNormalizado as string} onChange={(value) => handleFieldChange('planeacion', 'procedimientoNormalizado', value)} />\n                    <RadioGroupField id=\"supervisionControl\" label=\"Se realizar supervisión y control en el sitio de trabajo considerando en forma prioritaria la detección y el control de los riesgos, vigilando el cumplimiento estricto de las normas y procedimientos de seguridad aplicables\" value={anexoEnergias?.planeacion?.supervisionControl as string} onChange={(value) => handleFieldChange('planeacion', 'supervisionControl', value)} />\n                </div>\n                <div className=\"mt-6\">\n                    <Label>Método de trabajo</Label>\n                    <div className=\"flex gap-4 p-4 border rounded-md\">\n                        <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoSinTension\" checked={anexoEnergias?.metodoTrabajo?.sinTension || false} onCheckedChange={(checked) => handleFieldChange('metodoTrabajo', 'sinTension', !!checked)} /><Label htmlFor=\"metodoSinTension\">Sin tensión</Label></div>\n                        <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoConTension\" checked={anexoEnergias?.metodoTrabajo?.conTension || false} onCheckedChange={(checked) => handleFieldChange('metodoTrabajo', 'conTension', !!checked)} /><Label htmlFor=\"metodoConTension\">Con tensión</Label></div>\n                    </div>\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajo con Tensión (TCT) - igual o superior a 25 voltios\">\n                <div className=\"flex items-center space-x-2 mb-4\">\n                    <Checkbox id=\"trabajoConTensionCheck\" checked={anexoEnergias?.trabajoConTension?.trabajoConTensionCheck as boolean} onCheckedChange={(checked) => handleFieldChange('trabajoConTension', 'trabajoConTensionCheck', !!checked)} />\n                    <Label htmlFor=\"trabajoConTensionCheck\">Trabajo con tensión - TCT, igual o superior a 25 voltios</Label>\n                </div>\n                 {(anexoEnergias?.trabajoConTension?.trabajoConTensionCheck) && <div className=\"space-y-3\">\n                    <Label>Método de trabajo</Label>\n                    <div className=\"flex gap-4 p-4 border rounded-md\">\n                       <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoAPotencial\" checked={anexoEnergias?.trabajoConTension?.aPotencial as boolean} onCheckedChange={(checked) => handleFieldChange('trabajoConTension', 'aPotencial', !!checked)} /><Label htmlFor=\"metodoAPotencial\">A potencial</Label></div>\n                       <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoADistancia\" checked={anexoEnergias?.trabajoConTension?.aDistancia as boolean} onCheckedChange={(checked) => handleFieldChange('trabajoConTension', 'aDistancia', !!checked)} /><Label htmlFor=\"metodoADistancia\">A distancia</Label></div>\n                       <div className=\"flex items-center space-x-2\"><Checkbox id=\"metodoAContacto\" checked={anexoEnergias?.trabajoConTension?.aContacto as boolean} onCheckedChange={(checked) => handleFieldChange('trabajoConTension', 'aContacto', !!checked)} /><Label htmlFor=\"metodoAContacto\">A contacto</Label></div>\n                    </div>\n                    <RadioGroupField id=\"respetarDistancias\" label=\"Respetar distancias mínimas de seguridad con base en lo establecido en RETIE tablas 13.7, 13.8 y 18.1 (Límite de aproximación seguro, restringido, técnico).\" value={anexoEnergias?.trabajoConTension?.respetarDistancias as string} onChange={(value) => handleFieldChange('trabajoConTension', 'respetarDistancias', value)} />\n                    <RadioGroupField id=\"usoEppTCT\" label=\"Uso de EPP especifico para trabajos con circuitos energizados...\" value={anexoEnergias?.trabajoConTension?.usoEpp as string} onChange={(value) => handleFieldChange('trabajoConTension', 'usoEpp', value)} />\n                </div>}\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Trabajo sin Tensión\">\n                 <div className=\"space-y-3\">\n                    <RadioGroupField id=\"trabajoSinTensionCheck\" label=\"Trabajo sin tensión\" value={anexoEnergias?.trabajoSinTension?.trabajoSinTensionCheck as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'trabajoSinTensionCheck', value)} />\n                    <RadioGroupField id=\"analizarFuentes\" label=\"Analizar fuentes de energía (fichas y diagrama de bloqueo).\" value={anexoEnergias?.trabajoSinTension?.analizarFuentes as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'analizarFuentes', value)} />\n                    <RadioGroupField id=\"comprobarNadieExpuesto\" label=\"Comprobar que nadie este expuesto a peligros.\" value={anexoEnergias?.trabajoSinTension?.comprobarNadieExpuesto as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'comprobarNadieExpuesto', value)} />\n                    <RadioGroupField id=\"aplicarLOTO\" label=\"Aplicar procedimiento de bloqueo y aislamiento de energías, (Anexo 3). Hasta tanto no se haya aplicado a cabalidad las 5 reglas de oro y durante la aplicación de las mismas, se debe considerar el sistema energizado y cumplir los controles establecidos para sistemas energizados.\" value={anexoEnergias?.trabajoSinTension?.aplicarLOTO as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'aplicarLOTO', value)} />\n                    <RadioGroupField id=\"usoEppSinTension\" label=\"Uso de EPP especifico para trabajos con circuitos energizados (aplica durante aplicación de 5 reglas de oro)...\" value={anexoEnergias?.trabajoSinTension?.usoEpp as string} onChange={(value) => handleFieldChange('trabajoSinTension', 'usoEpp', value)} />\n                 </div>\n            </SectionWrapper>\n             <div className=\"mt-4\">\n                <Label>OBSERVACIONES / SUPERVISIÓN DEL TRABAJO CON ALGÚN TIPO DE ENERGÍA</Label>\n                <Input value={anexoEnergias?.observaciones || ''} onChange={(e) => handleInputChange('observaciones', e.target.value)} />\n            </div>\n\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7839, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoIzajeStep.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown, Signature } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport type { AutorizacionPersona, ValidacionDiaria } from '@/types';\nimport { Textarea } from '@/components/ui/textarea';\nimport Image from 'next/image';\n\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField: React.FC<{ id: string; label: string; value: string; onChange: (value: string) => void; }> = ({ id, label, value, onChange }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\nconst accionRealizarOptions = [\n    { id: 'levantar', label: 'Levantar' },\n    { id: 'trasladar', label: 'Trasladar' },\n    { id: 'montar', label: 'Montar' },\n    { id: 'desmontar', label: 'Desmontar' },\n    { id: 'cargar', label: 'Cargar' },\n    { id: 'descargar', label: 'Descargar' },\n];\n\nconst pesoCargaOptions = [\n    { id: 'menor1000', label: 'Menor a 1000 kg' },\n    { id: 'entre1000y2000', label: 'Entre 1000 kg y 2000 kg' },\n    { id: 'entre2000y3000', label: 'Entre 2000 kg y 3000 kg' },\n    { id: 'entre3000y4000', label: 'Entre 3000 kg y 4000 kg' },\n    { id: 'entre4000y5000', label: 'Entre 4000 kg y 5000 kg' },\n    { id: 'mas5000', label: 'Mas de 5000' },\n];\n\nconst equipoUtilizarOptions = [\n    { id: 'montacargas', label: 'Montacargas' },\n    { id: 'camionGrua', label: 'Camión Grúa' },\n    { id: 'gruaMovil', label: 'Grúa Móvil' },\n    { id: 'torreGrua', label: 'Torre Grúa' },\n    { id: 'retroexcavadora', label: 'Retroexcavadora' },\n    { id: 'telehandler', label: 'Telehandler' },\n];\n\nconst aspectosRequeridos = [\n    { id: 'terrenoEstabilizado', label: 'A. Está estabilizado el terreno donde se encuentra el equipo de izaje.' },\n    { id: 'operadorVisualiza', label: 'B. El operador visualiza bien la carga y la operación que va a realizar.' },\n    { id: 'calculoTecnico', label: 'C. Se calculo tecnicamente la maniobra. (Se cuenta con plan de izaje de cargas).' },\n    { id: 'areaSenalizada', label: 'D. Se encuentra señalizada y demarcada el área de trabajo.' },\n    { id: 'capacidadVerificada', label: 'E. Se verifico la capacidad de cargue del equipo de izaje.' },\n    { id: 'curiososRetirados', label: 'F. Se retiraron los curiosos del área de izaje y del radio del equipo de izaje.' },\n    { id: 'comunicacionClara', label: 'G. Existe comunicación clara entre el operador, el encargado de la actividad y quienes participan en ella.' },\n    { id: 'atsRealizado', label: 'H. Se realizo el ATS (Analisis de Trabajo Seguro) para la ejecución de la actividad.' },\n    { id: 'elementosBuenEstado', label: 'I. Se encuentran en buen estado las eslingas, aparejos y demás elementos de sujeción o accesorios de izaje.' },\n    { id: 'polinesBuenEstado', label: 'J. Los polines para nivelación de las grúas están en buen estado.' },\n    { id: 'polinesEstables', label: 'K. Los polines quedan estables con respecto al terreno.' },\n    { id: 'areaDespejada', label: 'L. Está dispuesta y despejada el área donde se colocarán los elementos a izar.' },\n    { id: 'noPersonasBajoCarga', label: 'M. No existen personas bajo la carga izada.' },\n    { id: 'areaMovimientoEvaluada', label: 'N. Se evaluó el área donde se va a llevar la carga izada y el área de movimiento de la carga.' },\n    { id: 'distanciaRedesElectricas', label: 'O. La actividad esta realizándose con la distancia de redes électricas recomendada?' },\n    { id: 'condicionesClimaticas', label: 'P. Las condiciones climiticas son buenas para la realización de la actividad?' },\n    { id: 'equipoTierra', label: 'Q. El equipo tiene conexión a tierra?' },\n    { id: 'sinMaterialCaida', label: 'R. Se verifico que no halla ningun material que pudiera caer arriba de la carga al ser izada?' },\n    { id: 'senalizadorCapacitado', label: 'S. Hay un señalizador capacitado y entrenado para la actividad?' },\n    { id: 'colaboradoresAfiliados', label: 'T. Se verifico que los colaboradores estén afiliados al Sistema de Seguridad Social (EPS, ARL, AFP).' },\n];\n\nconst precaucionesControles = [\n    { id: 'inspeccionGrua', label: 'INSPECCIÓN GRÚA/APAREJOS' },\n    { id: 'vigiaLineasElectricas', label: 'VIGÍA PARA LÍNEAS ELÉCTRICAS' },\n    { id: 'capacidadVsCarga', label: 'CAPACIDAD VS CARGA & LMI' },\n    { id: 'apoyoTerreno', label: 'APOYO DEL TERRENO' },\n    { id: 'certificacionOperador', label: 'CERTIFICACIÓN OPERADOR-RIGGER' },\n    { id: 'comunicacionRadialLuminica', label: 'COMUNICACIÓN RADIAL/LUMÍNICA' },\n    { id: 'planIzaje', label: 'PLAN DE IZAJE' },\n    { id: 'planRescate', label: 'PLAN DE RESCATE' },\n    { id: 'senalizacionDemarcacion', label: 'SEÑALIZACIÓN Y DEMARCACION AREA' },\n    { id: 'eppObligatorio', label: 'EPP OBLIGATORIO' },\n    { id: 'estabilizadoresTerreno', label: 'ESTABILIZADORES & TERRENO' },\n    { id: 'climaSeguro', label: 'CLIMA SEGURO' },\n];\n\nexport function AnexoIzajeStep() {\n    const { state, dispatch } = usePermitForm();\n    const { generalInfo, anexoIzaje } = state;\n    const [isSignatureDialogOpen, setIsSignatureDialogOpen] = React.useState(false);\n    const [signingTarget, setSigningTarget] = React.useState<{ section: string; field?: string; index?: number } | null>(null);\n\n    const handleUpdate = (payload: any) => {\n        dispatch({ type: 'UPDATE_ANEXO_IZAJE', payload });\n    };\n\n    const handleNestedChange = (section: keyof typeof anexoIzaje, field: string, value: any) => {\n        handleUpdate({ [section]: { ...(anexoIzaje as any)[section], [field]: value } });\n    };\n    \n    const handleCheckboxGroupChange = (section: 'informacionGeneral', subSection: 'accion' | 'pesoCarga' | 'equipoUtilizar', field: string, value: boolean) => {\n        const currentSubSection = (anexoIzaje[section] as any)?.[subSection] || {};\n        handleNestedChange(section, subSection, { ...currentSubSection, [field]: value });\n    };\n\n    const handleListChange = (section: 'validacion', list: 'autoridad' | 'responsable', index: number, field: keyof ValidacionDiaria, value: string) => {\n        const currentList = [...((anexoIzaje[section] as any)?.[list] || [])];\n        currentList[index] = { ...currentList[index], [field]: value };\n        handleNestedChange(section, list, currentList);\n    };\n\n    React.useEffect(() => {\n        if (!anexoIzaje.validacion || !anexoIzaje.validacion.autoridad || anexoIzaje.validacion.autoridad.length === 0) {\n            const authorityValidation = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n            const responsibleValidation = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n            handleUpdate({ validacion: { autoridad: authorityValidation, responsable: responsibleValidation } });\n        }\n    }, [anexoIzaje.validacion]);\n\n    const openSignatureDialog = (section: any, field?: string, index?: number) => {\n        setSigningTarget({ section, field, index });\n        setIsSignatureDialogOpen(true);\n    };\n\n    const handleSaveSignature = (signature: string) => {\n        if (!signingTarget) return;\n        const { section, field, index } = signingTarget;\n    \n        if (section.startsWith('validacion.')) {\n            const [valSection, list] = section.split('.');\n            handleListChange(valSection as 'validacion', list as 'autoridad' | 'responsable', index!, 'firma', signature);\n        } else if (section.startsWith('cierre.')) {\n            const [cierreSection, subSection] = section.split('.');\n            handleNestedChange('cierre', subSection, { ...((anexoIzaje.cierre as any)?.[subSection] || {}), firma: signature });\n        } else if (section === 'cancelacion') {\n             handleNestedChange('cancelacion', 'firma', signature);\n        } else {\n             handleNestedChange(section as any, 'firma', signature);\n        }\n        \n        setIsSignatureDialogOpen(false);\n    };\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">Anexo de Izaje de Cargas</h2>\n                <p className=\"text-muted-foreground text-sm\">Complete la información requerida para el izaje de cargas.</p>\n            </div>\n\n            <SectionWrapper title=\"Información General del Anexo\" defaultOpen>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n                    <div><Label>Área de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n                </div>\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                    <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoIzaje.emergencia?.contacto || ''} onChange={(e) => handleNestedChange('emergencia', 'contacto', e.target.value)} /></div>\n                    <div><Label>Teléfono:</Label><Input value={anexoIzaje.emergencia?.telefono || ''} onChange={(e) => handleNestedChange('emergencia', 'telefono', e.target.value)} /></div>\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Información de la Carga y Equipo\">\n                 <div className=\"space-y-4\">\n                    <div>\n                        <Label className=\"font-semibold\">Acción a Realizar</Label>\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                            {accionRealizarOptions.map(o => (\n                                <div key={o.id} className=\"flex items-center gap-2\"><Checkbox id={`accion-${o.id}`} checked={anexoIzaje.informacionGeneral?.accion?.[o.id] || false} onCheckedChange={(c) => handleCheckboxGroupChange('informacionGeneral', 'accion', o.id, !!c)} /><Label htmlFor={`accion-${o.id}`}>{o.label}</Label></div>\n                            ))}\n                        </div>\n                    </div>\n                     <div>\n                        <Label className=\"font-semibold\">Peso de la Carga</Label>\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                             {pesoCargaOptions.map(o => (\n                                <div key={o.id} className=\"flex items-center gap-2\"><Checkbox id={`peso-${o.id}`} checked={anexoIzaje.informacionGeneral?.pesoCarga?.[o.id] || false} onCheckedChange={(c) => handleCheckboxGroupChange('informacionGeneral', 'pesoCarga', o.id, !!c)} /><Label htmlFor={`peso-${o.id}`}>{o.label}</Label></div>\n                            ))}\n                        </div>\n                    </div>\n                     <div>\n                        <Label className=\"font-semibold\">Equipo a Utilizar</Label>\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                             {equipoUtilizarOptions.map(o => (\n                                <div key={o.id} className=\"flex items-center gap-2\"><Checkbox id={`equipo-${o.id}`} checked={anexoIzaje.informacionGeneral?.equipoUtilizar?.[o.id] || false} onCheckedChange={(c) => handleCheckboxGroupChange('informacionGeneral', 'equipoUtilizar', o.id, !!c)} /><Label htmlFor={`equipo-${o.id}`}>{o.label}</Label></div>\n                            ))}\n                        </div>\n                    </div>\n                    <div>\n                        <Label htmlFor=\"capacidadEquipo\" className=\"font-semibold\">Capacidad del Equipo</Label>\n                        <Input id=\"capacidadEquipo\" value={anexoIzaje.informacionGeneral?.capacidadEquipo || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'capacidadEquipo', e.target.value)} />\n                    </div>\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Aspectos Requeridos para Realizar Izaje\">\n                <div className=\"space-y-2\">\n                    {aspectosRequeridos.map(a => (\n                        <RadioGroupField key={a.id} id={`aspecto-${a.id}`} label={a.label} value={anexoIzaje.aspectosRequeridos?.[a.id] || 'na'} onChange={(v) => handleNestedChange('aspectosRequeridos', a.id, v)} />\n                    ))}\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Precauciones y Controles Específicos\">\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                    {precaucionesControles.map(p => (\n                        <div key={p.id} className=\"flex items-center gap-2\"><Checkbox id={`preca-${p.id}`} checked={anexoIzaje.precauciones?.[p.id] || false} onCheckedChange={(c) => handleNestedChange('precauciones', p.id, !!c)} /><Label htmlFor={`preca-${p.id}`}>{p.label}</Label></div>\n                    ))}\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Autorizaciones\">\n                 <div className=\"space-y-6\">\n                    <div className=\"p-4 border rounded-lg\">\n                        <p className=\"text-sm font-semibold mb-2\">Autoridad del Área</p>\n                        <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Autoridad del Area, estoy enterado del trabajo a realizar y apruebo su ejecucion bajo las medidas de seguridad contempladas en este permiso y sus documentos  complementarios.\"</p>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <Input placeholder=\"Nombre Completo\" value={anexoIzaje.autoridadArea?.nombre || ''} onChange={(e) => handleNestedChange('autoridadArea', 'nombre', e.target.value)} />\n                            <Input type=\"time\" placeholder=\"Hora\" value={anexoIzaje.autoridadArea?.hora || ''} onChange={(e) => handleNestedChange('autoridadArea', 'hora', e.target.value)} />\n                        </div>\n                        <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('autoridadArea')}><Signature className=\"mr-2\"/>Firmar</Button>\n                        {anexoIzaje.autoridadArea?.firma && <img src={anexoIzaje.autoridadArea.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                    </div>\n                    <div className=\"p-4 border rounded-lg\">\n                        <p className=\"text-sm font-semibold mb-2\">Responsable del Trabajo</p>\n                        <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Responsable del Trabajo / Ejecutor, Manifiesto que entiendo el trabajo que voy a realizar y los riesgos asosciados a este, dispongo de los recursos necesarios y  tomare las medidas de seguridad.\"</p>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                             <Input placeholder=\"Nombre Completo\" value={anexoIzaje.responsableTrabajo?.nombre || ''} onChange={(e) => handleNestedChange('responsableTrabajo', 'nombre', e.target.value)} />\n                             <Input type=\"time\" placeholder=\"Hora\" value={anexoIzaje.responsableTrabajo?.hora || ''} onChange={(e) => handleNestedChange('responsableTrabajo', 'hora', e.target.value)} />\n                        </div>\n                        <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('responsableTrabajo')}><Signature className=\"mr-2\"/>Firmar</Button>\n                        {anexoIzaje.responsableTrabajo?.firma && <img src={anexoIzaje.responsableTrabajo.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                    </div>\n                </div>\n            </SectionWrapper>\n             <SectionWrapper title=\"Validación y Cierre\">\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                    <div className=\"p-4 border rounded-lg space-y-2\">\n                        <h4 className=\"font-semibold\">Autoridad del Área</h4>\n                        <p className='text-xs text-muted-foreground'>Entiendo todas las condiciones de este trabajo y la responsabilidad de implementar las medidas de control establecidas.</p>\n                         <Table>\n                            <TableHeader><TableRow><TableHead>Día</TableHead><TableHead>Nombre</TableHead><TableHead>Firma</TableHead><TableHead>Fecha</TableHead></TableRow></TableHeader>\n                            <TableBody>\n                                {(anexoIzaje.validacion?.autoridad || []).map((v, i) => (\n                                    <TableRow key={i}>\n                                        <TableCell>{i + 1}</TableCell>\n                                        <TableCell><Input value={v.nombre} onChange={(e) => handleListChange('validacion', 'autoridad', i, 'nombre', e.target.value)} className=\"h-8\" /></TableCell>\n                                        <TableCell>\n                                            {v.firma ? (\n                                                <Image src={v.firma} alt=\"Firma\" width={60} height={30} className=\"border rounded\"/>\n                                            ) : (\n                                                <Button variant=\"ghost\" size=\"icon\" onClick={() => openSignatureDialog('validacion.autoridad', undefined, i)}><Signature className=\"h-4 w-4\"/></Button>\n                                            )}\n                                        </TableCell>\n                                        <TableCell><Input type=\"date\" value={v.fecha} onChange={(e) => handleListChange('validacion', 'autoridad', i, 'fecha', e.target.value)} className=\"h-8\" /></TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                         </Table>\n                    </div>\n                    <div className=\"p-4 border rounded-lg space-y-2\">\n                        <h4 className=\"font-semibold\">Responsable del Trabajo/Ejecutor</h4>\n                        <p className='text-xs text-muted-foreground'>Entiendo todas las condiciones de este trabajo y la responsabilidad de implementar las medidas de control establecidas.</p>\n                         <Table>\n                            <TableHeader><TableRow><TableHead>Día</TableHead><TableHead>Nombre</TableHead><TableHead>Firma</TableHead><TableHead>Fecha</TableHead></TableRow></TableHeader>\n                            <TableBody>\n                                {(anexoIzaje.validacion?.responsable || []).map((v, i) => (\n                                    <TableRow key={i}>\n                                        <TableCell>{i + 1}</TableCell>\n                                        <TableCell><Input value={v.nombre} onChange={(e) => handleListChange('validacion', 'responsable', i, 'nombre', e.target.value)} className=\"h-8\" /></TableCell>\n                                        <TableCell>\n                                            {v.firma ? (\n                                                <Image src={v.firma} alt=\"Firma\" width={60} height={30} className=\"border rounded\"/>\n                                            ) : (\n                                                <Button variant=\"ghost\" size=\"icon\" onClick={() => openSignatureDialog('validacion.responsable', undefined, i)}><Signature className=\"h-4 w-4\"/></Button>\n                                            )}\n                                        </TableCell>\n                                        <TableCell><Input type=\"date\" value={v.fecha} onChange={(e) => handleListChange('validacion', 'responsable', i, 'fecha', e.target.value)} className=\"h-8\" /></TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                         </Table>\n                    </div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6\">\n                    <div className=\"space-y-4 p-4 border rounded-lg\">\n                        <h3 className=\"font-semibold\">Cancelación del Trabajo</h3>\n                        <RadioGroup value={anexoIzaje.cancelacion?.seCancelo || 'no'} onValueChange={(v) => handleNestedChange('cancelacion', 'seCancelo', v)} className=\"flex gap-4\">\n                            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id=\"cancel-si\" /><Label htmlFor=\"cancel-si\">SI</Label></div>\n                            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id=\"cancel-no\" /><Label htmlFor=\"cancel-no\">NO</Label></div>\n                        </RadioGroup>\n                        {anexoIzaje.cancelacion?.seCancelo === 'si' && (\n                            <div className=\"space-y-3\">\n                                <Textarea placeholder=\"Razón de la cancelación\" value={anexoIzaje.cancelacion.razon || ''} onChange={(e) => handleNestedChange('cancelacion', 'razon', e.target.value)} />\n                                <Input placeholder=\"Nombre de quien cancela\" value={anexoIzaje.cancelacion.nombre || ''} onChange={(e) => handleNestedChange('cancelacion', 'nombre', e.target.value)} />\n                                <Input type=\"date\" value={anexoIzaje.cancelacion.fecha || ''} onChange={(e) => handleNestedChange('cancelacion', 'fecha', e.target.value)} />\n                                <Button variant=\"outline\" className=\"w-full\" onClick={() => openSignatureDialog('cancelacion')}><Signature className=\"mr-2\"/>Firmar Cancelación</Button>\n                                {anexoIzaje.cancelacion?.firma && <img src={anexoIzaje.cancelacion.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                            </div>\n                        )}\n                    </div>\n                     <div className=\"space-y-4 p-4 border rounded-lg\">\n                        <h3 className=\"font-semibold\">Cierre del Permiso</h3>\n                         <RadioGroup value={anexoIzaje.cierre?.seTermino || 'no'} onValueChange={(v) => handleNestedChange('cierre', 'seTermino', v)} className=\"flex gap-4\">\n                            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id=\"cierre-si\" /><Label htmlFor=\"cierre-si\">SI</Label></div>\n                            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id=\"cierre-no\" /><Label htmlFor=\"cierre-no\">NO</Label></div>\n                        </RadioGroup>\n                        {anexoIzaje.cierre?.seTermino === 'si' && (\n                            <div className=\"space-y-3\">\n                                <Textarea placeholder=\"Observaciones de cierre\" value={anexoIzaje.cierre.observaciones || ''} onChange={(e) => handleNestedChange('cierre', 'observaciones', e.target.value)} />\n                                <div className=\"p-3 border rounded-md\">\n                                    <p className=\"text-xs font-bold\">Autoridad del Área</p>\n                                    <Input placeholder=\"Nombre\" value={anexoIzaje.cierre.autoridad?.nombre || ''} onChange={(e) => handleNestedChange('cierre', 'autoridad', { ...anexoIzaje.cierre.autoridad, nombre: e.target.value })} />\n                                    <Input type=\"date\" className=\"mt-2\" value={anexoIzaje.cierre.autoridad?.fecha || ''} onChange={(e) => handleNestedChange('cierre', 'autoridad', { ...anexoIzaje.cierre.autoridad, fecha: e.target.value })} />\n                                    <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => openSignatureDialog('cierre.autoridad')}><Signature className=\"mr-2\"/>Firmar Cierre</Button>\n                                    {anexoIzaje.cierre.autoridad?.firma && <img src={anexoIzaje.cierre.autoridad.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                                </div>\n                                <div className=\"p-3 border rounded-md\">\n                                    <p className=\"text-xs font-bold\">Responsable del Trabajo</p>\n                                    <Input placeholder=\"Nombre\" value={anexoIzaje.cierre.responsable?.nombre || ''} onChange={(e) => handleNestedChange('cierre', 'responsable', { ...anexoIzaje.cierre.responsable, nombre: e.target.value })} />\n                                    <Input type=\"date\" className=\"mt-2\" value={anexoIzaje.cierre.responsable?.fecha || ''} onChange={(e) => handleNestedChange('cierre', 'responsable', { ...anexoIzaje.cierre.responsable, fecha: e.target.value })} />\n                                    <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => openSignatureDialog('cierre.responsable')}><Signature className=\"mr-2\"/>Firmar Cierre</Button>\n                                    {anexoIzaje.cierre.responsable?.firma && <img src={anexoIzaje.cierre.responsable.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                </div>\n             </SectionWrapper>\n            \n            <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n                <DialogContent>\n                    <DialogHeader><DialogTitle>Registrar Firma</DialogTitle></DialogHeader>\n                    <SignaturePad onSave={handleSaveSignature} />\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 9684, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/AnexoExcavacionesStep.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown, Signature } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { SignaturePad } from '@/components/ui/signature-pad';\nimport type { ValidacionDiaria } from '@/types';\nimport { Textarea } from '@/components/ui/textarea';\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField: React.FC<{ id: string; label: string; value: string; onChange: (value: string) => void; }> = ({ id, label, value, onChange }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\nconst aspectosRequeridos = [\n    { id: 'sistemasEnterrados', label: 'A. SE HAN IDENTIFICADO PLENAMENTO TODOS LOS SISTEMAS ENTERRADOS PRESENTES EN EL AREA (TUBERIAS, BANCO DE DUCTOS, MALLAS A TIERRA, ETC.)' },\n    { id: 'metodoExcavacion', label: 'B. SE HA DETERMINADO EL METODO DE EXCAVACION Y SE VERIFICO EL ESTADO DE LOS EQUIPOS Y HERRAMIENTAS' },\n    { id: 'ejecutantesEntrenados', label: 'C. ESTÁN LOS EJECUTANTES ENTRENADOS Y CONOCEN LOS RIESGOS A LOS QUE ESTAN EXPUESTOS. ESTAN INCLUIDOS Y DIVULGADOS' },\n    { id: 'controlesDeterminados', label: 'D. SE HAN DETERMINADO LOS CONTROLES, SISTEMAS DE ENTIBADO INGRESO Y SALIDA, ESCALONAMIENTO PARA EXCAVACIONES >1,20 MTS DE PROFUNDIDAD' },\n    { id: 'areaDelimitada', label: 'E. ESTA DELIMITADA Y SEÑALIZADA EL AREA DE TRABAJO PARA PREVENIR RIESGOS DE CAIDAS DE PERSONAL O EQUIPOS EN LA EXCAVACION' },\n    { id: 'puentesRequeridos', label: 'F. SE REQUIERE LA CONSTRUCCION DE PUENTES O PASARELAS PARA FACILITAR EL PASO DE PERSONAL, VEHICULOS O EQUIPOS SOBRE LA EXCAVACION' },\n    { id: 'materialesRemovidos', label: 'G.LOS MATERIALES RERMOVIDOS DE LA EXCVAVACION, EQUIPOS Y VEHCULOS ESTAN UBICADOS MINIMO A UN METRO (1 MT) DE DEL BORDE DE LA EXCAVACION' },\n    { id: 'escalerasSobresalen', label: 'H. LAS ESCALERAS DE INGRESO Y SALIDA DE LA EXCAVACION SOBRESALE MINIMO 1 METRO DEL BORDE' },\n    { id: 'metodoRelleno', label: 'I. SE TIENE PREVISTO EL METODO DE RELLENO Y CONFORMACION DE LA EXCAVACION UNA VES SE TERMINE EL TRABAJO (ADECUACION DE AREA)' },\n    { id: 'elementosEmergencia', label: 'K. SE CUENTA CON ELEMENTOS PARA ATENCION DE EMERGENCIAS EN EL AREA' },\n    { id: 'planRescate', label: 'L. SE CUENTA CON PLAN DE EMERGENCIA PARA RESCATE' },\n    { id: 'hojasSeguridad', label: 'M. ESTAN DISPONIBLES LAS HOJAS DE SEGURIDAD DE PRODUCTOS QUIMICOS EN CASO DE USARSE.' },\n    { id: 'conexionesPuestaTierra', label: 'N.SE HA VERIFICADO EL ESTADO DE CONEXIONES Y PUESTA A TIERRA DE EQUIPOS Y ELEMENTOS A USAR.' },\n    { id: 'vigiaNecesario', label: 'Ñ.LA CRITICIDAD DE LA ACTIVIDADD Y LAS DIMENSIONES HACEN NECESARIO DISPNER EN EL AREA DE UN VIGIA DE SEGURIDAD' },\n    { id: 'profundidadMaxima', label: 'O.SE VERIFICO LA PROFUNDIDAD MAXIMA DE LA EXCAVACION, CUANDO ESTA SEA > A 1,50 MTS SE APLICARAN LOS REUQEIRMIENTOS PARA TRABAJO EN ALTURAS.' },\n    { id: 'personalSaludable', label: 'P. SE VERICO EL PERSONAL QUE REALIZA EL TRABAJO SE ENCUENTRA EN CONDICIONES ADECUADAS DE SALUD PARA LA ACTIVIDAD' },\n    { id: 'eppVerificado', label: 'Q. SE VERIFICO EL EQUIPO Y ELEMENTOS DE PROTECCION PERSONAL A UTILIZAR' },\n    { id: 'excavacionNoAfecta', label: 'R.SE VERIFICO QUE LA EXCAVACION A REALIZAR NO AFECTE LA ESTABILIDAD O INTEGRIDAD DE EQUIPOS O ESTRUCTURAS.' },\n];\n\nconst precaucionesControles = [\n    { id: 'hacerApiques', label: 'HACER APIQUES' },\n    { id: 'revisarEquipos', label: 'REVISAR EQUIPOS Y HERRAMIENTAS' },\n    { id: 'herramientaNeumatica', label: 'HERRAMIENTA NEUMATICA' },\n    { id: 'entibado', label: 'ENTIBADO' },\n    { id: 'herramientaManual', label: 'HERRAMIENTA MANUAL' },\n    { id: 'escalonarTaludes', label: 'ESCALONAR TALUDES' },\n    { id: 'equipoContraIncendio', label: 'EQUIPO CONTRA INCENDIO' },\n    { id: 'instalarSistemasAcceso', label: 'INSTALAR SISTEMAS ACCESO Y SALIDA' },\n    { id: 'usoEppsEspeciales', label: 'USO DE EPPS ESPECIALES' },\n    { id: 'hojaSeguridadMsds', label: 'HOJA DE SEGURIDAD MSDS' },\n    { id: 'bloqueoEtiquetado', label: 'BLOQUEO Y ETIQUETADO' },\n    { id: 'requiereVigia', label: 'REQUIERE VIGIA' },\n    { id: 'etiquetadoProductosQuimicos', label: 'ETIQUETADO PRODUCTOS QUIMICOS' },\n    { id: 'clasificacionResiduos', label: 'CLASIFICACION DE RESIDUOS' },\n    { id: 'senalizacion', label: 'SEÑALIZACION' },\n    { id: 'recubrirMaterialExcavado', label: 'RECUBRIR MATERIAL EXCAVADO' },\n];\n\nexport function AnexoExcavacionesStep() {\n    const { state, dispatch } = usePermitForm();\n    const { generalInfo, anexoExcavaciones } = state;\n    const [isSignatureDialogOpen, setIsSignatureDialogOpen] = React.useState(false);\n    const [signingTarget, setSigningTarget] = React.useState<{ section: string; field?: string; index?: number } | null>(null);\n\n    const handleUpdate = (payload: any) => {\n        dispatch({ type: 'UPDATE_ANEXO_EXCAVACIONES', payload });\n    };\n\n    const handleNestedChange = (section: keyof typeof anexoExcavaciones, field: string, value: any) => {\n        handleUpdate({ [section]: { ...(anexoExcavaciones as any)[section], [field]: value } });\n    };\n\n    const handleListChange = (section: 'validacion', list: 'autoridad' | 'responsable', index: number, field: keyof ValidacionDiaria, value: string) => {\n        const currentList = [...((anexoExcavaciones[section] as any)?.[list] || [])];\n        currentList[index] = { ...currentList[index], [field]: value };\n        handleNestedChange(section, list, currentList);\n    };\n\n    React.useEffect(() => {\n        if (!anexoExcavaciones.validacion || !anexoExcavaciones.validacion.autoridad || anexoExcavaciones.validacion.autoridad.length === 0) {\n            const authorityValidation = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n            const responsibleValidation = Array(7).fill(0).map((_, i) => ({ dia: i + 1, nombre: '', firma: '', fecha: '' }));\n            handleUpdate({ validacion: { autoridad: authorityValidation, responsable: responsibleValidation } });\n        }\n    }, [anexoExcavaciones.validacion]);\n\n    const openSignatureDialog = (section: any, field?: string, index?: number) => {\n        setSigningTarget({ section, field, index });\n        setIsSignatureDialogOpen(true);\n    };\n\n    const handleSaveSignature = (signature: string) => {\n        if (!signingTarget) return;\n        const { section, field, index } = signingTarget;\n    \n        if (section.startsWith('validacion.')) {\n            const [valSection, list] = section.split('.');\n            handleListChange(valSection as 'validacion', list as 'autoridad' | 'responsable', index!, 'firma', signature);\n        } else if (section.startsWith('cierre.')) {\n            const [cierreSection, subSection] = section.split('.');\n            handleNestedChange('cierre', subSection, { ...((anexoExcavaciones.cierre as any)?.[subSection] || {}), firma: signature });\n        } else if (section === 'cancelacion') {\n             handleNestedChange('cancelacion', 'firma', signature);\n        } else {\n             handleNestedChange(section as any, 'firma', signature);\n        }\n        \n        setIsSignatureDialogOpen(false);\n    };\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">Anexo de Excavaciones</h2>\n                <p className=\"text-muted-foreground text-sm\">Complete la información requerida para la excavación.</p>\n            </div>\n\n            <SectionWrapper title=\"Información General del Anexo\" defaultOpen>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div><Label>Emitido por:</Label><Input value={generalInfo.nombreSolicitante || ''} readOnly disabled /></div>\n                    <div><Label>Área de Trabajo:</Label><Input value={generalInfo.areaEspecifica || ''} readOnly disabled /></div>\n                </div>\n                 <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                    <div><Label>En caso de emergencia contactar a:</Label><Input value={anexoExcavaciones.emergencia?.contacto || ''} onChange={(e) => handleNestedChange('emergencia', 'contacto', e.target.value)} /></div>\n                    <div><Label>Teléfono:</Label><Input value={anexoExcavaciones.emergencia?.telefono || ''} onChange={(e) => handleNestedChange('emergencia', 'telefono', e.target.value)} /></div>\n                </div>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4\">\n                    <div><Label>Dimensiones:</Label><Input value={anexoExcavaciones.informacionGeneral?.dimensiones || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'dimensiones', e.target.value)} /></div>\n                    <div><Label>Profundidad:</Label><Input value={anexoExcavaciones.informacionGeneral?.profundidad || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'profundidad', e.target.value)} /></div>\n                    <div><Label>Ancho:</Label><Input value={anexoExcavaciones.informacionGeneral?.ancho || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'ancho', e.target.value)} /></div>\n                    <div><Label>Largo:</Label><Input value={anexoExcavaciones.informacionGeneral?.largo || ''} onChange={(e) => handleNestedChange('informacionGeneral', 'largo', e.target.value)} /></div>\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Aspectos Requeridos para Realizar Excavaciones\">\n                <div className=\"space-y-2\">\n                    {aspectosRequeridos.map(a => (\n                        <RadioGroupField key={a.id} id={`aspecto-${a.id}`} label={a.label} value={anexoExcavaciones.aspectosRequeridos?.[a.id] || 'na'} onChange={(v) => handleNestedChange('aspectosRequeridos', a.id, v)} />\n                    ))}\n                </div>\n            </SectionWrapper>\n            \n            <SectionWrapper title=\"Precauciones y Controles Específicos\">\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 p-2 border rounded-md\">\n                    {precaucionesControles.map(p => (\n                        <div key={p.id} className=\"flex items-center gap-2\"><Checkbox id={`preca-${p.id}`} checked={anexoExcavaciones.precauciones?.[p.id] || false} onCheckedChange={(c) => handleNestedChange('precauciones', p.id, !!c)} /><Label htmlFor={`preca-${p.id}`}>{p.label}</Label></div>\n                    ))}\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Autorizaciones\">\n                 <div className=\"space-y-6\">\n                    <div className=\"p-4 border rounded-lg\">\n                        <p className=\"text-sm font-semibold mb-2\">Autoridad del Área</p>\n                        <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Autoridad del Area, estoy enterado del trabajo a realizar y apruebo su ejecucion bajo las medidas de seguridad contempladas en este permiso y sus documentos complementarios.\"</p>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <Input placeholder=\"Nombre Completo\" value={anexoExcavaciones.autoridadArea?.nombre || ''} onChange={(e) => handleNestedChange('autoridadArea', 'nombre', e.target.value)} />\n                            <Input type=\"time\" placeholder=\"Hora\" value={anexoExcavaciones.autoridadArea?.hora || ''} onChange={(e) => handleNestedChange('autoridadArea', 'hora', e.target.value)} />\n                        </div>\n                        <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('autoridadArea')}><Signature className=\"mr-2\"/>Firmar</Button>\n                        {anexoExcavaciones.autoridadArea?.firma && <img src={anexoExcavaciones.autoridadArea.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                    </div>\n                    <div className=\"p-4 border rounded-lg\">\n                        <p className=\"text-sm font-semibold mb-2\">Responsable del Trabajo</p>\n                        <p className=\"text-xs text-muted-foreground mb-4\">\"Al firmar como Responsable del Trabajo / Ejecutor, Manifiesto que entiendo el trabajo que voy a realizar y los riesgos asosciados a este, dispongo de los recursos necesarios y tomare las medidas de seguridad.\"</p>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                             <Input placeholder=\"Nombre Completo\" value={anexoExcavaciones.responsableTrabajo?.nombre || ''} onChange={(e) => handleNestedChange('responsableTrabajo', 'nombre', e.target.value)} />\n                             <Input type=\"time\" placeholder=\"Hora\" value={anexoExcavaciones.responsableTrabajo?.hora || ''} onChange={(e) => handleNestedChange('responsableTrabajo', 'hora', e.target.value)} />\n                        </div>\n                        <Button variant=\"outline\" className=\"w-full mt-4\" onClick={() => openSignatureDialog('responsableTrabajo')}><Signature className=\"mr-2\"/>Firmar</Button>\n                        {anexoExcavaciones.responsableTrabajo?.firma && <img src={anexoExcavaciones.responsableTrabajo.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                    </div>\n                </div>\n            </SectionWrapper>\n             <SectionWrapper title=\"Validación y Cierre\">\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                    <div className=\"p-4 border rounded-lg space-y-2\">\n                        <h4 className=\"font-semibold\">Autoridad del Área</h4>\n                        <p className='text-xs text-muted-foreground'>Entiendo todas las condiciones de este trabajo y la responsabilidad de implementar las medidas de control establecidas.</p>\n                         <Table>\n                            <TableHeader><TableRow><TableHead>Día</TableHead><TableHead>Nombre</TableHead><TableHead>Firma</TableHead><TableHead>Fecha</TableHead></TableRow></TableHeader>\n                            <TableBody>\n                                {(anexoExcavaciones.validacion?.autoridad || []).map((v, i) => (\n                                    <TableRow key={i}>\n                                        <TableCell>{i + 1}</TableCell>\n                                        <TableCell><Input value={v.nombre} onChange={(e) => handleListChange('validacion', 'autoridad', i, 'nombre', e.target.value)} className=\"h-8\" /></TableCell>\n                                        <TableCell><Button variant=\"ghost\" size=\"icon\" onClick={() => openSignatureDialog('validacion.autoridad', undefined, i)}><Signature className=\"h-4 w-4\"/></Button></TableCell>\n                                        <TableCell><Input type=\"date\" value={v.fecha} onChange={(e) => handleListChange('validacion', 'autoridad', i, 'fecha', e.target.value)} className=\"h-8\" /></TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                         </Table>\n                    </div>\n                    <div className=\"p-4 border rounded-lg space-y-2\">\n                        <h4 className=\"font-semibold\">Responsable del Trabajo/Ejecutor</h4>\n                        <p className='text-xs text-muted-foreground'>Entiendo todas las condiciones de este trabajo y la responsabilidad de implementar las medidas de control establecidas.</p>\n                         <Table>\n                            <TableHeader><TableRow><TableHead>Día</TableHead><TableHead>Nombre</TableHead><TableHead>Firma</TableHead><TableHead>Fecha</TableHead></TableRow></TableHeader>\n                            <TableBody>\n                                {(anexoExcavaciones.validacion?.responsable || []).map((v, i) => (\n                                    <TableRow key={i}>\n                                        <TableCell>{i + 1}</TableCell>\n                                        <TableCell><Input value={v.nombre} onChange={(e) => handleListChange('validacion', 'responsable', i, 'nombre', e.target.value)} className=\"h-8\" /></TableCell>\n                                        <TableCell><Button variant=\"ghost\" size=\"icon\" onClick={() => openSignatureDialog('validacion.responsable', undefined, i)}><Signature className=\"h-4 w-4\"/></Button></TableCell>\n                                        <TableCell><Input type=\"date\" value={v.fecha} onChange={(e) => handleListChange('validacion', 'responsable', i, 'fecha', e.target.value)} className=\"h-8\" /></TableCell>\n                                    </TableRow>\n                                ))}\n                            </TableBody>\n                         </Table>\n                    </div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6\">\n                    <div className=\"space-y-4 p-4 border rounded-lg\">\n                        <h3 className=\"font-semibold\">Cancelación del Trabajo</h3>\n                        <RadioGroup value={anexoExcavaciones.cancelacion?.seCancelo || 'no'} onValueChange={(v) => handleNestedChange('cancelacion', 'seCancelo', v)} className=\"flex gap-4\">\n                            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id=\"cancel-si\" /><Label htmlFor=\"cancel-si\">SI</Label></div>\n                            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id=\"cancel-no\" /><Label htmlFor=\"cancel-no\">NO</Label></div>\n                        </RadioGroup>\n                        {anexoExcavaciones.cancelacion?.seCancelo === 'si' && (\n                            <div className=\"space-y-3\">\n                                <Textarea placeholder=\"Razón de la cancelación\" value={anexoExcavaciones.cancelacion.razon || ''} onChange={(e) => handleNestedChange('cancelacion', 'razon', e.target.value)} />\n                                <Input placeholder=\"Nombre de quien cancela\" value={anexoExcavaciones.cancelacion.nombre || ''} onChange={(e) => handleNestedChange('cancelacion', 'nombre', e.target.value)} />\n                                <Input type=\"date\" value={anexoExcavaciones.cancelacion.fecha || ''} onChange={(e) => handleNestedChange('cancelacion', 'fecha', e.target.value)} />\n                                <Button variant=\"outline\" className=\"w-full\" onClick={() => openSignatureDialog('cancelacion')}><Signature className=\"mr-2\"/>Firmar Cancelación</Button>\n                                {anexoExcavaciones.cancelacion?.firma && <img src={anexoExcavaciones.cancelacion.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                            </div>\n                        )}\n                    </div>\n                     <div className=\"space-y-4 p-4 border rounded-lg\">\n                        <h3 className=\"font-semibold\">Cierre del Permiso</h3>\n                         <RadioGroup value={anexoExcavaciones.cierre?.seTermino || 'no'} onValueChange={(v) => handleNestedChange('cierre', 'seTermino', v)} className=\"flex gap-4\">\n                            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id=\"cierre-si\" /><Label htmlFor=\"cierre-si\">SI</Label></div>\n                            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id=\"cierre-no\" /><Label htmlFor=\"cierre-no\">NO</Label></div>\n                        </RadioGroup>\n                        {anexoExcavaciones.cierre?.seTermino === 'si' && (\n                            <div className=\"space-y-3\">\n                                <Textarea placeholder=\"Observaciones de cierre\" value={anexoExcavaciones.cierre.observaciones || ''} onChange={(e) => handleNestedChange('cierre', 'observaciones', e.target.value)} />\n                                <div className=\"p-3 border rounded-md\">\n                                    <p className=\"text-xs font-bold\">Autoridad del Área</p>\n                                    <Input placeholder=\"Nombre\" value={anexoExcavaciones.cierre.autoridad?.nombre || ''} onChange={(e) => handleNestedChange('cierre', 'autoridad', { ...anexoExcavaciones.cierre.autoridad, nombre: e.target.value })} />\n                                    <Input type=\"date\" className=\"mt-2\" value={anexoExcavaciones.cierre.autoridad?.fecha || ''} onChange={(e) => handleNestedChange('cierre', 'autoridad', { ...anexoExcavaciones.cierre.autoridad, fecha: e.target.value })} />\n                                    <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => openSignatureDialog('cierre.autoridad')}><Signature className=\"mr-2\"/>Firmar Cierre</Button>\n                                    {anexoExcavaciones.cierre.autoridad?.firma && <img src={anexoExcavaciones.cierre.autoridad.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                                </div>\n                                <div className=\"p-3 border rounded-md\">\n                                    <p className=\"text-xs font-bold\">Responsable del Trabajo</p>\n                                    <Input placeholder=\"Nombre\" value={anexoExcavaciones.cierre.responsable?.nombre || ''} onChange={(e) => handleNestedChange('cierre', 'responsable', { ...anexoExcavaciones.cierre.responsable, nombre: e.target.value })} />\n                                    <Input type=\"date\" className=\"mt-2\" value={anexoExcavaciones.cierre.responsable?.fecha || ''} onChange={(e) => handleNestedChange('cierre', 'responsable', { ...anexoExcavaciones.cierre.responsable, fecha: e.target.value })} />\n                                    <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\" onClick={() => openSignatureDialog('cierre.responsable')}><Signature className=\"mr-2\"/>Firmar Cierre</Button>\n                                    {anexoExcavaciones.cierre.responsable?.firma && <img src={anexoExcavaciones.cierre.responsable.firma} alt=\"Firma\" className=\"mt-2 border rounded-md max-h-20\" />}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                </div>\n             </SectionWrapper>\n            \n            <Dialog open={isSignatureDialogOpen} onOpenChange={setIsSignatureDialogOpen}>\n                <DialogContent>\n                    <DialogHeader><DialogTitle>Registrar Firma</DialogTitle></DialogHeader>\n                    <SignaturePad onSave={handleSaveSignature} />\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 11342, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/VerificacionPeligrosStep.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport type { VerificacionPeligros } from '@/types';\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField: React.FC<{ id: string; label: string; value: string; onChange: (value: string) => void; }> = ({ id, label, value, onChange }) => (\n    <div className=\"flex justify-between items-center p-3 border rounded-md bg-white\">\n        <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n        <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n            <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n        </RadioGroup>\n    </div>\n);\n\nconst peligrosCategorias = {\n    fisicos: [\n        { id: 'ruido', label: 'Ruido' },\n        { id: 'iluminacionDeficiente', label: 'Iluminación Deficiente' },\n        { id: 'temperaturasExtremas', label: 'Temperaturas Extremas' },\n        { id: 'vibracion', label: 'Vibración' },\n        { id: 'radiacionIonizante', label: 'Radiación Ionizante' },\n        { id: 'radiacionNoIonizante', label: 'Radiación NO ionizante' },\n        { id: 'disconfortTermico', label: 'Disconfort térmico' },\n        { id: 'superficiesCalientes', label: 'Superficies calientes' },\n    ],\n    quimicos: [\n        { id: 'gasesVapores', label: 'Gases y vapores' },\n        { id: 'humosMetalicos', label: 'Humos metálicos' },\n        { id: 'fibras', label: 'Fibras' },\n        { id: 'polvos', label: 'Polvos' },\n        { id: 'liquidosNieblas', label: 'Líquidos Nieblas' },\n        { id: 'liquidosRocios', label: 'Líquidos Rocios' },\n    ],\n    seguridad: [\n        { id: 'elementosMaquinas', label: 'Elementos de máquinas' },\n        { id: 'herramientasMecanicas', label: 'Herramientas mecánicas' },\n        { id: 'herramientasManuales', label: 'Herramientas manuales' },\n        { id: 'equiposMovimiento', label: 'Equipos en movimiento' },\n        { id: 'proyeccionParticulas', label: 'Proyección de partículas' },\n        { id: 'proyeccionFluidos', label: 'Proyección de fluidos' },\n        { id: 'equiposPresurizados', label: 'Equipos presurizados' },\n        { id: 'intervencionSistemasElectricos', label: 'Intervención sistemas eléctricos' },\n        { id: 'adyacenteEquiposLineasEnergizados', label: 'Adyacente equipos / líneas energizados' },\n        { id: 'altaTension', label: 'Alta tensión' },\n        { id: 'bajaTension', label: 'Baja tensión' },\n        { id: 'estatica', label: 'Estática' },\n        { id: 'fuga', label: 'Fuga' },\n        { id: 'incendio', label: 'Incendio' },\n        { id: 'explosion', label: 'Explosión' },\n    ],\n    locativos: [\n        { id: 'trabajoAlturas', label: 'Trabajo alturas' },\n        { id: 'espaciosConfinados', label: 'Espacios confinados' },\n        { id: 'superficiesIrregulares', label: 'Superficies irregulares' },\n        { id: 'superficiesDeslizantes', label: 'Superficies deslizantes' },\n        { id: 'superficiesConDesnivel', label: 'Superficies con desnivel' },\n        { id: 'condicionesOrdenAseo', label: 'Condiciones de orden y aseo' },\n        { id: 'transitoVehiculos', label: 'Tránsito de vehículos' },\n        { id: 'almacenamiento', label: 'Almacenamiento' },\n    ],\n    biologicoAmbiental: [\n        { id: 'picaduras', label: 'Picaduras' },\n        { id: 'mordeduras', label: 'Mordeduras' },\n        { id: 'bacteriasVirusHongos', label: 'Bacterias, virus hongos' },\n        { id: 'fluidosExcrementos', label: 'Fluidos o excrementos' },\n        { id: 'generacionResiduos', label: 'Generación de residuos' },\n        { id: 'emisionesVertimientos', label: 'Emisiones y/o vertimientos' },\n        { id: 'derramePotencialSustanciasQuimicas', label: 'Derrame potencial sustancias químicas' },\n        { id: 'usoMaterialArrastreCantera', label: 'Uso material de arrastre o cantera' },\n    ],\n    biomecanicos: [\n        { id: 'posturasForzadas', label: 'Posturas forzadas' },\n        { id: 'posturasProlongada', label: 'Posturas prolongada' },\n        { id: 'esfuerzo', label: 'Esfuerzo' },\n        { id: 'movimientoRepetitivo', label: 'Movimiento repetitivo' },\n        { id: 'movimientoAntigravitacional', label: 'Movimiento antigravitacional' },\n        { id: 'manipulacionManualCargas', label: 'Manipulación manual de cargas' },\n    ],\n    psicosocial: [\n        { id: 'pausas', label: 'Pausas' },\n        { id: 'trabajoNocturno', label: 'Trabajo nocturno' },\n        { id: 'rotacion', label: 'Rotación' },\n        { id: 'horasExtras', label: 'Horas extras' },\n        { id: 'turno', label: 'Turno' },\n    ],\n};\n\nexport function VerificacionPeligrosStep() {\n    const { state, dispatch } = usePermitForm();\n    const { verificacionPeligros } = state;\n\n    const handleUpdate = (categoria: keyof VerificacionPeligros, campo: string, valor: string) => {\n        dispatch({\n            type: 'UPDATE_VERIFICACION_PELIGROS',\n            payload: {\n                [categoria]: {\n                    ...verificacionPeligros?.[categoria],\n                    [campo]: valor,\n                },\n            },\n        });\n    };\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n                    Verificación de Peligros\n                </h2>\n                <p className=\"text-muted-foreground text-sm\">\n                    Identifique los peligros asociados a la actividad a realizar.\n                </p>\n            </div>\n\n            {Object.entries(peligrosCategorias).map(([categoria, peligros]) => (\n                <SectionWrapper key={categoria} title={categoria.charAt(0).toUpperCase() + categoria.slice(1).replace(/([A-Z])/g, ' $1')}>\n                    <div className=\"space-y-2\">\n                        {peligros.map(peligro => (\n                            <RadioGroupField\n                                key={peligro.id}\n                                id={`${categoria}-${peligro.id}`}\n                                label={peligro.label}\n                                value={(verificacionPeligros as any)?.[categoria]?.[peligro.id] || 'na'}\n                                onChange={(value) => handleUpdate(categoria as keyof VerificacionPeligros, peligro.id, value)}\n                            />\n                        ))}\n                    </div>\n                </SectionWrapper>\n            ))}\n\n            <div className=\"p-4 border-t-2 border-dashed mt-8\">\n                <h4 className=\"font-bold text-lg mb-2 text-gray-800\">PELIGROS ADICIONALES A LA ACTIVIDAD Y MEDIDAS DE CONTROL</h4>\n                <ul className=\"list-disc list-inside space-y-2 text-sm text-gray-600\">\n                    <li>Definir el área adecuada para tomar agua, refrigerio, uso del baño (si es necesario). No hacer consumo de alimentos en el área de operación.</li>\n                    <li>Todos los trabajadores envueltos en la actividad deben conocer y cumplir las reglas de seguridad de la compañía así como las propias del área.</li>\n                    <li>Cualquier cambio en las condiciones del trabajo se deberá suspender actividades y realizar un ATS complementario.</li>\n                </ul>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 11886, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/EppEmergenciasStep.tsx"],"sourcesContent":["\n'use client';\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown } from 'lucide-react';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport type { EppEmergencias } from '@/types';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\n\ninterface EppEmergenciasStepProps {\n    eppEmergencias: EppEmergencias;\n    onUpdate: (updates: Partial<EppEmergencias>) => void;\n}\n\nconst SectionWrapper: React.FC<{ title: string; children: React.ReactNode; defaultOpen?: boolean }> = ({ title, children, defaultOpen = false }) => {\n  const [isOpen, setIsOpen] = React.useState(defaultOpen);\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger asChild>\n        <Button variant=\"ghost\" className=\"w-full justify-between p-3 bg-gray-100 rounded-lg cursor-pointer border\">\n          <h3 className=\"text-lg font-bold text-gray-700\">{title}</h3>\n          <ChevronDown className=\"h-5 w-5 transition-transform data-[state=open]:rotate-180\" />\n        </Button>\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"p-4 border-l border-r border-b rounded-b-lg\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst RadioGroupField: React.FC<{ \n    id: string; \n    label: string; \n    value: string; \n    onChange: (value: string) => void;\n    showInput?: boolean;\n    inputValue?: string;\n    onInputChange?: (value: string) => void;\n    placeholder?: string;\n    isSelect?: boolean;\n    selectOptions?: string[];\n}> = ({ \n    id, \n    label, \n    value, \n    onChange, \n    showInput = false, \n    inputValue, \n    onInputChange, \n    placeholder,\n    isSelect = false,\n    selectOptions = [] \n}) => (\n    <div className=\"flex flex-col space-y-2 p-3 border rounded-md bg-white\">\n        <div className=\"flex justify-between items-center\">\n            <Label htmlFor={id} className=\"text-sm font-medium flex-1\">{label}</Label>\n            <RadioGroup id={id} value={value || 'na'} onValueChange={onChange} className=\"flex gap-4\">\n                <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"si\" id={`${id}-si`} /><Label htmlFor={`${id}-si`}>SI</Label></div>\n                <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"no\" id={`${id}-no`} /><Label htmlFor={`${id}-no`}>NO</Label></div>\n                <div className=\"flex items-center space-x-2\"><RadioGroupItem value=\"na\" id={`${id}-na`} /><Label htmlFor={`${id}-na`}>N/A</Label></div>\n            </RadioGroup>\n        </div>\n        {value === 'si' && onInputChange && (\n            isSelect ? (\n                <Select value={inputValue} onValueChange={onInputChange}>\n                    <SelectTrigger className=\"mt-2\">\n                        <SelectValue placeholder={placeholder || \"Seleccione una opción\"} />\n                    </SelectTrigger>\n                    <SelectContent>\n                        {selectOptions.map(option => (\n                            <SelectItem key={option} value={option}>{option}</SelectItem>\n                        ))}\n                    </SelectContent>\n                </Select>\n            ) : showInput ? (\n                <Input \n                    className=\"mt-2\"\n                    placeholder={placeholder || 'Especificar...'}\n                    value={inputValue || ''}\n                    onChange={(e) => onInputChange(e.target.value)}\n                />\n            ) : null\n        )}\n    </div>\n);\n\nexport const eppItems = [\n    { id: 'ropaTrabajo', label: 'Ropa de trabajo', manual: false },\n    { id: 'overolIgnifugo', label: 'Overol Ignífugo, Categoría:', manual: true },\n    { id: 'proteccionCuerpoSoldador', label: 'Protección cuerpo para soldador', manual: true },\n    { id: 'casco', label: 'Casco', manual: true, isSelect: true, selectOptions: ['Sin Barbuquejo', 'Con Barbuquejo'] },\n    { id: 'chavoTelaCarnaza', label: 'Chavo en tela o carnaza', manual: false },\n    { id: 'botasSeguridadDielectrica', label: 'Botas de seguridad + dielectrica', manual: false },\n    { id: 'proteccionMetatarso', label: 'Proteccion metatarso', manual: false },\n    { id: 'monogafasGafas', label: 'Monogafas / Gafas', manual: false },\n    { id: 'caretaSoldador', label: 'Careta de soldador', manual: false },\n    { id: 'gafasOxicorte', label: 'Gafas de oxicorte', manual: false },\n    { id: 'caretaProteccionTotal', label: 'Careta de proteccion total', manual: false },\n    { id: 'proteccionAuditivaInsercion', label: 'Proteccion auditiva Inserción', manual: false },\n    { id: 'proteccionAuditivaCopa', label: 'Proteccion auditiva copa', manual: false },\n    { id: 'guantesAntiCorte', label: 'Guantes anti corte', manual: false },\n    { id: 'guantesSustanciasQuimicas', label: 'Guantes sustancias químicas', manual: false },\n    { id: 'guantesTemperatura', label: 'Guantes temperatura', manual: false },\n    { id: 'arnes', label: 'Arnés, Tipo:', manual: true },\n    { id: 'mosqueton', label: 'Mosquetón', manual: true },\n    { id: 'eslinga', label: 'Eslinga, Tipo:', manual: true },\n    { id: 'lineaVida', label: 'Línea de vida, Tipo:', manual: true },\n    { id: 'puntoAnclaje', label: 'Punto de anclaje (Cual):', manual: true },\n    { id: 'senalizacion', label: 'Señalización', manual: false },\n    { id: 'barandas', label: 'Barandas', manual: false },\n    { id: 'delimitacionPerimetral', label: 'Delimitación Perimetral', manual: false },\n    { id: 'controlAcceso', label: 'Control de acceso', manual: false },\n];\n\nconst emergenciasItems = [\n    { id: 'notificacion', label: 'NOTIFICACIÓN: El personal del área potencialmente afectado y los trabajadores vecinos fueron notificados del trabajo a realizar' },\n    { id: 'recordarVerificar', label: 'EMERGENCIAS: Recordar y verificar' },\n    { id: 'potenciales', label: 'A.- Las emergencias potenciales que pueden ocurrir' },\n    { id: 'procedimientos', label: 'B.- Los procedimientos establecidos para tales situaciones.' },\n    { id: 'rutasEvacuacion', label: 'C.- Rutas de Evacuación' },\n    { id: 'puntosEncuentro', label: 'D.- Puntos de encuentro' },\n    { id: 'equiposEmergencia', label: 'E.- Ubicación de equipos de emergencia en el sitio de trabajo' },\n];\n\nexport function EppEmergenciasStep({ eppEmergencias, onUpdate }: EppEmergenciasStepProps) {\n\n    const handleUpdate = (section: keyof EppEmergencias, field: string, value: string) => {\n        onUpdate({\n            [section]: {\n                ...(eppEmergencias as any)[section],\n                [field]: value,\n            },\n        });\n    };\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n                    EPP y Manejo de Emergencias\n                </h2>\n                <p className=\"text-muted-foreground text-sm\">\n                    Especifique los equipos de protección personal y verificaciones de emergencia.\n                </p>\n            </div>\n\n            <SectionWrapper title=\"Equipos de Protección Personal Requeridos\" defaultOpen>\n                <div className=\"space-y-2\">\n                    {eppItems.map(item => (\n                        <RadioGroupField\n                            key={item.id}\n                            id={`epp-${item.id}`}\n                            label={item.label}\n                            value={eppEmergencias.epp?.[item.id] as string}\n                            onChange={(value) => handleUpdate('epp', item.id, value)}\n                            showInput={item.manual}\n                            isSelect={item.isSelect}\n                            selectOptions={item.selectOptions}\n                            inputValue={eppEmergencias.epp?.[`${item.id}_manual`] as string || ''}\n                            onInputChange={(value) => handleUpdate('epp', `${item.id}_manual`, value)}\n                            placeholder={item.isSelect ? 'Seleccione tipo' : \"Agregar tipo manualmente\"}\n                        />\n                    ))}\n                </div>\n            </SectionWrapper>\n\n            <SectionWrapper title=\"Notificaciones y Manejo de Emergencias\" defaultOpen>\n                <div className=\"space-y-2\">\n                    {emergenciasItems.map(item => (\n                        <RadioGroupField\n                            key={item.id}\n                            id={`emergencia-${item.id}`}\n                            label={item.label}\n                            value={eppEmergencias.emergencias?.[item.id] as string}\n                            onChange={(value) => handleUpdate('emergencias', item.id, value)}\n                        />\n                    ))}\n                </div>\n            </SectionWrapper>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 12391, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/WorkersStep.tsx"],"sourcesContent":["'use client';\nimport * as React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { UserPlus, Edit, Trash2 } from 'lucide-react';\nimport type { ExternalWorker } from '@/types';\nimport Image from 'next/image';\n\ninterface WorkersStepProps {\n  workers: ExternalWorker[];\n  onAddWorker: () => void;\n  onEditWorker: (worker: ExternalWorker, index: number) => void;\n  onRemoveWorker: (index: number) => void;\n}\n\nexport function WorkersStep({ workers, onAddWorker, onEditWorker, onRemoveWorker }: WorkersStepProps) {\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"text-center\">\n        <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n          Gestión de Trabajadores\n        </h2>\n        <p className=\"text-muted-foreground text-sm max-w-2xl mx-auto\">\n          FIRMAS: (1) Los abajo firmantes somos consientes de los riesgos relacionados con la ejecución del trabajo, así como de las medidas preventivas determinadas con el fin de realizar el trabajo de forma segura, asumiendo el compromiso de cumplir con las orientaciones de seguridad contenidas en este documento, utilizar los equipos de protección personal y ejecutar solamente los servicios o actividades cubiertos por esta autorización. Así mismo manifiesto mi buen estado de salud para el desarrollo de las actividades. (2) Se verifican certificados de aptitud médica para Trabajos en alturas y espacios confinados; según aplique, con fecha de expedición inferior a un año. (3) Se verifican competencia - entrenamiento para TSA, TEC, trabajo en caliente, energías peligrosas, operación de equipo o maquinaria, trabajos con energía eléctrica; según aplique. (4) Se verifican el estado de afiliación al sistema de seguridad social (EPS, ARL, Fondo de Pensiones). (5) Para espacios confinados aplican lo siguientes ROLES: Trabajador Entrante, Vigía, Supervisor.\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader className=\"flex flex-row items-center justify-between\">\n          <CardTitle>Lista de Trabajadores</CardTitle>\n          <Button onClick={onAddWorker} size=\"sm\">\n            <UserPlus className=\"mr-2\" /> Agregar Trabajador\n          </Button>\n        </CardHeader>\n        <CardContent>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Nombre</TableHead>\n                <TableHead>Cédula</TableHead>\n                <TableHead>Rol</TableHead>\n                <TableHead>Firma Apertura</TableHead>\n                <TableHead className=\"text-right\">Acciones</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {workers.length === 0 ? (\n                <TableRow>\n                  <TableCell colSpan={5} className=\"h-24 text-center\">\n                    No hay trabajadores agregados.\n                  </TableCell>\n                </TableRow>\n              ) : (\n                workers.map((worker, index) => (\n                  <TableRow key={index}>\n                    <TableCell className=\"font-medium\">{worker.nombre}</TableCell>\n                    <TableCell>{worker.cedula}</TableCell>\n                    <TableCell>\n                      <Badge variant=\"outline\">{worker.rol}</Badge>\n                    </TableCell>\n                    <TableCell>\n                        {worker.firmaApertura ? (\n                           <Image src={worker.firmaApertura} alt={`Firma de ${worker.nombre}`} width={80} height={40} className=\"border rounded-md\" />\n                        ) : (\n                            <span className=\"text-xs text-muted-foreground\">Pendiente</span>\n                        )}\n                    </TableCell>\n                    <TableCell className=\"text-right\">\n                      <div className=\"flex justify-end gap-2\">\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => onEditWorker(worker, index)}>\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button variant=\"ghost\" size=\"icon\" onClick={() => onRemoveWorker(index)}>\n                          <Trash2 className=\"h-4 w-4 text-destructive\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AARA;;;;;;;;AAiBO,SAAS,YAAY,EAAE,OAAO,EAAE,WAAW,EAAE,YAAY,EAAE,cAAc,EAAoB;IAClG,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAmD;;;;;;kCAGjE,8OAAC;wBAAE,WAAU;kCAAkD;;;;;;;;;;;;0BAKjE,8OAAC,gIAAA,CAAA,OAAI;;kCACH,8OAAC,gIAAA,CAAA,aAAU;wBAAC,WAAU;;0CACpB,8OAAC,gIAAA,CAAA,YAAS;0CAAC;;;;;;0CACX,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAS;gCAAa,MAAK;;kDACjC,8OAAC,8MAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;oCAAS;;;;;;;;;;;;;kCAGjC,8OAAC,gIAAA,CAAA,cAAW;kCACV,cAAA,8OAAC,iIAAA,CAAA,QAAK;;8CACJ,8OAAC,iIAAA,CAAA,cAAW;8CACV,cAAA,8OAAC,iIAAA,CAAA,WAAQ;;0DACP,8OAAC,iIAAA,CAAA,YAAS;0DAAC;;;;;;0DACX,8OAAC,iIAAA,CAAA,YAAS;0DAAC;;;;;;0DACX,8OAAC,iIAAA,CAAA,YAAS;0DAAC;;;;;;0DACX,8OAAC,iIAAA,CAAA,YAAS;0DAAC;;;;;;0DACX,8OAAC,iIAAA,CAAA,YAAS;gDAAC,WAAU;0DAAa;;;;;;;;;;;;;;;;;8CAGtC,8OAAC,iIAAA,CAAA,YAAS;8CACP,QAAQ,MAAM,KAAK,kBAClB,8OAAC,iIAAA,CAAA,WAAQ;kDACP,cAAA,8OAAC,iIAAA,CAAA,YAAS;4CAAC,SAAS;4CAAG,WAAU;sDAAmB;;;;;;;;;;+CAKtD,QAAQ,GAAG,CAAC,CAAC,QAAQ,sBACnB,8OAAC,iIAAA,CAAA,WAAQ;;8DACP,8OAAC,iIAAA,CAAA,YAAS;oDAAC,WAAU;8DAAe,OAAO,MAAM;;;;;;8DACjD,8OAAC,iIAAA,CAAA,YAAS;8DAAE,OAAO,MAAM;;;;;;8DACzB,8OAAC,iIAAA,CAAA,YAAS;8DACR,cAAA,8OAAC,iIAAA,CAAA,QAAK;wDAAC,SAAQ;kEAAW,OAAO,GAAG;;;;;;;;;;;8DAEtC,8OAAC,iIAAA,CAAA,YAAS;8DACL,OAAO,aAAa,iBAClB,8OAAC,6HAAA,CAAA,UAAK;wDAAC,KAAK,OAAO,aAAa;wDAAE,KAAK,CAAC,SAAS,EAAE,OAAO,MAAM,EAAE;wDAAE,OAAO;wDAAI,QAAQ;wDAAI,WAAU;;;;;6EAEpG,8OAAC;wDAAK,WAAU;kEAAgC;;;;;;;;;;;8DAGxD,8OAAC,iIAAA,CAAA,YAAS;oDAAC,WAAU;8DACnB,cAAA,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,kIAAA,CAAA,SAAM;gEAAC,SAAQ;gEAAQ,MAAK;gEAAO,SAAS,IAAM,aAAa,QAAQ;0EACtE,cAAA,8OAAC,2MAAA,CAAA,OAAI;oEAAC,WAAU;;;;;;;;;;;0EAElB,8OAAC,kIAAA,CAAA,SAAM;gEAAC,SAAQ;gEAAQ,MAAK;gEAAO,SAAS,IAAM,eAAe;0EAChE,cAAA,8OAAC,0MAAA,CAAA,SAAM;oEAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;2CAnBX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCjC","debugId":null}},
    {"offset": {"line": 12688, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/create/components/ReviewStep.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { usePermitForm } from '../form-context';\nimport { Card, CardHeader, CardTitle, CardContent, CardDescription } from '@/components/ui/card';\nimport { FileText, CheckCircle } from 'lucide-react';\n\nexport function ReviewStep() {\n    const { state } = usePermitForm();\n\n    const getWorkTypesString = () => {\n        const selected = Object.entries(state.selectedWorkTypes)\n            .filter(([, value]) => value)\n            .map(([key]) => {\n                switch(key) {\n                    case 'alturas': return 'Trabajo en Alturas';\n                    case 'confinado': return 'Espacios Confinados';\n                    case 'energia': return 'Control de Energías';\n                    case 'izaje': return 'Izaje de Cargas';\n                    case 'caliente': return 'Trabajo en Caliente';\n                    case 'excavacion': return 'Excavaciones';\n                    case 'general': return 'Trabajo General';\n                    default: return '';\n                }\n            })\n            .filter(Boolean);\n        \n        return selected.length > 0 ? selected.join(', ') : 'Ninguno seleccionado';\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl md:text-3xl font-bold mb-2 text-primary\">\n                    Revisión Final\n                </h2>\n                <p className=\"text-muted-foreground text-sm\">\n                    Por favor, revise la información antes de enviar el permiso para su aprobación.\n                </p>\n            </div>\n\n            <Card>\n                <CardHeader>\n                    <CardTitle className=\"text-lg\">Resumen del Permiso</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                        <div className=\"space-y-1\">\n                            <p className=\"font-semibold\">Solicitante:</p>\n                            <p>{state.generalInfo.nombreSolicitante || 'N/A'}</p>\n                        </div>\n                        <div className=\"space-y-1\">\n                            <p className=\"font-semibold\">Empresa:</p>\n                            <p>{state.generalInfo.empresa || 'N/A'}</p>\n                        </div>\n                        <div className=\"space-y-1\">\n                            <p className=\"font-semibold\">Área/Planta:</p>\n                            <p>{state.generalInfo.areaEspecifica} / {state.generalInfo.planta}</p>\n                        </div>\n                        <div className=\"space-y-1\">\n                            <p className=\"font-semibold\">Validez:</p>\n                            <p>\n                                {state.generalInfo.validFrom ? new Date(state.generalInfo.validFrom).toLocaleString() : 'N/A'} - \n                                {state.generalInfo.validUntil ? new Date(state.generalInfo.validUntil).toLocaleString() : 'N/A'}\n                            </p>\n                        </div>\n                         <div className=\"space-y-1 md:col-span-2\">\n                            <p className=\"font-semibold\">Tipos de Trabajo Seleccionados:</p>\n                            <p className=\"font-medium text-primary\">{getWorkTypesString()}</p>\n                        </div>\n                    </div>\n                     <div className=\"border-t pt-4\">\n                        <p className=\"font-semibold\">Trabajadores ({state.workers?.length || 0}):</p>\n                        <ul className=\"list-disc pl-5 mt-2 text-sm\">\n                            {state.workers?.map((w, i) => <li key={i}>{w.nombre} ({w.rol})</li>)}\n                        </ul>\n                    </div>\n                </CardContent>\n            </Card>\n\n             <Card className=\"bg-blue-50 border-blue-200\">\n                <CardHeader>\n                    <CardTitle className=\"text-base text-blue-800 flex items-center gap-2\">\n                        <CheckCircle size={20}/>\n                        Próximos Pasos\n                    </CardTitle>\n                </CardHeader>\n                <CardContent>\n                     <p className=\"text-sm text-blue-700\">\n                        Una vez que haga clic en \"Enviar para Aprobación\", el permiso será creado y notificado a los responsables para que inicien el proceso de firmas digitales. No podrá editar el permiso después de enviarlo.\n                    </p>\n                </CardContent>\n            </Card>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}