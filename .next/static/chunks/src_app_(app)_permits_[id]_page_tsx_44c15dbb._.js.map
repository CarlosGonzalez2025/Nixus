{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/%28app%29/permits/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport { initializeApp, getApps, getApp } from 'firebase/app';\nimport { getFirestore, doc, onSnapshot, updateDoc, Timestamp } from 'firebase/firestore';\nimport { getAuth, onAuthStateChanged, signInWithCustomToken, signInAnonymously } from 'firebase/auth';\nimport {\n  Loader2, FileText, AlertTriangle, Shield, ArrowLeft, CheckCircle, XCircle,\n  Clock, PlayCircle, PauseCircle, Lock, FileDown, PenTool, Eraser,\n  HardHat, Zap, Anchor, Shovel, ChevronDown, Edit\n} from 'lucide-react';\nimport { format } from 'date-fns';\n\n// --- 1. CONFIGURACIÓN DE FIREBASE ---\nconst firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApp();\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// --- 2. TIPOS E INTERFACES (Completos según tu código original) ---\ntype PermitStatus = 'borrador' | 'pendiente_revision' | 'aprobado' | 'en_ejecucion' | 'suspendido' | 'cerrado' | 'rechazado';\ntype SignatureRole = 'solicitante' | 'autorizante' | 'mantenimiento' | 'lider_sst' | 'coordinador_alturas';\n\ninterface Approval {\n  status: 'pendiente' | 'aprobado' | 'rechazado';\n  uid?: string;\n  userName?: string;\n  signedAt?: Date | Timestamp;\n  firmaApertura?: string; \n}\n\ninterface ValidacionDiaria {\n    dia: number;\n    nombre: string;\n    fecha: string;\n    firma: string;\n}\n\ninterface Worker {\n    nombre: string;\n    cedula: string;\n    rol: string;\n    otroRol?: string;\n    tsaTec?: { tec: boolean; tsa: boolean };\n    entrenamiento?: { tec: boolean; tsa: boolean; otro: boolean; otroCual?: string };\n    eps?: boolean;\n    arl?: boolean;\n    pensiones?: boolean;\n    firmaApertura?: string;\n    firmaCierre?: string;\n}\n\ninterface Permit {\n  id: string;\n  number?: string;\n  status: PermitStatus;\n  createdAt: Date | Timestamp;\n  createdBy: string;\n  user?: { displayName: string };\n  generalInfo?: {\n      empresa?: string;\n      planta?: string;\n      areaEspecifica?: string;\n      proceso?: string;\n      contrato?: string;\n      validFrom?: string;\n      validUntil?: string;\n      workDescription?: string;\n      responsable?: { nombre: string; cargo: string; compania: string };\n  };\n  selectedWorkTypes?: {\n      alturas?: boolean;\n      confinado?: boolean;\n      energia?: boolean;\n      izaje?: boolean;\n      excavacion?: boolean;\n      caliente?: boolean;\n      general?: boolean;\n  };\n  approvals?: {\n      solicitante?: Approval;\n      autorizante?: Approval;\n      lider_sst?: Approval;\n      mantenimiento?: Approval;\n      coordinador_alturas?: Approval;\n  };\n  workers?: Worker[];\n  anexoATS?: {\n      peligros?: Record<string, string>; // 'si', 'no', 'na'\n      epp?: Record<string, boolean | string>;\n      justificacion?: Record<string, boolean>;\n  };\n  anexoAltura?: {\n      tipoEstructura?: Record<string, boolean | string>;\n      aspectosSeguridad?: Record<string, string>;\n      informacionGeneral?: { altura?: string; contactoEmergencia?: string };\n      validacion?: { autoridad: ValidacionDiaria[], responsable: ValidacionDiaria[] };\n  };\n  anexoConfinado?: {\n      resultadosPruebasGases?: { lel: string; o2: string; h2s: string; co: string };\n      pruebasGasesPeriodicas?: { pruebas: { hora: string, lel: string, o2: string, h2s: string, co: string, firma: string }[] };\n      validacion?: { autoridad: ValidacionDiaria[], responsable: ValidacionDiaria[] };\n  };\n  anexoEnergias?: {\n      energiasPeligrosas?: Record<string, boolean>;\n  };\n  anexoIzaje?: {\n      informacionGeneral?: {\n          accion?: Record<string, boolean>;\n          pesoCarga?: Record<string, boolean>;\n          equipoUtilizar?: Record<string, boolean>;\n      };\n      validacion?: { autoridad: ValidacionDiaria[], responsable: ValidacionDiaria[] };\n  };\n  anexoExcavaciones?: {\n      informacionGeneral?: {\n          dimensiones?: string;\n          profundidad?: string;\n          ancho?: string;\n          largo?: string;\n      };\n      validacion?: { autoridad: ValidacionDiaria[], responsable: ValidacionDiaria[] };\n  };\n  controlEnergia?: boolean;\n  closure?: {\n      informeCulminacion?: boolean;\n      areaDespejada?: boolean;\n      evidenciaParticulas?: boolean;\n      dispositivosRetirados?: boolean;\n      continuaLabor?: boolean;\n  };\n}\n\n// --- 3. CONSTANTES Y UTILIDADES ---\nconst parseFirestoreDate = (dateValue: any): Date | null => {\n  if (!dateValue) return null;\n  if (typeof dateValue.toDate === 'function') return dateValue.toDate();\n  if (dateValue instanceof Date) return dateValue;\n  if (typeof dateValue === 'string') return new Date(dateValue);\n  return null;\n};\n\nconst getStatusInfo = (status: string) => {\n    const map: Record<string, any> = {\n        borrador: { text: 'Borrador', icon: Clock, color: 'text-gray-600', bgColor: 'bg-gray-100' },\n        pendiente_revision: { text: 'Pendiente Revisión', icon: Clock, color: 'text-yellow-600', bgColor: 'bg-yellow-100' },\n        aprobado: { text: 'Aprobado', icon: CheckCircle, color: 'text-green-600', bgColor: 'bg-green-100' },\n        en_ejecucion: { text: 'En Ejecución', icon: PlayCircle, color: 'text-purple-600', bgColor: 'bg-purple-100' },\n        suspendido: { text: 'Suspendido', icon: PauseCircle, color: 'text-orange-600', bgColor: 'bg-orange-100' },\n        cerrado: { text: 'Cerrado', icon: Lock, color: 'text-blue-600', bgColor: 'bg-blue-100' },\n        rechazado: { text: 'Rechazado', icon: XCircle, color: 'text-red-600', bgColor: 'bg-red-100' },\n    };\n    return map[status] || { text: status, icon: FileText, color: 'text-gray-500', bgColor: 'bg-gray-100' };\n};\n\nconst signatureRoles: Record<SignatureRole, string> = {\n  coordinador_alturas: 'COORDINADOR (ANEXO)',\n  solicitante: 'SOLICITANTE / LÍDER',\n  mantenimiento: 'MANTENIMIENTO',\n  lider_sst: 'LÍDER SST',\n  autorizante: 'AUTORIZANTE (DUEÑO ÁREA)',\n};\n\n// Datos de ATS Peligros (Resumido para el ejemplo, expandir si es necesario)\nconst atsPeligrosAgrupados = {\n    'LOCATIVOS': [{id: 'superficies_irregulares', label: 'Superficies irregulares'}, {id: 'espacios_reducidos', label: 'Espacios reducidos'}],\n    'FÍSICOS': [{id: 'ruido_intermitente', label: 'Ruido'}, {id: 'deficiencia_iluminacion', label: 'Iluminación deficiente'}],\n    'QUÍMICOS': [{id: 'gases_humos', label: 'Gases y Humos'}, {id: 'material_particulado', label: 'Material Particulado'}],\n    'MECÁNICOS': [{id: 'proyeccion_particulas', label: 'Proyección de partículas'}, {id: 'herramientas', label: 'Manejo herramientas'}],\n    'TRABAJO ALTURAS': [{id: 'caida_personas', label: 'Caída de personas'}, {id: 'caida_objetos', label: 'Caída de objetos'}]\n};\n\n// --- 4. COMPONENTES UI INTERNOS (Tailwind) ---\nconst Button = ({ className, variant = 'default', size = 'default', ...props }: any) => {\n    const base = \"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none disabled:opacity-50\";\n    const vars: any = {\n        default: \"bg-slate-900 text-white hover:bg-slate-800\",\n        destructive: \"bg-red-500 text-white hover:bg-red-600\",\n        outline: \"border border-slate-200 hover:bg-slate-100 text-slate-900\",\n        ghost: \"hover:bg-slate-100 text-slate-700\"\n    };\n    const sizes: any = { default: \"h-10 py-2 px-4\", sm: \"h-9 px-3\", icon: \"h-10 w-10\" };\n    return <button className={`${base} ${vars[variant]} ${sizes[size]} ${className}`} {...props} />;\n};\n\nconst Badge = ({ className, variant = 'default', ...props }: any) => {\n    const style = variant === 'outline' ? 'border border-slate-200 text-slate-900' : 'bg-slate-900 text-white';\n    return <span className={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ${style} ${className}`} {...props} />;\n};\n\nconst Input = (props: any) => <input className=\"flex h-10 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm focus:ring-2 focus:ring-slate-400 outline-none\" {...props} />;\nconst Textarea = (props: any) => <textarea className=\"flex min-h-[80px] w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm focus:ring-2 focus:ring-slate-400 outline-none\" {...props} />;\nconst Label = ({children, ...props}: any) => <label className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\" {...props}>{children}</label>;\n\nconst Collapsible = ({ defaultOpen, children }: any) => {\n    const [isOpen, setIsOpen] = useState(defaultOpen || false);\n    return <div>{React.Children.map(children, child => React.cloneElement(child, { isOpen, setIsOpen }))}</div>;\n};\nconst CollapsibleTrigger = ({ children, isOpen, setIsOpen, className }: any) => (\n    <div onClick={() => setIsOpen(!isOpen)} className={className}>{children}</div>\n);\nconst CollapsibleContent = ({ children, isOpen, className }: any) => (\n    isOpen ? <div className={className}>{children}</div> : null\n);\n\nconst Dialog = ({ open, onOpenChange, children }: any) => {\n    if (!open) return null;\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in\">\n            <div className=\"bg-white rounded-lg shadow-lg max-w-lg w-full max-h-[90vh] overflow-y-auto\">\n                {React.Children.map(children, child => React.cloneElement(child, { onClose: () => onOpenChange(false) }))}\n            </div>\n        </div>\n    );\n};\nconst DialogContent = ({ children, onClose }: any) => <div className=\"relative\">{children}</div>;\nconst DialogHeader = ({ children }: any) => <div className=\"flex flex-col space-y-1.5 text-center sm:text-left p-6 pb-2\">{children}</div>;\nconst DialogTitle = ({ children }: any) => <h3 className=\"text-lg font-semibold leading-none tracking-tight\">{children}</h3>;\n\nconst Field = ({ label, value, fullWidth }: any) => (\n    <div className={fullWidth ? 'col-span-2' : ''}>\n        <p className=\"text-[10px] uppercase tracking-wider text-slate-500 font-bold\">{label}</p>\n        <div className=\"font-medium text-slate-900 break-words border-b border-slate-100 pb-1\">{value || '-'}</div>\n    </div>\n);\n\nconst Section = ({ title, children }: any) => (\n    <div className=\"bg-white p-5 rounded-xl border border-slate-200 shadow-sm\">\n        <h3 className=\"text-sm font-bold uppercase text-slate-600 border-b pb-2 mb-4 flex items-center gap-2\">\n            <Shield className=\"h-4 w-4 text-blue-600\"/> {title}\n        </h3>\n        <div className=\"text-sm text-slate-600\">{children}</div>\n    </div>\n);\n\nconst RadioCheck = ({ label, value, readOnly }: any) => {\n    const val = value === true || value === 'si' ? 'si' : (value === false || value === 'no' ? 'no' : 'na');\n    const colors: any = { si: 'bg-green-100 text-green-800 border-green-200', no: 'bg-red-100 text-red-800 border-red-200', na: 'bg-slate-100 text-slate-600' };\n    return (\n        <div className=\"flex justify-between items-center p-2 border-b last:border-0\">\n            <span className=\"text-xs text-slate-700\">{label}</span>\n            <div className=\"flex gap-1 text-[10px] uppercase font-bold\">\n                {['si', 'no', 'na'].map(opt => (\n                    <div key={opt} className={`px-2 py-1 rounded border ${val === opt ? colors[opt] : 'text-slate-300 border-transparent'}`}>{opt}</div>\n                ))}\n            </div>\n        </div>\n    );\n};\n\n// --- 5. COMPONENTE SIGNATURE PAD ---\nconst SignaturePad = ({ onSave, isSaving }: any) => {\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const [hasDrawn, setHasDrawn] = useState(false);\n\n    const getPos = (e: any) => {\n        const rect = canvasRef.current!.getBoundingClientRect();\n        const cx = e.touches ? e.touches[0].clientX : e.clientX;\n        const cy = e.touches ? e.touches[0].clientY : e.clientY;\n        return { x: cx - rect.left, y: cy - rect.top };\n    };\n\n    const draw = (e: any) => {\n        if (e.buttons !== 1 && !e.touches) return;\n        const ctx = canvasRef.current?.getContext('2d');\n        if (!ctx) return;\n        const { x, y } = getPos(e);\n        ctx.lineTo(x, y);\n        ctx.stroke();\n        setHasDrawn(true);\n    };\n\n    const start = (e: any) => {\n        const ctx = canvasRef.current?.getContext('2d');\n        if (!ctx) return;\n        ctx.beginPath();\n        const { x, y } = getPos(e);\n        ctx.moveTo(x, y);\n    };\n\n    const clear = () => {\n        const ctx = canvasRef.current?.getContext('2d');\n        ctx?.clearRect(0, 0, 400, 200);\n        setHasDrawn(false);\n    };\n\n    return (\n        <div className=\"p-4 bg-slate-50 rounded border\">\n            <canvas ref={canvasRef} width={400} height={200} className=\"bg-white border w-full touch-none cursor-crosshair rounded\"\n                onMouseDown={start} onMouseMove={draw} onTouchStart={start} onTouchMove={draw} />\n            <div className=\"flex justify-between mt-2\">\n                <Button variant=\"ghost\" size=\"sm\" onClick={clear}><Eraser className=\"w-4 h-4 mr-2\"/>Borrar</Button>\n                <Button size=\"sm\" disabled={!hasDrawn || isSaving} onClick={() => onSave(canvasRef.current!.toDataURL())}>\n                    {isSaving ? <Loader2 className=\"animate-spin mr-2\"/> : <PenTool className=\"w-4 h-4 mr-2\"/>} Guardar\n                </Button>\n            </div>\n        </div>\n    );\n};\n\n// --- 6. COMPONENTE PRINCIPAL ---\nexport default function PermitDetailPage() {\n  const [permit, setPermit] = useState<Permit | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [currentUser, setCurrentUser] = useState<any>(null);\n  const [isPDFReady, setIsPDFReady] = useState(false);\n\n  // Estados UI\n  const [isSignatureOpen, setIsSignatureOpen] = useState(false);\n  const [currentSignRole, setCurrentSignRole] = useState<{role: SignatureRole, type: string} | null>(null);\n  const [signerName, setSignerName] = useState('');\n  const [isSigning, setIsSigning] = useState(false);\n  \n  // Cargar librerías PDF dinámicamente\n  useEffect(() => {\n      const loadLibs = async () => {\n          if ((window as any).jspdf) { setIsPDFReady(true); return; }\n          try {\n              const s1 = document.createElement('script');\n              s1.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';\n              s1.onload = () => {\n                  const s2 = document.createElement('script');\n                  s2.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js';\n                  s2.onload = () => setIsPDFReady(true);\n                  document.body.appendChild(s2);\n              };\n              document.body.appendChild(s1);\n          } catch (e) { console.error(e); }\n      };\n      loadLibs();\n  }, []);\n\n  // Auth & Data Fetching\n  useEffect(() => {\n      const init = async () => {\n          await signInAnonymously(auth);\n          onAuthStateChanged(auth, u => setCurrentUser(u ? { uid: u.uid, displayName: 'Usuario Demo', role: 'admin' } : null));\n          \n          // Mock para obtener ID de URL (en Next.js sería useParams)\n          const id = window.location.pathname.split('/').pop() || 'demo';\n          const unsub = onSnapshot(doc(db, 'permits', id), (s) => {\n              if (s.exists()) {\n                  const d = s.data();\n                  setPermit({ id: s.id, ...d, createdAt: parseFirestoreDate(d.createdAt) } as Permit);\n                  setError(null);\n              } else {\n                  setError('No se encontró el permiso.');\n              }\n              setLoading(false);\n          });\n          return unsub;\n      };\n      init();\n  }, []);\n\n  // --- LOGICA PDF ROBUSTA (Tu requerimiento principal) ---\n  const handleExportToPDF = () => {\n      if (!permit || !isPDFReady) return;\n      const { jsPDF } = (window as any).jspdf;\n      const doc = new jsPDF('p', 'mm', 'letter');\n      const colors = { header: [220, 230, 241], title: [29, 181, 193] }; // Colores Italcol\n      let y = 15;\n\n      // Helper Header\n      const addHeader = (title: string) => {\n          (doc as any).autoTable({\n              startY: 10,\n              body: [[\n                  { content: 'ITALCOL', rowSpan: 3, styles: { halign: 'center', valign: 'middle', fontSize: 16, fontStyle: 'bold' } },\n                  { content: title, rowSpan: 3, styles: { halign: 'center', valign: 'middle', fontSize: 12, textColor: colors.title, fontStyle: 'bold' } },\n                  { content: 'Código: DN-FR-SST-016' }\n              ], [{ content: 'Versión: 04' }], [{ content: 'Fecha: 23-01-2023' }]],\n              theme: 'grid',\n              styles: { fontSize: 7, cellPadding: 1 },\n              columnStyles: { 0: { cellWidth: 30 }, 2: { cellWidth: 30 } }\n          });\n          y = (doc as any).lastAutoTable.finalY + 5;\n      };\n\n      // Helper Section Title\n      const addTitle = (txt: string) => {\n          doc.setFillColor(...colors.header);\n          doc.rect(14, y, 188, 6, 'F');\n          doc.setFontSize(9);\n          doc.setFont('helvetica', 'bold');\n          doc.setTextColor(0);\n          doc.text(txt.toUpperCase(), 16, y + 4);\n          y += 8;\n      };\n\n      // 1. INFO GENERAL\n      addHeader('PERMISO DE TRABAJO');\n      addTitle('INFORMACIÓN GENERAL');\n      (doc as any).autoTable({\n          startY: y,\n          body: [\n              ['No. Permiso', permit.number || '---', 'Solicitante', permit.user?.displayName],\n              ['Planta', permit.generalInfo?.planta, 'Área', permit.generalInfo?.areaEspecifica],\n              ['Empresa', permit.generalInfo?.empresa, 'Contrato', permit.generalInfo?.contrato],\n              ['Responsable', permit.generalInfo?.responsable?.nombre, 'Cargo', permit.generalInfo?.responsable?.cargo],\n              ['Descripción', { content: permit.generalInfo?.workDescription || '', colSpan: 3 }]\n          ],\n          theme: 'grid',\n          styles: { fontSize: 7, cellPadding: 1.5 }\n      });\n      y = (doc as any).lastAutoTable.finalY + 5;\n\n      // 2. TIPOS DE TRABAJO\n      doc.setFontSize(8);\n      doc.text('TIPOS DE TRABAJO ACTIVOS:', 14, y);\n      y += 5;\n      const types = [];\n      if (permit.selectedWorkTypes?.alturas) types.push('Alturas');\n      if (permit.selectedWorkTypes?.confinado) types.push('Confinados');\n      if (permit.selectedWorkTypes?.energia) types.push('Energías');\n      if (permit.selectedWorkTypes?.izaje) types.push('Izaje');\n      if (permit.selectedWorkTypes?.excavacion) types.push('Excavaciones');\n      \n      types.forEach((t, i) => {\n          doc.rect(14 + (i*30), y-3, 3, 3, 'FD');\n          doc.text(t, 19 + (i*30), y);\n      });\n      y += 8;\n\n      // 3. ATS (Resumido)\n      if (permit.anexoATS) {\n          addTitle('ATS - PELIGROS IDENTIFICADOS');\n          const peligros = Object.entries(permit.anexoATS.peligros || {}).filter(([_,v]) => v === 'si').map(([k]) => [k.toUpperCase(), 'SI']);\n          if (peligros.length > 0) {\n              (doc as any).autoTable({ startY: y, head: [['Peligro', 'Aplica']], body: peligros, theme: 'striped', styles: { fontSize: 6 } });\n              y = (doc as any).lastAutoTable.finalY + 5;\n          }\n      }\n\n      // 4. TRABAJADORES\n      addTitle('PERSONAL AUTORIZADO');\n      const workers = permit.workers?.map(w => [\n          w.nombre, w.cedula, w.rol, \n          w.eps ? 'SI' : 'NO', \n          w.arl ? 'SI' : 'NO', \n          w.firmaApertura ? 'OK' : '', \n          w.firmaCierre ? 'OK' : ''\n      ]);\n      (doc as any).autoTable({\n          startY: y,\n          head: [['Nombre', 'Cédula', 'Rol', 'EPS', 'ARL', 'F. Apertura', 'F. Cierre']],\n          body: workers || [],\n          theme: 'grid',\n          styles: { fontSize: 6, halign: 'center' }\n      });\n      y = (doc as any).lastAutoTable.finalY + 5;\n\n      // 5. FIRMAS AUTORIZACIÓN\n      addTitle('FIRMAS DE APROBACIÓN');\n      const signRows = [\n          ['SOLICITANTE', 'AUTORIZANTE', 'LIDER SST'],\n          [\n              permit.approvals?.solicitante?.userName || '',\n              permit.approvals?.autorizante?.userName || '',\n              permit.approvals?.lider_sst?.userName || ''\n          ],\n          [\n              permit.approvals?.solicitante?.firmaApertura ? 'FIRMADO' : 'PENDIENTE',\n              permit.approvals?.autorizante?.firmaApertura ? 'FIRMADO' : 'PENDIENTE',\n              permit.approvals?.lider_sst?.firmaApertura ? 'FIRMADO' : 'PENDIENTE'\n          ]\n      ];\n      (doc as any).autoTable({ startY: y, body: signRows, theme: 'plain', styles: { halign: 'center', fontSize: 7 } });\n      \n      // --- ANEXOS (Páginas Nuevas) ---\n      const addValidationTable = (data: any) => {\n          if (!data?.validacion) return;\n          doc.setFontSize(8);\n          doc.text('VALIDACIÓN DIARIA (7 DÍAS)', 14, (doc as any).lastAutoTable.finalY + 8);\n          const authRow = ['AUTORIDAD', ...(data.validacion.autoridad || []).map((v:any) => v.firma ? 'OK' : '')];\n          const respRow = ['RESPONSABLE', ...(data.validacion.responsable || []).map((v:any) => v.firma ? 'OK' : '')];\n          // Rellenar\n          while(authRow.length < 8) authRow.push('');\n          while(respRow.length < 8) respRow.push('');\n          \n          (doc as any).autoTable({\n              startY: (doc as any).lastAutoTable.finalY + 10,\n              head: [['ROL', 'D1', 'D2', 'D3', 'D4', 'D5', 'D6', 'D7']],\n              body: [authRow, respRow],\n              theme: 'grid',\n              styles: { fontSize: 6, halign: 'center' }\n          });\n      };\n\n      // Alturas\n      if (permit.selectedWorkTypes?.alturas && permit.anexoAltura) {\n          doc.addPage();\n          addHeader('ANEXO 1 - TRABAJO EN ALTURAS');\n          addTitle('VERIFICACIÓN DE SEGURIDAD');\n          const rows = Object.entries(permit.anexoAltura.aspectosSeguridad || {}).map(([k, v]) => [k, v === 'si' ? 'CUMPLE' : 'NO']);\n          (doc as any).autoTable({ startY: y, head: [['Aspecto', 'Estado']], body: rows, theme: 'striped', styles: { fontSize: 7 } });\n          addValidationTable(permit.anexoAltura);\n      }\n\n      // Confinados\n      if (permit.selectedWorkTypes?.confinado && permit.anexoConfinado) {\n          doc.addPage();\n          addHeader('ANEXO 2 - ESPACIOS CONFINADOS');\n          addTitle('MEDICIONES INICIALES');\n          const g = permit.anexoConfinado.resultadosPruebasGases;\n          (doc as any).autoTable({ startY: y, head: [['LEL %', 'O2 %', 'H2S ppm', 'CO ppm']], body: [[g?.lel, g?.o2, g?.h2s, g?.co]] });\n          y = (doc as any).lastAutoTable.finalY + 5;\n          \n          addTitle('MONITOREO PERIÓDICO');\n          const pRows = permit.anexoConfinado.pruebasGasesPeriodicas?.pruebas.map(p => [p.hora, p.lel, p.o2, p.h2s, p.co, p.firma ? 'OK' : '']) || [];\n          (doc as any).autoTable({ startY: y, head: [['Hora', 'LEL', 'O2', 'H2S', 'CO', 'Firma']], body: pRows, theme: 'grid', styles: { fontSize: 7 } });\n          addValidationTable(permit.anexoConfinado);\n      }\n\n      // Izaje\n      if (permit.selectedWorkTypes?.izaje && permit.anexoIzaje) {\n          doc.addPage();\n          addHeader('ANEXO 4 - IZAJE DE CARGAS');\n          addTitle('DATOS DE LA MANIOBRA');\n          const info = permit.anexoIzaje.informacionGeneral || {};\n          // Logica para extraer keys true\n          const extractTrue = (obj: any) => Object.entries(obj || {}).filter(([_,v]) => v).map(([k]) => k).join(', ');\n          const izajeData = [\n              ['Acción', extractTrue(info.accion)],\n              ['Peso Carga', extractTrue(info.pesoCarga)],\n              ['Equipo', extractTrue(info.equipoUtilizar)]\n          ];\n          (doc as any).autoTable({ startY: y, body: izajeData });\n          addValidationTable(permit.anexoIzaje);\n      }\n\n      doc.save(`Permiso_${permit.number || 'Borrador'}.pdf`);\n  };\n\n  // --- HANDLERS MOCKEADOS (Para funcionamiento local) ---\n  const handleSign = async (signature: string) => {\n      if (!permit || !currentSignRole || !currentUser) return;\n      setIsSigning(true);\n      try {\n          const path = `approvals.${currentSignRole.role}`;\n          await updateDoc(doc(db, 'permits', permit.id), {\n              [`${path}.status`]: 'aprobado',\n              [`${path}.userName`]: currentUser.displayName,\n              [`${path}.uid`]: currentUser.uid,\n              [`${path}.signedAt`]: Timestamp.now(),\n              [`${path}.firmaApertura`]: signature\n          });\n          setIsSignatureOpen(false);\n      } catch (e) { console.error(e); }\n      setIsSigning(false);\n  };\n\n  // --- RENDERIZADO ---\n  if (loading) return <div className=\"flex h-screen items-center justify-center\"><Loader2 className=\"animate-spin w-8 h-8 text-blue-600\" /></div>;\n  if (error) return <div className=\"flex h-screen items-center justify-center flex-col gap-4\"><XCircle className=\"w-12 h-12 text-red-500\"/><p>{error}</p><Button onClick={() => window.location.reload()}>Reintentar</Button></div>;\n  if (!permit) return null;\n\n  const statusInfo = getStatusInfo(permit.status);\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 font-sans text-slate-900 pb-20\">\n        {/* NAVBAR */}\n        <div className=\"sticky top-0 z-30 bg-white border-b px-4 py-3 flex items-center justify-between shadow-sm\">\n            <div className=\"flex items-center gap-3\">\n                <Button variant=\"ghost\" size=\"icon\" onClick={() => window.history.back()}><ArrowLeft className=\"w-5 h-5\"/></Button>\n                <div>\n                    <h1 className=\"font-bold text-sm md:text-base\">Permiso #{permit.number || permit.id.substring(0,6)}</h1>\n                    <div className={`flex items-center gap-1 text-xs ${statusInfo.color}`}>\n                        <statusInfo.icon className=\"w-3 h-3\"/> {statusInfo.text}\n                    </div>\n                </div>\n            </div>\n            <Button onClick={handleExportToPDF} variant=\"outline\" disabled={!isPDFReady}>\n                {isPDFReady ? <><FileDown className=\"w-4 h-4 mr-2\"/>PDF</> : <Loader2 className=\"w-4 h-4 animate-spin\"/>}\n            </Button>\n        </div>\n\n        <main className=\"max-w-5xl mx-auto p-4 space-y-6\">\n            {/* 1. INFO GENERAL */}\n            <Section title=\"Información General\">\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\n                    <Field label=\"Solicitante\" value={permit.user?.displayName} />\n                    <Field label=\"Empresa\" value={permit.generalInfo?.empresa} />\n                    <Field label=\"Planta\" value={permit.generalInfo?.planta} />\n                    <Field label=\"Área\" value={permit.generalInfo?.areaEspecifica} />\n                    <Field label=\"Vigencia Desde\" value={permit.generalInfo?.validFrom ? format(new Date(permit.generalInfo.validFrom), 'dd/MM/yyyy HH:mm') : ''} />\n                    <Field label=\"Vigencia Hasta\" value={permit.generalInfo?.validUntil ? format(new Date(permit.generalInfo.validUntil), 'dd/MM/yyyy HH:mm') : ''} />\n                    <Field label=\"Descripción\" value={permit.generalInfo?.workDescription} fullWidth />\n                </div>\n                <div className=\"mt-4 pt-4 border-t\">\n                    <p className=\"text-xs font-bold text-slate-500 mb-2\">TIPOS DE TRABAJO</p>\n                    <div className=\"flex flex-wrap gap-2\">\n                        {Object.entries(permit.selectedWorkTypes || {}).filter(([_,v]) => v).map(([k]) => (\n                            <div key={k} className=\"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-bold uppercase border border-blue-100\">{k}</div>\n                        ))}\n                    </div>\n                </div>\n            </Section>\n\n            {/* 2. PERSONAL */}\n            <Section title=\"Personal Autorizado\">\n                <div className=\"overflow-x-auto\">\n                    <table className=\"w-full text-sm text-left\">\n                        <thead className=\"bg-slate-50 text-xs uppercase text-slate-500\">\n                            <tr><th className=\"p-3\">Nombre</th><th className=\"p-3\">Cédula</th><th className=\"p-3\">Rol</th><th className=\"p-3 text-center\">Firma Apertura</th></tr>\n                        </thead>\n                        <tbody>\n                            {permit.workers?.map((w, i) => (\n                                <tr key={i} className=\"border-b last:border-0\">\n                                    <td className=\"p-3 font-medium\">{w.nombre}</td>\n                                    <td className=\"p-3\">{w.cedula}</td>\n                                    <td className=\"p-3\"><Badge variant=\"secondary\">{w.rol}</Badge></td>\n                                    <td className=\"p-3 text-center\">{w.firmaApertura ? <CheckCircle className=\"w-4 h-4 text-green-500 mx-auto\"/> : '-'}</td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            </Section>\n\n            {/* 3. ANEXOS DINÁMICOS */}\n            {permit.selectedWorkTypes?.alturas && (\n                <Collapsible>\n                    <CollapsibleTrigger className=\"bg-blue-50 p-3 rounded-lg flex justify-between items-center cursor-pointer border border-blue-100\">\n                        <div className=\"flex items-center gap-2 text-blue-800 font-bold\"><Shield className=\"w-4 h-4\"/> Anexo Alturas</div>\n                        <ChevronDown className=\"w-4 h-4\"/>\n                    </CollapsibleTrigger>\n                    <CollapsibleContent className=\"p-4 bg-white border rounded-b-lg border-t-0\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                            {Object.entries(permit.anexoAltura?.aspectosSeguridad || {}).map(([k, v]) => (\n                                <RadioCheck key={k} label={k.replace(/([A-Z])/g, ' $1')} value={v} readOnly />\n                            ))}\n                        </div>\n                    </CollapsibleContent>\n                </Collapsible>\n            )}\n\n            {permit.selectedWorkTypes?.confinado && (\n                <Collapsible>\n                    <CollapsibleTrigger className=\"bg-purple-50 p-3 rounded-lg flex justify-between items-center cursor-pointer border border-purple-100\">\n                        <div className=\"flex items-center gap-2 text-purple-800 font-bold\"><Siren className=\"w-4 h-4\"/> Anexo Confinados</div>\n                        <ChevronDown className=\"w-4 h-4\"/>\n                    </CollapsibleTrigger>\n                    <CollapsibleContent className=\"p-4 bg-white border rounded-b-lg border-t-0 space-y-4\">\n                        <div className=\"grid grid-cols-4 gap-2 text-center\">\n                            {Object.entries(permit.anexoConfinado?.resultadosPruebasGases || {}).map(([k, v]) => (\n                                <div key={k} className=\"bg-slate-50 p-2 rounded border\"><div className=\"text-xl font-bold\">{v}</div><div className=\"text-xs uppercase text-slate-400\">{k}</div></div>\n                            ))}\n                        </div>\n                        {permit.anexoConfinado?.pruebasGasesPeriodicas?.pruebas && (\n                            <div className=\"overflow-x-auto\">\n                                <table className=\"w-full text-xs text-center border\">\n                                    <thead className=\"bg-purple-100 font-bold\"><tr><th>Hora</th><th>LEL</th><th>O2</th><th>H2S</th><th>CO</th></tr></thead>\n                                    <tbody>\n                                        {permit.anexoConfinado.pruebasGasesPeriodicas.pruebas.map((p, i) => (\n                                            <tr key={i} className=\"border-t\"><td>{p.hora}</td><td>{p.lel}</td><td>{p.o2}</td><td>{p.h2s}</td><td>{p.co}</td></tr>\n                                        ))}\n                                    </tbody>\n                                </table>\n                            </div>\n                        )}\n                    </CollapsibleContent>\n                </Collapsible>\n            )}\n\n            {/* 4. FIRMAS */}\n            <Section title=\"Firmas de Aprobación\">\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {Object.keys(signatureRoles).map((roleKey) => {\n                        const r = roleKey as SignatureRole;\n                        if (r === 'coordinador_alturas' && !permit.selectedWorkTypes?.alturas) return null;\n                        if (r === 'mantenimiento' && !permit.controlEnergia) return null;\n\n                        const app = (permit.approvals as any)?.[r];\n                        const signed = app?.status === 'aprobado';\n\n                        return (\n                            <div key={r} className={`p-4 rounded-lg border ${signed ? 'bg-green-50 border-green-200' : 'bg-white border-dashed'}`}>\n                                <p className=\"text-xs font-bold text-slate-400 uppercase mb-2\">{signatureRoles[r]}</p>\n                                {signed ? (\n                                    <div>\n                                        <p className=\"font-bold text-sm\">{app.userName}</p>\n                                        <p className=\"text-xs text-slate-500\">{format(parseFirestoreDate(app.signedAt)!, 'dd/MM/yy HH:mm')}</p>\n                                        {app.firmaApertura && <img src={app.firmaApertura} alt=\"firma\" className=\"h-8 mt-2 opacity-80\" />}\n                                    </div>\n                                ) : (\n                                    <Button size=\"sm\" variant=\"outline\" className=\"w-full mt-2\" onClick={() => {\n                                        setCurrentSignRole({role: r, type: 'firmaApertura'});\n                                        setIsSignatureOpen(true);\n                                    }}>Firmar</Button>\n                                )}\n                            </div>\n                        );\n                    })}\n                </div>\n            </Section>\n        </main>\n\n        {/* DIALOGO FIRMA */}\n        <Dialog open={isSignatureOpen} onOpenChange={setIsSignatureOpen}>\n            <DialogContent>\n                <DialogHeader>\n                    <DialogTitle>Firmar Documento</DialogTitle>\n                </DialogHeader>\n                <div className=\"p-4 space-y-4\">\n                    <div>\n                        <Label>Nombre del Firmante</Label>\n                        <Input value={signerName} onChange={(e:any) => setSignerName(e.target.value)} placeholder=\"Ingrese nombre completo\" />\n                    </div>\n                    <SignaturePad onSave={handleSign} isSaving={isSigning} />\n                </div>\n            </DialogContent>\n        </Dialog>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}